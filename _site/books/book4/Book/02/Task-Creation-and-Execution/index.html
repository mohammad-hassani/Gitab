

<!doctype html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="utf-8">
  <link rel="icon" type="image/png" href="/Gitab/favicon.png">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>ุงุฌุงุฏ ู ุงุฌุฑุง Task</title>
  <meta name="description" content="ุชุฑุฌููโูุง ูุงุฑุณ ฺฉุชุงุจโูุง ูู โ ุณุฑุนุ ูููุงู ู ูุงุจู ุงุชฺฉุง.">

  <!-- ุงุณุชุงูโูุง -->
  <link rel="stylesheet" href="/Gitab/styles/main.css">
  <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css">

  <style>
  @font-face {
    font-family: 'Vazir';
    src: url('/Gitab/fonts/Vazir-FD-WOL.ttf') format('truetype');
    font-display: swap;
  }
  body {
    font-family: 'Vazir', sans-serif;
  }
  </style>
</head>

<body>
  <!-- ูุฏุฑ ูุดุชุฑฺฉ -->
  <header class="header">
    <div class="container nav-wrap">
      <a href="/Gitab/" class="brand">
        <img src="/Gitab/icone/logo.svg" alt="Gitab logo" width="26" height="26">
        <span>Gitab</span>
      </a>

      <nav class="nav">
        <a href="/Gitab/" aria-current="page">ุฎุงูู</a>
        <a href="/Gitab/books/list-books">ฺฉุชุงุจโูุง</a>
       <a href="/Gitab/translator.html">ูุชุฑุฌูู</a>
        <a href="/Gitab/giter.html">ฺฏุชุฑ</a>
      </nav>

      <div class="nav-actions">
        <button id="themeToggle" class="icon-btn theme-btn" data-icon="moon" aria-label="ุชุบุฑ ุชู">
          <img src="/Gitab/icone/sun.svg" class="icon-sun" alt="ุฑูุดู">
          <img src="/Gitab/icone/moon.svg" class="icon-moon" alt="ุชุงุฑฺฉ">
        </button>

        <a class="icon-btn" href="https://github.com/hheydarian/Gitab" target="_blank" title="GitHub">
          <img src="/Gitab/icone/github.svg" alt="GitHub">
        </a>

        <!-- ุฏฺฉูู ููู ุจุฑุง ููุจุงู -->
        <button class="menu-toggle" aria-label="ููู">
          <img src="/Gitab/icone/menu.svg" alt="menu">
        </button>
      </div>
    </div>
  </header>

  
  <main class="site-main book-page">
    <h1>ูุตู ุฏูู: ุงุฌุงุฏ ู ุงุฌุฑุง Task โก</h1>
<p>ุงู ูุตู ุจู ุดูุง ฺฉูฺฉ ูโฺฉูุฏ ุชุง ุฏุฑ ุจุฑูุงููโููุณ Task ุนููโุชุฑ ุดูุฏ.</p>
<p>ุฏุฑ ุงู ูุตูุ ุดูุง ุจุง ุฑูุดโูุง ูุฎุชูู ุงุฌุงุฏ ู ุงุฌุฑุง Task ุขุดูุง ุฎูุงูุฏ ุดุฏ.</p>
<p>ูพุณ ุงุฒ ุงุฌุฑุง ฺฉ Taskุ ููฺฉู ุงุณุช ุจุฎูุงูุฏ ูุชุฌู ุขู ุฑุง ูุดุงูุฏู ฺฉูุฏ. ุงู ุนู ูุงุฒู ุงุณุช ููุชุธุฑ ุชฺฉูู Task ุดูุฏ โณ.</p>
<p>ุจู ููู ุฏููุ ุงู ูุตู ููฺูู ุงููุงุน ูุฎุชูู ูฺฉุงูุฒูโูุง ุงูุชุธุงุฑ (Waiting Mechanisms) ุฑุง ุจุฑุฑุณ ูโฺฉูุฏ.</p>
<h3>ุงุฌุงุฏ ู ุงุฌุฑุง ฺฉ Task ๐๏ธ</h3>
<p>ุดูุง ูโุชูุงูุฏ <strong>Task</strong>โูุง ุฑุง ุจู ุฑูุดโูุง ูุฎุชูู ุงุฌุงุฏ ู ุงุฌุฑุง ฺฉูุฏ. ูุฑุถ ฺฉูุฏ ฺฉุฏ ุฒุฑ ุฑุง ุฏุงุฑู:</p>
<pre class="hljs"><code><span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">DoSomeTask</span>()</span>
{
    <span class="hljs-comment">// Some code</span>
}
</code></pre>
<p>ุจุง ุชูุฌู ุจู ฺฉุฏ ุจุงูุงุ ุจุงุฏ ุฑุงุฌโุชุฑู ุฑูุดโูุง ุงุฌุงุฏ ู ุงุฌุฑุง <strong>Task</strong> ุฑุง ุจุฑุฑุณ ฺฉูู:</p>
<p>ยฉ <strong>Vaskaran Sarcar 2025</strong><br>
<strong>V. Sarcar, Task Programming in C# and .NET, Apress Pocket Guides,</strong><br>
<a href="https://doi.org/10.1007/979-8-8688-1279-8_2">https://doi.org/10.1007/979-8-8688-1279-8_2</a></p>
<hr>
<h3><strong>ูุตู ฒ โ ุงุฌุงุฏ ู ุงุฌุฑุง Task</strong></h3>
<h4><strong>ุฑูุด ฑ:</strong></h4>
<p>ูุชุฏ <strong>Task.Run</strong> ุฑูุด ูพุดููุงุฏ ู ุฑุงุฌ ุจุฑุง ุงุฌุงุฏ ู ุดุฑูุน ฺฉ <strong>Task</strong> ุงุณุช. ุงู ุฑูุด ุจู ุดูุง ฺฉูฺฉ ูโฺฉูุฏ ุชุง ุจูุงูุงุตูู ูพุณ ุงุฒ ุงุฌุงุฏุ <strong>Task</strong> ุจูโุตูุฑุช ุฎูุฏฺฉุงุฑ ุงุฌุฑุง ุดูุฏ. ููููู ฺฉุฏ:</p>
<pre class="hljs"><code>Task task = Task.Run(DoSomeTask);
</code></pre>
<hr>
<h4><strong>ุฑูุด ฒ:</strong></h4>
<p>ุจุฑุง ุงุฌุงุฏ ู ุงุฌุฑุง ุฎูุฏฺฉุงุฑ ฺฉ <strong>Task</strong> ูโุชูุงูุฏ ุงุฒ ูุชุฏ <strong>Task.Factory.StartNew</strong> ูู ุงุณุชูุงุฏู ฺฉูุฏ. ุงู ุฑูุด ุจู ุดูุง ุงูฺฉุงู ูโุฏูุฏ ฺฏุฒููโูุง ูพุดุฑูุชูโุชุฑ ุจุฑุง ูพฺฉุฑุจูุฏ <strong>Task</strong>ูุง ุงุนูุงู ฺฉูุฏ. ููููู ฺฉุฏ:</p>
<pre class="hljs"><code>Task task = Task.Factory.StartNew(DoSomeTask);
</code></pre>
<hr>
<h4><strong>ุฑูุด ณ:</strong></h4>
<p>ููฺูู ูโุชูุงูุฏ ุงุฒ <strong>ุณุงุฒูุฏู Task</strong> ุงุณุชูุงุฏู ฺฉูุฏ ุชุง ฺฉ <strong>Task</strong> ุจุณุงุฒุฏ. ุงูุง ุฏุฑ ุงู ุญุงูุช ุจุงุฏ ุจูโุทูุฑ <strong>ุตุฑุญ</strong> ุขู ุฑุง ุจุง ูุฑุงุฎูุงู ูุชุฏ <strong>Start</strong> ุดุฑูุน ฺฉูุฏ. ููููู ฺฉุฏ:</p>
<pre class="hljs"><code>Task task = <span class="hljs-keyword">new</span> Task(DoSomeTask);
task.Start();
</code></pre>
<p>ุงุฒ <strong>C# 9</strong> ุจู ุจุนุฏุ ูโุชูุงูุฏ ุงุฒ <strong>target-typed new expressions</strong> ุงุณุชูุงุฏู ฺฉูุฏ ุชุง ฺฉุฏ ุณุงุฏูโุชุฑ ุดูุฏ:</p>
<pre class="hljs"><code>Task task = <span class="hljs-keyword">new</span>(DoSomeTask);
task.Start();
</code></pre>
<hr>
<p><strong>ูฺฉุชู:</strong><br>
ุดูุง ุจุง ุฑูุดโูุง ุขุดูุง ุดุฏุฏ ฺฉู ุจูโุตูุฑุช ุตุฑุญ <strong>Task</strong> ุงุฌุงุฏ ู ุงุฌุฑุง ูโฺฉููุฏ. ุงูุง ุฑูุดโูุง ุฏฺฏุฑ ูู ูุฌูุฏ ุฏุงุฑุฏ. ุจุฑุง ูุซุงู:</p>
<ul>
<li>ูโุชูุงูุฏ <strong>Task</strong>ูุง ุฑุง ุจูโุตูุฑุช <strong>ุถูู</strong> ุจุง ุงุณุชูุงุฏู ุงุฒ ูุชุฏ <strong>Parallel.Invoke</strong> ุงุฌุงุฏ ู ุงุฌุฑุง ฺฉูุฏ.</li>
<li>ููฺูู ฺฉูุงุณ <strong>TaskCompletionSource<TResult></strong> ุจู ุดูุง ฺฉูฺฉ ูโฺฉูุฏ <strong>Task</strong>ูุง ูฺู ู ููุงุณุจ ุจุฑุง ุณูุงุฑููุง ุฎุงุต ุงุฌุงุฏ ฺฉูุฏ.</li>
</ul>
<p>ุจุง ุงู ุญุงูุ ุจูุชุฑ ุงุณุช ุงู ููุงูู ุฑุง ฺฏุงูโุจูโฺฏุงู ุงุฏ ุจฺฏุฑู.</p>
<hr>
<h3><strong>ฺฉูพุณููู ฺฉุฑุฏู ฺฉุฏ ุจุง ุงุณุชูุงุฏู ุงุฒ Lambda Expression</strong> โก</h3>
<p>ุดูุง ูโุชูุงูุฏ ุจุง ุงุฑุงุฆู ฺฉ <strong>delegate</strong> ฺฉู ฺฉุฏ ููุฑุฏูุธุฑ ุฑุง ฺฉูพุณููู ูโฺฉูุฏุ ฺฉ <strong>Task</strong> ุจุณุงุฒุฏ. ุงู <strong>delegate</strong> ูโุชูุงูุฏ ุจู ุตูุฑุช ฺฉ <strong>delegate ูุงูโฺฏุฐุงุฑโุดุฏู</strong>ุ ฺฉ <strong>ูุชุฏ ูุงุดูุงุณ</strong> ุง ฺฉ <strong>lambda expression</strong> ุจุงู ุดูุฏ.</p>
<p>ุฏุฑ ุงูุฌุง ูููููโุง ุงุฒ ฺฉ <strong>Task</strong> ุฏฺฏุฑ ุงุฑุงุฆู ุดุฏู ุงุณุช ฺฉู ุฏุฑ ุขู ฺฉุฏ ูุงุฒู ุฑุง ุฏุฑูู ฺฉ <strong>lambda expression</strong> ูุฑุงุฑ ุฏุงุฏูโุงู:</p>
<pre class="hljs"><code>Task task = Task.Run(
    () =&gt;
    {
    }
);
</code></pre>
<hr>
<h3><strong>ููุงุด ฑ</strong> ๐</h3>
<p>ุจุงุฏ ุจุฑุฑุณ ฺฉูู ฺฉู ุขุง <strong>Task</strong>โูุง ุจู ูุง ฺฉูฺฉ ูโฺฉููุฏ <strong>ุจุฑูุงููโููุณ ุบุฑููุฒูุงู (Asynchronous Programming)</strong> ุงูุฌุงู ุฏูู ุง ุฎุฑ. ุจุฑุง ุงู ููุธูุฑ ุงุฒ ููุงุด ุฒุฑ ุงุณุชูุงุฏู ูโฺฉูู:</p>
<div align="center">
<p><img src="../../../assets/image/02/Table%202-1.jpeg" alt="Conventions-UsedThis-Book"></p>
</div>
<h3><strong>ูฺฉุชูโุง ุจุฑุง ุงุฏุขูุฑ</strong> ๐</h3>
<p>ุงุฒ <strong>.NET 6</strong> ุจู ุจุนุฏุ ููฺฉู ุงุณุช ูุชูุฌู ูุฌูุฏ <strong>implicit global directives</strong> ุจุฑุง ูพุฑูฺูโูุง ุฌุฏุฏ <strong>C#</strong> ุดูุฏ. ุงู ูุงุจูุช ฺฉูฺฉ ูโฺฉูุฏ ุจุฏูู ูุงุฒ ุจู ููุดุชู ูุงู ฺฉุงูู ุง ุงุถุงูู ฺฉุฑุฏู ุฏุณุช ุฏุณุชูุฑ <strong>using</strong>ุ ุงุฒ ุงููุงุน ููุฌูุฏ ุฏุฑ ุงู <strong>namespace</strong>ูุง ุงุณุชูุงุฏู ฺฉูุฏ.<br>
ูโุชูุงูุฏ ุงุทูุงุนุงุช ุจุดุชุฑ ุฑุง ุงุฒ ููฺฉ ุฒุฑ ูุทุงูุนู ฺฉูุฏ:<br>
<a href="https://learn.microsoft.com/en-us/dotnet/core/project-sdk/overview#implicit-usingdirectives">https://learn.microsoft.com/en-us/dotnet/core/project-sdk/overview#implicit-usingdirectives</a></p>
<p>ุฏุฑ ูพุฑูฺูโูุง <strong>C#</strong> ุงู ฺฉุชุงุจุ ูู ุชูุธูุงุช ูพุดโูุฑุถ ุฑุง ุชุบุฑ ูุฏุงุฏูโุงู. ุจูุงุจุฑุงูุ ูุงูโูุง ุฒุฑ ุฑุง ุจูโุตูุฑุช ุฏุณุช ุฐฺฉุฑ ูฺฉุฑุฏูโุงูุ ฺูู ุจูโุทูุฑ ูพุดโูุฑุถ ููุฌูุฏ ูุณุชูุฏ:</p>
<pre class="hljs"><code>System
System.Collections.Generic
System.IO
System.Linq
System.Net.Http
System.Threading
System.Threading.Tasks
using static System.Console;
</code></pre>
<hr>
<h3><strong>ููููู ฺฉุฏ</strong> ๐ป</h3>
<pre class="hljs"><code>WriteLine(<span class="hljs-string">&quot;The main thread starts executing.&quot;</span>);
Task.Run(PrintNumbers);
WriteLine(<span class="hljs-string">$&quot;The main thread is doing some other work...&quot;</span>);
<span class="hljs-comment">// Simulating a delay</span>
Thread.Sleep(<span class="hljs-number">10</span>);
WriteLine(<span class="hljs-string">$&quot;The main thread is completed.&quot;</span>);
ReadKey();

<span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">PrintNumbers</span>()</span>
{
    <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = <span class="hljs-number">1</span>; i &lt;= <span class="hljs-number">5</span>; i++)
    {
        Write(<span class="hljs-string">$&quot; <span class="hljs-subst">{i}</span>\t&quot;</span>);
        <span class="hljs-comment">// Simulating a delay</span>
        Thread.Sleep(<span class="hljs-number">2</span>);
    }
}
</code></pre>
<hr>
<h3><strong>ุฎุฑูุฌ</strong> ๐ฅ๏ธ</h3>
<p>ุฏุฑ ุงุฏุงููุ ฺฉ ุฎุฑูุฌ ููููู ุงุฒ ุงู ุจุฑูุงูู ุฑุง ฺฉู ุฏุฑ ุณุณุชู ูู ุงุฌุฑุง ุดุฏูุ ูุดุงูุฏู ูโฺฉูุฏ. ุจุฏู ุงุณุช ฺฉู ููฺฉู ุงุณุช ุฎุฑูุฌ ุฏุฑ ุณุณุชู ุดูุง ูุชูุงูุช ุจุงุดุฏ. ููุงูโุทูุฑ ฺฉู ูโุจูุฏุ <strong>main thread</strong> ุฏุฑ ุญู ุงุฌุฑุง <strong>task</strong> ฺุงูพ ุงุนุฏุงุฏุ <strong>ูุณุฏูุฏ ูุดุฏู ุงุณุช</strong>. ูุชุฌูุ ุชุฑฺฉุจ ุฌุงูุจ ุงุฒ ุฎุฑูุฌ ฺูุฏ <strong>thread/task</strong> ุงุณุช:</p>
<pre class="hljs"><code>The main thread starts executing.
The main thread is doing some other work...
1
2
4
5
3
The main thread is completed.
</code></pre>
<hr>
<h3><strong>ุฌูุณู ูพุฑุณุด ู ูพุงุณุฎ (Q&amp;A Session)</strong> โ๐ฌ</h3>
<p><strong>ุณูุงู 2.1</strong><br>
ุจุฑุง ุงุฌุงุฏ ู ุงุฌุฑุง <strong>Task</strong> ุดูุง ุงุฒ ูุชุฏูุง <strong>Run</strong>ุ <strong>Start</strong> ู <strong>StartNew</strong> ุงุณุชูุงุฏู ฺฉุฑุฏุฏ. ฺุทูุฑ ุชุตูู ุจฺฏุฑู ฺฉุฏุงูโฺฉ ุจุฑุง ูุง ููุงุณุจโุชุฑ ุงุณุชุ</p>
<p><strong>ูพุงุณุฎ:</strong><br>
ุงฺฏุฑ ุชุนุงุฑู ุงู ูุชุฏูุง ุฑุง ุฏุฑ <strong>Visual Studio</strong> ุจุฑุฑุณ ฺฉูุฏุ ุฌููู ุฒุฑ ุฑุง ุฎูุงูุฏ ุฏุฏ:</p>
<blockquote>
<p>โThe Start method starts the System.Threading.Tasks.Task, scheduling it for execution to the specified System.Threading.Tasks.TaskScheduler.โ</p>
</blockquote>
<p>ุงู ูุชุฏ ุฒูุงู ููุฏ ุงุณุช ฺฉู ุจุฎูุงูุฏ <strong>Task</strong> ุฑุง ุจุณุชู ุจู ฺฉ ุดุฑุท ุฎุงุตุ <strong>ุจูโุตูุฑุช ุฏุณุช</strong> ุงุฌุฑุง ฺฉูุฏ.</p>
<p>ูุชุฏ <strong>Run</strong>ุ ฺฉุงุฑ ูุดุฎุตโุดุฏู ุฑุง ุฏุฑ <strong>thread pool</strong> ูุฑุงุฑ ูโุฏูุฏ ู ฺฉ ุดุก <strong>System.Threading.Tasks.Task</strong> ุฑุง ฺฉู ูุดุงูโุฏููุฏู ููุงู ฺฉุงุฑ ุงุณุชุ ุจุฑูโฺฏุฑุฏุงูุฏ. ุงู ุฑูุด ฺฉ ุฌุงฺฏุฒู ุณุจฺฉโุชุฑ ูุณุจุช ุจู <strong>StartNew</strong> ุงุณุช ู ุจู ุดูุง ฺฉูฺฉ ูโฺฉูุฏ ุชุง ุจุง ููุงุฏุฑ ูพุดโูุฑุถ ฺฉ <strong>Task</strong> ุฑุง ุดุฑูุน ฺฉูุฏ.</p>
<p>ูฺฉุชู ููู ุงู ุงุณุช ฺฉู ูุชุฏ <strong>Run</strong> ุงุฒ <strong>task scheduler ูพุดโูุฑุถ</strong> ุงุณุชูุงุฏู ูโฺฉูุฏุ ุตุฑูโูุธุฑ ุงุฒ ุงูฺฉู <strong>task scheduler</strong> ูุนู ฺู ฺุฒ ุจุงุดุฏ. ุจู ููู ุฏููุ <strong>Microsoft</strong> (ุฏุฑ ููฺฉ <a href="https://learn.microsoft.com/en-us/dotnet/standard/parallel-programming/task-based-asynchronous-programming">Task-based asynchronous programming</a>) ูพุดููุงุฏุงุช ุฒุฑ ุฑุง ุงุฑุงุฆู ฺฉุฑุฏู ุงุณุช:</p>
<ul>
<li>ุฒูุงู ฺฉู ูุงุฒ ุจู ฺฉูุชุฑู ุฒุงุฏ ุจุฑ ูุฑุขูุฏ ุงุฌุงุฏ ู ุฒูุงูโุจูุฏ <strong>Task</strong> ูุฏุงุฑุฏุ <strong>Run</strong> ุจูุชุฑู ฺฏุฒูู ุจุฑุง ุงุฌุงุฏ ู ุดุฑูุน <strong>Task</strong> ุงุณุช.</li>
</ul>
<hr>
<p><strong>ูุงฺฉุฑูุณุงูุช ููฺูู ุจุงู ูโฺฉูุฏ</strong> (ุฏุฑ ููุงู ููฺฉ) ฺฉู ูุชุฏ <strong>StartNew</strong> ุฏุฑ ุดุฑุงุท ุฒุฑ ฺฉุงุฑุจุฑุฏ ุฏุงุฑุฏ:</p>
<ul>
<li>ุฒูุงู ฺฉู <strong>ุงุฌุงุฏ ู ุฒูุงูโุจูุฏ Task</strong> ูุจุงุฏ ุงุฒ ูู ุฌุฏุง ุจุงุดูุฏ ู ุดูุง ุจู ฺฏุฒููโูุง ุงุถุงู ุจุฑุง ุงุฌุงุฏ <strong>Task</strong> ุง ุงุณุชูุงุฏู ุงุฒ ฺฉ <strong>scheduler ุฎุงุต</strong> ูุงุฒ ุฏุงุฑุฏ.</li>
<li>ุฒูุงู ฺฉู ุจุงุฏ ฺฉ <strong>ูุถุนุช ุงุถุงู (state)</strong> ุฑุง ุจู <strong>Task</strong> ุงุฑุณุงู ฺฉูุฏ ฺฉู ุจุนุฏุงู ุงุฒ ุทุฑู ูฺฺฏ <strong>Task.AsyncState</strong> ูุงุจู ุจุงุฒุงุจ ุจุงุดุฏ.</li>
</ul>
<div align="center">
<p><img src="../../../assets/image/02/Table%202-2.jpeg" alt="Conventions-UsedThis-Book"></p>
</div>
<h3><strong>ูฺฉุชูโุง ฺฉู ุจุงุฏ ุจู ุฎุงุทุฑ ุจุณูพุงุฑุฏ</strong> ๐</h3>
<p>ุจุฑุง ุงูฺฉู ฺฉ ูุซุงู ูุดุฎุต ุฏุงุดุชู ุจุงุดูุ ุจุงุฏ ุจุฏุงูุฏ ฺฉู ุจูโุฒูุฏ ุฏุฑุจุงุฑู <strong>child tasks (ุง nested tasks)</strong> ุงุฏ ุฎูุงูุฏ ฺฏุฑูุช. ุฏุฑ ุขูุฌุง ุฎูุงูุฏ ุฏุฏ ฺฉู ุจุง ุงุณุชูุงุฏู ุงุฒ ฺฏุฒูู <strong>TaskCreationOptions.AttachedToParent</strong> ูโุชูุงูุฏ ฺฉ <strong>task ูุฑุฒูุฏ</strong> ุฑุง ุจู <strong>task ูุงูุฏ</strong> ูุชุตู ฺฉูุฏ (ุงูุจุชู ุงฺฏุฑ <strong>task ูุงูุฏ</strong> ุงู ฺฉุงุฑ ุฑุง ูุฌุงุฒ ุจุฏุงูุฏ). ุงู ฺฏุฒูู ุฏุฑ ุจุฑุฎ ุงุฒ <strong>overload</strong>ูุง ูุชุฏ <strong>StartNew</strong> ุฏุฑ ุฏุณุชุฑุณ ุงุณุช.<br>
ุงูุง ูุชุฏ <strong>Run</strong> ฺูู ฺฏุฒููโุง ุฑุง ุงุฑุงุฆู ููโุฏูุฏ.</p>
<hr>
<h3><strong>ุงุฑุณุงู ู ุฏุฑุงูุช ููุงุฏุฑ</strong> ๐</h3>
<p>ุฏุฑ ุงู ุจุฎุด ุจุฑุฑุณ ูโฺฉูู ฺฉู ฺฺฏููู ูโุชูุงูุฏ <strong>ููุฏุงุฑ(ูุง)</strong> ุฑุง ุจู ฺฉ <strong>task</strong> ุงุฑุณุงู ฺฉูุฏ ุง ฺฉ ููุฏุงุฑ ูุญุงุณุจูโุดุฏู ุฑุง ุงุฒ ุขู ุฏุฑุงูุช ฺฉูุฏ.</p>
<hr>
<h3><strong>ุงุฑุณุงู ููุงุฏุฑ ุจู ุฏุงุฎู Tasks</strong> ๐ฏ</h3>
<p>ุฏุฑ <strong>ููุงุด ฑ</strong>ุ ูุชุฏ <strong>PrintNumbers</strong> ุงุนุฏุงุฏ ุฑุง ุงุฒ <strong>ฑ ุชุง ต</strong> ฺุงูพ ูโฺฉุฑุฏ. ุจุงุฏ ุงู ุชุงุจุน ุฑุง ุชุบุฑ ุฏูู ุชุง ุจุชูุงูุฏ <strong>ุขุฑฺฏููุงู</strong> ุฏุฑุงูุช ฺฉูุฏ. ุฏุฑ ุงุฏุงููุ ูุณุฎู ุงุตูุงุญโุดุฏู ุงู ุชุงุจุน ุจุง ุชุบุฑุงุช ฺฉูุฏ (ูพุฑุฑูฺฏโุดุฏู):</p>
<pre class="hljs"><code><span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">PrintNumbers</span>(<span class="hljs-params"><span class="hljs-built_in">int</span> limit</span>)</span>
{
    <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = <span class="hljs-number">1</span>; i &lt;= limit; i++)
    {
        Write(<span class="hljs-string">$&quot; <span class="hljs-subst">{i}</span>\t&quot;</span>);
        <span class="hljs-comment">// Simulating a delay</span>
        Thread.Sleep(<span class="hljs-number">2</span>);
    }
}
</code></pre>
<hr>
<p>ุงฺฏุฑ ุจุฎูุงูุฏ ุงู ุชุงุจุน ุฑุง ุฏุฑ ฺฉ <strong>thread</strong> ุฌุฏุงฺฏุงูู ุงุฌุฑุง ฺฉูุฏุ ุจุงุฏ ฺฉ ุขุฑฺฏููุงู ูุนุชุจุฑ (ุจุฑุง ูพุงุฑุงูุชุฑ <strong>limit</strong>) ุงุฒ <strong>thread ูุฑุงุฎูุงููุฏู</strong> ุงุฑุณุงู ฺฉูุฏ.<br>
ุจูุงุจุฑุงูุ ุฎุท ุฒุฑ ุงุฒ <strong>ููุงุด ฑ</strong> ุฑุง:</p>
<pre class="hljs"><code>Task task = Task.Run(PrintNumbers);
</code></pre>
<p>ุจุง ุฎุท ุฒุฑ ุฌุงฺฏุฒู ฺฉูุฏ:</p>
<pre class="hljs"><code>Task task = Task.Run(() =&gt; PrintNumbers(<span class="hljs-number">5</span>));
</code></pre>
<hr>
<p>ุงฺฉููู ุงฺฏุฑ ุจุฑูุงูู ุฑุง ุฏูุจุงุฑู ุงุฌุฑุง ฺฉูุฏุ ุฎุฑูุฌ ูุดุงุจู ุฎูุงูุฏ ุฏุฏ ฺฉู ุฏุฑ ุงุฌุฑุง <strong>ููุงุด ฑ</strong> ุฏุฏู ุจูุฏุฏ.</p>
<p>ูุงุฒู ูุณุช ุงุฏุขูุฑ ฺฉูู ฺฉู ูโุชูุงูุฏ ุฎุท ูุจู ุฑุง ุจุง ุฎุท ุฒุฑ ูู ุฌุงฺฏุฒู ฺฉูุฏ:</p>
<pre class="hljs"><code>Task task = Task.Factory.StartNew(() =&gt; PrintNumbers(<span class="hljs-number">5</span>));
</code></pre>
<p>ุง ุงู ุฎุทูุท:</p>
<pre class="hljs"><code>Task task = <span class="hljs-keyword">new</span>(() =&gt; PrintNumbers(<span class="hljs-number">5</span>));
task.Start();
</code></pre>
<hr>
<p>ุจุงุฏ ฺฉ ุฑูฺฉุฑุฏ ุฌุงฺฏุฒู ุฑุง ุจุฑุฑุณ ฺฉูู. ุฏุฑ ุฒูุงู ูฺฏุงุฑุด ุงู ฺฉุชุงุจุ ฺฉูุงุณ <strong>Task</strong> ุฏุงุฑุง ุณุงุฒูุฏูโูุง ุฒุฑ ุงุณุช (ุดฺฉู ฒ-ฑ ุฑุง ุจุจูุฏ).</p>
<div align="center">
<p><img src="../../../assets/image/02/Table%202-3.jpeg" alt="Conventions-UsedThis-Book"></p>
</div>
<h3><strong>ุดฺฉู ฒ-ฑ. ููุง ุฌุฒุฆ ุงุฒ ูุณุฎูโูุง Overload ุดุฏู ุณุงุฒูุฏูโูุง Task</strong> ๐ผ๏ธ</h3>
<p>ุจู ุณุงุฒูุฏู ุฒุฑ ฺฉู ุฏุฑ <strong>ุดฺฉู ฒ-ฑ</strong> ุจุฑุฌุณุชู ุดุฏูุ ุชูุฌู ฺฉูุฏ:</p>
<pre class="hljs"><code><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Task</span>(<span class="hljs-params">Action&lt;<span class="hljs-built_in">object</span>?&gt; action, <span class="hljs-built_in">object</span>? state</span>)</span>;
</code></pre>
<p>ุงู ุณุงุฒูุฏู ุจู ุดูุง ุงู ุงุฏู ุฑุง ูโุฏูุฏ ฺฉู ูโุชูุงูุฏ ฺฉ <strong>ุขุฑฺฏููุงู ุดุก (object)</strong> ุจู ุขู ุงุฑุณุงู ฺฉูุฏ.<br>
ุจุงุฏ ฺฉ ุชุงุจุน ุฌุฏุฏ ุจู ูุงู <strong>PrintNumbersVersion2</strong> ูุนุฑู ฺฉูู ฺฉู ฺฉ <strong>ูพุงุฑุงูุชุฑ ุงุฒ ููุน object</strong> ูโฺฏุฑุฏ ู ฺฉุงุฑ ูุดุงุจู ุงูุฌุงู ูโุฏูุฏ:</p>
<pre class="hljs"><code><span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">PrintNumbersVersion2</span>(<span class="hljs-params"><span class="hljs-built_in">object</span>? state</span>)</span>
{
    <span class="hljs-built_in">int</span> limit = Convert.ToInt32(state);
    <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>; i &lt;= limit; i++)
    {
        Write(<span class="hljs-string">$&quot; <span class="hljs-subst">{i}</span>\t&quot;</span>);
        <span class="hljs-comment">// Doing remaining things, if any</span>
        Thread.Sleep(<span class="hljs-number">2</span>);
    }
}
</code></pre>
<hr>
<p>ุงู ุจุงุฑ ูโุชูุงูุฏ ฺุฒ ุดุจู ุจู ุงู ุจููุณุฏ:</p>
<pre class="hljs"><code>Task task = <span class="hljs-keyword">new</span>(PrintNumbersVersion2, <span class="hljs-number">5</span>);
task.Start();
</code></pre>
<p>ุง:</p>
<pre class="hljs"><code>Task task = Task.Factory.StartNew(PrintNumbersVersion2, <span class="hljs-number">5</span>);
</code></pre>
<p>ุงูุง <strong>ูุชุฏ Run</strong> ฺูู ุณุงุฒูุฏูโุง ูุฏุงุฑุฏ. ุจูุงุจุฑุงู ููโุชูุงูุฏ ฺุฒ ูุงููุฏ ุฒุฑ ุจููุณุฏ:</p>
<pre class="hljs"><code>Task task4 = Task.Run(PrintNumbersVersion2, <span class="hljs-number">5</span>); <span class="hljs-comment">// Error</span>
</code></pre>
<hr>
<p>ุฎุจุ ุชุง ุงูุฌุง ุฑูุดโูุง ูุฎุชูู ุงุฑุณุงู <strong>state</strong> ุฑุง ุฏุฏุฏ. ุจุงุฏ ุขูโูุง ุฑุง ุฎูุงุตู ฺฉูู:</p>
<pre class="hljs"><code><span class="hljs-comment">// Approach-1:</span>
<span class="hljs-keyword">var</span> task1 = Task.Run(() =&gt; PrintNumbers(<span class="hljs-number">10</span>));

<span class="hljs-comment">// Approach-2:</span>
<span class="hljs-keyword">var</span> task2 = Task.Factory.StartNew(() =&gt; PrintNumbers(<span class="hljs-number">10</span>));

<span class="hljs-comment">// Approach-3:</span>
<span class="hljs-keyword">var</span> task3 = <span class="hljs-keyword">new</span> Task(() =&gt; PrintNumbers(<span class="hljs-number">10</span>));
task3.Start();

<span class="hljs-comment">// Approach-4:</span>
<span class="hljs-keyword">var</span> task4 = <span class="hljs-keyword">new</span> Task(PrintNumbersVersion2, <span class="hljs-number">10</span>);
task4.Start();

<span class="hljs-comment">// Approach-5:</span>
<span class="hljs-keyword">var</span> task5 = Task.Factory.StartNew(PrintNumbersVersion2, <span class="hljs-number">10</span>);
</code></pre>
<hr>
<p>ูโุจูุฏ ฺฉู ุฏุฑ ูุฑ ุฑูุดุ ูู ฺฉ ููุฏุงุฑ <strong>int</strong> ุงุฑุณุงู ฺฉุฑุฏูโุงู. ุจุง ุงู ุญุงูุ ุฏุฑ ุฏู ููุฑุฏ ุขุฎุฑุ ูุชุฏ ูุฏู (<strong>PrintNumbersVersion2</strong>) ุงูุชุธุงุฑ ฺฉ <strong>object</strong> ุฏุงุดุช.<br>
ุฏุฑ ูุชุฌูุ ุงู ุฏู ุฑูุด ุจุง ูุณุฃูู <strong>boxing</strong> ู <strong>unboxing</strong> ููุงุฌู ูโุดููุฏ. ุฏุฑ ููุงุจูุ ุงู ุฏู ุฑูุด ูุณุจุช ุจู ุฑูุดโูุง ฑุ ฒ ุง ณ <strong>ุฎูุงูุงุชุฑ ู ูุฑุชุจโุชุฑ</strong> ูุณุชูุฏ.</p>
<p>ุฏุฑ ููุงุชุ ุงูุชุฎุงุจ ุจุง ุดูุงุณุช ฺฉู ฺฉุฏุงู ุฑูุด ุฑุง ุชุฑุฌุญ ุฏูุฏ ู ฺฺฏููู ุขู ุฑุง ุณุงุฒูุงูโุฏู ฺฉูุฏ.</p>
<hr>
<p><strong>ูฺฉุชู:</strong><br>
ุจุฑุง ุชุฌุฑุจู ุงู ุฑูุดโูุงุ ูพุฑูฺู <strong>Chapter2_Demo2A_PassingValues</strong> ุฑุง ุฏุงูููุฏ ฺฉูุฏ ู ุขูโูุง ุฑุง ุงุฌุฑุง ฺฉูุฏ.</p>
<hr>
<h3><strong>ุจุฑฺฏุฑุฏุงูุฏู ููุงุฏุฑ ุงุฒ Taskูุง</strong> ๐</h3>
<p>ููุช ฺฉ <strong>Task</strong> ุฑุง ุงุฌุฑุง ูโฺฉูุฏุ ููฺฉู ุงุณุช ูุงุฒ ุฏุงุดุชู ุจุงุดุฏ ุจู <strong>ููุฏุงุฑ ููุง</strong> ุขู ุฏุณุชุฑุณ ุฏุงุดุชู ุจุงุดุฏ.<br>
ุฏุฑ ฺูู ุดุฑุงุท ุจุงุฏ ุงุฒ <strong>ูุณุฎู ุฌูุฑฺฉ ฺฉูุงุณ Task</strong> ู ูฺฺฏ <strong>Result</strong> ุงุณุชูุงุฏู ฺฉูุฏ.</p>
<p>ุฏุฑ ุงูุฌุง ฺฉ ููููู ฺฉุฏ:</p>
<pre class="hljs"><code><span class="hljs-keyword">var</span> task = Task&lt;<span class="hljs-built_in">string</span>&gt;.Run(() =&gt; <span class="hljs-string">&quot;Hello&quot;</span>);
<span class="hljs-keyword">var</span> result = task.Result;
WriteLine(result);
</code></pre>
<hr>
<p>ุจุง ุงู ุญุงูุ <strong>ููุน ุฌูุฑฺฉ</strong> ูโุชูุงูุฏ ุจูโุทูุฑ ุฎูุฏฺฉุงุฑ <strong>ุงุณุชูุชุงุฌ (inferred)</strong> ุดูุฏ. ุฏุฑ ูุชุฌูุ ูโุชูุงูุฏ ุงู ฺฉุฏ ุฑุง ุณุงุฏูโุชุฑ ูู ุจููุณุฏ:</p>
<pre class="hljs"><code><span class="hljs-keyword">var</span> task = Task.Run(() =&gt; <span class="hljs-string">&quot;Hello&quot;</span>);
<span class="hljs-keyword">var</span> result = task.Result;
WriteLine(result);
</code></pre>
<div align="center">
<p><img src="../../../assets/image/02/Table%202-4.jpeg" alt="Conventions-UsedThis-Book"></p>
</div>
<h3><strong>ูฺฉุชูโุง ฺฉู ุจุงุฏ ุจู ุฎุงุทุฑ ุจุณูพุงุฑุฏ</strong> ๐</h3>
<p>ุฏุฑ ุจุฎุดโูุง ูุจูุ ูู ุจุฑุง <strong>ฺฉุงูุด ุชุงูพ</strong> ุงุฒ <strong>var</strong> ุงุณุชูุงุฏู ฺฉุฑุฏู. ุฏุฑ ุงุฏุงูู ฺฉ ููููู ฺฉุฏ ูุนุงุฏู ฺฉู <strong>ุงููุงุน ุจูโุตูุฑุช ุตุฑุญ ูุดุฎุต ุดุฏูโุงูุฏ</strong> ุฑุง ูโุจูุฏ:</p>
<pre class="hljs"><code>Task&lt;<span class="hljs-built_in">string</span>&gt; task = Task.Run(() =&gt; <span class="hljs-string">&quot;Hello&quot;</span>);
<span class="hljs-built_in">string</span> result = task.Result;
WriteLine(result);
</code></pre>
<hr>
<h3><strong>ููุงุด ฒ</strong> ๐</h3>
<p>ุจุงุฏ ฺฉ ุจุฑูุงูู ฺฉุงูู ุจุจูู ฺฉู ุฏุฑ ุขู <strong>Taskูุง ุณุงุฎุชู ูโุดููุฏุ ููุงุฏุฑ ุจู ุขูโูุง ุงุฑุณุงู ูโุดูุฏ ู ุฏุฑ ููุงุช ููุฏุงุฑ ูุญุงุณุจูโุดุฏู ุจุงุฒุงุจ ูโฺฏุฑุฏุฏ.</strong></p>
<p>ุฏุฑ ููุงุด ุฒุฑุ ูู ฺฉ <strong>Task</strong> ุงุฌุงุฏ ูโฺฉูู ฺฉู ุฏู ุนุฏุฏ ุตุญุญ (<strong>ฑฐ</strong> ู <strong>ฒฐ</strong>) ุฑุง ุจุง ูู ุฌูุน ูโฺฉูุฏ. ููุช ุงู <strong>Task</strong> ุชูุงู ุดุฏุ ูุชุฌู ูุญุงุณุจู ุฑุง ุจุงุฒุงุจ ฺฉุฑุฏู ู ุฏุฑ ูพูุฌุฑู <strong>ฺฉูุณูู</strong> ููุงุด ูโุฏูู. ุญุงูุง ุจุฑูุงูู ฺฉุงูู ุฑุง ุจุจูู:</p>
<pre class="hljs"><code><span class="hljs-keyword">using</span> <span class="hljs-keyword">static</span> System.Console;
<span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-built_in">int</span> <span class="hljs-title">Add</span>(<span class="hljs-params"><span class="hljs-built_in">int</span> number1, <span class="hljs-built_in">int</span> number2</span>)</span> =&gt; number1 + number2;

WriteLine(<span class="hljs-string">&quot;Passing and returning values by executing tasks.&quot;</span>);
<span class="hljs-built_in">int</span> firstNumber = <span class="hljs-number">10</span>;
<span class="hljs-built_in">int</span> SecondNumber = <span class="hljs-number">20</span>;

<span class="hljs-keyword">var</span> addTask = Task.Run(() =&gt; Add(firstNumber, SecondNumber));
<span class="hljs-keyword">var</span> result = addTask.Result;

WriteLine(<span class="hljs-string">$&quot;<span class="hljs-subst">{firstNumber}</span>+<span class="hljs-subst">{SecondNumber}</span>=<span class="hljs-subst">{result}</span>&quot;</span>);
WriteLine(<span class="hljs-string">$&quot;The main thread is completed.&quot;</span>);
</code></pre>
<hr>
<h3><strong>ุฎุฑูุฌ</strong> ๐ฅ๏ธ</h3>
<pre class="hljs"><code>Passing and returning values by executing tasks.
10+20=30
The main thread is completed.
</code></pre>
<hr>
<h3><strong>ุฌูุณู ูพุฑุณุด ู ูพุงุณุฎ (Q&amp;A Session)</strong> โ๐ฌ</h3>
<p><strong>ุณูุงู 2.2</strong><br>
ูโุจูู ฺฉู ุฏุฑ ููุงุด ูุจูุ ุงุฒ ูุชุฏ <strong>ReadKey</strong> ุจุฑุง ุฌููฺฏุฑ ุงุฒ ุจุณุชูโุดุฏู ุจุฑูุงูู <strong>Console</strong> ุงุณุชูุงุฏู ูฺฉุฑุฏุฏ. ุงู ุนูุฏ ุจูุฏุ</p>
<p><strong>ูพุงุณุฎ:</strong><br>
ููุช ูโุฎูุงูุฏ ุงุฒ ฺฉ <strong>Task</strong> ูุชุฌู ุจฺฏุฑุฏุ ุจุงุฏ <strong>ุตุจุฑ ฺฉูุฏ</strong> ุชุง ุขู <strong>Task</strong> ุงุฌุฑุง ุฎูุฏ ุฑุง ฺฉุงูู ฺฉูุฏ. ุนู ุจุงุฏ ฺฉ ุนููุงุช <strong>ูุณุฏูุฏฺฉููุฏู (blocking)</strong> ุงูุฌุงู ุฏูุฏ.<br>
ุจุง ุงุณุชูุงุฏู ุงุฒ ูฺฺฏ <strong>Result</strong>ุ ูู ุฏููุงู ููู ฺฉุงุฑ ุฑุง ฺฉุฑุฏู: <strong>thread ูุฑุงุฎูุงููุฏู</strong> ุฑุง ูุณุฏูุฏ ฺฉุฑุฏู ุชุง <strong>Task ูุฑุงุฎูุงูโุดุฏู</strong> ุงุฌุฑุง ู ุชูุงู ุดูุฏ.<br>
ุจูุงุจุฑุงู ุฏฺฏุฑ ูุงุฒ ุจู ูฺ ุณุงุฎุชุงุฑ <strong>ูุณุฏูุฏฺฉููุฏู</strong> ุงุถุงู ูุจูุฏ.</p>
<p><strong>ุงุฏุฏุงุดุช ููุณูุฏู:</strong><br>
ูููููโูุง <strong>Task</strong> ููฺูู ูโุชูุงููุฏ ุงุฒ ูุชุฏ <strong>Wait</strong> ุจุฑุง ุงุชูุงู ุงุฌุฑุง <strong>Task</strong> ุงุณุชูุงุฏู ฺฉููุฏ. ุจูโุฒูุฏ ุจุญุซ ุฏุฑุจุงุฑู <strong>ูฺฉุงูุฒูโูุง ูุฎุชูู ุงูุชุธุงุฑ (waiting mechanisms)</strong> ุฎูุงูู ุฏุงุดุช.</p>
<hr>
<h3><strong>ุฏุฑฺฉ ูุดฺฉู ุฏุฑ ููุงุด ฒ</strong> โ๏ธ</h3>
<p>ุชูุฌู ฺฉูุฏ ฺฉู ุฏุฑ ุฎุฑูุฌ ูุจูุ ุฎุท <strong>&quot;The main thread is completed.&quot;</strong> ุฏุฑ ุงูุชูุง ุฎุฑูุฌ ุธุงูุฑ ุดุฏ.<br>
ุงฺฏุฑ ุจุฑูุงูู ุฑุง ฺูุฏู ุจุงุฑ ุงุฌุฑุง ฺฉูุฏุ ููุดู ููู ูุชุฌู ุฑุง ูุดุงูุฏู ูโฺฉูุฏ. ุฏููุด ุงู ุงุณุช ฺฉู ุจุง ูุฑุงุฎูุงู ูฺฺฏ <strong>Result</strong>ุ ูู <strong>main thread</strong> ุฑุง ูุฌุจูุฑ ฺฉุฑุฏู ุชุง ููุชุธุฑ ุงุชูุงู <strong>addTask</strong> ุจูุงูุฏ.<br>
ุฏุฑ ูุชุฌูุ ูุชูุงูุณุชู ุงุฒ <strong>ูุฒุงุง ฺฉุงูู ุจุฑูุงููโููุณ ุบุฑููุฒูุงู (asynchronous programming)</strong> ุงุณุชูุงุฏู ฺฉูู. ููู ูุดฺฉู ุฒูุงู ฺฉู ุงุฒ ูุชุฏ <strong>Wait</strong> ูู ุงุณุชูุงุฏู ฺฉูุฏ ุฑุฎ ูโุฏูุฏ.</p>
<hr>
<h3><strong>ุฌูุณู ูพุฑุณุด ู ูพุงุณุฎ (Q&amp;A Session)</strong> โ๐ฌ</h3>
<p><strong>ุณูุงู 2.3</strong><br>
ูุชูุฌู ุดุฏู ฺฉู ุจุง ุงุณุชูุงุฏู ุงุฒ ูุฑุงุฎูุงูโูุง ูุณุฏูุฏฺฉููุฏู ูุงููุฏ:</p>
<pre class="hljs"><code><span class="hljs-keyword">var</span> result = addTask.Result;
</code></pre>
<p>ุง</p>
<pre class="hljs"><code>addTask.Wait();
</code></pre>
<p>ุดูุง ุฏุฑ ูุงูุน ฺฉุฏ ุฑุง <strong>ููุฒูุงู (synchronous)</strong> ูโฺฉูุฏ. ูพุณ ฺุฑุง ุจุฑูุงููโุง ูุดุงู ุฏุงุฏุฏ ฺฉู ุงุฒ ุงู ูุฑุงุฎูุงูโูุง ูุณุฏูุฏฺฉููุฏู ุงุณุชูุงุฏู ูโฺฉูุฏุ</p>
<p><strong>ูพุงุณุฎ:</strong><br>
ูโุฎูุงุณุชู ุดูุง ุงุฒ ูุฌูุฏ ฺูู ูุงุจูุช ุขฺฏุงู ุจุงุดุฏ. ุนูุงูู ุจุฑ ุงูุ ููุงูุน ูพุด ูโุขุฏ ฺฉู <strong>ุชุง ุฒูุงู ฺฉู ูุชุฌู ฺฉ Task ุจู ุฏุณุช ูุงุฏุ ููโุชูุงูุฏ ุงุฏุงูู ุฏูุฏ</strong>. ุฏุฑ ฺูู ุดุฑุงุท ููโุชูุงูุฏ ุงุฒ ูุฑุงุฎูุงูโูุง ูุณุฏูุฏฺฉููุฏู ุงุฌุชูุงุจ ฺฉูุฏ (ุฏุฑ <strong>ููุงุด ณ</strong> ุจู ุงู ููุถูุน ุงุดุงุฑู ุฎูุงูู ฺฉุฑุฏ).</p>
<p>ูพุณ ุงฺฏุฑ ุชุตูู ุจู ุงุณุชูุงุฏู ุงุฒ ุงู ุฑูุดโูุง ฺฏุฑูุชุฏุ ุณุน ฺฉูุฏ ุงุจุชุฏุง ุณุงุฑ ฺฉุฏูุง ฺฉู ูโุชูุงููุฏ <strong>ุจูโุตูุฑุช ุบุฑููุฒูุงู ุงุฌุฑุง ุดููุฏ</strong> ุฑุง ุงุฌุฑุง ฺฉูุฏุ ุณูพุณ ุงุฒ ุงู ูุฑุงุฎูุงูโูุง ุงุณุชูุงุฏู ููุงุฏ.<br>
ุงูุง ูฺฏุฑุงู ูุจุงุดุฏ! ุจูโุฒูุฏ ุจุญุซ ุฏุฑุจุงุฑู <strong>ูุฑุงุฎูุงูโูุง ุบุฑูุณุฏูุฏฺฉููุฏู (nonblocking calls)</strong> ูุฒ ุฎูุงูู ุฏุงุดุช.</p>
<hr>
<h3><strong>ุจุญุซ ุฏุฑุจุงุฑู ุงูุชุธุงุฑ (Waiting)</strong> โณ</h3>
<p>ุฑูุดโูุง ูุฎุชูู ุจุฑุง <strong>ููุชุธุฑ ูุงูุฏู (waiting)</strong> ุฏุฑ ุณุณุชู ูุฌูุฏ ุฏุงุฑุฏ. ุฏุฑ ุงู ุจุฎุดุ ูโุฎูุงูู ุถุฑูุฑุช <strong>ุงูุชุธุงุฑ</strong> ุฑุง ุจุฑุฑุณ ฺฉูู ู ฺูุฏ ุฑูุด ฺฉุงุฑุจุฑุฏ ุจุฑุง ูพุงุฏูโุณุงุฒ ุงู ุงุฏู ูุนุฑู ฺฉูู.</p>
<blockquote>
<p><strong>ูฺฉุชู:</strong> ุจุฑุง ุจู ุฏุณุช ุขูุฑุฏู ูุชุฌู ุงุฌุฑุง ฺฉ Taskุ ุงฺฏุฑ <strong>thread ูุฑุงุฎูุงููุฏู ุฑุง ูุณุฏูุฏ ฺฉูุฏ</strong>ุ ุงุฒ ูุฒุงุง <strong>ุจุฑูุงููโููุณ ุบุฑููุฒูุงู</strong> ุงุณุชูุงุฏู ูฺฉุฑุฏูโุงุฏ. ุจูุงุจุฑุงู ููู ุงุณุช ฺฉู ุจุฑูุงูู ุฎูุฏ ุฑุง <strong>ุจูโุฏุฑุณุช ุทุฑุงุญ ฺฉูุฏ</strong>.</p>
</blockquote>
<hr>
<h3><strong>ฺุฑุง ููุชุธุฑ ูโูุงููุ</strong> ๐ค</h3>
<p>ููุช ฺฉ Task ุฑุง ุงุฌุฑุง ูโฺฉูุฏุ ููฺฉู ุงุณุช ุจุฎูุงูุฏ ูุชุฌู ุขู ุฑุง ุฏุฑุงูุช ฺฉูุฏ.<br>
ุงู ุนู ุจุงุฏ ููุชุธุฑ ุจูุงูุฏ ุชุง Task ุงุฌุฑุง ุฎูุฏ ุฑุง ฺฉุงูู ฺฉูุฏ. ููุงุด ุฒุฑ ุงู ููุถูุน ุฑุง ุฑูุดูโุชุฑ ูโฺฉูุฏ:</p>
<hr>
<h3><strong>ููุงุด ณ</strong> ๐</h3>
<p>ุฏุฑ ุจุฑูุงูู ุฒุฑุ <strong>thread ูุฑุงุฎูุงููุฏู (main thread)</strong> ุฏู <strong>Task ูุชูุงูุช</strong> ุฑุง ูุฑุงุฎูุงู ูโฺฉูุฏ.<br>
ุจุงุฏ ุจุฑูุงูู ุฑุง ุงุฌุฑุง ฺฉูู ู ุจุฑุฎ ุงุฒ ุฎุฑูุฌโูุง ููฺฉู ุฑุง ุชุญูู ฺฉูู:</p>
<pre class="hljs"><code><span class="hljs-keyword">using</span> <span class="hljs-keyword">static</span> System.Console;

WriteLine(<span class="hljs-string">&quot;The main thread starts.&quot;</span>);

<span class="hljs-keyword">var</span> printLuckyNumberTask = Task.Run(
    () =&gt;
    {
    }
);

WriteLine(<span class="hljs-string">&quot;Wait for your lucky number...&quot;</span>);
<span class="hljs-comment">// Simulating a delay</span>
Thread.Sleep(<span class="hljs-number">1</span>);
WriteLine(<span class="hljs-string">$&quot;---Your lucky number is: <span class="hljs-subst">{<span class="hljs-keyword">new</span> Random().Next(<span class="hljs-number">1</span>,<span class="hljs-number">10</span>)}</span>&quot;</span>);

<span class="hljs-keyword">var</span> processOrderTask = Task.Run(
    () =&gt;
    {
    }
);

WriteLine(<span class="hljs-string">&quot;Processing an order...&quot;</span>);
<span class="hljs-comment">// Simulating a delay</span>
Thread.Sleep(<span class="hljs-number">200</span>);
WriteLine(<span class="hljs-string">$&quot;---Your order is processed.&quot;</span>);

WriteLine(<span class="hljs-string">&quot;The end of main.&quot;</span>);
</code></pre>
<hr>
<h3><strong>ุฎุฑูุฌโูุง</strong> ๐ฅ๏ธ</h3>
<p>ุฏุฑ ุงุฏุงููุ ฺูุฏ ููููู ุฎุฑูุฌ ุงุฒ ุงุฌุฑุง ุงู ุจุฑูุงูู ุฑู ุณุณุชู ูู ุขูุฑุฏู ุดุฏู ุงุณุช:</p>
<p><strong>ุฎุฑูุฌ ฑ:</strong></p>
<pre class="hljs"><code>The main thread starts.
The end of main.
</code></pre>
<p><strong>ุฎุฑูุฌ ฒ:</strong></p>
<pre class="hljs"><code>The main thread starts.
The end of main.
Processing an order...
Wait for your lucky number...
</code></pre>
<hr>
<h3><strong>ุชุญูู</strong> ๐</h3>
<p>ุงู ุฎุฑูุฌโูุง ูุดุงูโุฏููุฏู ูฺฺฏโูุง ุฒุฑ ูุณุชูุฏ:</p>
<ul>
<li><strong>thread ุงุตู (main thread)</strong> ูุจู ุงุฒ ุงูฺฉู <strong>printLuckyNumberTask</strong> ู <strong>processOrderTask</strong> ุงุฌุฑุง ุฎูุฏ ุฑุง ุจู ูพุงุงู ุจุฑุณุงููุฏุ ุชูุงู ุดุฏู ุงุณุช.</li>
<li>ูฺโฺฉ ุงุฒ ุฎุฑูุฌโูุง ูุดุงู ููโุฏููุฏ ฺฉู Taskูุง ูุฑุงุฎูุงูโุดุฏู ฺฉุงุฑุดุงู ุฑุง ฺฉุงูู ฺฉุฑุฏูโุงูุฏ ุง ูู.</li>
</ul>
<hr>
<h3><strong>ฺฺฏููู ููุชุธุฑ ุจูุงููุ</strong> โฑ๏ธ</h3>
<p>ูโุฏุงูุฏ ฺฉู ุจุฑุง ูุดุงูุฏู ูุถุนุช ููุง ุงู Taskูุงุ ุจุงุฏ ฺฉู ุจุดุชุฑ ุตุจุฑ ฺฉูุฏ.<br>
ุงูุง <strong>ฺฺฏููู ุจุงุฏ ููุชุธุฑ ุจูุงููุ</strong> ุฑูุดโูุง ูุฎุชูู ูุฌูุฏ ุฏุงุฑุฏ ฺฉู ุฏุฑ ุงุฏุงูู ุจุง ุจุฑุฎ ุงุฒ ุขูโูุง ุขุดูุง ูโุดูู.</p>
<hr>
<h3><strong>ุงุณุชูุงุฏู ุงุฒ Sleep</strong> ๐ด</h3>
<p>ุดุงุฏ ุณุงุฏูโุชุฑู ุฑุงู ุงู ุจุงุดุฏ ฺฉู <strong>thread ุงุตู ุฑุง ูุณุฏูุฏ ฺฉูุฏ</strong> ุชุง Taskูุง ุฏฺฏุฑ ุชูุงู ุดููุฏ.<br>
ุฏุฑ ุงุฏุงูู ฺฉ ููููู ุขูุฑุฏู ุดุฏู ุงุณุช ฺฉู ุฏุฑ ุขู <strong>thread ุงุตู ุฑุง ุจู ูุฏุช 1000 ููโุซุงูู ูุณุฏูุฏ ฺฉุฑุฏูโุงู</strong>:</p>
<pre class="hljs"><code><span class="hljs-comment">// The previous code is the same</span>
Thread.Sleep(<span class="hljs-number">1000</span>);
WriteLine(<span class="hljs-string">&quot;The end of main.&quot;</span>);
</code></pre>
<hr>
<blockquote>
<p><strong>ูฺฉุชู:</strong> ูโุชูุงูุฏ ูพุฑูฺู <strong>Chapter2_discussiononWaiting</strong> ุฑุง ุงุฒ ูุจโุณุงุช <strong>apress</strong> ุฏุงูููุฏ ฺฉูุฏ ุชุง ููู ุจุฎุดโูุง ุจุฑูุงููโูุง ูุทุฑุญโุดุฏู ุฏุฑ ุงู ูุณูุช ุฑุง ุงุฌุฑุง ู ุจุฑุฑุณ ฺฉูุฏ.</p>
</blockquote>
<hr>
<p>ุงู ฺฉ ุฎุท ฺฉุฏ ุงุถุงู ุงุญุชูุงู ูุดุงูุฏู ุฎุฑูุฌโุง ุฑุง ุงูุฒุงุด ูโุฏูุฏ ฺฉู ูุดุงู ุฏูุฏ <strong>ุงู ุฏู Task</strong> ุงุฌุฑุง ุฎูุฏ ุฑุง ูุจู ุงุฒ ุงูฺฉู ฺฉูุชุฑู ุงุฒ <strong>main thread</strong> ุฎุงุฑุฌ ุดูุฏุ ุจู ูพุงุงู ุฑุณุงูุฏูโุงูุฏ. ฺฉ ุฎุฑูุฌ ููฺฉู ุจู ุตูุฑุช ุฒุฑ ุงุณุช:</p>
<pre class="hljs"><code>The main thread starts.
Processing an order...
Wait for your lucky number...---Your lucky number is: 3---Your order is processed.
The end of main.
</code></pre>
<p>ูุฒุช ุงุณุชูุงุฏู ุงุฒ ุงู ุฑูุด ูุงุถุญ ุงุณุช. ูโุจูู ฺฉู ููุช <strong>main thread</strong> ุฏุฑ ุญุงูุช <strong>sleep</strong> ุงุณุชุ ุณุงุฑ <strong>Task</strong>ูุง ูโุชูุงููุฏ ฺฉุงุฑ ุฎูุฏ ุฑุง ุงูุฌุงู ุฏููุฏ. ุงู ูุดุงู ูโุฏูุฏ ฺฉู ุฏุฑ ุทูู <strong>sleep</strong>ุ <strong>scheduler</strong> ูโุชูุงูุฏ ุณุงุฑ Taskูุง ุฑุง ุฒูุงูโุจูุฏ ฺฉูุฏ.</p>
<p>ุงูุง ุฏุฑ ููุงุจูุ ุงู ุฑูุด ฺฉ ูุดฺฉู ุขุดฺฉุงุฑ ุฏุงุฑุฏ: ููฺฉู ุงุณุช <strong>thread</strong> ุฑุง ุจุฑุง ูุฏุช ุฒูุงู ุงุถุงู ู ุบุฑุถุฑูุฑ ูุณุฏูุฏ ฺฉูุฏ. ุจู ุนููุงู ูุซุงูุ ุฏุฑ ุณุณุชู ูู ุงฺฏุฑ <strong>main thread</strong> ุฑุง ุจุฑุง ตฐฐ ููโุซุงูู ุง ฺฉูุชุฑ ูุณุฏูุฏ ฺฉููุ ุฎุฑูุฌ ูุดุงุจู ูุดุงูุฏู ูโฺฉูู (ูโฺฏูู โูุดุงุจูโ ูู โููุงูโ ุฒุฑุง ุนุฏุฏ ุชุตุงุฏู ุชููุฏุดุฏู ููุดู ูุชูุงูุช ุงุณุช ฺฉู ุฑูุชุงุฑ ุทุจุน ุงู ุจุฑูุงูู ุงุณุช). ูุดฺฉู ุงู ุงุณุช ฺฉู ฺูู ููโุชูุงูู <strong>ุฒูุงู ุฏูู ุชฺฉูู Taskูุง</strong> ุฑุง ูพุดโุจู ฺฉููุ ุจุงุฏ ุขู ุฑุง ุจุฑุง <strong>ุฒูุงู ููุงุณุจ ูุณุฏูุฏ ฺฉูู</strong>. ุจูุงุจุฑุงู ุงฺฏุฑ ูุฑ ฺฉ ุงุฒ ุงู Taskูุง ุจู ุฏูู ุนูุงูู ุฏฺฏุฑ ุฒูุงู ุจุดุชุฑ ุจุฑุง ุงุชูุงู ูุงุฒ ุฏุงุดุชู ุจุงุดูุฏุ ููฺฉู ุงุณุช ูพุงู ุชฺฉูู Task ุฏุฑ ุฎุฑูุฌ ููุงุด ุฏุงุฏู ูุดูุฏ. ุงู ฺฉ ูุดฺฉู ูุงูุน ุงุณุช!</p>
<p>ูู ูโุฎูุงูู <strong>ุงูุชุธุงุฑ ุบุฑุถุฑูุฑ</strong> ุฏุงุดุชู ุจุงุดู ู ูู ูโุฎูุงูู <strong>ูฺ ุงุทูุงุนุงุช ฺฉูุฏ</strong> ุฑุง ุงุฒ ุฏุณุช ุจุฏูู. ุงุฒ ุงู ููุธุฑุ ุงู ุฑูุด <strong>ุบุฑฺฉุงุฑุขูุฏ</strong> ุงุณุช. ุฏุฑ ูุงูุนุ ูุถุนุช ูโุชูุงูุฏ ุจุฏุชุฑ ุดูุฏ ุงฺฏุฑ ุฑู ุจุฑูุงููโุง ฺฉุงุฑ ฺฉูุฏ ฺฉู ุณุน ุฏุฑ ูุณุฏูุฏ ฺฉุฑุฏู <strong>UI</strong> ุฏุงุฑุฏ. ุจู ููู ุฏููุ ุชฺฉู ุจุฑ ูุชุฏ <strong>Sleep</strong> ููุดู ุงุฏู ุฎูุจ ูุณุช.</p>
<hr>
<h3><strong>ุงุณุชูุงุฏู ุงุฒ Delay</strong> โฑ๏ธ</h3>
<p>ุฏุฑ ฺฉุฏ ูุจูุ ุจุงุฏ ุฏุณุชูุฑ ุฒุฑ ุฑุง:</p>
<pre class="hljs"><code>Thread.Sleep(<span class="hljs-number">1000</span>);
</code></pre>
<p>ุฏุฑ <strong>main thread</strong> ุจุง <strong>Task.Delay(1000);</strong> ุฌุงฺฏุฒู ฺฉูู:</p>
<pre class="hljs"><code><span class="hljs-comment">// The previous code is the same</span>
Task.Delay(<span class="hljs-number">1000</span>);
WriteLine(<span class="hljs-string">&quot;The end of main.&quot;</span>);
</code></pre>
<p>ู ุจุฑูุงูู ุฑุง ุฏูุจุงุฑู ุงุฌุฑุง ฺฉูู. ุจุงุฒ ููุ ุณุณุชู ูู ุฎุฑูุฌโูุง ูุฎุชูู ูุดุงู ูโุฏูุฏุ ฺฉ ุงุฒ ุขูโูุง ุจู ุตูุฑุช ุฒุฑ ุงุณุช:</p>
<pre class="hljs"><code>The main thread starts.
Processing an order...
The end of main.
Wait for your lucky number...
</code></pre>
<p>ุงู ุฎุฑูุฌ ูุดุงู ูโุฏูุฏ ฺฉู <strong>thread ูุฑุงุฎูุงููุฏู</strong> ุจุฑุง ุงุฌุฑุง <strong>printLuckyNumberTask</strong> ู <strong>processOrderTask</strong> ูุณุฏูุฏ ูุดุฏู ุงุณุช. ุจูุงุจุฑุงูุ ูโุจูุฏ ฺฉู ุฎุท <strong>โThe end of main.โ</strong> ูุจู ุงุฒ ูพุฑุฏุงุฒุด ุณูุงุฑุด ุง ููุงุด ุนุฏุฏ ุดุงูุณ ุธุงูุฑ ุดุฏู ุงุณุช.</p>
<p>ุงู ุจู ุดูุง ูฺฉุชูโุง ูโุฏูุฏ:</p>
<ul>
<li>ุจุฑุง <strong>pauseูุง ููุฒูุงู (synchronous pauses)</strong> ุงุฒ <strong>Sleep</strong> ุงุณุชูุงุฏู ฺฉูุฏ.</li>
<li>ุจุฑุง <strong>ุชุฃุฎุฑูุง ุบุฑูุณุฏูุฏฺฉููุฏู (nonblocking delays)</strong> ุฑูุด <strong>Delay</strong> ุฑุง ุชุฑุฌุญ ุฏูุฏ.<br>
ุงุณุชูุงุฏู ุงุฒ <strong>Delay</strong> ุจู ุดูุง ฺฉูฺฉ ูโฺฉูุฏ <strong>UI ูพุงุณุฎฺฏูุชุฑ</strong> ุจุงุดุฏ.</li>
</ul>
<p>ุฏุฑ ูุงูุนุ <strong>Visual Studio IDE</strong> ูุฒ ุจู ุดูุง ุงู ูฺฉุชู ุฑุง ฺฏูุดุฒุฏ ูโฺฉูุฏ. ุชูุถุญ ูโุฏูู:<br>
ููุช ุจุดุชุฑ ุฏุฑุจุงุฑู <strong>ุจุฑูุงููโููุณ ุบุฑููุฒูุงู (asynchronous programming)</strong> ุงุฏ ุจฺฏุฑุฏุ ุฎูุงูุฏ ูููุฏ ฺฉู ุงุณุชูุงุฏู ุงุฒ ฺฉูุฏูุงฺูโูุง <strong>async</strong> ู <strong>await</strong> ฺฉุงุฑ ุฑุง ุณุงุฏู ูโฺฉูุฏ.<br>
ุณูพุณ ูโุชูุงูุฏ ฺุฒ ุดุจู ุฒุฑ ุจููุณุฏ:</p>
<pre class="hljs"><code><span class="hljs-keyword">await</span> Task.Delay(<span class="hljs-number">1000</span>);
</code></pre>
<p>ุงูุง ุงฺฏุฑ ุงุฒ <strong>await</strong> ุงุณุชูุงุฏู ูฺฉูุฏ ู ููุท ุจููุณุฏ:</p>
<pre class="hljs"><code>Task.Delay(<span class="hljs-number">1000</span>);
</code></pre>
<p>ูพุงู ูุดุฏุงุฑ ุฒุฑ ุฑุง ูุดุงูุฏู ุฎูุงูุฏ ฺฉุฑุฏ:</p>
<pre class="hljs"><code>CS4014 Because this call is not awaited, execution of the current 
method continues before the call is completed. Consider applying the โawaitโ operator to the result of the call.
</code></pre>
<div align="center">
<p><img src="../../../assets/image/02/Table%202-5.jpeg" alt="Conventions-UsedThis-Book"></p>
</div>
<h3><strong>ุจุดุชุฑ ุฏุฑุจุงุฑู Sleep ู Delay</strong> โฑ๏ธ</h3>
<p>ููุช ุงุฒ ูุชุฏ <strong>Delay</strong> ุงุณุชูุงุฏู ูโฺฉูุฏุ ูโุชูุงูุฏ ุขู ุฑุง ุจู ฺฉ <strong>Task</strong> ุงุฎุชุตุงุต ุฏูุฏ ู ุฏุฑ ุฒูุงู ุจุนุฏ ุจุง <strong>await</strong> ููุชุธุฑ ุจูุงูุฏ:</p>
<pre class="hljs"><code>Task task = Task.Delay(<span class="hljs-number">1000</span>);
<span class="hljs-comment">// ุงูุฌุงู ฺฉุงุฑูุง ุฏฺฏุฑ ุฏุฑ ุงูุฌุง</span>
<span class="hljs-keyword">await</span> task;
</code></pre>
<p>ุนูุงูู ุจุฑ ุงูุ ูุชุฏ <strong>Delay</strong> ุฏุงุฑุง <strong>Overloadูุง ูุฎุชูู</strong> ุงุณุช ู ุจุณุงุฑ ุงุฒ ุขูโูุง ูพุงุฑุงูุชุฑ ุจู ูุงู <strong>CancellationToken</strong> ูโูพุฐุฑูุฏ (ุฏุฑ ูุตู ุจุนุฏ ุจู ุงู ููุถูุน ูพุฑุฏุงุฎุชู ูโุดูุฏ). ุจุง ุงุณุชูุงุฏู ุงุฒ ุงู ูพุงุฑุงูุชุฑุ ูโุชูุงูุฏ <strong>ุงุฒ ูุทุน ูุงฺฏูุงู thread ุฌููฺฏุฑ ฺฉุฑุฏู ู ุขู ุฑุง ุจูโุตูุฑุช ูุฑุชุจ ุฎุงุชูู ุฏูุฏ</strong>.</p>
<hr>
<h3><strong>ุงุณุชูุงุฏู ุงุฒ ReadKey() ุง ReadLine()</strong> โจ๏ธ</h3>
<p>ฺฏุงู ุงููุงุช ูโุจูุฏ ฺฉู ุฏุฑ ุจุฑูุงูู ุงุฒ <strong>ReadKey()ุ Read() ุง ReadLine()</strong> ุงุณุชูุงุฏู ุดุฏู ุงุณุช.<br>
ุงุฏู ุงุตู ุงู ุฑูุดโูุง <strong>ูุณุฏูุฏ ฺฉุฑุฏู ฺฉูุชุฑู ุงุฌุฑุง ุจุฑูุงูู</strong> ุชุง ุฒูุงู ุงุณุช ฺฉู ฺฉุงุฑุจุฑ ูุฑูุฏ ููุฑุฏูุธุฑ ุฑุง ุงุฑุงุฆู ุฏูุฏ.<br>
ุจู ุนููุงู ูุซุงูุ ูโุชูุงูุฏ ุตุจุฑ ฺฉูุฏ ุชุง <strong>printLuckyNumberTask</strong> ู <strong>processOrderTask</strong> ุงุฌุฑุง ุฎูุฏ ุฑุง ฺฉุงูู ฺฉููุฏุ ุณูพุณ ุจุง ูุดุงุฑ ุฏุงุฏู ฺฉ ฺฉูุฏ ุงุฒ ฺฉุจูุฑุฏุ ุฎุฑูุฌ ููุง ุฑุง ุฏุฑุงูุช ฺฉูุฏ.</p>
<p>ููููู ฺฉุฏ:</p>
<pre class="hljs"><code><span class="hljs-comment">// The previous code is the same</span>
ReadKey();
WriteLine(<span class="hljs-string">&quot;The end of main&quot;</span>);
</code></pre>
<hr>
<h3><strong>ุงุณุชูุงุฏู ุงุฒ Wait</strong> โณ</h3>
<p><strong>ููุงุด ฒ</strong> ูุดุงู ุฏุงุฏ ฺฉู ุจุง ุงุณุชูุงุฏู ุงุฒ ูฺฺฏ <strong>Result</strong> ูโุชูุงูุฏ <strong>thread ูุฑุงุฎูุงููุฏู</strong> ุฑุง ุชุง ุชฺฉูู Task ูุณุฏูุฏ ฺฉูุฏ.<br>
ุจุง ุงู ุญุงูุ ุฏุฑ ููู ุณูุงุฑููุง ูุงุฒ ูุณุช ฺฉู <strong>ูุชุฌู ุงุฌุฑุง Task</strong> ุฑุง ุชุญูู ฺฉูุฏ.<br>
ุฏุฑ ูุงูุนุ ููฺฉู ุงุณุช ฺฉ Task <strong>ููุฏุงุฑ ุจุงุฒูฺฏุฑุฏุงูุฏ</strong>.</p>
<p>ุจุงุฏ ฺฉ ุชฺฉูฺฉ ุฏฺฏุฑ ุจุฑุง ุงูุชุธุงุฑ ุฑุง ุจุฑุฑุณ ฺฉูู:</p>
<p>ุจุง ูุฑุงุฎูุงู ูุชุฏ <strong>Wait</strong> ุฑู ฺฉ ููููู Taskุ ูโุชูุงูุฏ ุชุง <strong>ุชฺฉูู ุขู Task</strong> ุตุจุฑ ฺฉูุฏ.<br>
ูููููโุง ฺฉู ุฏุฑ ุขู <strong>Wait</strong> ุฑุง ุจู ุตูุฑุช ุฌุฏุงฺฏุงูู ุฑู <strong>printLuckyNumberTask</strong> ู <strong>processOrderTask</strong> ูุฑุงุฎูุงู ูโฺฉูู:</p>
<pre class="hljs"><code><span class="hljs-comment">// The previous code is the same</span>
printLuckyNumberTask.Wait();
processOrderTask.Wait();
WriteLine(<span class="hljs-string">&quot;The end of main.&quot;</span>);
</code></pre>
<p>ุงู ุชุบุฑ ุจุงุนุซ ูโุดูุฏ ฺฉู <strong>ูุฑ ุฏู Task</strong> ุงุฌุฑุง ุฎูุฏ ุฑุง ฺฉุงูู ฺฉููุฏ.</p>
<hr>
<h3><strong>ุงุณุชูุงุฏู ุงุฒ WaitAll</strong> โ</h3>
<p>ุจู ุฌุง ุงูฺฉู ููุชุธุฑ ุชฺฉูู <strong>Taskูุง ุฌุฏุงฺฏุงูู</strong> ุจูุงูุฏุ ูโุชูุงูุฏ ููุชุธุฑ <strong>ฺฏุฑูู ุงุฒ Taskูุง</strong> ุดูุฏ.<br>
ุฏุฑ ุงู ุญุงูุชุ ุงุฒ ูุชุฏ <strong>WaitAll</strong> ุงุณุชูุงุฏู ูโฺฉูุฏ ู <strong>Taskูุง</strong> ฺฉู ูโุฎูุงูุฏ ุจุฑุง ุขูโูุง ููุชุธุฑ ุจูุงูุฏ ุฑุง ุจู ุนููุงู ูพุงุฑุงูุชุฑ ูโุฏูุฏ:</p>
<pre class="hljs"><code><span class="hljs-comment">// The previous code is the same</span>
Task.WaitAll(printLuckyNumberTask, processOrderTask);
WriteLine(<span class="hljs-string">&quot;The end of main.&quot;</span>);
</code></pre>
<p>ุงู ุชุบุฑ ูุฒ ูโุชูุงูุฏ ุฎุฑูุฌโุง ุชููุฏ ฺฉูุฏ ฺฉู ูุดุงู ุฏูุฏ <strong>ูุฑ ุฏู Task ุงุฌุฑุง ุฎูุฏ ุฑุง ฺฉุงูู ฺฉุฑุฏูโุงูุฏ</strong>.</p>
<hr>
<h3><strong>ุงุณุชูุงุฏู ุงุฒ WaitAny</strong> ๐น</h3>
<p>ูุฑุถ ฺฉูุฏ ฺูุฏู Task ุฏุงุฑุฏุ ุงูุง ูโุฎูุงูุฏ ููุชุธุฑ ุดูุฏ ุชุง <strong>ูุฑฺฉุฏุงู ุงุฒ ุขูโูุง</strong> ฺฉู ุฒูุฏุชุฑ ุชูุงู ุดุฏุ ุงุฏุงูู ุฏูุฏ.<br>
ุฏุฑ ุงู ุญุงูุช ุงุฒ ูุชุฏ <strong>WaitAny</strong> ุงุณุชูุงุฏู ูโฺฉูุฏ:</p>
<pre class="hljs"><code><span class="hljs-comment">// The previous code is the same</span>
Task.WaitAny(printLuckyNumberTask, processOrderTask);
WriteLine(<span class="hljs-string">&quot;The end of main.&quot;</span>);
</code></pre>
<p>ููููู ุฎุฑูุฌ:</p>
<pre class="hljs"><code>The main thread starts.
Wait for your lucky number...
Processing an order...---Your lucky number is: 2
The end of main.
</code></pre>
<p>ุงู ุฎุฑูุฌ ูุดุงู ูโุฏูุฏ ฺฉู ุงู ุจุงุฑ <strong>main thread</strong> ููุชุธุฑ ุชฺฉูู <strong>processOrderTask</strong> ููุงูุฏู ุงุณุช.</p>
<div align="center">
<p><img src="../../../assets/image/02/Table%202-6.jpeg" alt="Conventions-UsedThis-Book"></p>
</div>
<h3><strong>ูฺฉุงุช ููู</strong> ๐</h3>
<p>ุงู ูุชุฏูุง ุฏุงุฑุง <strong>Overloadูุง ูุฎุชูู</strong> ูุณุชูุฏ.<br>
ุจู ุนููุงู ูุซุงูุ ุฏุฑ ุฒูุงู ูฺฏุงุฑุด ุงู ูุชูุ ูุชุฏ <strong>Wait</strong> ุฏุงุฑุง ุดุด <strong>Overload</strong> ูุชูุงูุช ุงุณุช.<br>
ุจุง ุงุณุชูุงุฏู ุงุฒ ุงู ูุณุฎูโูุง <strong>Overloaded</strong> ูโุชูุงูุฏ <strong>ุญุฏุงฺฉุซุฑ ุฒูุงู ุงูุชุธุงุฑ</strong>ุ ฺฉ ููููู <strong>CancellationToken</strong> ุง ูุฑ ุฏู ุฑุง ูุดุฎุต ฺฉูุฏ ุชุง ุฏุฑ ุญู ุงูุชุธุงุฑ ุขูโูุง ุฑุง ูพุงุด ฺฉูุฏ.</p>
<hr>
<h3><strong>ุงุณุชูุงุฏู ุงุฒ WhenAny</strong> ๐น</h3>
<p>ุจู ุฎุฑูุฌ ูุจู ุฏูุจุงุฑู ูฺฏุงู ฺฉูุฏ. ูโุจูุฏ ฺฉู ุฎุท <strong>โThe end of main.โ</strong> ุจุนุฏ ุงุฒ ุชฺฉูู ุญุฏุงูู ฺฉ ุงุฒ Taskูุง ุธุงูุฑ ุดุฏู ุงุณุช.<br>
ุงฺฏุฑ ุจุฑูุงูู ุฑุง ฺูุฏู ุจุงุฑ ุงุฌุฑุง ฺฉูุฏุ ูฺฺฏุงู ุงู ุฎุท <strong>ูุจู ุงุฒ ุงุชูุงู ุญุฏุงูู ฺฉ ุงุฒ Taskูุง</strong> ุธุงูุฑ ููโุดูุฏ.<br>
ุนูุช ุงู ุงุณุช ฺฉู ุฏุฑ ุญุงูุช <strong>WaitAny</strong>ุ <strong>thread ูุฑุงุฎูุงููุฏู</strong> ุชุง ุชฺฉูู ูุฑฺฉุฏุงู ุงุฒ Taskูุง <strong>ูุณุฏูุฏ ูโุดูุฏ</strong>.</p>
<p>ุฌุงูุจ ุงุณุช ุจุฏุงูุฏ ฺฉู ูุชุฏ ุฏฺฏุฑ ุจู ูุงู <strong>WhenAny</strong> ูุฌูุฏ ุฏุงุฑุฏ ฺฉู <strong>thread ูุฑุงุฎูุงููุฏู ุฑุง ูุณุฏูุฏ ููโฺฉูุฏ</strong>.</p>
<p>ููููู ฺฉุฏ ุฌุงฺฏุฒู <strong>WaitAny ุจุง WhenAny</strong>:</p>
<pre class="hljs"><code><span class="hljs-comment">// The previous code is the same</span>
Task.WhenAny(printLuckyNumberTask, processOrderTask);
WriteLine(<span class="hljs-string">&quot;The end of main.&quot;</span>);
</code></pre>
<p>ููููู ุฎุฑูุฌ ูพุณ ุงุฒ ุงู ุชุบุฑ:</p>
<pre class="hljs"><code>The main thread starts.
The end of main.
Processing an order...
Wait for your lucky number...
</code></pre>
<p>ููุงูโุทูุฑ ฺฉู ูุดุงูุฏู ูโฺฉูุฏุ ุฏุฑ ุงู ุญุงูุช <strong>main thread ูุณุฏูุฏ ูุดุฏู ุงุณุช</strong>.</p>
<hr>
<h3><strong>ุงูุชุธุงุฑ ุจุฑุง ูุบู (Waiting For Cancellation)</strong> โ๏ธ</h3>
<p>ฺฏุงู ุงููุงุช ูุงุฒู ุงุณุช ุจุฑุง <strong>ูุบู ุงุญุชูุงู Taskูุง</strong> ุขูุงุฏู ุจุงุดุฏ.<br>
ุฏุฑ ฺูู ุดุฑุงุท ูุงุฒ ุจู <strong>CancellationToken</strong> ุฏุงุฑุฏ.<br>
ุจุง ุชูุฌู ุจู ุงููุช ู ฺฏุณุชุฑุฏฺฏ ุงู ููุถูุนุ ุฏุฑ ูุตู ุฌุฏุงฺฏุงููโุง (ูุตู ต) ุจู ุขู ูพุฑุฏุงุฎุชู ุดุฏู ุงุณุช.</p>
<hr>
<h3><strong>ุฌูุณู ูพุฑุณุด ู ูพุงุณุฎ (Q&amp;A Session)</strong> โ๐ฌ</h3>
<p><strong>ุณูุงู 2.4</strong><br>
ุฏุฑ ุจุนุถ ุจูุงฺฏโูุง ุง ููุงูุงุชุ ูโุจูู ุจู ุฌุง <strong>Thread.Sleep</strong> ุงุฒ <strong>Thread.SpinWait</strong> ุงุณุชูุงุฏู ูโฺฉููุฏ. ุชูุงูุช ุงู ุฏู ฺุณุชุ</p>
<p><strong>ูพุงุณุฎ:</strong><br>
ูุชุฏ <strong>SpinWait</strong> ุจุฑุง ูพุงุฏูโุณุงุฒ <strong>Locks</strong> ููุฏ ุงุณุช ุงูุง ุจุฑุง ุจุฑูุงููโูุง ูุนููู ฺฉุงุฑุจุฑุฏ ูุฏุงุฑุฏ.<br>
ููุช ุงุฒ <strong>SpinWait</strong> ุงุณุชูุงุฏู ูโฺฉูุฏุ <strong>scheduler</strong> ฺฉูุชุฑู ุฑุง ุจู Taskูุง ุฏฺฏุฑ ููุชูู ููโฺฉูุฏุ ุนู <strong>ุงุฒ ุชุบุฑ context ุฌููฺฏุฑ ูโุดูุฏ</strong>.</p>
<p>ููฺฉ ุฑุณู: <a href="https://learn.microsoft.com/en-us/dotnet/api/system.threading.thread.spinwait?view=net-9.0">SpinWait</a></p>
<blockquote>
<p>ุฏุฑ ููุงุฑุฏ ูุงุฏุฑ ฺฉู ุฌููฺฏุฑ ุงุฒ <strong>context switch</strong> ููุฏ ุงุณุชุ ูุซูุงู ููุช ุชุบุฑ ูุถุนุช ูุฑุจโุงููููุน ุงุณุชุ ุฏุฑ ุญููู ุฎูุฏ ุงุฒ <strong>SpinWait</strong> ุงุณุชูุงุฏู ฺฉูุฏ.<br>
ฺฉุฏ <strong>SpinWait</strong> ุจุฑุง ุฌููฺฏุฑ ุงุฒ ูุดฺฉูุงุช ฺฉู ุฏุฑ ฺฉุงููพูุชุฑูุง ฺูุฏูพุฑุฏุงุฒูุฏู ุฑุฎ ูโุฏูุฏ ุทุฑุงุญ ุดุฏู ุงุณุช.<br>
ุจู ุนููุงู ูุซุงูุ ุฏุฑ ฺฉุงููพูุชุฑูุง ุจุง ฺูุฏ ูพุฑุฏุงุฒูุฏู <strong>Intel</strong> ฺฉู ุงุฒ ุชฺฉููููฺ <strong>Hyper-Threading</strong> ุงุณุชูุงุฏู ูโฺฉููุฏุ <strong>SpinWait</strong> ุงุฒ <strong>starvation ูพุฑุฏุงุฒูุฏู</strong> ุฏุฑ ุดุฑุงุท ุฎุงุต ุฌููฺฏุฑ ูโฺฉูุฏ.</p>
</blockquote>
<hr>
<blockquote>
<p><strong>ูฺฉุชู:</strong> ฺฉูุงุณโูุง .NET Framework ูุงููุฏ <strong>Monitor</strong> ุง <strong>ReaderWriterLock</strong> ุจู ุตูุฑุช ุฏุงุฎู ุงุฒ <strong>SpinWait</strong> ุงุณุชูุงุฏู ูโฺฉููุฏ.<br>
ุจุง ุงู ุญุงูุ ุจู ุฌุง ุงุณุชูุงุฏู ูุณุชูู ุงุฒ ุงู ูุชุฏุ <strong>Microsoft ุชูุตู ูโฺฉูุฏ ุงุฒ ฺฉูุงุณโูุง ููฺฏุงูโุณุงุฒ ุฏุงุฎู</strong> ุงุณุชูุงุฏู ฺฉูุฏ.<br>
ููฺูู ุชูุตู ูโฺฉูู ุงุฒ ุงู ุฑูุด ุงุณุชูุงุฏู ูฺฉูุฏุ ุฒุฑุง <strong>SpinWait</strong> ฺฉ ุนุฏุฏ ุตุญุญ ุจู ุนููุงู ูพุงุฑุงูุชุฑ ูโูพุฐุฑุฏ ฺฉู ุชุนุฏุงุฏ ุชฺฉุฑุงุฑ ุญููู CPU ุฑุง ูุดุฎุต ูโฺฉูุฏ. ุฏุฑ ูุชุฌูุ <strong>ุฒูุงู ุงูุชุธุงุฑ ุจู ุณุฑุนุช ูพุฑุฏุงุฒูุฏู ูุงุจุณุชู ุงุณุช</strong>.</p>
</blockquote>
<hr>
<p>ูโุชูุงูุฏ ุงุฒ ูุชุฏ <strong>SpinUntil</strong> ูุฒ ุงุณุชูุงุฏู ฺฉูุฏ. ุฏุฑ ุฒูุงู ูฺฏุงุฑุด ุงู ูุชูุ ุงู ูุชุฏ ุณู <strong>Overload</strong> ุฏุงุฑุฏ:</p>
<ul>
<li><code>SpinUntil(Func&lt;Boolean&gt;)</code></li>
<li><code>SpinUntil(Func&lt;Boolean&gt;, Int32)</code></li>
<li><code>SpinUntil(Func&lt;Boolean&gt;, TimeSpan)</code></li>
</ul>
<p>ูููููโุง ุงุฒ ุณุงุฏูโุชุฑู ูุณุฎู ฺฉู ุชุง ุจุฑุขูุฑุฏู ุดุฏู ฺฉ ุดุฑุท ุฎุงุต <strong>ฺุฑุฎุด ูโฺฉูุฏ</strong>:</p>
<pre class="hljs"><code><span class="hljs-comment">// Previous code is the same. You can see it by downloading</span>
<span class="hljs-comment">// the Chapter2_DiscussionOnWaiting project</span>
SpinWait.SpinUntil(() =&gt;
    printLuckyNumberTask.Status == TaskStatus.RanToCompletion
);
WriteLine(<span class="hljs-string">&quot;The end of main.&quot;</span>);
</code></pre>
<p>ููููู ุฎุฑูุฌ ูพุณ ุงุฒ ุงู ุชุบุฑ:</p>
<pre class="hljs"><code>The main thread starts.
Processing an order...
Wait for your lucky number...---Your lucky number is: 8
The end of main.
</code></pre>
<p>ุชูุฌู ุฏุงุดุชู ุจุงุดุฏ ฺฉู ุงู ุจุงุฑ ุฎุฑูุฌ ูุดุงู ูโุฏูุฏ <strong>printLuckyNumberTask ุงุฌุฑุง ุฎูุฏ ุฑุง ฺฉุงูู ฺฉุฑุฏู ุงุณุช</strong>ุ ุงูุง ูุดุฎุต ููโฺฉูุฏ ฺฉู <strong>processOrderTask</strong> ุงุฌุฑุง ุดุฏู ุง ุฎุฑุ ุฒุฑุง ูุง ููุท ูุถุนุช <strong>printLuckyNumberTask</strong> ุฑุง ุจุฑุฑุณ ฺฉุฑุฏู.</p>
<div align="center">
<p><img src="../../../assets/image/02/Table%202-7.jpeg" alt="Conventions-UsedThis-Book"></p>
</div>
<h3><strong>ูฺฉุชู ููู</strong> ๐</h3>
<p>ูุชุฌู ฺฉูุฏ ุงู ุงุณุช ฺฉู <strong>ุฑูุดโูุง ูุฎุชูู ุจุฑุง ุงูุชุธุงุฑ ูุฌูุฏ ุฏุงุฑุฏ</strong>.<br>
ูโุชูุงูุฏ ุงุฒ ุฑูุด ุงุณุชูุงุฏู ฺฉูุฏ ฺฉู ุจุฑุง ุดูุง <strong>ููุงุณุจโุชุฑ ู ุฑุงุญุชโุชุฑ</strong> ุงุณุช.<br>
ูู ุชููุง ุขู ุฏุณุชู ุงุฒ ูุชุฏูุง ุฑุง ุฐฺฉุฑ ฺฉุฑุฏูโุงู ฺฉู <strong>ฺฉุงู ุจุงุดุฏ ุจุฑุง ุฏุฑฺฉ ุจูู ูุทุงูุจ ุงู ฺฉุชุงุจ</strong>.<br>
ุจู ุงุฏ ุฏุงุดุชู ุจุงุดุฏ ฺฉู ุงู ูุชุฏูุง ูุฒ ุฏุงุฑุง <strong>ูุณุฎูโูุง Overloaded ูุฎุชูู</strong> ูุณุชูุฏ.</p>
<hr>
<p><strong>ุณูุงู 2.5</strong><br>
ูุซุงู ุจุฒูุฏ ฺฉู ุจุฎูุงูุฏ ุงุฒ <strong>WhenAny</strong> ุง <strong>WaitAny</strong> ุงุณุชูุงุฏู ฺฉูุฏ. ุจู ุงู ุฏู ฺฉุฏุงู ุฑุง ุชุฑุฌุญ ูโุฏูุฏุ</p>
<p>ูุฑุถ ฺฉูุฏ ุจุง ุฏู <strong>Task ูุชูุงูุช</strong> ฺฉุงุฑ ูโฺฉูุฏ ู ูุฑ Task ุจุง ฺฉ <strong>URL ูุชูุงูุช</strong> ฺฉุงุฑ ูโฺฉูุฏ.<br>
ูุฑุถ ฺฉูุฏ ูุฑ URL ูโุชูุงูุฏ ุจู ุดูุง ฺฉูฺฉ ฺฉูุฏ <strong>ุณูุงูุช ูุนู ฺฉ ูุจโุณุงุช</strong> ุฑุง ุจุฑุฑุณ ฺฉูุฏ.<br>
ูโุฏุงูุฏ ฺฉู ูุฑ ฺฉ ุงุฒ ุงู ููฺฉโูุง ุจุฑุง <strong>ุจุฑุฑุณ ูุถุนุช ูุจโุณุงุช ฺฉุงู ุงุณุช</strong>.<br>
ุจูุงุจุฑุงู ุจุฑูุงูู ุดูุง ูโุชูุงูุฏ <strong>Taskูุง ุฑุง ุงุฌุฑุง ฺฉูุฏ ู ุจู ูุญุถ ุฏุฑุงูุช ุฏุงุฏูโูุง ุงุฏุงูู ุฏูุฏ</strong>.<br>
ุฏุฑ ฺูู ุญุงูุช ูโุชูุงูุฏ ุงุฒ <strong>WhenAny</strong> ุง <strong>WaitAny</strong> ุงุณุชูุงุฏู ฺฉูุฏ.</p>
<p>ูฺฏุฑ ุงูฺฉู ุฏูุงู ฺฉุงู ูุฌูุฏ ุฏุงุดุชู ุจุงุดุฏุ ูู ุฏุฑ ฺูู ุดุฑุงุท <strong>WhenAny</strong> ุฑุง ุชุฑุฌุญ ูโุฏููุ ุจู ุฏูุงู ุฒุฑ:</p>
<ul>
<li>ุงู ุฑูุด <strong>ุบุฑูุณุฏูุฏฺฉููุฏู (nonblocking)</strong> ุงุณุช.</li>
<li>ููุฑุฏ ูุจู ุจุฑุง ุฌููฺฏุฑ ุงุฒ <strong>Deadlock</strong> ูุฒ ููู ุงุณุช.<br>
ุจุฑุง ูุซุงูุ ูุฑุถ ฺฉูุฏ ุจุง ฺูุฏู Task ุณุฑ ู ฺฉุงุฑ ุฏุงุฑุฏ.<br>
ุงฺฏุฑ <strong>main thread</strong> ููุชุธุฑ ุฏุฑุงูุช ุงุนูุงู ุงุฒ ฺฉ Task ุฏฺฏุฑ ุจุงุดุฏุ ูุซูุงู <strong>taskA</strong> ุง <strong>taskB</strong>ุ ู ูุฑ ุฏู Task ุจู ุฏูุงู ุบุฑูุงุจู ูพุดโุจู ุงุฒ ุงุฌุฑุง ุจุงุฒ ุงุณุชูุฏุ <strong>main thread</strong> ูุฒ ูุณุฏูุฏ ูโุดูุฏ.<br>
ุฏุฑ ูุงูุนุ ุงุณุชูุงุฏู ุงุฒ <strong>WaitAny</strong> ูโุชูุงูุฏ ููุฌุฑ ุจู <strong>Deadlock</strong> ุดูุฏ.</li>
</ul>
<hr>
<h3><strong>ุฎูุงุตู ูุตู</strong> ๐</h3>
<p>ุงู ูุตู ฺฉ ูุฑูุฑ ุณุฑุน ุงุฒ <strong>ุงุฌุงุฏ ู ุงุฌุฑุง Taskูุง</strong> ุงุฑุงุฆู ุฏุงุฏ.<br>
ููฺูู <strong>ูฺฉุงูุฒูโูุง ูุฎุชูู ุงูุชุธุงุฑ ุจุฑุง ุชฺฉูู Taskูุง</strong> ุฑุง ุดุฑุญ ุฏุงุฏ.</p>
<p>ุจู ุทูุฑ ุฎูุงุตูุ ุงู ูุตู ุจู ุณูุงูุงุช ุฒุฑ ูพุงุณุฎ ุฏุงุฏ:</p>
<ul>
<li>Task ฺุณุช ู ฺฺฏููู ูโุชูุงู ฺฉ Task ุงุฌุงุฏ ฺฉุฑุฏุ</li>
<li>ฺฺฏููู ูโุชูุงู <strong>ููุฏุงุฑ/ููุงุฏุฑ</strong> ุฑุง ุจู Task ููุชูู ฺฉุฑุฏุ</li>
<li>ฺฺฏููู ูโุชูุงู <strong>ููุฏุงุฑ ุฑุง ุงุฒ Task ุจุงุฒฺฏุฑุฏุงูุฏ</strong>ุ</li>
<li>ฺฺฏููู ูโุชูุงู <strong>ูฺฉุงูุฒู ุงูุชุธุงุฑ</strong> ุฑุง ุฏุฑ ุจุฑูุงููโููุณ Task ุจู ฺฉุงุฑ ุจุฑุฏุ โ</li>
</ul>
<h3><strong>ุชูุฑูโูุง</strong> ๐๏ธโโ๏ธ</h3>
<p>ุจุฑุง ุจุฑุฑุณ ุฏุฑฺฉ ุฎูุฏุ ุณุน ฺฉูุฏ ุชูุฑูโูุง ุฒุฑ ุฑุง ุงูุฌุงู ุฏูุฏ:</p>
<div align="center">
<p><img src="../../../assets/image/02/Table%202-8.jpeg" alt="Conventions-UsedThis-Book"></p>
</div>
<h3><strong>ูฺฉุชู ููู</strong> ๐</h3>
<p>ููุงูโุทูุฑ ฺฉู ูุจูุงู ฺฏูุชู ุดุฏุ ุจุฑุง ููู ูุซุงูโูุง ฺฉุฏุ <strong>โImplicit Global usingsโ</strong> ุฏุฑ Visual Studio ูุนุงู ุจูุฏ.<br>
ุจู ููู ุฏููุ ุดูุง ูุงู <strong>namespace</strong>ูุง ุฒุฑ ุฑุง ฺฉู ุจู ุตูุฑุช ูพุดโูุฑุถ ุฏุฑ ุฏุณุชุฑุณ ูุณุชูุฏุ ููโุจูุฏ:</p>
<ul>
<li>System</li>
<li>System.Collections.Generic</li>
<li><a href="http://System.IO">System.IO</a></li>
<li>System.Linq</li>
<li>System.Net.Http</li>
<li>System.Threading</li>
<li>System.Threading.Tasks</li>
</ul>
<p>ุงู ุชูุถุญ ุจุฑุง <strong>ุชูุงู ุชูุฑูโูุง ฺฉุชุงุจ</strong> ูุฒ ุตุงุฏู ุงุณุช.</p>
<hr>
<h3><strong>ุชูุฑูโูุง</strong> ๐๏ธโโ๏ธ</h3>
<p><strong>E2.1</strong><br>
ุงฺฏุฑ ฺฉุฏ ุฒุฑ ุฑุง ุงุฌุฑุง ฺฉูุฏุ ูโุชูุงูุฏ <strong>ุฎุฑูุฌ ุขู ุฑุง ูพุดโุจู ฺฉูุฏุ</strong></p>
<pre class="hljs"><code><span class="hljs-keyword">using</span> <span class="hljs-keyword">static</span> System.Console;

Task printHelloTask = <span class="hljs-keyword">new</span>(
    () =&gt; WriteLine(<span class="hljs-string">&quot;Hello!&quot;</span>)
);

printHelloTask.Wait(<span class="hljs-number">1</span>);
WriteLine(<span class="hljs-string">&quot;End.&quot;</span>);
</code></pre>
<p><strong>E2.2</strong><br>
ุฎุฑูุฌ ุจุฑูุงูู ุฒุฑ ุฑุง ูโุชูุงูุฏ ูพุดโุจู ฺฉูุฏุ</p>
<pre class="hljs"><code><span class="hljs-keyword">using</span> <span class="hljs-keyword">static</span> System.Console;

Task welcomeTask = Task.Run(
    () =&gt;
    {
    }
);

Thread.Sleep(<span class="hljs-number">5</span>);
WriteLine(<span class="hljs-string">&quot;Welcome!&quot;</span>);
Thread.Sleep(<span class="hljs-number">2</span>);
WriteLine(<span class="hljs-string">&quot;How are you doing?&quot;</span>);
</code></pre>
<p><strong>E2.3</strong><br>
ุฎุฑูุฌ ุจุฑูุงูู ุฒุฑ ุฑุง ูโุชูุงูุฏ ูพุดโุจู ฺฉูุฏุ</p>
<pre class="hljs"><code><span class="hljs-keyword">using</span> <span class="hljs-keyword">static</span> System.Console;

<span class="hljs-keyword">var</span> sayHello = (<span class="hljs-built_in">string</span> msg = <span class="hljs-string">&quot;Hello, reader!&quot;</span>) =&gt; msg;
<span class="hljs-keyword">var</span> displayMsgTask = Task.Run(()=&gt;WriteLine(sayHello()));
displayMsgTask.Wait();
WriteLine(<span class="hljs-string">&quot;Goodbye.&quot;</span>);
</code></pre>
<p><strong>E2.4</strong><br>
ฺฉ ุชุงุจุน ุจููุณุฏ ฺฉู ฺฉ ุนุฏุฏ ุฑุง ฺฏุฑูุชู ู <strong>ูุงฺฉุชูุฑู ุขู ุฑุง ูุญุงุณุจู ฺฉูุฏ</strong>.<br>
ุงู ุชุงุจุน ุฑุง ุฏุฑ ฺฉ <strong>thread ูพุณโุฒููู</strong> ุงุฌุฑุง ฺฉุฑุฏู ู ูุชุฌู ุฑุง ุฏุฑ <strong>ฺฉูุณูู</strong> ููุงุด ุฏูุฏ.<br>
(ูุงุฒ ุจู ุฏุฑ ูุธุฑ ฺฏุฑูุชู ุงุนุชุจุงุฑุณูุฌ ูุฑูุฏ ุง ุดุฑุงุท ุงุณุชุซูุง ุจุฑุง ุงู ุจุฑูุงูู ูุณุช.)</p>
<p><strong>E2.5</strong><br>
ุตุญุญ ุง ุบูุท ุจูุฏู ุฌููุงุช ุฒุฑ ุฑุง ูุดุฎุต ฺฉูุฏ:<br>
i) ูุชุฏ <strong>WaitAny</strong> <strong>thread ูุฑุงุฎูุงููุฏู ุฑุง ูุณุฏูุฏ ูโฺฉูุฏ</strong>ุ ุงูุง ูุชุฏ <strong>WhenAny</strong> ุงู ฺฉุงุฑ ุฑุง ููโฺฉูุฏ. [True]<br>
ii) ุจุฑุง ุงุฌุงุฏ <strong>UI ูพุงุณุฎฺฏูุชุฑ</strong>ุ ุจุงุฏ <strong>Sleep</strong> ุฑุง ุจุฑ <strong>Delay</strong> ุชุฑุฌุญ ุฏูุฏ. [False]</p>
<hr>
<h3><strong>ุฑุงูโุญู ุชูุฑูโูุง</strong> โ</h3>
<p><strong>E2.1</strong><br>
ุดูุง Task ุฑุง ุงุฌุงุฏ ฺฉุฑุฏูโุงุฏ ุงูุง ุขู ุฑุง <strong>ุดุฑูุน ูฺฉุฑุฏูโุงุฏ</strong>ุ ุจูุงุจุฑุงู ุฎุฑูุฌ ุจุฑูุงูู:</p>
<pre class="hljs"><code>End.
</code></pre>
<hr>
<p><strong>E2.2</strong><br>
ุจุฑูุงูู ูโุชูุงูุฏ <strong>ฺูุฏู ุฎุฑูุฌ ูุฎุชูู</strong> ุฏุงุดุชู ุจุงุดุฏ.<br>
ุจุง ุชูุฌู ุจู ุงูฺฉู Task ููุชุธุฑ ุชฺฉูู ุงุฌุฑุง ุฎูุฏ ูุณุชุ ุชุฑุชุจ ููุงุด ุฎุฑูุฌโูุง ููฺฉู ุงุณุช ุจุณุชู ุจู ุณุฑุนุช ฺฉุงููพูุชุฑ ูุชูุงูุช ุจุงุดุฏ.<br>
ููููู ุฎุฑูุฌ:</p>
<pre class="hljs"><code>How are you doing?
Welcome!
</code></pre>
<p>ูโุชูุงู ุจุง ุงุถุงูู ฺฉุฑุฏู ุชุฃุฎุฑ ุจุดุชุฑ ุฏุฑ <strong>welcomeTask</strong> ุงุญุชูุงู ูพุงุงู ุฒูุฏุชุฑ main thread ุฑุง ุงูุฒุงุด ุฏุงุฏ:</p>
<pre class="hljs"><code><span class="hljs-keyword">using</span> <span class="hljs-keyword">static</span> System.Console;

Task welcomeTask = Task.Run(
    () =&gt;
    {
    }
);

<span class="hljs-comment">//Thread.Sleep(5);</span>
Thread.Sleep(<span class="hljs-number">200</span>);

WriteLine(<span class="hljs-string">&quot;Welcome!&quot;</span>);
Thread.Sleep(<span class="hljs-number">2</span>);
WriteLine(<span class="hljs-string">&quot;How are you doing?&quot;</span>);
</code></pre>
<hr>
<p><strong>E2.3</strong><br>
C# 12 ุงุฌุงุฒู ูโุฏูุฏ ููุงุฏุฑ ูพุดโูุฑุถ ุจุฑุง <strong>ูพุงุฑุงูุชุฑูุง lambda</strong> ุชุนุฑู ุดูุฏ.<br>
ุฎุฑูุฌ ุงู ุจุงุฑ ูพุดโุจูโูพุฐุฑ ุงุณุชุ ุฒุฑุง <strong>main thread</strong> ููุชุธุฑ ุชฺฉูู Task ุงุณุช:</p>
<pre class="hljs"><code>Hello, reader!
Goodbye.
</code></pre>
<hr>
<p><strong>E2.4</strong><br>
ูููููโุง ุจุฑุง ูุญุงุณุจู ูุงฺฉุชูุฑู ฑฐ ุจุง ุงุณุชูุงุฏู ุงุฒ Task ูพุณโุฒููู:</p>
<pre class="hljs"><code><span class="hljs-keyword">using</span> <span class="hljs-keyword">static</span> System.Console;

WriteLine(<span class="hljs-string">&quot;The main thread initiates the task.&quot;</span>);
<span class="hljs-keyword">var</span> calculateFactorialTask = Task.Run(() =&gt; CalculateFactorial(<span class="hljs-number">10</span>));

WriteLine(<span class="hljs-string">&quot;The main thread resumes to do other things.&quot;</span>);
WriteLine(<span class="hljs-string">$&quot;The factorial of 10 is: <span class="hljs-subst">{calculateFactorialTask.Result}</span>&quot;</span>);

<span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-built_in">int</span> <span class="hljs-title">CalculateFactorial</span>(<span class="hljs-params"><span class="hljs-built_in">int</span> number</span>)</span>
{
    <span class="hljs-built_in">int</span> temp = <span class="hljs-number">1</span>;
    <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = <span class="hljs-number">2</span>; i &lt;= number; i++)
    {
        temp *= i;
    }
    <span class="hljs-keyword">return</span> temp;
}
</code></pre>
<p>ููููู ุฎุฑูุฌ:</p>
<pre class="hljs"><code>The main thread initiates the task.
The main thread resumes to do other things.
The factorial of 10 is: 3628800
</code></pre>
<hr>
<p><strong>E2.5</strong><br>
ูพุงุณุฎโูุง:</p>
<p>i) <strong>True</strong><br>
ii) <strong>False</strong></p>

  </main>

  <!-- ููุชุฑ ูุดุชุฑฺฉ -->
  <footer class="footer">
    <div class="container">
      <p>
        <img src="/Gitab/icone/copyright.svg" alt="ฺฉูพโุฑุงุช" width="14" height="14"
             style="vertical-align:middle;margin-inline:4px">
        <span id="y"></span> Gitab โ ุจุฑุง ุชูุณุนูโุฏููุฏฺฏุงู
      </p>
    </div>
  </footer>

  <!-- ุณุงู ู ุงุณฺฉุฑูพุช ุชุบุฑ ุชู -->
  <script>
  (() => {
    const root = document.documentElement;
    const btn = document.getElementById('themeToggle');
    const KEY = 'gitab-theme';
    const media = window.matchMedia('(prefers-color-scheme: dark)');
    const getEffective = s => (s === 'auto' ? (media.matches ? 'dark' : 'light') : s);

    function updateTheme(s) {
      root.setAttribute('data-theme', s);
      const mode = getEffective(s);
      root.dataset.colorMode = mode;
      btn.dataset.icon = mode === 'dark' ? 'moon' : 'sun';
    }

    let saved = localStorage.getItem(KEY) || 'auto';
    updateTheme(saved);

    btn.addEventListener('click', () => {
      const current = localStorage.getItem(KEY) || 'auto';
      const next = current === 'auto' ? 'dark' : current === 'dark' ? 'light' : 'auto';
      localStorage.setItem(KEY, next);
      updateTheme(next);
    });

    media.addEventListener('change', () => {
      if ((localStorage.getItem(KEY) || 'auto') === 'auto') updateTheme('auto');
    });

    document.addEventListener('DOMContentLoaded', () => {
      updateTheme(localStorage.getItem(KEY) || 'auto');
    });
  })();
  </script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
  <script>hljs.highlightAll();</script>

  <script>
  document.querySelectorAll('pre code').forEach(block => {
    const btn = document.createElement('button');
    btn.className = 'copy-btn';

    const icon = document.createElement('img');
    icon.src = "/Gitab/icone/copy.svg";
    icon.alt = 'Copy';
    btn.appendChild(icon);

    block.parentNode.insertBefore(btn, block);

    btn.addEventListener('click', async () => {
      await navigator.clipboard.writeText(block.textContent);
      btn.classList.add('copied');
      setTimeout(() => btn.classList.remove('copied'), 1500);
    });
  });
  </script>

  <script>
  document.body.dataset.page = window.location.pathname;

  const menuBtn = document.querySelector(".menu-toggle");
  const nav = document.querySelector(".nav");

  if (menuBtn && nav) {
    menuBtn.addEventListener("click", (e) => {
      e.stopPropagation();
      nav.classList.toggle("show");
    });

    document.addEventListener("click", (e) => {
      const clickedInsideNav = nav.contains(e.target);
      const clickedMenuButton = menuBtn.contains(e.target);
      if (!clickedInsideNav && !clickedMenuButton) {
        nav.classList.remove("show");
      }
    });
  }
  </script>

  <script>
    document.getElementById('y').textContent = new Date().getFullYear();
  </script>
</body>
</html>
