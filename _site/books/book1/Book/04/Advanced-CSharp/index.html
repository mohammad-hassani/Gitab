<!doctype html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>ุณโุดุงุฑูพ ูพุดุฑูุชู</title>
  <meta name="description" content="ุชุฑุฌููโูุง ูุงุฑุณ ฺฉุชุงุจโูุง ูู โ ุณุฑุนุ ูููุงู ู ูุงุจู ุงุชฺฉุง.">
  <link rel="stylesheet" href="/styles/main.css">
<link rel="stylesheet"
  href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css">
<style>
@font-face {
  font-family: 'Vazir';
  src: url('/fonts/Vazir-FD-WOL.ttf') format('truetype');
  font-display: swap;
}
body {
  font-family: 'Vazir', sans-serif;
}
</style>

</head>
<body>
  <!-- ูุฏุฑ ูุดุชุฑฺฉ -->
 <header class="header">
  <div class="container nav-wrap">
    <a href="/" class="brand">
      <img src="/icone/logo.svg" alt="Gitab logo" width="26" height="26">
      <span>Gitab</span>
    </a>

    <nav class="nav">
      <a href="/" aria-current="page">ุฎุงูู</a>
      <a href="/books/list-books">ฺฉุชุงุจโูุง</a>
      <a href="#">ูุชุฑุฌูู</a>
      <a href="#">ููฺฉุงุฑ</a>
      <a href="#">ุฏุฑุจุงุฑู ูุง</a>
    </nav>

    <div class="nav-actions">
     <button id="themeToggle" class="icon-btn theme-btn" data-icon="moon" aria-label="ุชุบุฑ ุชู">
        <img src="/icone/sun.svg" class="icon-sun" alt="ุฑูุดู">
        <img src="/icone/moon.svg" class="icon-moon" alt="ุชุงุฑฺฉ">
      </button>
  <a class="icon-btn" href="https://github.com/hheydarian/Gitab" target="_blank" title="GitHub">
    <img src="/icone/github.svg" alt="GitHub">
  </a>
      <!-- ุฏฺฉูู ููู ุจุฑุง ููุจุงู -->
      <button class="menu-toggle" aria-label=" ููู">
        <img src="/icone/menu.svg" alt="menu">
      </button>
    </div>
  </div> 
  

</header>

 

<main class="site-main book-page ">
  <h1>ูุตู ฺูุงุฑู: ุณ ุดุงุฑูพ ูพุดุฑูุชู</h1>
<p>ุฏุฑ ุงู ูุตูุ ุจู ุณุฑุงุบ ูุจุงุญุซ ูพุดุฑูุชู ุฒุจุงู C# ูโุฑูู ฺฉู ุจุฑ ูพุงู ููุงูู ุจูุง ุดุฏูโุงูุฏ ฺฉู ุฏุฑ ูุตูโูุง 2 ู 3 ุจุฑุฑุณ ฺฉุฑุฏู.<br>
ฺูุงุฑ ุจุฎุด ุงูู ุฑุง ุจุงุฏ ุจู ุตูุฑุช ูพูุณุชู ู ูพุดุช ุณุฑ ูู ูุทุงูุนู ฺฉูุฏุ ุงูุง ุจุฎุดโูุง ุจุงูโูุงูุฏู ุฑุง ูโุชูุงูุฏ ุจู ูุฑ ุชุฑุชุจ ุจุฎูุงูุฏ.</p>
<h3>Delegates (ููุงูุฏฺฏุงู) ๐จ</h3>
<p>ฺฉ delegate ฺฉ ุดุก ุงุณุช ฺฉู ูโุฏุงูุฏ ฺฺฏููู ฺฉ ูุชุฏ ุฑุง ูุฑุงุฎูุงู ฺฉูุฏ.</p>
<p>ููุน delegate ุชุนู ูโฺฉูุฏ ฺฉู ูููููโูุง delegate ูโุชูุงููุฏ ฺู ููุน ูุชุฏูุง ุฑุง ูุฑุงุฎูุงู ฺฉููุฏ. ุจู ุทูุฑ ูุดุฎุตุ ฺฉ delegate ููุน ุจุงุฒฺฏุดุช ูุชุฏ ู ุงููุงุน ูพุงุฑุงูุชุฑูุง ูุชุฏ ุฑุง ุชุนุฑู ูโฺฉูุฏ.</p>
<p>ูุซุงู: ุชุนุฑู ฺฉ ููุน delegate ุจู ูุงู Transformer:</p>
<pre class="hljs"><code><span class="hljs-function"><span class="hljs-built_in">delegate</span> <span class="hljs-built_in">int</span> <span class="hljs-title">Transformer</span>(<span class="hljs-params"><span class="hljs-built_in">int</span> x</span>)</span>;
</code></pre>
<p>ุงู delegate ุจุง ูุฑ ูุชุฏ ฺฉู ุจุงุฒฺฏุดุช ุงุฒ ููุน int ุฏุงุดุชู ุจุงุดุฏ ู ฺฉ ูพุงุฑุงูุชุฑ int ุจฺฏุฑุฏ ุณุงุฒฺฏุงุฑ ุงุณุช. ูุซู ุงู:</p>
<pre class="hljs"><code><span class="hljs-function"><span class="hljs-built_in">int</span> <span class="hljs-title">Square</span>(<span class="hljs-params"><span class="hljs-built_in">int</span> x</span>)</span> { <span class="hljs-keyword">return</span> x * x; }
</code></pre>
<p>ุง ุจู ุตูุฑุช ฺฉูุชุงูโุชุฑ (expression-bodied):</p>
<pre class="hljs"><code><span class="hljs-function"><span class="hljs-built_in">int</span> <span class="hljs-title">Square</span>(<span class="hljs-params"><span class="hljs-built_in">int</span> x</span>)</span> =&gt; x * x;
</code></pre>
<p><strong>ุณุงุฎุชู ู ุงุณุชูุงุฏู ุงุฒ ฺฉ delegate ๐๏ธ</strong></p>
<p>ุงุฎุชุตุงุต ฺฉ ูุชุฏ ุจู ฺฉ ูุชุบุฑ delegateุ ุจุงุนุซ ุงุฌุงุฏ ฺฉ ููููู delegate ูโุดูุฏ:</p>
<pre class="hljs"><code>Transformer t = Square;
</code></pre>
<p>ูุฑุงุฎูุงู ฺฉ ููููู delegate ุฏููุงู ูุซู ูุฑุงุฎูุงู ฺฉ ูุชุฏ ุงุณุช:</p>
<pre class="hljs"><code><span class="hljs-built_in">int</span> answer = t(<span class="hljs-number">3</span>);   <span class="hljs-comment">// answer ุจุฑุงุจุฑ ุจุง 9</span>
</code></pre>
<p>ูุซุงู ฺฉุงูู:</p>
<pre class="hljs"><code>Transformer t = Square;   <span class="hljs-comment">// ุงุฌุงุฏ ููููู delegate</span>
<span class="hljs-built_in">int</span> result = t(<span class="hljs-number">3</span>);        <span class="hljs-comment">// ูุฑุงุฎูุงู delegate</span>
Console.WriteLine(result); <span class="hljs-comment">// ุฎุฑูุฌ: 9</span>

<span class="hljs-function"><span class="hljs-built_in">int</span> <span class="hljs-title">Square</span>(<span class="hljs-params"><span class="hljs-built_in">int</span> x</span>)</span> =&gt; x * x;

<span class="hljs-function"><span class="hljs-built_in">delegate</span> <span class="hljs-built_in">int</span> <span class="hljs-title">Transformer</span>(<span class="hljs-params"><span class="hljs-built_in">int</span> x</span>)</span>;  <span class="hljs-comment">// ุชุนุฑู ููุน delegate</span>
</code></pre>
<p><strong>ููููู ุงุตู delegate ๐ฏ</strong></p>
<p>ฺฉ ููููู delegate ูุงูุนุงู ุจู ุนููุงู ููุงูุฏูโ caller ุนูู ูโฺฉูุฏ:<br>
caller (ูุฑุงุฎูุงููุฏู) delegate ุฑุง ูุฑุงุฎูุงู ูโฺฉูุฏ ู ุณูพุณ delegateุ ูุชุฏ ูุฏู ุฑุง ูุฑุงุฎูุงู ูโฺฉูุฏ.</p>
<p>ุงู ูุงุณุทูโฺฏุฑ (indirection) ุจุงุนุซ ูโุดูุฏ ฺฉู caller ุงุฒ ูุชุฏ ูุฏู ุฌุฏุง ู ูุณุชูู ุจุงุดุฏ.</p>
<p><strong>ูฺฉุชูโูุง ููู โ</strong></p>
<p>ุฏุณุชูุฑ:</p>
<pre class="hljs"><code>Transformer t = Square;
</code></pre>
<p>ุฏุฑ ูุงูุน ฺฉ ูุงูโุจูุฑ (shorthand) ุจุฑุง ุงู ุงุณุช:</p>
<pre class="hljs"><code>Transformer t = <span class="hljs-keyword">new</span> Transformer(Square);
</code></pre>
<p>ุนุจุงุฑุช:</p>
<pre class="hljs"><code>t(3)
</code></pre>
<p>ูุงูโุจูุฑ ุงุณุช ุจุฑุง:</p>
<pre class="hljs"><code>t.Invoke(3)
</code></pre>
<p>ุงุฒ ูุธุฑ ููุ ููุช ุจู Square ุจุฏูู ูพุฑุงูุชุฒ ู ุขุฑฺฏููุงู ุงุดุงุฑู ูโฺฉููุ ุฏุฑ ุญุงู ูุดุฎุต ฺฉุฑุฏู ฺฉ method group ูุณุชู.<br>
ุงฺฏุฑ ูุชุฏ overload ุดุฏู ุจุงุดุฏุ ฺฉุงููพุงูุฑ C# ุจุฑ ุงุณุงุณ ุงูุถุง delegate ุงูุชุฎุงุจ ูโฺฉูุฏ ฺฉู ฺฉุฏุงู overload ููุงุณุจ ุงุณุช.</p>
<p><strong>Delegate ุดุจู ุจู Callback ๐</strong></p>
<p>ฺฉ delegate ูุดุงุจู ฺุฒ ุงุณุช ฺฉู ุฏุฑ ุงุตุทูุงุญ ุนููู callback ูุงูุฏู ูโุดูุฏ.<br>
ุงู ููููู ุณุงุฒูโูุง ูุซู function pointers ุฏุฑ ุฒุจุงู C ุฑุง ูุฒ ุฏุฑ ุจุฑ ูโฺฏุฑุฏ.</p>
<h3>ููุดุชู ูุชุฏูุง ูพูุงฺฏู ุจุง ุงุณุชูุงุฏู ุงุฒ Delegateูุง โจ</h3>
<p>ฺฉ ูุชุบุฑ ุงุฒ ููุน delegate ุฏุฑ ุฒูุงู ุงุฌุฑุง (runtime) ุจู ฺฉ ูุชุฏ ูุณุจุช ุฏุงุฏู ูโุดูุฏ. ุงู ูฺฺฏ ุจุฑุง ููุดุชู ูุชุฏูุง ูพูุงฺฏู (plug-in methods) ุจุณุงุฑ ฺฉุงุฑุจุฑุฏ ุงุณุช.</p>
<p>ุฏุฑ ูุซุงู ุฒุฑุ ูุง ฺฉ ูุชุฏ ฺฉูฺฉ (utility method) ุจู ูุงู Transform ุฏุงุฑู ฺฉู ฺฉ ุนูู transform ุฑุง ุฑู ูุฑ ุนุถู ุงุฒ ฺฉ ุขุฑุงูโ ุนุฏุฏ (integer array) ุงุนูุงู ูโฺฉูุฏ. ุงู ูุชุฏ Transform ฺฉ ูพุงุฑุงูุชุฑ ุงุฒ ููุน delegate ุฏุงุฑุฏ ฺฉู ูโุชูุงูุฏ ุจุฑุง ูุดุฎุต ฺฉุฑุฏู ูพูุงฺฏู transform ุงุฒ ุขู ุงุณุชูุงุฏู ฺฉูุฏ:</p>
<pre class="hljs"><code><span class="hljs-built_in">int</span>[] values = { <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span> };
Transform (values, Square);      <span class="hljs-comment">// ุงุชุตุงู ูุชุฏ Square ุจู Transform</span>
<span class="hljs-keyword">foreach</span> (<span class="hljs-built_in">int</span> i <span class="hljs-keyword">in</span> values)
  Console.Write (i + <span class="hljs-string">&quot;  &quot;</span>);      <span class="hljs-comment">// ุฎุฑูุฌ: 1   4   9</span>

<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Transform</span> (<span class="hljs-params"><span class="hljs-built_in">int</span>[] values, Transformer t</span>)</span>
{
  <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>; i &lt; values.Length; i++)
    values[i] = t (values[i]);
}

<span class="hljs-function"><span class="hljs-built_in">int</span> <span class="hljs-title">Square</span> (<span class="hljs-params"><span class="hljs-built_in">int</span> x</span>)</span> =&gt; x * x;
<span class="hljs-function"><span class="hljs-built_in">int</span> <span class="hljs-title">Cube</span> (<span class="hljs-params"><span class="hljs-built_in">int</span> x</span>)</span> =&gt; x * x * x;

<span class="hljs-function"><span class="hljs-built_in">delegate</span> <span class="hljs-built_in">int</span> <span class="hljs-title">Transformer</span> (<span class="hljs-params"><span class="hljs-built_in">int</span> x</span>)</span>;
</code></pre>
<p>๐น ุฏุฑ ุงูุฌุง ุงฺฏุฑ ุฏุฑ ุฎุท ุฏูู ุจูโุฌุง Square ุงุฒ Cube ุงุณุชูุงุฏู ฺฉููุ ุชุจุฏู ุฑู ุงุนุฏุงุฏ ุจูโุตูุฑุช ูฺฉุนุจ (ุชูุงู ุณูู) ุงูุฌุงู ูโุดูุฏ.</p>
<p>๐น ูุชุฏ Transform ฺฉ higher-order function ุงุณุชุ ฺูู ฺฉ ุชุงุจุน (delegate) ุฑุง ุจูโุนููุงู ุขุฑฺฏููุงู ูโฺฏุฑุฏ. (ูุฑ ูุชุฏ ฺฉู ฺฉ delegate ุฑุง ุจุฑฺฏุฑุฏุงูุฏ ูุฒ ฺฉ higher-order function ูุญุณูุจ ูโุดูุฏ.)</p>
<h3>ุงูุฏุงู ูุชุฏ ุฏุฑ Delegateูุง: Instance ู Static โก</h3>
<p>ฺฉ ูุชุฏ ูุฏู (target method) ุจุฑุง ฺฉ delegate ูโุชูุงูุฏ ูุญู (local)ุ ุงุณุชุง (static) ุง ูููููโุง (instance) ุจุงุดุฏ.</p>
<p>ูุซุงู ฺฉ ูุชุฏ static ุจูโุนููุงู ูุฏู delegate:</p>
<pre class="hljs"><code>Transformer t = Test.Square;
Console.WriteLine (t(<span class="hljs-number">10</span>));      <span class="hljs-comment">// 100</span>

<span class="hljs-keyword">class</span> <span class="hljs-title">Test</span> 
{ 
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">int</span> <span class="hljs-title">Square</span> (<span class="hljs-params"><span class="hljs-built_in">int</span> x</span>)</span> =&gt; x * x; 
}

<span class="hljs-function"><span class="hljs-built_in">delegate</span> <span class="hljs-built_in">int</span> <span class="hljs-title">Transformer</span> (<span class="hljs-params"><span class="hljs-built_in">int</span> x</span>)</span>;
</code></pre>
<p>ูุซุงู ฺฉ ูุชุฏ instance ุจูโุนููุงู ูุฏู delegate:</p>
<pre class="hljs"><code>Test test = <span class="hljs-keyword">new</span> Test();
Transformer t = test.Square;
Console.WriteLine (t(<span class="hljs-number">10</span>));      <span class="hljs-comment">// 100</span>

<span class="hljs-keyword">class</span> <span class="hljs-title">Test</span> 
{ 
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-built_in">int</span> <span class="hljs-title">Square</span> (<span class="hljs-params"><span class="hljs-built_in">int</span> x</span>)</span> =&gt; x * x; 
}

<span class="hljs-function"><span class="hljs-built_in">delegate</span> <span class="hljs-built_in">int</span> <span class="hljs-title">Transformer</span> (<span class="hljs-params"><span class="hljs-built_in">int</span> x</span>)</span>;
</code></pre>
<p>๐ ุฒูุงู ฺฉู ฺฉ ูุชุฏ instance ุจู ฺฉ delegate ุงุฎุชุตุงุต ุฏุงุฏู ูโุดูุฏุ ุขู delegate ููุท ุจู ุฎูุฏ ูุชุฏ ุงุดุงุฑู ููโฺฉูุฏุ ุจูฺฉู ูููููโุง ุงุฒ ฺฉูุงุณ ฺฉู ูุชุฏ ุจู ุขู ุชุนูู ุฏุงุฑุฏ ุฑุง ูู ูฺฏูโุฏุงุฑ ูโฺฉูุฏ.</p>
<p><strong>ุฎุงุตุช Target ุฏุฑ ฺฉูุงุณ System.Delegate ๐ฏ</strong></p>
<p>ฺฉูุงุณ System.Delegate ฺฉ ูฺฺฏ ุจู ูุงู Target ุฏุงุฑุฏ ฺฉู ุงู ููููู (instance) ุฑุง ูุดุงู ูโุฏูุฏ (ู ุงฺฏุฑ delegate ุจู ฺฉ ูุชุฏ static ุงุดุงุฑู ฺฉูุฏุ ููุฏุงุฑุด null ุฎูุงูุฏ ุจูุฏ).</p>
<p>ูุซุงู:</p>
<pre class="hljs"><code>MyReporter r = <span class="hljs-keyword">new</span> MyReporter();
r.Prefix = <span class="hljs-string">&quot;%Complete: &quot;</span>;

ProgressReporter p = r.ReportProgress;
p(<span class="hljs-number">99</span>);                                 <span class="hljs-comment">// %Complete: 99</span>

Console.WriteLine (p.Target == r);     <span class="hljs-comment">// True</span>
Console.WriteLine (p.Method);          <span class="hljs-comment">// Void ReportProgress(Int32)</span>

r.Prefix = <span class="hljs-string">&quot;&quot;</span>;
p(<span class="hljs-number">99</span>);                                 <span class="hljs-comment">// 99</span>

<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-built_in">delegate</span> <span class="hljs-keyword">void</span> <span class="hljs-title">ProgressReporter</span> (<span class="hljs-params"><span class="hljs-built_in">int</span> percentComplete</span>)</span>;

<span class="hljs-keyword">class</span> <span class="hljs-title">MyReporter</span>
{
  <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> Prefix = <span class="hljs-string">&quot;&quot;</span>;
  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">ReportProgress</span> (<span class="hljs-params"><span class="hljs-built_in">int</span> percentComplete</span>)</span>
    =&gt; Console.WriteLine (Prefix + percentComplete);
}
</code></pre>
<p>โ ฺูู ููููู (instance) ุฏุฑ ุฎุงุตุช Target ุฐุฎุฑู ูโุดูุฏุ ุทูู ุนูุฑ ุขู ุญุฏุงูู ุจู ุงูุฏุงุฒู ุทูู ุนูุฑ delegate ฺฏุณุชุฑุด ูโุงุจุฏ.</p>
<p>๐ ุฌูุนโุจูุฏ:</p>
<ul>
<li>
<p>Delegateูุง ุจู ูุง ุงุฌุงุฒู ูโุฏููุฏ ฺฉู ูุชุฏูุง ุฑุง ูุซู ูุชุบุฑูุง ูพุงุณ ุจุฏูู.</p>
</li>
<li>
<p>ูโุชูุงููุฏ ุจู ูุชุฏูุง static ุง instance ูุชุตู ุดููุฏ.</p>
</li>
<li>
<p>ุฎุงุตุช Target ุชุถูู ูโฺฉูุฏ ฺฉู ููููู ูุฑุจูุท ุจู ูุชุฏ instance ุชุง ููุช delegate ุฒูุฏู ุงุณุชุ ุจุงู ุจูุงูุฏ.</p>
</li>
</ul>
<p>๐ก ุงู ููููู ูพุงูโุง ุฏุฑ ุทุฑุงุญ ูพูุงฺฏูโูุงุ ฺฉุงูโุจฺฉโูุง ู ุจุฑูุงููโููุณ ุดุกฺฏุฑุงุณุช.</p>
<h3>ููุงูุฏฺฏุงู ฺูุฏูพุฎุด (Multicast Delegates) ๐ฏ</h3>
<p>ุชูุงู ูููููโูุง delegate ุฏุฑ ุณโุดุงุฑูพ ุฏุงุฑุง ูุงุจูุช ฺูุฏูพุฎุด (multicast) ูุณุชูุฏ. ุงู ุนู ฺฉ ูููููโ delegate ูโุชูุงูุฏ ูู ููุท ุจู ฺฉ ูุชุฏุ ุจูฺฉู ุจู ฺฉ ูุณุช ุงุฒ ูุชุฏูุง ุงุดุงุฑู ฺฉูุฏ.</p>
<p>ุนููฺฏุฑูุง + ู += ุจุฑุง ุชุฑฺฉุจ ฺฉุฑุฏู ูููููโูุง delegate ุงุณุชูุงุฏู ูโุดููุฏ:</p>
<pre class="hljs"><code>SomeDelegate d = SomeMethod1;
d += SomeMethod2;
</code></pre>
<p>ุฎุท ุขุฎุฑ ุงุฒ ูุธุฑ ุนููฺฉุฑุฏ ุฏููุงู ูุนุงุฏู ุงู ุงุณุช:</p>
<pre class="hljs"><code>d = d + SomeMethod2;
</code></pre>
<p>ุงฺฉููู ููุช d ูุฑุงุฎูุงู ุดูุฏุ ูู SomeMethod1 ู ูู SomeMethod2 ุงุฌุฑุง ูโุดููุฏ.<br>
โ ุชูุฌู ุฏุงุดุชู ุจุงุดุฏ ฺฉู ูุชุฏูุง ุจู ุชุฑุชุจ ฺฉู ุงุถุงูู ุดุฏูโุงูุฏ ูุฑุงุฎูุงู ูโุดููุฏ.</p>
<p>ุนููฺฏุฑูุง - ู -= ูู ุจุฑุง ุญุฐู ฺฉ ูุชุฏ ุงุฒ ูุณุช ูุชุฏูุง ฺฉ delegate ุงุณุชูุงุฏู ูโุดููุฏ:</p>
<pre class="hljs"><code>d -= SomeMethod1;
</code></pre>
<p>ุงฺฉููู ูุฑุงุฎูุงู d ุจุงุนุซ ูโุดูุฏ ููุท SomeMethod2 ุงุฌุฑุง ุดูุฏ.</p>
<p>๐ ูฺฉุชู ููู:</p>
<ul>
<li>ููุช ุฑู ฺฉ ูุชุบุฑ delegate ฺฉู ููุฏุงุฑุด null ุงุณุชุ ุนูู + ุง += ุงูุฌุงู ุฏูุฏุ ุจุงุฒ ูู ฺฉุงุฑ ูโฺฉูุฏ ู ูุนุงุฏู ุงู ุงุณุช ฺฉู ุจู ุขู ููุฏุงุฑ ุฌุฏุฏ ุจุฏูุฏ:</li>
</ul>
<pre class="hljs"><code>SomeDelegate d = <span class="hljs-literal">null</span>;
d += SomeMethod1;   <span class="hljs-comment">// ูุนุงุฏู ุจุง: d = SomeMethod1 ููุช d ุจุฑุงุจุฑ null ุงุณุช</span>
</code></pre>
<ul>
<li>ุจู ุทูุฑ ูุดุงุจูุ ุงฺฏุฑ ุฑู ฺฉ delegate ฺฉู ููุท ฺฉ ูุชุฏ ุฑุง ูฺฏู ุฏุงุดุชู ุจุงุดุฏ ุนูู -= ฺฉูุฏุ ูุชุฌูโุงุด ูุนุงุฏู ุงุฎุชุตุงุต ููุฏุงุฑ null ุจู ุขู ูุชุบุฑ ุฎูุงูุฏ ุจูุฏ.</li>
</ul>
<p>โก ฺฉ ูฺฉุชู ููู ุฏฺฏุฑ:<br>
Delegates ุฏุฑ ุณโุดุงุฑูพ immutable ูุณุชูุฏ. ุนู ููุช ุดูุง += ุง -= ุฑุง ุงุณุชูุงุฏู ูโฺฉูุฏุ ุฏุฑ ูุงูุน ฺฉ ูููููโ ุฌุฏุฏ ุงุฒ delegate ุณุงุฎุชู ูโุดูุฏ ู ุจู ูุชุบุฑ ููุฌูุฏ ุงุฎุชุตุงุต ุฏุงุฏู ูโุดูุฏ.</p>
<p>๐ข ุงฺฏุฑ ฺฉ delegate ฺูุฏูพุฎุด (multicast delegate) ุฏุงุฑุง ููุน ุจุงุฒฺฏุดุช ุบุฑ ุงุฒ void ุจุงุดุฏุ ููุฏุงุฑ ุจุงุฒฺฏุดุช ฺฉู ุดูุง ุฏุฑุงูุช ูโฺฉูุฏ ูุฑุจูุท ุจู ุขุฎุฑู ูุชุฏ ุงุณุช ฺฉู ุงุฌุฑุง ุดุฏู ุงุณุช. ูุชุฏูุง ูุจู ููฺูุงู ุงุฌุฑุง ูโุดููุฏุ ุงูุง ููุฏุงุฑ ุจุงุฒฺฏุดุช ุขูโูุง ูุงุฏุฏู ฺฏุฑูุชู ูโุดูุฏ.<br>
(ุจู ููู ุฏููุ ุฏุฑ ุจุดุชุฑ ููุงุฑุฏ ฺฉู ุงุฒ multicast delegate ุงุณุชูุงุฏู ูโุดูุฏุ ุขูโูุง void ุจุฑูโฺฏุฑุฏุงููุฏ.)</p>
<p>๐งฉ ุชูุงู ุงููุงุน delegate ุจู ุทูุฑ ุถูู ุงุฒ System.MulticastDelegate ุงุฑุซโุจุฑ ูโฺฉููุฏ ฺฉู ุฎูุฏุด ุงุฒ System.Delegate ุงุฑุซโุจุฑ ูโฺฉูุฏ.<br>
ฺฉุงููพุงูุฑ ุณโุดุงุฑูพ ุชูุงู ุนููุงุช +ุ -ุ += ู -= ุฑู delegateูุง ุฑุง ุจู ูุชุฏูุง ุงุณุชุงุชฺฉ Combine ู Remove ุงุฒ ฺฉูุงุณ System.Delegate ุชุจุฏู ูโฺฉูุฏ.</p>
<h4>ูุซุงู Multicast Delegate ๐๏ธ</h4>
<p>ูุฑุถ ฺฉูุฏ ฺฉ ูุชุฏ ููุดุชูโุงุฏ ฺฉู ุงุฌุฑุง ุขู ุฒูุงู ุฒุงุฏ ูโุจุฑุฏ. ุงู ูุชุฏ ูโุชูุงูุฏ ุจู ุทูุฑ ููุธู ูุฒุงู ูพุดุฑูุช ฺฉุงุฑ ุฑุง ุจู ูุฑุงุฎูุงููุฏู ฺฏุฒุงุฑุด ุฏูุฏุ ุงู ฺฉุงุฑ ุจุง ูุฑุงุฎูุงู ฺฉ delegate ุงูุฌุงู ูโุดูุฏ.</p>
<p>ุฏุฑ ูุซุงู ุฒุฑุ ูุชุฏ HardWork ฺฉ ูพุงุฑุงูุชุฑ ุงุฒ ููุน delegate ุจู ูุงู ProgressReporter ุฏุฑุงูุช ูโฺฉูุฏ ู ุงุฒ ุขู ุจุฑุง ูุดุงู ุฏุงุฏู ูพุดุฑูุช ุงุณุชูุงุฏู ูโฺฉูุฏ:</p>
<pre class="hljs"><code><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-built_in">delegate</span> <span class="hljs-keyword">void</span> <span class="hljs-title">ProgressReporter</span>(<span class="hljs-params"><span class="hljs-built_in">int</span> percentComplete</span>)</span>;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Util</span>
{
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">HardWork</span>(<span class="hljs-params">ProgressReporter p</span>)</span>
    {
        <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++)
        {
            p(i * <span class="hljs-number">10</span>);                           <span class="hljs-comment">// ูุฑุงุฎูุงู delegate</span>
            System.Threading.Thread.Sleep(<span class="hljs-number">100</span>);  <span class="hljs-comment">// ุดุจูโุณุงุฒ ฺฉุงุฑ ุณูฺฏู</span>
        }
    }
}
</code></pre>
<p>ุจุฑุง ูุงูุชูุฑ ฺฉุฑุฏู ูุฒุงู ูพุดุฑูุชุ ูโุชูุงูู ฺฉ ูููููโ Multicast Delegate ุจู ูุงู p ุจุณุงุฒู ุชุง ูพุดุฑูุช ููโุฒูุงู ุชูุณุท ุฏู ูุชุฏ ูุณุชูู ุจุฑุฑุณ ุดูุฏ:</p>
<pre class="hljs"><code>ProgressReporter p = WriteProgressToConsole;
p += WriteProgressToFile;

Util.HardWork(p);

<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">WriteProgressToConsole</span>(<span class="hljs-params"><span class="hljs-built_in">int</span> percentComplete</span>)</span>
    =&gt; Console.WriteLine(percentComplete);

<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">WriteProgressToFile</span>(<span class="hljs-params"><span class="hljs-built_in">int</span> percentComplete</span>)</span>
    =&gt; System.IO.File.WriteAllText(<span class="hljs-string">&quot;progress.txt&quot;</span>,
                                    percentComplete.ToString());
</code></pre>
<p>๐ ุฏุฑ ุงูุฌุง ฺู ุงุชูุงู ูโุงูุชุฏุ</p>
<ol>
<li>
<p>ุงุจุชุฏุง ฺฉ delegate ุงุฒ ููุน ProgressReporter ุณุงุฎุชู ูโุดูุฏ ู ุจู ูุชุฏ WriteProgressToConsole ุงุดุงุฑู ูโฺฉูุฏ.</p>
</li>
<li>
<p>ุณูพุณ ุจุง ุนููฺฏุฑ +=ุ ูุชุฏ WriteProgressToFile ูู ุจู ุขู ุงุถุงูู ูโุดูุฏ.<br>
ุนู delegate p ุงฺฉููู ฺฉ multicast delegate ุงุณุช.</p>
</li>
<li>
<p>ูุฑ ุจุงุฑ ฺฉู ูุชุฏ HardWork ูพุดุฑูุช ุฑุง ฺฏุฒุงุฑุด ูโุฏูุฏ (p(i * 10))ุ ูุฑ ุฏู ูุชุฏ ุงุฌุฑุง ูโุดููุฏ:</p>
</li>
</ol>
<ul>
<li>
<p>WriteProgressToConsole ููุฏุงุฑ ูพุดุฑูุช ุฑุง ุฑู ฺฉูุณูู ฺุงูพ ูโฺฉูุฏ.</p>
</li>
<li>
<p>WriteProgressToFile ููุฏุงุฑ ูพุดุฑูุช ุฑุง ุฏุฑ ฺฉ ูุงู progress.txt ุฐุฎุฑู ูโฺฉูุฏ.</p>
</li>
</ul>
<p>๐ ูุชุฌู ููุง:</p>
<ul>
<li>
<p>ุดูุง ููุฒูุงู ุฏุฑ ฺฉูุณูู ูโุจูุฏ ฺฉู ูพุดุฑูุช ฺฉุงุฑ ฺูุฏ ุฏุฑุตุฏ ุงุณุช.</p>
</li>
<li>
<p>ฺฉ ูุงู ูุชู ูู ุฏุงุฑุฏ ฺฉู ููุงู ุงุทูุงุนุงุช ุฑุง ุฐุฎุฑู ูโฺฉูุฏ.</p>
</li>
</ul>
<h3>ุงููุงุน Delegate ุนููู (Generic Delegate Types) โก</h3>
<p>ฺฉ delegate ูโุชูุงูุฏ ุดุงูู ูพุงุฑุงูุชุฑูุง ุนููู (Generic Type Parameters) ุจุงุดุฏ:</p>
<pre class="hljs"><code><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-built_in">delegate</span> T <span class="hljs-title">Transformer</span>&lt;<span class="hljs-title">T</span>&gt;(<span class="hljs-params">T arg</span>)</span>;
</code></pre>
<p>ุจุง ฺูู ุชุนุฑู ูโุชูุงูู ฺฉ ูุชุฏ ุงุจุฒุงุฑ ุนููู (Utility Method) ุจููุณู ฺฉู ุฑู ูุฑ ููุน ุฏุงุฏูโุง ฺฉุงุฑ ฺฉูุฏ:</p>
<pre class="hljs"><code><span class="hljs-built_in">int</span>[] values = { <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span> };
Util.Transform(values, Square);      <span class="hljs-comment">// ุงุชุตุงู ูุชุฏ Square</span>

<span class="hljs-keyword">foreach</span> (<span class="hljs-built_in">int</span> i <span class="hljs-keyword">in</span> values)
    Console.Write(i + <span class="hljs-string">&quot;  &quot;</span>);         <span class="hljs-comment">// ุฎุฑูุฌ: 1   4   9</span>

<span class="hljs-function"><span class="hljs-built_in">int</span> <span class="hljs-title">Square</span>(<span class="hljs-params"><span class="hljs-built_in">int</span> x</span>)</span> =&gt; x * x;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Util</span>
{
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Transform</span>&lt;<span class="hljs-title">T</span>&gt;(<span class="hljs-params">T[] values, Transformer&lt;T&gt; t</span>)</span>
    {
        <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>; i &lt; values.Length; i++)
            values[i] = t(values[i]);
    }
}
</code></pre>
<h3>Delegates ุขูุงุฏู: Func ู Action โ</h3>
<p>ุจุง ูุนุฑู generic delegatesุ ุงู ุงูฺฉุงู ูุฑุงูู ุดุฏ ฺฉู ูุฌููุนูโุง ฺฉูฺฺฉ ุงุฒ delegateูุง ุทุฑุงุญ ุดููุฏ ฺฉู ุขูโูุฏุฑ ุนููู ู ุงูุนุทุงูโูพุฐุฑ ุจุงุดูุฏ ฺฉู ุจุฑุง ูุชุฏูุง ุจุง ูุฑ ููุน ุฎุฑูุฌ ู ูุฑ ุชุนุฏุงุฏ (ูุนููู) ุขุฑฺฏููุงู ูุงุจู ุงุณุชูุงุฏู ุจุงุดูุฏ.</p>
<p>ุงู delegateูุง ููุงู Func ู Action ูุณุชูุฏ ฺฉู ุฏุฑ ูุถุง ูุงู System ุชุนุฑู ุดุฏูโุงูุฏ:</p>
<pre class="hljs"><code><span class="hljs-function"><span class="hljs-built_in">delegate</span> TResult <span class="hljs-title">Func</span>&lt;<span class="hljs-keyword">out</span> <span class="hljs-title">TResult</span>&gt;()</span>;                
<span class="hljs-function"><span class="hljs-built_in">delegate</span> TResult <span class="hljs-title">Func</span>&lt;<span class="hljs-keyword">in</span> <span class="hljs-title">T</span>, <span class="hljs-keyword">out</span> <span class="hljs-title">TResult</span>&gt;(<span class="hljs-params">T arg</span>)</span>;          
<span class="hljs-function"><span class="hljs-built_in">delegate</span> TResult <span class="hljs-title">Func</span>&lt;<span class="hljs-keyword">in</span> <span class="hljs-title">T1</span>, <span class="hljs-keyword">in</span> <span class="hljs-title">T2</span>, <span class="hljs-keyword">out</span> <span class="hljs-title">TResult</span>&gt;(<span class="hljs-params">T1 arg1, T2 arg2</span>)</span>;
<span class="hljs-comment">// ... ุงุฏุงูู ุฏุงุฑุฏ ุชุง 16 ูพุงุฑุงูุชุฑ</span>

<span class="hljs-function"><span class="hljs-built_in">delegate</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Action</span>()</span>;
<span class="hljs-function"><span class="hljs-built_in">delegate</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Action</span>&lt;<span class="hljs-keyword">in</span> <span class="hljs-title">T</span>&gt;(<span class="hljs-params">T arg</span>)</span>;
<span class="hljs-function"><span class="hljs-built_in">delegate</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Action</span>&lt;<span class="hljs-keyword">in</span> <span class="hljs-title">T1</span>, <span class="hljs-keyword">in</span> <span class="hljs-title">T2</span>&gt;(<span class="hljs-params">T1 arg1, T2 arg2</span>)</span>;
<span class="hljs-comment">// ... ุงุฏุงูู ุฏุงุฑุฏ ุชุง 16 ูพุงุฑุงูุชุฑ</span>
</code></pre>
<p>๐ ุงูโูุง ุจุณุงุฑ ุนููู ู ูุฏุฑุชููุฏ ูุณุชูุฏ.</p>
<p><strong>ุฌุงฺฏุฒู Transformer ุจุง Func ๐</strong></p>
<p>ุฏุฑ ูุซุงู ูุจูุ ุจู ุฌุง ุชุนุฑู delegate ุงุฎุชุตุงุต Transformerุ ูโุชูุงูุณุชู ุงุฒ Func ุงุณุชูุงุฏู ฺฉูู:</p>
<pre class="hljs"><code><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Transform</span>&lt;<span class="hljs-title">T</span>&gt;(<span class="hljs-params">T[] values, Func&lt;T, T&gt; transformer</span>)</span>
{
    <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>; i &lt; values.Length; i++)
        values[i] = transformer(values[i]);
}
</code></pre>
<p>ุฏุฑ ุงูุฌุง:</p>
<ul>
<li>
<p>Func&lt;T, T&gt; ุนู ฺฉ delegate ฺฉู ฺฉ ูุฑูุฏ ุงุฒ ููุน T ูโฺฏุฑุฏ ู ุฎุฑูุฌ ูู ุงุฒ ููุงู ููุน T ุจุฑูโฺฏุฑุฏุงูุฏ.</p>
</li>
<li>
<p>ุฏููุงู ููุงู ฺุฒ ุงุณุช ฺฉู ูุจูุงู ุจุง Transformer<T> ุณุงุฎุชู ุจูุฏู.</p>
</li>
</ul>
<p><strong>ูุญุฏูุฏุชโูุง ๐ง</strong></p>
<p>ุชููุง ุณูุงุฑููุง ุนูู ฺฉู Func ู Action ูพูุดุด ููโุฏููุฏุ ููุงุฑุฏ ูุณุชูุฏ ฺฉู ุดุงูู ูพุงุฑุงูุชุฑูุง ref/out ุง pointer ุจุงุดูุฏ.</p>
<p><strong>ูฺฉุชู ุชุงุฑุฎ ๐ฐ๏ธ</strong></p>
<p>ุฒูุงู ฺฉู C# ุจุฑุง ุงููู ุจุงุฑ ูุนุฑู ุดุฏุ ูููุฒ generics ูุฌูุฏ ูุฏุงุดุช. ุจู ููู ุฏููุ Func ู Action ูู ูุฌูุฏ ูุฏุงุดุชูุฏ.<br>
ุจู ููู ุฎุงุทุฑุ ุจุฎุด ุฒุงุฏ ุงุฒ ฺฉุชุงุจุฎุงููโ .NET ุงุฒ delegateูุง ุณูุงุฑุด ุงุณุชูุงุฏู ูโฺฉูุฏุ ูู ุงุฒ Func ู Action.</p>
<h3>ููุงุณู Delegateโูุง ู Interfaceโูุง โ๏ธ</h3>
<p>ูุฑ ูุณุฆููโุง ฺฉู ุจุง ฺฉ delegate ุญู ูโุดูุฏุ ูโุชูุงูุฏ ุจุง ฺฉ interface ูู ุญู ุดูุฏ.</p>
<p>ุจูโุนููุงู ูุซุงูุ ูโุชูุงูู ูููููโ ุงูููโูุงู ุฑุง ุจุง ุงุณุชูุงุฏู ุงุฒ ฺฉ interface ุจู ูุงู ITransformer ุจุงุฒููุณ ฺฉููุ ุจู ุฌุง ุงูฺฉู ุงุฒ delegate ุงุณุชูุงุฏู ฺฉูู:</p>
<pre class="hljs"><code><span class="hljs-built_in">int</span>[] values = { <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span> };
Util.TransformAll(values, <span class="hljs-keyword">new</span> Squarer());

<span class="hljs-keyword">foreach</span> (<span class="hljs-built_in">int</span> i <span class="hljs-keyword">in</span> values)
    Console.WriteLine(i);

<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title">ITransformer</span>
{
    <span class="hljs-function"><span class="hljs-built_in">int</span> <span class="hljs-title">Transform</span>(<span class="hljs-params"><span class="hljs-built_in">int</span> x</span>)</span>;
}

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Util</span>
{
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">TransformAll</span>(<span class="hljs-params"><span class="hljs-built_in">int</span>[] values, ITransformer t</span>)</span>
    {
        <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>; i &lt; values.Length; i++)
            values[i] = t.Transform(values[i]);
    }
}

<span class="hljs-keyword">class</span> <span class="hljs-title">Squarer</span> : <span class="hljs-title">ITransformer</span>
{
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-built_in">int</span> <span class="hljs-title">Transform</span>(<span class="hljs-params"><span class="hljs-built_in">int</span> x</span>)</span> =&gt; x * x;
}
</code></pre>
<p>ฺู ุฒูุงู delegate ุงูุชุฎุงุจ ุจูุชุฑ ุงุฒ interface ุงุณุชุ โ</p>
<p>ุทุฑุงุญ ุจุง delegate ููฺฉู ุงุณุช ุงูุชุฎุงุจ ุจูุชุฑ ุจุงุดุฏ ุงฺฏุฑ ฺฉ ุง ฺูุฏ ููุฑุฏ ุฒุฑ ุจุฑูุฑุงุฑ ุจุงุดูุฏ:</p>
<ul>
<li>
<p>๐น interface ููุท ฺฉ ูุชุฏ ุชุนุฑู ฺฉุฑุฏู ุจุงุดุฏ.</p>
</li>
<li>
<p>๐น ูุงุฒ ุจู multicast (ุงุชุตุงู ฺูุฏ ูุชุฏ ุจู ฺฉ delegate) ุฏุงุดุชู ุจุงุดู.</p>
</li>
<li>
<p>๐น ฺฉ subscriber ูุฌุจูุฑ ุจุงุดุฏ ฺูุฏ ุจุงุฑ ฺฉ interface ุฑุง ูพุงุฏูโุณุงุฒ ฺฉูุฏ.</p>
</li>
</ul>
<p><strong>ุจุฑุฑุณ ูุซุงู ๐</strong></p>
<p>ุฏุฑ ูุซุงู ITransformer:</p>
<ul>
<li>
<p>ูุง ูุงุฒ ุจู multicast ูุฏุงุฑู.</p>
</li>
<li>
<p>ุงูุง interface ููุท ฺฉ ูุชุฏ (Transform) ุชุนุฑู ฺฉุฑุฏู ุงุณุช.</p>
</li>
<li>
<p>ุงุฒ ุทุฑู ููฺฉู ุงุณุช ุจุฎูุงูู ฺูุฏู ุชุจุฏู ูุฎุชูู (ูุซูุงู ูุฑุจุน ุง ูฺฉุนุจ) ุฑุง ูพุงุฏูโุณุงุฒ ฺฉูู.</p>
</li>
</ul>
<p>ุฏุฑ ฺูู ุญุงูุชุ ุงฺฏุฑ ุงุฒ interface ุงุณุชูุงุฏู ฺฉููุ ูุฌุจูุฑ ูโุดูู ุจุฑุง ูุฑ ุชุจุฏู ฺฉ ฺฉูุงุณ ุฌุฏุงฺฏุงูู ุจุณุงุฒูุ ฺูู ฺฉ ฺฉูุงุณ ููุท ฺฉ ุจุงุฑ ูโุชูุงูุฏ ITransformer ุฑุง ูพุงุฏูโุณุงุฒ ฺฉูุฏ. ุงู ฺฉุงุฑ ุฏุณุชโููพุงฺฏุฑ ู ุชฺฉุฑุงุฑ ูโุดูุฏ.</p>
<p>ูุซูุงู:</p>
<pre class="hljs"><code><span class="hljs-built_in">int</span>[] values = { <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span> };
Util.TransformAll(values, <span class="hljs-keyword">new</span> Cuber());

<span class="hljs-keyword">foreach</span> (<span class="hljs-built_in">int</span> i <span class="hljs-keyword">in</span> values)
    Console.WriteLine(i);

<span class="hljs-keyword">class</span> <span class="hljs-title">Squarer</span> : <span class="hljs-title">ITransformer</span>
{
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-built_in">int</span> <span class="hljs-title">Transform</span>(<span class="hljs-params"><span class="hljs-built_in">int</span> x</span>)</span> =&gt; x * x;
}

<span class="hljs-keyword">class</span> <span class="hljs-title">Cuber</span> : <span class="hljs-title">ITransformer</span>
{
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-built_in">int</span> <span class="hljs-title">Transform</span>(<span class="hljs-params"><span class="hljs-built_in">int</span> x</span>)</span> =&gt; x * x * x;
}
</code></pre>
<p>๐ ูุชุฌู:</p>
<ul>
<li>
<p>ุจุง delegateูุงุ ูพุงุฏูโุณุงุฒ ุณุงุฏูโุชุฑ ู ููุนุทูโุชุฑ ุงุณุช (ูโุชูุงูู ุจูโุฑุงุญุช ูุชุฏูุง ูุฎุชูู ูุซู ูุฑุจุน ุง ูฺฉุนุจ ุฑุง ูพุงุณ ุจุฏูู).</p>
</li>
<li>
<p>ุจุง interfaceูุงุ ูุฌุจูุฑู ุจุฑุง ูุฑ ุนููฺฏุฑ ฺฉ ฺฉูุงุณ ุฌุฏุฏ ุจุณุงุฒู.</p>
</li>
</ul>
<h3>ุณุงุฒฺฏุงุฑ Delegate ูุง โ๏ธ</h3>
<h4>ุณุงุฒฺฏุงุฑ ููุน (Type Compatibility) ๐ท๏ธ</h4>
<p>ุชูุงู ููุนโูุง delegate ุจุง ูู ูุงุณุงุฒฺฏุงุฑ ูุณุชูุฏุ ุญุช ุงฺฏุฑ ุงูุถุง (signature) ุขูโูุง ฺฉ ุจุงุดุฏ:</p>
<pre class="hljs"><code>D1 d1 = Method1;
D2 d2 = d1;   <span class="hljs-comment">// โ ุฎุทุง ุฒูุงู ฺฉุงููพุงู</span>

<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Method1</span>()</span> { }

<span class="hljs-function"><span class="hljs-built_in">delegate</span> <span class="hljs-keyword">void</span> <span class="hljs-title">D1</span>()</span>;
<span class="hljs-function"><span class="hljs-built_in">delegate</span> <span class="hljs-keyword">void</span> <span class="hljs-title">D2</span>()</span>;
</code></pre>
<p>๐น ุงูุง ุงู ุญุงูุช ูุฌุงุฒ ุงุณุช:</p>
<pre class="hljs"><code>D2 d2 = new D2(d1);   // โ ุฏุฑุณุช
</code></pre>
<p><strong>ููุงุณูโ ุจุฑุงุจุฑ (Equality) โ</strong></p>
<p>ุฏู ูููููโ delegate ููุช ุจุฑุงุจุฑ ูุญุณูุจ ูโุดููุฏ ฺฉู ุจู ฺฉ ูุชุฏ ฺฉุณุงู ุงุดุงุฑู ฺฉููุฏ:</p>
<pre class="hljs"><code>D d1 = Method1;
D d2 = Method1;

Console.WriteLine(d1 == d2);   <span class="hljs-comment">// True</span>

<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Method1</span>()</span> { }

<span class="hljs-function"><span class="hljs-built_in">delegate</span> <span class="hljs-keyword">void</span> <span class="hljs-title">D</span>()</span>;
</code></pre>
<p>๐น ุฏุฑ ููุฑุฏ multicast delegateโูุง ููุ ุจุฑุงุจุฑ ููุช ุจุฑูุฑุงุฑ ุงุณุช ฺฉู ุจู ููุงู ูุชุฏูุง ู ุจู ููุงู ุชุฑุชุจ ุงุดุงุฑู ฺฉููุฏ.</p>
<h4>ุณุงุฒฺฏุงุฑ ูพุงุฑุงูุชุฑ (Parameter Compatibility) ๐</h4>
<p>ููุช ฺฉ ูุชุฏ ุฑุง ูุฑุงุฎูุงู ูโฺฉูุฏุ ูโุชูุงูุฏ ุขุฑฺฏููุงู ุจุฏูุฏ ฺฉู ุงุฒ ููุน ุฎุงุตโุชุฑ ุงุฒ ูพุงุฑุงูุชุฑ ูุชุฏ ุจุงุดุฏ. ุงู ุฑูุชุงุฑ ูุนููู polymorphism ุงุณุช.</p>
<p>ุจู ููู ุฏููุ ฺฉ delegate ูู ูโุชูุงูุฏ ูพุงุฑุงูุชุฑูุง ุฎุงุตโุชุฑ ุงุฒ ูุชุฏ ูุฏู ุฎูุฏ ุฏุงุดุชู ุจุงุดุฏ. ุงู ูฺฺฏ ุฑุง contravariance ูโูุงููุฏ.</p>
<p>ูุซุงู:</p>
<pre class="hljs"><code>StringAction sa = <span class="hljs-keyword">new</span> StringAction(ActOnObject);
sa(<span class="hljs-string">&quot;hello&quot;</span>);

<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">ActOnObject</span>(<span class="hljs-params"><span class="hljs-built_in">object</span> o</span>)</span> =&gt; Console.WriteLine(o);   <span class="hljs-comment">// ุฎุฑูุฌ: hello</span>

<span class="hljs-function"><span class="hljs-built_in">delegate</span> <span class="hljs-keyword">void</span> <span class="hljs-title">StringAction</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> s</span>)</span>;
</code></pre>
<p>๐น ุฏุฑ ุงูุฌุง StringAction ฺฉ ูุชุฏ ุฑุง ุจุง ูพุงุฑุงูุชุฑ string ูุฑุงุฎูุงู ูโฺฉูุฏ.<br>
๐น ุงูุง ูุชุฏ ฺฉู ูุงูุนุง ุงุฌุฑุง ูโุดูุฏ (ActOnObject) ูพุงุฑุงูุชุฑุด ุงุฒ ููุน object ุงุณุช.<br>
๐น ุฏุฑ ุงู ุญุงูุชุ ุขุฑฺฏููุงู string ุจูโุทูุฑ ุฎูุฏฺฉุงุฑ ุชุจุฏู ุจู object (upcast) ูโุดูุฏ.</p>
<p><strong>3. ุงุฑุชุจุงุท ุจุง ุงูฺฏู ุงุณุชุงูุฏุงุฑุฏ Event ๐ฏ</strong></p>
<p>ุงูฺฏู ุงุณุชุงูุฏุงุฑุฏ event ุฏุฑ C# ุทูุฑ ุทุฑุงุญ ุดุฏู ุงุณุช ฺฉู ุงุฒ contravariance ุงุณุชูุงุฏู ฺฉูุฏ.</p>
<ul>
<li>
<p>ูููโ ฺฉูุงุณโูุง ุฑูุฏุงุฏ ุงุฒ ฺฉูุงุณ ูพุงูโ ูุดุชุฑฺฉ EventArgs ุงุฑุซโุจุฑ ูโฺฉููุฏ.</p>
</li>
<li>
<p>ุจูุงุจุฑุงู ูโุชูุงูุฏ ฺฉ ูุชุฏ ุฏุงุดุชู ุจุงุดุฏ ฺฉู ุชูุณุท ุฏู delegate ูุฎุชูู ูุฑุงุฎูุงู ุดูุฏ:</p>
<ul>
<li>
<p>ฺฉ ุฑูุฏุงุฏ MouseEventArgs ูพุงุณ ุจุฏูุฏ ๐ฑ๏ธ</p>
</li>
<li>
<p>ุฏฺฏุฑ KeyEventArgs ูพุงุณ ุจุฏูุฏ โจ๏ธ</p>
</li>
</ul>
</li>
</ul>
<p>ุงู ฺฉุงุฑ ุงูุนุทุงูโูพุฐุฑ ุจุงูุง ุฏุฑ ูุฏุฑุช ุฑูุฏุงุฏูุง ุจู ุดูุง ูโุฏูุฏ.</p>
<p>๐ ุฎูุงุตู:</p>
<ul>
<li>
<p>delegate type ูุง ุญุช ุจุง ุงูุถุง ฺฉุณุงู ูู ูุงุณุงุฒฺฏุงุฑ ูุณุชูุฏ.</p>
</li>
<li>
<p>multicast delegateูุง ุจุฑุงุจุฑูุฏ ุงฺฏุฑ ุฏููุง ููุงู ูุชุฏูุง ู ุชุฑุชุจ ุฑุง ุฏุงุดุชู ุจุงุดูุฏ.</p>
</li>
<li>
<p>contravariance ุงุฌุงุฒู ูโุฏูุฏ ูุชุฏ ูุฏูุ ูพุงุฑุงูุชุฑ ุนุงูโุชุฑ ุงุฒ delegate ุฏุงุดุชู ุจุงุดุฏ.</p>
</li>
<li>
<p>event pattern ุงุฒ ููู ูฺฺฏ ุจุฑุง ูพุดุชุจุงู ุงุฒ ุงููุงุน ูุฎุชูู ุฑูุฏุงุฏูุง ุงุณุชูุงุฏู ูโฺฉูุฏ.</p>
</li>
</ul>
<h4>ุณุงุฒฺฏุงุฑ ููุน ุจุงุฒฺฏุดุช ุฏุฑ Delegateูุง (Return Type Compatibility) ๐</h4>
<p>ููุงูโุทูุฑ ฺฉู ููุช ฺฉ ูุชุฏ ุฑุง ูุฑุงุฎูุงู ูโฺฉูุฏ ููฺฉู ุงุณุช ููุน ุฎุงุตโุชุฑ ุงุฒ ฺุฒ ฺฉู ุงูุชุธุงุฑ ุฏุงุดุชุฏ ุจุฑฺฏุฑุฏุฏ (ุฑูุชุงุฑ ูุนููู polymorphism)ุ ุฏุฑ ููุฑุฏ delegateโูุง ูู ููู ููุถูุน ุตุงุฏู ุงุณุช.</p>
<p>ุนู ูุชุฏ ูุฏู ฺฉ delegate ูโุชูุงูุฏ ููุน ุจุงุฒฺฏุดุช ุฎุงุตโุชุฑ ุงุฒ ฺุฒ ฺฉู delegate ุชุนุฑู ฺฉุฑุฏู ุฏุงุดุชู ุจุงุดุฏ.<br>
ุงู ูฺฺฏ ุฑุง covariance ูโูุงููุฏ.</p>
<p>ูุซุงู: Covariance ุฏุฑ ููุน ุจุงุฒฺฏุดุช ๐</p>
<pre class="hljs"><code>ObjectRetriever o = <span class="hljs-keyword">new</span> ObjectRetriever(RetrieveString);
<span class="hljs-built_in">object</span> result = o();
Console.WriteLine(result);   <span class="hljs-comment">// hello</span>

<span class="hljs-function"><span class="hljs-built_in">string</span> <span class="hljs-title">RetrieveString</span>()</span> =&gt; <span class="hljs-string">&quot;hello&quot;</span>;

<span class="hljs-function"><span class="hljs-built_in">delegate</span> <span class="hljs-built_in">object</span> <span class="hljs-title">ObjectRetriever</span>()</span>;
</code></pre>
<p>๐น ุงูุฌุง ObjectRetriever ุงูุชุธุงุฑ ุฏุงุฑุฏ ูุชุฏ ฺฉู ุจู ุขู ูุชุตู ุงุณุชุ ฺฉ object ุจุฑฺฏุฑุฏุงูุฏ.<br>
๐น ุงูุง ุฏุฑ ูุงูุนุชุ ูุชุฏ RetrieveString ฺฉ string ุจุฑูโฺฏุฑุฏุงูุฏ.<br>
๐น ฺูู string ุฒุฑฺฉูุงุณ object ุงุณุชุ ุงู ูุฌุงุฒ ุงุณุช โ.</p>
<p>๐ ูพุณ: ููุน ุจุงุฒฺฏุดุช delegate ูุง covariant ุงุณุช.</p>
<h4>ูุงุฑุงูุณ ุฏุฑ Delegateูุง ุฌูุฑฺฉ โ๏ธ</h4>
<p>ุฏุฑ ูุตู ณ ฺฏูุชู ฺฉู ุงูุชุฑูุณโูุง ุฌูุฑฺฉ ูโุชูุงููุฏ ุงุฒ covariant ู contravariant ุงุณุชูุงุฏู ฺฉููุฏ.<br>
ุงู ูุงุจูุช ุจุฑุง delegateโูุง ุฌูุฑฺฉ ูู ูุฌูุฏ ุฏุงุฑุฏ.</p>
<p><strong>ููุงูู ุฎูุจ ุจุฑุง ุชุนุฑู delegate ุฌูุฑฺฉ:</strong></p>
<p>ุงฺฏุฑ ูพุงุฑุงูุชุฑ ููุน (Type Parameter) ููุท ุฏุฑ ุฎุฑูุฌ ุงุณุชูุงุฏู ูโุดูุฏ โ ุจุง out (covariant) ุนูุงูุชโฺฏุฐุงุฑ ุดูุฏ.</p>
<p>ุงฺฏุฑ ูพุงุฑุงูุชุฑ ููุน ููุท ุฏุฑ ูุฑูุฏ ุงุณุชูุงุฏู ูโุดูุฏ โ ุจุง in (contravariant) ุนูุงูุชโฺฏุฐุงุฑ ุดูุฏ.</p>
<p><strong>ูุซุงู ฑ: Covariance ุฏุฑ ุฌูุฑฺฉโูุง (ุจุง Func) ๐ค</strong></p>
<p>ุฏุฑ ูุถุง ูุงู System ุฏุงุฑู:</p>
<pre class="hljs"><code><span class="hljs-function"><span class="hljs-built_in">delegate</span> TResult <span class="hljs-title">Func</span>&lt;<span class="hljs-keyword">out</span> <span class="hljs-title">TResult</span>&gt;()</span>;
</code></pre>
<p>ุงู ุจุงุนุซ ูโุดูุฏ ุจุชูุงูู ุจููุณู:</p>
<pre class="hljs"><code>Func&lt;<span class="hljs-built_in">string</span>&gt; x = () =&gt; <span class="hljs-string">&quot;Hello!&quot;</span>;
Func&lt;<span class="hljs-built_in">object</span>&gt; y = x;   <span class="hljs-comment">// โ ูุฌุงุฒ ุจู ุฎุงุทุฑ covariance</span>
</code></pre>
<p>๐น ุนู ูโุชูุงูู Func<string> ุฑุง ุจู Func<object> ุชุจุฏู ฺฉูู ฺูู string ุฒุฑฺฉูุงุณ object ุงุณุช.</p>
<p><strong>ูุซุงู ฒ: Contravariance ุฏุฑ ุฌูุฑฺฉโูุง (ุจุง Action) ๐ฅ</strong></p>
<p>ุจุงุฒ ูู ุฏุฑ ูุถุง ูุงู System:</p>
<pre class="hljs"><code><span class="hljs-function"><span class="hljs-built_in">delegate</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Action</span>&lt;<span class="hljs-keyword">in</span> <span class="hljs-title">T</span>&gt;(<span class="hljs-params">T arg</span>)</span>;
</code></pre>
<p>ุงู ุจุงุนุซ ูโุดูุฏ:</p>
<pre class="hljs"><code>Action&lt;<span class="hljs-built_in">object</span>&gt; x = obj =&gt; Console.WriteLine(obj);
Action&lt;<span class="hljs-built_in">string</span>&gt; y = x;   <span class="hljs-comment">// โ ูุฌุงุฒ ุจู ุฎุงุทุฑ contravariance</span>
</code></pre>
<p>๐น ุนู ูโุชูุงูู Action<object> ุฑุง ุจู Action<string> ุชุจุฏู ฺฉูู ฺูู ูุชุฏ ฺฉู ุงูุชุธุงุฑ ุฏุฑุงูุช object ุฏุงุฑุฏุ ูโุชูุงูุฏ string ูู ุจฺฏุฑุฏ.</p>
<p>๐ ุฎูุงุตู:</p>
<ul>
<li>
<p>ููุน ุจุงุฒฺฏุดุช delegate ูโุชูุงูุฏ ุฎุงุตโุชุฑ ุงุฒ ููุน ุชุนุฑูโุดุฏู ุจุงุดุฏ โ ุงู covariance ุงุณุช.</p>
</li>
<li>
<p>ุฏุฑ delegate ุฌูุฑฺฉ:</p>
<ul>
<li>
<p>ููุน ุฎุฑูุฌ (out) โ covariant ๐ค</p>
</li>
<li>
<p>ููุน ูุฑูุฏ (in) โ contravariant ๐ฅ</p>
</li>
</ul>
</li>
</ul>
<p>ุงู ุจุงุนุซ ูโุดูุฏ ุชุจุฏูโูุง ุจู delegateูุง ุจูโุตูุฑุช ุทุจุน ู ุจุฑ ุงุณุงุณ ุงุฑุซโุจุฑ ุงูุฌุงู ุดููุฏ.</p>
<h3>ุฑูุฏุงุฏูุง (Events)</h3>
<p>ููฺฏุงู ุงุณุชูุงุฏู ุงุฒ <strong>delegates</strong>ุ ุฏู ููุด ูุนูููุงู ุธุงูุฑ ูโุดููุฏ: <strong>broadcaster</strong> ู <strong>subscriber</strong>.</p>
<ul>
<li><strong>Broadcaster</strong> ููุน ุงุณุช ฺฉู ุฏุงุฑุง ฺฉ ููุฏ delegate ูโุจุงุดุฏ. ุงู ููุน ุชุตูู ูโฺฏุฑุฏ ฺฉู ฺู ุฒูุงู ูพุงู ุฑุง ูพุฎุด ฺฉูุฏุ ุจุง <strong>invoke</strong> ฺฉุฑุฏู delegate.</li>
<li><strong>Subscribers</strong> ุฏุฑุงูุชโฺฉููุฏฺฏุงู ูุฏู ูุชุฏ ูุณุชูุฏ. ฺฉ subscriber ุชุตูู ูโฺฏุฑุฏ ฺู ุฒูุงู ุดุฑูุน ุจู ฺฏูุด ุฏุงุฏู ฺฉูุฏ ู ฺู ุฒูุงู ุขู ุฑุง ูุชููู ฺฉูุฏุ ุจุง ุงุณุชูุงุฏู ุงุฒ ุนููฺฏุฑูุง <code>+=</code> ู <code>-=</code> ุฑู delegate ูุฑุจูุท ุจู broadcaster. ฺฉ subscriber ุฏุฑุจุงุฑู ุฏฺฏุฑ subscribers ุงุทูุงุน ูุฏุงุฑุฏ ู ุฏุฑ ุนููฺฉุฑุฏ ุขูโูุง ุฏุฎุงูุช ููโฺฉูุฏ.</li>
</ul>
<h3>ุฑูุฏุงุฏูุง ุฏุฑ C# ูพุดุฑูุชู โก</h3>
<p>ุฑูุฏุงุฏูุง ฺฉ ูฺฺฏ ุฒุจุงู ูุณุชูุฏ ฺฉู ุงู ุงูฺฏู ุฑุง ุฑุณู ูโฺฉููุฏ. ฺฉ <strong>event</strong> ฺฉ ุณุงุฎุชุงุฑ ุงุณุช ฺฉู ุชููุง ุฒุฑูุฌููุนูโุง ุงุฒ ูุงุจูุชโูุง delegate ุฑุง ฺฉู ุจุฑุง ูุฏู <strong>broadcaster/subscriber</strong> ูุงุฒู ุงุณุชุ ุฏุฑ ูุนุฑุถ ูุฑุงุฑ ูโุฏูุฏ. ูุฏู ุงุตู ุฑูุฏุงุฏูุง ุฌููฺฏุฑ ุงุฒ ุฏุฎุงูุช subscribers ุฏุฑ ุนููฺฉุฑุฏ ฺฉุฏฺฏุฑ ุงุณุช.</p>
<p>ุณุงุฏูโุชุฑู ุฑูุด ุจุฑุง ุชุนุฑู ฺฉ ุฑูุฏุงุฏุ ุงุณุชูุงุฏู ุงุฒ ฺฉูุฏูุงฺู <strong>event</strong> ูุจู ุงุฒ ฺฉ ุนุถู delegate ุงุณุช:</p>
<pre class="hljs"><code><span class="hljs-comment">// ุชุนุฑู delegate</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-built_in">delegate</span> <span class="hljs-keyword">void</span> <span class="hljs-title">PriceChangedHandler</span>(<span class="hljs-params"><span class="hljs-built_in">decimal</span> oldPrice, <span class="hljs-built_in">decimal</span> newPrice</span>)</span>;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Broadcaster</span>
{
    <span class="hljs-comment">// ุชุนุฑู ุฑูุฏุงุฏ</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">event</span> PriceChangedHandler PriceChanged;
}
</code></pre>
<p>ฺฉุฏ ฺฉู ุฏุงุฎู ููุน <strong>Broadcaster</strong> ูุฑุงุฑ ุฏุงุฑุฏุ ุฏุณุชุฑุณ ฺฉุงูู ุจู <strong>PriceChanged</strong> ุฏุงุฑุฏ ู ูโุชูุงูุฏ ุขู ุฑุง ูุงููุฏ ฺฉ delegate ูุนููู ูุฏุฑุช ฺฉูุฏ. ฺฉุฏูุง ุฎุงุฑุฌ ุงุฒ <strong>Broadcaster</strong> ุชููุง ูโุชูุงููุฏ ุนููุงุช <code>+=</code> ู <code>-=</code> ุฑุง ุฑู ุฑูุฏุงุฏ <strong>PriceChanged</strong> ุงูุฌุงู ุฏููุฏ.</p>
<p>โ ุงุฏุงููโ ูุชู ุฑุง ุงุฑุณุงู ฺฉูุฏ ุชุง ุชุฑุฌูู ุจุนุฏ ุฑุง ุขูุงุฏู ฺฉูู.</p>
<h3>ฺฺฏููู ุฑูุฏุงุฏูุง ุฏุฑ ุฏุฑูู ฺฉุงุฑ ูโฺฉููุฏุ ๐</h3>
<p>ููุช ฺฉ ุฑูุฏุงุฏ ุจู ุดฺฉู ุฒุฑ ุชุนุฑู ูโฺฉูุฏ:</p>
<pre class="hljs"><code><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Broadcaster</span>
{
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">event</span> PriceChangedHandler PriceChanged;
}
</code></pre>
<p>ุณู ุงุชูุงู ุฏุฑ ูพุดุช ุตุญูู ุฑุฎ ูโุฏูุฏ:</p>
<p>1๏ธโฃ ุงุจุชุฏุงุ <strong>ฺฉุงููพุงูุฑ</strong> ุชุนุฑู ุฑูุฏุงุฏ ุฑุง ุจู ฺุฒ ุดุจู ุจู ฺฉุฏ ุฒุฑ ุชุฑุฌูู ูโฺฉูุฏ:</p>
<pre class="hljs"><code>PriceChangedHandler priceChanged;   <span class="hljs-comment">// delegate ุฎุตูุต</span>

<span class="hljs-keyword">public</span> <span class="hljs-keyword">event</span> PriceChangedHandler PriceChanged
{
    <span class="hljs-keyword">add</span>    { priceChanged += <span class="hljs-keyword">value</span>; }
    <span class="hljs-keyword">remove</span> { priceChanged -= <span class="hljs-keyword">value</span>; }
}
</code></pre>
<p>ฺฉูุฏูุงฺูโูุง <strong>add</strong> ู <strong>remove</strong> ูุดุงูโุฏููุฏู <strong>accessorูุง ุฑูุฏุงุฏ ุตุฑุญ</strong> ูุณุชูุฏโฺฉู ุนููฺฉุฑุฏ ุดุจู ุจู <strong>accessorูุง property</strong> ุฏุงุฑูุฏ. ุจุนุฏุงู ุฏุฑุจุงุฑู ูุญูู ููุดุชู ุงูโูุง ุชูุถุญ ุฎูุงูู ุฏุงุฏ.</p>
<p>2๏ธโฃ ุฏููุ ฺฉุงููพุงูุฑ ุฏุงุฎู ฺฉูุงุณ <strong>Broadcaster</strong> ุจู ุฏูุจุงู ุงุฑุฌุงุนุงุช ุจู <strong>PriceChanged</strong> ูโฺฏุฑุฏุฏ ฺฉู ุนููุงุช ุฏฺฏุฑ ุบุฑ ุงุฒ <code>+=</code> ุง <code>-=</code> ุงูุฌุงู ูโุฏููุฏ ู ุขูโูุง ุฑุง ุจู ููุฏ delegate ุฒุฑู ุนู <strong>priceChanged</strong> ูุฏุงุช ูโฺฉูุฏ.</p>
<p>3๏ธโฃ ุณููุ ฺฉุงููพุงูุฑ ุนููุงุช <code>+=</code> ู <code>-=</code> ุฑู ุฑูุฏุงุฏ ุฑุง ุจู ูุฑุงุฎูุงู <strong>add</strong> ู <strong>remove</strong> accessorูุง ุฑูุฏุงุฏ ุชุฑุฌูู ูโฺฉูุฏ. ุฌุงูุจ ุงุณุช ุจุฏุงูุฏ ฺฉู ุงู ฺฉุงุฑ ุจุงุนุซ ูโุดูุฏ ุฑูุชุงุฑ <code>+=</code> ู <code>-=</code> ููุช ุฑู ุฑูุฏุงุฏูุง ุงุนูุงู ูโุดููุฏุ ููุญุตุฑุจูโูุฑุฏ ุจุงุดุฏ: ุจุฑุฎูุงู ุณุงุฑ ุณูุงุฑููุงุ ุงูโูุง ุชููุง ฺฉ ูุงูุจุฑ ุจุฑุง <code>+</code> ู <code>-</code> ุจู ููุฑุงู ุงูุชุณุงุจ ูุณุชูุฏ.</p>
<p>ูุซุงู ุฑุง ุฏุฑ ูุธุฑ ุจฺฏุฑุฏ ๐</p>
<p>ฺฉูุงุณ <strong>Stock</strong> ุฑูุฏุงุฏ <strong>PriceChanged</strong> ุฎูุฏ ุฑุง ูุฑ ุจุงุฑ ฺฉู ููุช ุณูุงู ุชุบุฑ ูโฺฉูุฏุ ูุนุงู ูโฺฉูุฏ:</p>
<pre class="hljs"><code><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-built_in">delegate</span> <span class="hljs-keyword">void</span> <span class="hljs-title">PriceChangedHandler</span>(<span class="hljs-params"><span class="hljs-built_in">decimal</span> oldPrice, <span class="hljs-built_in">decimal</span> newPrice</span>)</span>;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Stock</span>
{
    <span class="hljs-built_in">string</span> symbol;
    <span class="hljs-built_in">decimal</span> price;
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Stock</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> symbol</span>)</span> =&gt; <span class="hljs-keyword">this</span>.symbol = symbol;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">event</span> PriceChangedHandler PriceChanged;
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">decimal</span> Price
    {
        <span class="hljs-keyword">get</span> =&gt; price;
        <span class="hljs-keyword">set</span>
        {
            <span class="hljs-keyword">if</span> (price == <span class="hljs-keyword">value</span>) <span class="hljs-keyword">return</span>;   <span class="hljs-comment">// ุฎุฑูุฌ ุงฺฏุฑ ฺุฒ ุชุบุฑ ูฺฉุฑุฏู</span>
            <span class="hljs-built_in">decimal</span> oldPrice = price;
            price = <span class="hljs-keyword">value</span>;
            <span class="hljs-keyword">if</span> (PriceChanged != <span class="hljs-literal">null</span>)      <span class="hljs-comment">// ุงฺฏุฑ ูุณุช ูุฑุงุฎูุงู ุฎุงู ูุณุช</span>
                PriceChanged(oldPrice, price); <span class="hljs-comment">// ุฑูุฏุงุฏ ูุนุงู ุดูุฏ</span>
        }
    }
}
</code></pre>
<p>ุงฺฏุฑ ฺฉูุฏูุงฺู <strong>event</strong> ุฑุง ุญุฐู ฺฉูู ู <strong>PriceChanged</strong> ุจู ฺฉ ููุฏ ูุนููู delegate ุชุจุฏู ุดูุฏุ ุจุงุฒ ูู ูุซุงู ูุง ููุงู ูุชุงุฌ ุฑุง ุฎูุงูุฏ ุฏุงุฏ. ุงูุง ฺฉูุงุณ <strong>Stock</strong> ฺฉูุชุฑ ููุงูู ุฎูุงูุฏ ุจูุฏุ ุฒุฑุง subscribers ูโุชูุงููุฏ ุจุง ฺฉุฏฺฏุฑ ุชุฏุงุฎู ุงุฌุงุฏ ฺฉููุฏุ ูุซูุงู:</p>
<ul>
<li>ุฌุงฺฏุฒู ฺฉุฑุฏู ุฏฺฏุฑ subscribers ุจุง ุงูุชุณุงุจ ูุฌุฏุฏ <strong>PriceChanged</strong> ุจู ุฌุง ุงุณุชูุงุฏู ุงุฒ ุนููฺฏุฑ <code>+=</code>.</li>
<li>ูพุงฺฉ ฺฉุฑุฏู ุชูุงู subscribers ุจุง ุงูุชุณุงุจ <strong>PriceChanged</strong> ุจู <code>null</code>.</li>
<li>ุงุฑุณุงู ูพุงู ุจู subscribers ุฏฺฏุฑ ุจุง invoke ฺฉุฑุฏู delegate.</li>
</ul>
<h3>ุงูฺฏู ุงุณุชุงูุฏุงุฑุฏ ุฑูุฏุงุฏูุง ๐๏ธ</h3>
<p>ุฏุฑ ุชูุฑุจุงู ููู ููุงุฑุฏ ฺฉู ุฑูุฏุงุฏูุง ุฏุฑ ฺฉุชุงุจุฎุงููโูุง .NET ุชุนุฑู ูโุดููุฏุ ุชุนุฑู ุขูโูุง ูุทุงุจู ฺฉ ุงูฺฏู ุงุณุชุงูุฏุงุฑุฏ ุงุณุช ุชุง ฺฉูพุงุฑฺฺฏ ุจู ฺฉุฏูุง ฺฉุชุงุจุฎุงูู ู ฺฉุงุฑุจุฑ ุญูุธ ุดูุฏ. ุฏุฑ ูุฑฺฉุฒ ุงู ุงูฺฏูุ ฺฉูุงุณ <strong>System.EventArgs</strong> ูุฑุงุฑ ุฏุงุฑุฏุ ฺฉ ฺฉูุงุณ ุงุฒ ูพุด ุชุนุฑูโุดุฏู ุฏุฑ .NET ฺฉู ูฺ ุนุถู ูุฏุงุฑุฏ (ุจู ุฌุฒ ููุฏ ุงุณุชุงุชฺฉ <strong>Empty</strong>). <strong>EventArgs</strong> ฺฉูุงุณ ูพุงูโุง ุจุฑุง ุงูุชูุงู ุงุทูุงุนุงุช ูุฑุจูุท ุจู ฺฉ ุฑูุฏุงุฏ ุงุณุช.</p>
<p>ุฏุฑ ูุซุงู Stock ูุงุ ุจุฑุง ุงูุชูุงู ููุช ูุฏู ู ุฌุฏุฏ ููฺฏุงู ูุนุงู ุดุฏู ุฑูุฏุงุฏ <strong>PriceChanged</strong>ุ ฺฉูุงุณ EventArgs ุฑุง ุจู ุตูุฑุช ุฒุฑ subclass ูโฺฉูู:</p>
<pre class="hljs"><code><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">PriceChangedEventArgs</span> : <span class="hljs-title">System.EventArgs</span>
{
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">readonly</span> <span class="hljs-built_in">decimal</span> LastPrice;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">readonly</span> <span class="hljs-built_in">decimal</span> NewPrice;

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">PriceChangedEventArgs</span>(<span class="hljs-params"><span class="hljs-built_in">decimal</span> lastPrice, <span class="hljs-built_in">decimal</span> newPrice</span>)</span>
    {
        LastPrice = lastPrice;
        NewPrice = newPrice;
    }
}
</code></pre>
<p>ุจุฑุง ุงุณุชูุงุฏู ูุฌุฏุฏุ subclass EventArgs ูุนูููุงู ุจุฑ ุงุณุงุณ ุงุทูุงุนุงุช ฺฉู ุดุงูู ูโุดูุฏ ูุงูฺฏุฐุงุฑ ูโุดูุฏุ ูู ุจุฑ ุงุณุงุณ ุฑูุฏุงุฏ ฺฉู ุจุฑุง ุขู ุงุณุชูุงุฏู ูโุดูุฏ. ุฏุงุฏูโูุง ูุนูููุงู ุจู ุตูุฑุช property ุง ููุฏ ููุทโุฎูุงูุฏู ุงุฑุงุฆู ูโุดููุฏ.</p>
<h3>ุงูุชุฎุงุจ ุง ุชุนุฑู delegate ุจุฑุง ุฑูุฏุงุฏ ๐ฏ</h3>
<p>ุณู ูุงุนุฏู ูุฌูุฏ ุฏุงุฑุฏ:</p>
<p>1๏ธโฃ ููุน ุจุงุฒฺฏุดุช ุจุงุฏ <strong>void</strong> ุจุงุดุฏ.<br>
2๏ธโฃ ุฏู ุขุฑฺฏููุงู ุฏุฑุงูุช ฺฉูุฏ: ุขุฑฺฏููุงู ุงูู ุงุฒ ููุน <strong>object</strong> ู ุขุฑฺฏููุงู ุฏูู ฺฉ subclass ุงุฒ <strong>EventArgs</strong>. ุขุฑฺฏููุงู ุงูู ูุดุงูโุฏููุฏู broadcaster ู ุขุฑฺฏููุงู ุฏูู ุดุงูู ุงุทูุงุนุงุช ุงุถุงู ุจุฑุง ุงูุชูุงู ุงุณุช.<br>
3๏ธโฃ ูุงู delegate ุจุงุฏ ุจุง <strong>EventHandler</strong> ูพุงุงู ุงุจุฏ.</p>
<p>.NET ฺฉ delegate ุนููู ุจู ูุงู <strong>System.EventHandler&lt;&gt;</strong> ุจุฑุง ฺฉูฺฉ ุจู ุงู ฺฉุงุฑ ุชุนุฑู ฺฉุฑุฏู ุงุณุช:</p>
<pre class="hljs"><code><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-built_in">delegate</span> <span class="hljs-keyword">void</span> <span class="hljs-title">EventHandler</span>&lt;<span class="hljs-title">TEventArgs</span>&gt;(<span class="hljs-params"><span class="hljs-built_in">object</span> source, TEventArgs e</span>)</span>;
</code></pre>
<p>ูุจู ุงุฒ ูุฌูุฏ genericูุง ุฏุฑ ุฒุจุงู (ูุจู ุงุฒ C# 2.0)ุ ุจุงุฏ delegate ุณูุงุฑุด ุฑุง ุจู ุตูุฑุช ุฒุฑ ูโููุดุชู:</p>
<pre class="hljs"><code><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-built_in">delegate</span> <span class="hljs-keyword">void</span> <span class="hljs-title">PriceChangedHandler</span>(<span class="hljs-params"><span class="hljs-built_in">object</span> sender, PriceChangedEventArgs e</span>)</span>;
</code></pre>
<p>ุจู ุฏูุงู ุชุงุฑุฎุ ุจุดุชุฑ ุฑูุฏุงุฏูุง ุฏุฑ ฺฉุชุงุจุฎุงููโูุง .NET ุงุฒ ุงู ุฑูุด ุงุณุชูุงุฏู ูโฺฉููุฏ.</p>
<h3>ุชุนุฑู ุฑูุฏุงุฏ ุจุง delegate ุงูุชุฎุงุจโุดุฏู ๐ง</h3>
<pre class="hljs"><code><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Stock</span>
{
    ...
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">event</span> EventHandler&lt;PriceChangedEventArgs&gt; PriceChanged;
}
</code></pre>
<h3>ููุดุชู ูุชุฏ ูุญุงูุธุชโุดุฏู ู virtual ุจุฑุง ูุนุงู ฺฉุฑุฏู ุฑูุฏุงุฏ</h3>
<p>ูุงู ุงู ูุชุฏ ุจุงุฏ ููุงู ูุงู ุฑูุฏุงุฏ ุจุงุดุฏุ ุจุง ูพุดููุฏ <strong>On</strong>ุ ู ฺฉ ุขุฑฺฏููุงู <strong>EventArgs</strong> ุฏุฑุงูุช ฺฉูุฏ:</p>
<pre class="hljs"><code><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Stock</span>
{
    ...
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">event</span> EventHandler&lt;PriceChangedEventArgs&gt; PriceChanged;

    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">OnPriceChanged</span>(<span class="hljs-params">PriceChangedEventArgs e</span>)</span>
    {
        <span class="hljs-keyword">if</span> (PriceChanged != <span class="hljs-literal">null</span>) PriceChanged(<span class="hljs-keyword">this</span>, e);
    }
}
</code></pre>
<p>ุจุฑุง ุนููฺฉุฑุฏ ููุงูู ุฏุฑ ุณูุงุฑููุง ฺูุฏูุฎ (multithreaded)ุ ุจูุชุฑ ุงุณุช delegate ุฑุง ูุจู ุงุฒ ุชุณุช ู ูุฑุงุฎูุงู ุจู ฺฉ ูุชุบุฑ ูููุช ุงูุชุณุงุจ ุฏูุฏ:</p>
<pre class="hljs"><code><span class="hljs-keyword">var</span> temp = PriceChanged;
<span class="hljs-keyword">if</span> (temp != <span class="hljs-literal">null</span>) temp(<span class="hljs-keyword">this</span>, e);
</code></pre>
<p>ููฺูู ูโุชูุงู ุจุง ุงุณุชูุงุฏู ุงุฒ <strong>null-conditional operator</strong> ููุงู ฺฉุงุฑ ุฑุง ุจุฏูู ูุชุบุฑ ูููุช ุงูุฌุงู ุฏุงุฏ:</p>
<pre class="hljs"><code>PriceChanged?.Invoke(<span class="hljs-keyword">this</span>, e);
</code></pre>
<p>ุงู ุฑูุด ูู <strong>thread-safe</strong> ู ูู ูุฎุชุตุฑ ุงุณุช ู ุจูุชุฑู ุฑูุด ุนููู ุจุฑุง ูุฑุงุฎูุงู ุฑูุฏุงุฏูุง ูุญุณูุจ ูโุดูุฏ.</p>
<h3>ูุซุงู ฺฉุงูู ๐ป</h3>
<pre class="hljs"><code><span class="hljs-keyword">using</span> System;

Stock stock = <span class="hljs-keyword">new</span> Stock(<span class="hljs-string">&quot;THPW&quot;</span>);
stock.Price = <span class="hljs-number">27.10</span>M;

<span class="hljs-comment">// ุซุจุช ุจุฑุง ุฑูุฏุงุฏ PriceChanged</span>
stock.PriceChanged += stock_PriceChanged;
stock.Price = <span class="hljs-number">31.59</span>M;

<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">stock_PriceChanged</span>(<span class="hljs-params"><span class="hljs-built_in">object</span> sender, PriceChangedEventArgs e</span>)</span>
{
    <span class="hljs-keyword">if</span> ((e.NewPrice - e.LastPrice) / e.LastPrice &gt; <span class="hljs-number">0.1</span>M)
        Console.WriteLine(<span class="hljs-string">&quot;Alert, 10% stock price increase!&quot;</span>);
}

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">PriceChangedEventArgs</span> : <span class="hljs-title">EventArgs</span>
{
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">readonly</span> <span class="hljs-built_in">decimal</span> LastPrice;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">readonly</span> <span class="hljs-built_in">decimal</span> NewPrice;

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">PriceChangedEventArgs</span>(<span class="hljs-params"><span class="hljs-built_in">decimal</span> lastPrice, <span class="hljs-built_in">decimal</span> newPrice</span>)</span>
    {
        LastPrice = lastPrice; NewPrice = newPrice;
    }
}

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Stock</span>
{
    <span class="hljs-built_in">string</span> symbol;
    <span class="hljs-built_in">decimal</span> price;
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Stock</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> symbol</span>)</span> =&gt; <span class="hljs-keyword">this</span>.symbol = symbol;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">event</span> EventHandler&lt;PriceChangedEventArgs&gt; PriceChanged;

    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">OnPriceChanged</span>(<span class="hljs-params">PriceChangedEventArgs e</span>)</span>
    {
        PriceChanged?.Invoke(<span class="hljs-keyword">this</span>, e);
    }

    <span class="hljs-keyword">public</span> <span class="hljs-built_in">decimal</span> Price
    {
        <span class="hljs-keyword">get</span> =&gt; price;
        <span class="hljs-keyword">set</span>
        {
            <span class="hljs-keyword">if</span> (price == <span class="hljs-keyword">value</span>) <span class="hljs-keyword">return</span>;
            <span class="hljs-built_in">decimal</span> oldPrice = price;
            price = <span class="hljs-keyword">value</span>;
            OnPriceChanged(<span class="hljs-keyword">new</span> PriceChangedEventArgs(oldPrice, price));
        }
    }
}
</code></pre>
<h3>ุงุณุชูุงุฏู ุงุฒ EventHandler ุบุฑ ุนููู</h3>
<p>ููุช ุฑูุฏุงุฏ ูุงุฒ ุจู ุงูุชูุงู ุงุทูุงุนุงุช ุงุถุงู ูุฏุงุฑุฏุ ูโุชูุงู ุงุฒ <strong>EventHandler</strong> ุบุฑ generic ุงุณุชูุงุฏู ฺฉุฑุฏ. ุฏุฑ ุงู ูุซุงูุ ฺฉูุงุณ <strong>Stock</strong> ุจุงุฒููุณ ุดุฏู ุชุง ุฑูุฏุงุฏ <strong>PriceChanged</strong> ูพุณ ุงุฒ ุชุบุฑ ููุช ูุนุงู ุดูุฏ ู ุชููุง ูุงุฒ ุงุณุช ุจุฏุงูู ุฑูุฏุงุฏ ุฑุฎ ุฏุงุฏู ุงุณุชุ ุจุฏูู ูุงุฒ ุจู ุงุทูุงุนุงุช ุงุถุงู. ููฺูู ุงุฒ <strong>EventArgs.Empty</strong> ุงุณุชูุงุฏู ูโฺฉูู ุชุง ุงุฒ ุงุฌุงุฏ ุบุฑุถุฑูุฑ ฺฉ ููููู EventArgs ุฌููฺฏุฑ ุดูุฏ:</p>
<pre class="hljs"><code><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Stock</span>
{
    <span class="hljs-built_in">string</span> symbol;
    <span class="hljs-built_in">decimal</span> price;

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Stock</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> symbol</span>)</span> { <span class="hljs-keyword">this</span>.symbol = symbol; }
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">event</span> EventHandler PriceChanged;

    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">OnPriceChanged</span>(<span class="hljs-params">EventArgs e</span>)</span>
    {
        PriceChanged?.Invoke(<span class="hljs-keyword">this</span>, e);
    }

    <span class="hljs-keyword">public</span> <span class="hljs-built_in">decimal</span> Price
    {
        <span class="hljs-keyword">get</span> { <span class="hljs-keyword">return</span> price; }
        <span class="hljs-keyword">set</span>
        {
            <span class="hljs-keyword">if</span> (price == <span class="hljs-keyword">value</span>) <span class="hljs-keyword">return</span>;
            price = <span class="hljs-keyword">value</span>;
            OnPriceChanged(EventArgs.Empty);
        }
    }
}
</code></pre>
<p><strong>Accessorูุง ุฑูุฏุงุฏูุง ๐</strong></p>
<p>Accessorูุง ฺฉ ุฑูุฏุงุฏุ ูพุงุฏูโุณุงุฒโูุง ุนููฺฏุฑูุง <code>+=</code> ู <code>-=</code> ุขู ูุณุชูุฏ. ุจู ุทูุฑ ูพุดโูุฑุถุ ุงู accessors ุจู ุตูุฑุช ุถูู ุชูุณุท ฺฉุงููพุงูุฑ ูพุงุฏูโุณุงุฒ ูโุดููุฏ. ุจู ูุซุงู ุฒุฑ ุชูุฌู ฺฉูุฏ:</p>
<pre class="hljs"><code><span class="hljs-keyword">public</span> <span class="hljs-keyword">event</span> EventHandler PriceChanged;
</code></pre>
<p>ฺฉุงููพุงูุฑ ุงู ุฑุง ุจู ุดฺฉู ุฒุฑ ุชุจุฏู ูโฺฉูุฏ:</p>
<ul>
<li>ฺฉ ููุฏ delegate ุฎุตูุต</li>
<li>ฺฉ ุฌูุช ุชุงุจุน accessor ุนููู ุจุฑุง ุฑูุฏุงุฏ (<strong>add_PriceChanged</strong> ู <strong>remove_PriceChanged</strong>) ฺฉู ุนููุงุช <code>+=</code> ู <code>-=</code> ุฑุง ุจู ููุฏ delegate ุฎุตูุต ูุฏุงุช ูโฺฉููุฏ</li>
</ul>
<p>ุดูุง ูโุชูุงูุฏ ุงู ุฑููุฏ ุฑุง ุจุง ุชุนุฑู <strong>explicit event accessors</strong> ุจู ุฏุณุช ุจฺฏุฑุฏ. ุฏุฑ ุงูุฌุง ูพุงุฏูโุณุงุฒ ุฏุณุช ุฑูุฏุงุฏ <strong>PriceChanged</strong> ุงุฒ ูุซุงู ูุจู ุขูุฏู ุงุณุช:</p>
<pre class="hljs"><code><span class="hljs-keyword">private</span> EventHandler priceChanged;   <span class="hljs-comment">// ุชุนุฑู ฺฉ delegate ุฎุตูุต</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">event</span> EventHandler PriceChanged
{
    <span class="hljs-keyword">add</span>    { priceChanged += <span class="hljs-keyword">value</span>; }
    <span class="hljs-keyword">remove</span> { priceChanged -= <span class="hljs-keyword">value</span>; }
}
</code></pre>
<p>ุงู ูุซุงู ุงุฒ ูุธุฑ ุนููฺฉุฑุฏ ุจุง ูพุงุฏูโุณุงุฒ ูพุดโูุฑุถ C# ฺฉุณุงู ุงุณุช (ุจู ุฌุฒ ุงูฺฉู C# ููฺูู ุงูู ุฏุฑ ุจุฑุงุจุฑ ฺูุฏูุฎ ุฑุง ุจุง ุงูฺฏูุฑุชู lock-free compare-and-swap ุชุถูู ูโฺฉูุฏ). ุจุง ุชุนุฑู ุฏุณุช accessorsุ ุจู C# ูโฺฏูู ฺฉู ููุทู ูพุดโูุฑุถ ููุฏ ู accessor ุฑุง ุชููุฏ ูฺฉูุฏ.</p>
<p>ุจุง ุงุณุชูุงุฏู ุงุฒ explicit event accessorsุ ูโุชูุงู ุงุณุชุฑุงุชฺโูุง ูพฺุฏูโุชุฑ ุจุฑุง ุฐุฎุฑู ู ุฏุณุชุฑุณ ุจู delegate ุฒุฑู ุงุนูุงู ฺฉุฑุฏ. ุณู ุณูุงุฑู ฺฉู ุงู ฺฉุงุฑุจุฑุฏ ุฏุงุฑุฏ:</p>
<p>1๏ธโฃ ููุช accessors ุชููุง ุจู ุนููุงู ูุงุณุทู ุจุฑุง ฺฉูุงุณ ุฏฺฏุฑ ูุณุชูุฏ ฺฉู ุฑูุฏุงุฏ ุฑุง ูพุฎุด ูโฺฉูุฏ.<br>
2๏ธโฃ ููุช ฺฉูุงุณ ุชุนุฏุงุฏ ุฒุงุฏ ุฑูุฏุงุฏ ุฏุงุฑุฏ ุงูุง ุงุบูุจ ุชููุง ุชุนุฏุงุฏ ฺฉู subscriber ูุฌูุฏ ุฏุงุฑุฏุ ูุซู ฺฉูุชุฑูโูุง ููุฏูุฒ. ุฏุฑ ุงู ููุงุฑุฏ ุจูุชุฑ ุงุณุช delegateูุง subscribers ุฑุง ุฏุฑ ฺฉ <strong>dictionary</strong> ุฐุฎุฑู ฺฉููุ ุฒุฑุง dictionary ุญุงูุธู ฺฉูุชุฑ ูุณุจุช ุจู ุฏูโูุง ููุฏ delegate ุฎุงู ูุตุฑู ูโฺฉูุฏ.<br>
3๏ธโฃ ููฺฏุงู ูพุงุฏูโุณุงุฒ explicit ฺฉ interface ฺฉู ุฑูุฏุงุฏ ุฑุง ุชุนุฑู ฺฉุฑุฏู ุงุณุช.</p>
<p>ูููููโุง ุจุฑุง ููุฑุฏ ุณูู:</p>
<pre class="hljs"><code><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title">IFoo</span> { <span class="hljs-keyword">event</span> EventHandler Ev; }

<span class="hljs-keyword">class</span> <span class="hljs-title">Foo</span> : <span class="hljs-title">IFoo</span>
{
    <span class="hljs-keyword">private</span> EventHandler ev;
    <span class="hljs-keyword">event</span> EventHandler IFoo.Ev
    {
        <span class="hljs-keyword">add</span>    { ev += <span class="hljs-keyword">value</span>; }
        <span class="hljs-keyword">remove</span> { ev -= <span class="hljs-keyword">value</span>; }
    }
}
</code></pre>
<p>ุจุฎุดโูุง <strong>add</strong> ู <strong>remove</strong> ฺฉ ุฑูุฏุงุฏ ุจู ูุชุฏูุง <strong>add_XXX</strong> ู <strong>remove_XXX</strong> ฺฉุงููพุงู ูโุดููุฏ.</p>
<hr>
<p><strong>Modifierูุง ุฑูุฏุงุฏูุง โก</strong></p>
<p>ูุซู ูุชุฏูุงุ ุฑูุฏุงุฏูุง ูโุชูุงููุฏ <strong>virtual</strong>ุ <strong>overridden</strong>ุ <strong>abstract</strong> ุง <strong>sealed</strong> ุจุงุดูุฏ. ููฺูู ูโุชูุงููุฏ <strong>static</strong> ุจุงุดูุฏ:</p>
<pre class="hljs"><code><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Foo</span>
{
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">event</span> EventHandler&lt;EventArgs&gt; StaticEvent;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">virtual</span> <span class="hljs-keyword">event</span> EventHandler&lt;EventArgs&gt; VirtualEvent;
}
</code></pre>
<hr>
<p><strong>Lambda Expressions ฮป</strong></p>
<p>ฺฉ <strong>lambda expression</strong> ูุชุฏ ุจุฏูู ูุงู ุงุณุช ฺฉู ุจู ุฌุง ฺฉ instance delegate ููุดุชู ูโุดูุฏ. ฺฉุงููพุงูุฑ ุจูุงูุงุตูู ุขู ุฑุง ุจู ฺฉ ุงุฒ ููุงุฑุฏ ุฒุฑ ุชุจุฏู ูโฺฉูุฏ:</p>
<ul>
<li>ฺฉ instance delegate</li>
<li>ุง ฺฉ <strong>expression tree</strong> ุงุฒ ููุน <code>Expression&lt;TDelegate&gt;</code> ฺฉู ฺฉุฏ ุฏุงุฎู lambda ุฑุง ุจู ุตูุฑุช ฺฉ ูุฏู ุดุก ูุงุจู ูพูุงุด ููุงุด ูโุฏูุฏ. ุงู ุงุฌุงุฒู ูโุฏูุฏ lambda ุจุนุฏุงู ุฏุฑ ุฒูุงู ุงุฌุฑุง ุชูุณุฑ ุดูุฏ.</li>
</ul>
<p>ูุซุงู:</p>
<pre class="hljs"><code>Transformer sqr = x =&gt; x * x;
Console.WriteLine(sqr(<span class="hljs-number">3</span>));   <span class="hljs-comment">// ุฎุฑูุฌ: 9</span>
<span class="hljs-function"><span class="hljs-built_in">delegate</span> <span class="hljs-built_in">int</span> <span class="hljs-title">Transformer</span>(<span class="hljs-params"><span class="hljs-built_in">int</span> i</span>)</span>;
</code></pre>
<p>ฺฉุงููพุงูุฑ lambdaูุง ุงู ููุน ุฑุง ุจุง ููุดุชู ฺฉ ูุชุฏ ุฎุตูุต ู ุงูุชูุงู ฺฉุฏ expression ุจู ุขู ูุชุฏ ุญู ูโฺฉูุฏ.</p>
<p>ูุฑู ฺฉู ฺฉ lambda:</p>
<pre class="hljs"><code>(parameters) =&gt; expression-or-statement-block
</code></pre>
<p>ุงฺฏุฑ ููุท ฺฉ ูพุงุฑุงูุชุฑ ุจุง ููุน ูุงุจู ุงุณุชูุชุงุฌ ุฏุงุดุชู ุจุงุดูุ ูโุชูุงู ูพุฑุงูุชุฒูุง ุฑุง ุญุฐู ฺฉุฑุฏ.</p>
<p>ูุซุงู:</p>
<pre class="hljs"><code>x =&gt; x * x;
</code></pre>
<p>ูุฑ ูพุงุฑุงูุชุฑ lambda ูุชูุงุธุฑ ุจุง ูพุงุฑุงูุชุฑ delegate ุงุณุช ู ููุน expression (ฺฉู ููฺฉู ุงุณุช <strong>void</strong> ุจุงุดุฏ) ูุชูุงุธุฑ ุจุง ููุน ุจุงุฒฺฏุดุช delegate ุงุณุช.</p>
<p>ูโุชูุงู expression ุฑุง ุจู ุตูุฑุช ฺฉ ุจููฺฉ statement ูุฒ ููุดุช:</p>
<pre class="hljs"><code>x =&gt; { <span class="hljs-keyword">return</span> x * x; };
</code></pre>
<p>ุงุบูุจ lambdaูุง ููุฑุงู ุจุง <strong>Func</strong> ู <strong>Action</strong> ุงุณุชูุงุฏู ูโุดููุฏ:</p>
<pre class="hljs"><code>Func&lt;<span class="hljs-built_in">int</span>,<span class="hljs-built_in">int</span>&gt; sqr = x =&gt; x * x;
</code></pre>
<p>ูุซุงู ุจุง ุฏู ูพุงุฑุงูุชุฑ:</p>
<pre class="hljs"><code>Func&lt;<span class="hljs-built_in">string</span>,<span class="hljs-built_in">string</span>,<span class="hljs-built_in">int</span>&gt; totalLength = (s1, s2) =&gt; s1.Length + s2.Length;
<span class="hljs-built_in">int</span> total = totalLength(<span class="hljs-string">&quot;hello&quot;</span>, <span class="hljs-string">&quot;world&quot;</span>);   <span class="hljs-comment">// total = 10</span>
</code></pre>
<p>ุงฺฏุฑ ูุงุฒ ุจู ุงุณุชูุงุฏู ุงุฒ ูพุงุฑุงูุชุฑูุง ูุณุชุ ูโุชูุงู ุขูโูุง ุฑุง ุจุง underscore ุฏูุฑ ุงูุฏุงุฎุช (ุงุฒ C# 9):</p>
<pre class="hljs"><code>Func&lt;<span class="hljs-built_in">string</span>,<span class="hljs-built_in">string</span>,<span class="hljs-built_in">int</span>&gt; totalLength = (_,_) =&gt; ...
</code></pre>
<p>ูุซุงู ุจุฏูู ุขุฑฺฏููุงู:</p>
<pre class="hljs"><code>Func&lt;<span class="hljs-built_in">string</span>&gt; greeter = () =&gt; <span class="hljs-string">&quot;Hello, world&quot;</span>;
</code></pre>
<p>ุงุฒ C# 10 ุจู ุจุนุฏุ ูโุชูุงู ุงุฒ <strong>implicit typing</strong> ุจุฑุง lambda ุงุณุชูุงุฏู ฺฉุฑุฏ:</p>
<pre class="hljs"><code><span class="hljs-keyword">var</span> greeter = () =&gt; <span class="hljs-string">&quot;Hello, world&quot;</span>;
</code></pre>
<h3>ูุดุฎุต ฺฉุฑุฏู ุตุฑุญ ููุน ูพุงุฑุงูุชุฑ ู ููุน ุจุงุฒฺฏุดุช Lambda ๐ง</h3>
<p>ฺฉุงููพุงูุฑ ูุนูููุงู ูโุชูุงูุฏ ููุน ูพุงุฑุงูุชุฑูุง lambda ุฑุง ุจู ุตูุฑุช ุฒูููโุง ุงุณุชูุชุงุฌ ฺฉูุฏ. ููุช ุงู ุงูฺฉุงู ูุฌูุฏ ูุฏุงุดุชู ุจุงุดุฏุ ุจุงุฏ ููุน ูุฑ ูพุงุฑุงูุชุฑ ุฑุง ุจู ุตูุฑุช ุตุฑุญ ูุดุฎุต ฺฉูุฏ. ุจู ุฏู ูุชุฏ ุฒุฑ ุชูุฌู ฺฉูุฏ:</p>
<pre class="hljs"><code><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Foo</span>&lt;<span class="hljs-title">T</span>&gt;(<span class="hljs-params">T x</span>)</span> { }
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Bar</span>&lt;<span class="hljs-title">T</span>&gt;(<span class="hljs-params">Action&lt;T&gt; a</span>)</span> { }
</code></pre>
<p>ฺฉุฏ ุฒุฑ <strong>ฺฉุงููพุงู ููโุดูุฏ</strong>ุ ุฒุฑุง ฺฉุงููพุงูุฑ ููโุชูุงูุฏ ููุน <code>x</code> ุฑุง ุงุณุชูุชุงุฌ ฺฉูุฏ:</p>
<pre class="hljs"><code>Bar(x =&gt; Foo(x));   <span class="hljs-comment">// ููุน x ฺุณุชุ</span>
</code></pre>
<p>ูโุชูุงู ุจุง ูุดุฎุต ฺฉุฑุฏู ุตุฑุญ ููุน <code>x</code> ูุดฺฉู ุฑุง ุญู ฺฉุฑุฏ:</p>
<pre class="hljs"><code>Bar((<span class="hljs-built_in">int</span> x) =&gt; Foo(x));
</code></pre>
<p>ุงู ูุซุงู ุณุงุฏู ุฑุง ูโุชูุงู ุจู ุฏู ุฑูุด ุฏฺฏุฑ ูุฒ ุงุตูุงุญ ฺฉุฑุฏ:</p>
<pre class="hljs"><code>Bar&lt;<span class="hljs-built_in">int</span>&gt;(x =&gt; Foo(x));  <span class="hljs-comment">// ูุดุฎุต ฺฉุฑุฏู type parameter ุจุฑุง Bar</span>
Bar&lt;<span class="hljs-built_in">int</span>&gt;(Foo);          <span class="hljs-comment">// ููุงููุฏ ุจุงูุงุ ุจุง ุงุณุชูุงุฏู ุงุฒ method group</span>
</code></pre>
<p>ูุซุงู ุฏฺฏุฑ ุงุฒ ุงุณุชูุงุฏู explicit ุจุฑุง ููุน ูพุงุฑุงูุชุฑ (C# 10):</p>
<pre class="hljs"><code><span class="hljs-keyword">var</span> sqr = (<span class="hljs-built_in">int</span> x) =&gt; x * x;
</code></pre>
<p>ฺฉุงููพุงูุฑ <code>sqr</code> ุฑุง ุจู ููุน <code>Func&lt;int,int&gt;</code> ุงุณุชูุชุงุฌ ูโฺฉูุฏ. ุจุฏูู ูุดุฎุต ฺฉุฑุฏู <code>int</code>ุ ุงุณุชูุชุงุฌ ููุน ุดฺฉุณุช ูโุฎูุฑุฏ: ฺฉุงููพุงูุฑ ูโุฏุงูุฏ ฺฉู sqr ุจุงุฏ ุงุฒ ููุน <code>Func&lt;T,T&gt;</code> ุจุงุดุฏุ ุงูุง ููโุฏุงูุฏ T ฺุณุช.</p>
<p>ุงุฒ C# 10 ุจู ุจุนุฏ ูโุชูุงู ููุน ุจุงุฒฺฏุดุช lambda ุฑุง ูุฒ ูุดุฎุต ฺฉุฑุฏ:</p>
<pre class="hljs"><code><span class="hljs-keyword">var</span> sqr = <span class="hljs-built_in">int</span> (<span class="hljs-built_in">int</span> x) =&gt; x;
</code></pre>
<p>ูุดุฎุต ฺฉุฑุฏู ููุน ุจุงุฒฺฏุดุช ูโุชูุงูุฏ ุนููฺฉุฑุฏ ฺฉุงููพุงูุฑ ุฑุง ุฏุฑ lambdaูุง ูพฺุฏู ู ุชู ุฏุฑ ุชู ุจูุจูุฏ ุฏูุฏ.</p>
<hr>
<h3>ูพุงุฑุงูุชุฑูุง ูพุดโูุฑุถ Lambda (C# 12) ๐ฏ</h3>
<p>ูุงููุฏ ูุชุฏูุง ูุนููู ฺฉู ูโุชูุงููุฏ ูพุงุฑุงูุชุฑ ุงุฎุชุงุฑ ุฏุงุดุชู ุจุงุดูุฏ:</p>
<pre class="hljs"><code><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Print</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> message = <span class="hljs-string">&quot;&quot;</span></span>)</span> =&gt; Console.WriteLine(message);
</code></pre>
<p>lambdaูุง ูุฒ ูโุชูุงููุฏ ูพุงุฑุงูุชุฑ ุงุฎุชุงุฑ ุฏุงุดุชู ุจุงุดูุฏ:</p>
<pre class="hljs"><code><span class="hljs-keyword">var</span> print = (<span class="hljs-built_in">string</span> message = <span class="hljs-string">&quot;&quot;</span>) =&gt; Console.WriteLine(message);
print(<span class="hljs-string">&quot;Hello&quot;</span>);
print();
</code></pre>
<p>ุงู ูฺฺฏ ุจุฑุง ฺฉุชุงุจุฎุงููโูุง ูุงููุฏ <strong><a href="http://ASP.NET">ASP.NET</a> Minimal API</strong> ููุฏ ุงุณุช.</p>
<hr>
<h3>ุฏุณุชุฑุณ ุจู ูุชุบุฑูุง ุฎุงุฑุฌ (Outer Variables) ๐</h3>
<p>ฺฉ lambda ูโุชูุงูุฏ ุจู ูุฑ ูุชุบุฑ ฺฉู ุฏุฑ ูุญู ุชุนุฑูุด ูุงุจู ุฏุณุชุฑุณ ุงุณุชุ ุงุฑุฌุงุน ุฏูุฏ. ุงู ูุชุบุฑูุง <strong>outer variables</strong> ูุงูุฏู ูโุดููุฏ ู ูโุชูุงููุฏ ุดุงูู ูุชุบุฑูุง ูุญูุ ูพุงุฑุงูุชุฑูุง ู ููุฏูุง ุจุงุดูุฏ:</p>
<pre class="hljs"><code><span class="hljs-built_in">int</span> factor = <span class="hljs-number">2</span>;
Func&lt;<span class="hljs-built_in">int</span>, <span class="hljs-built_in">int</span>&gt; multiplier = n =&gt; n * factor;
Console.WriteLine(multiplier(<span class="hljs-number">3</span>));   <span class="hljs-comment">// ุฎุฑูุฌ: 6</span>
</code></pre>
<p>ูุชุบุฑูุง ฺฉู ุชูุณุท lambda ุงุฑุฌุงุน ูโุดููุฏุ <strong>captured variables</strong> ูุงูุฏู ูโุดููุฏ. lambda ฺฉู ูุชุบุฑูุง ุฑุง capture ูโฺฉูุฏุ <strong>closure</strong> ูุงูุฏู ูโุดูุฏ.</p>
<p>ูุชุบุฑูุง capture ุดุฏู ููฺฏุงู ูุฑุงุฎูุงู delegate ุงุฑุฒุงุจ ูโุดููุฏุ ูู ููฺฏุงู capture ุดุฏู:</p>
<pre class="hljs"><code><span class="hljs-built_in">int</span> factor = <span class="hljs-number">2</span>;
Func&lt;<span class="hljs-built_in">int</span>, <span class="hljs-built_in">int</span>&gt; multiplier = n =&gt; n * factor;
factor = <span class="hljs-number">10</span>;
Console.WriteLine(multiplier(<span class="hljs-number">3</span>));  <span class="hljs-comment">// ุฎุฑูุฌ: 30</span>
</code></pre>
<p>lambdaูุง ูโุชูุงููุฏ ุฎูุฏุดุงู ูุชุบุฑูุง capture ุดุฏู ุฑุง ุจูโุฑูุฒุฑุณุงู ฺฉููุฏ:</p>
<pre class="hljs"><code><span class="hljs-built_in">int</span> seed = <span class="hljs-number">0</span>;
Func&lt;<span class="hljs-built_in">int</span>&gt; natural = () =&gt; seed++;
Console.WriteLine(natural());  <span class="hljs-comment">// 0</span>
Console.WriteLine(natural());  <span class="hljs-comment">// 1</span>
Console.WriteLine(seed);       <span class="hljs-comment">// 2</span>
</code></pre>
<p>ูุชุบุฑูุง capture ุดุฏู ุทูู ุนูุฑุดุงู ุชุง ุทูู ุนูุฑ delegate ุงุฏุงูู ูพุฏุง ูโฺฉูุฏ. ูุซุงู:</p>
<pre class="hljs"><code><span class="hljs-function"><span class="hljs-keyword">static</span> Func&lt;<span class="hljs-built_in">int</span>&gt; <span class="hljs-title">Natural</span>()</span>
{
    <span class="hljs-built_in">int</span> seed = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">return</span> () =&gt; seed++;  <span class="hljs-comment">// ุจุฑูโฺฏุฑุฏุงูุฏ ฺฉ closure</span>
}

<span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Main</span>()</span>
{
    Func&lt;<span class="hljs-built_in">int</span>&gt; natural = Natural();
    Console.WriteLine(natural()); <span class="hljs-comment">// 0</span>
    Console.WriteLine(natural()); <span class="hljs-comment">// 1</span>
}
</code></pre>
<p>ุงฺฏุฑ ูุชุบุฑ ูุญู ุฑุง ุฏุงุฎู ุฎูุฏ lambda ุจุณุงุฒูุ ูุฑ ูุฑุงุฎูุงู delegate ฺฉ ูุชุบุฑ ุฌุฏุฏ ุงุฌุงุฏ ูโฺฉูุฏ:</p>
<pre class="hljs"><code><span class="hljs-function"><span class="hljs-keyword">static</span> Func&lt;<span class="hljs-built_in">int</span>&gt; <span class="hljs-title">Natural</span>()</span>
{
    <span class="hljs-keyword">return</span> () =&gt; { <span class="hljs-built_in">int</span> seed = <span class="hljs-number">0</span>; <span class="hljs-keyword">return</span> seed++; };
}

<span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Main</span>()</span>
{
    Func&lt;<span class="hljs-built_in">int</span>&gt; natural = Natural();
    Console.WriteLine(natural());  <span class="hljs-comment">// 0</span>
    Console.WriteLine(natural());  <span class="hljs-comment">// 0</span>
}
</code></pre>
<p>ูพุงุฏูโุณุงุฒ capture ุฏุงุฎู ุจุง <strong>hoisting</strong> ุงูุฌุงู ูโุดูุฏ: ูุชุบุฑูุง capture ุดุฏู ุจู ููุฏูุง ฺฉ ฺฉูุงุณ ุฎุตูุต ููุชูู ูโุดููุฏ ู ููฺฏุงู ูุฑุงุฎูุงู ูุชุฏุ ฺฉูุงุณ ุงุฌุงุฏ ุดุฏู ู ุจู delegate ูุงุจุณุชู ูโุดูุฏ.</p>
<hr>
<h3>Lambdaูุง ุงุณุชุงุชฺฉ โก</h3>
<p>ุฒูุงู ฺฉู lambda ูุชุบุฑูุง ูุญูุ ูพุงุฑุงูุชุฑูุงุ ููุฏูุง instance ุง <strong>this</strong> ุฑุง capture ูโฺฉูุฏุ ฺฉุงููพุงูุฑ ููฺฉู ุงุณุช ฺฉูุงุณ ุฎุตูุต ุงุฌุงุฏ ฺฉูุฏ ุชุง ุงุฑุฌุงุน ุจู ุฏุงุฏูโูุง ุฐุฎุฑู ุดูุฏ. ุงู ุจุงุนุซ ูุตุฑู ุญุงูุธู ูโุดูุฏ.</p>
<p>ุงุฒ C# 9 ุจู ุจุนุฏ ูโุชูุงู ุจุง <strong>static</strong> ฺฉุฑุฏู lambdaุ local function ุง anonymous methodุ ุงุฒ capture ุดุฏู state ุฌููฺฏุฑ ฺฉุฑุฏ:</p>
<pre class="hljs"><code>Func&lt;<span class="hljs-built_in">int</span>, <span class="hljs-built_in">int</span>&gt; multiplier = <span class="hljs-keyword">static</span> n =&gt; n * <span class="hljs-number">2</span>;
</code></pre>
<p>ุงฺฏุฑ ุจุนุฏุงู lambda ุจุฎูุงูุฏ ูุชุบุฑ ุฑุง capture ฺฉูุฏุ ฺฉุงููพุงูุฑ ุฎุทุง ูโุฏูุฏ:</p>
<pre class="hljs"><code><span class="hljs-built_in">int</span> factor = <span class="hljs-number">2</span>;
Func&lt;<span class="hljs-built_in">int</span>, <span class="hljs-built_in">int</span>&gt; multiplier = <span class="hljs-keyword">static</span> n =&gt; n * factor;  <span class="hljs-comment">// ฺฉุงููพุงู ููโุดูุฏ</span>
</code></pre>
<p>lambda ุจุฏูู captureุ ฺฉ instance delegate ฺฉุด ุดุฏู ุฑุง ูุฌุฏุฏุงู ุงุณุชูุงุฏู ูโฺฉูุฏ ู ูุฒููโุง ูุฏุงุฑุฏ.</p>
<p>lambdaูุง ุงุณุชุงุชฺฉ ูููุฒ ูโุชูุงููุฏ ุจู ูุชุบุฑูุง ู ุซุงุจุชโูุง static ุฏุณุชุฑุณ ุฏุงุดุชู ุจุงุดูุฏ. <strong>static</strong> ุชููุง ููุด ุจุฑุฑุณ ุฏุงุฑุฏ ู ุชุงุซุฑ ุจุฑ IL ุชููุฏุดุฏู ูุฏุงุฑุฏุ ุจุฏูู ุขูุ ฺฉุงููพุงูุฑ ุฏุฑ ุตูุฑุช ูุงุฒ closure ุชููุฏ ูโฺฉูุฏุ ุงูุง ุญุช ุขู ุฒูุงู ุชุฑููุฏูุง ุจุฑุง ฺฉุงูุด ูุฒูู ุฏุงุฑุฏ.</p>
<h3>ฺฏุฑูุชู ูุชุบุฑูุง ุชฺฉุฑุงุฑ (Capturing iteration variables) ๐</h3>
<p>ููุช ุฏุฑ ฺฉ ุญูููโ <code>for</code> ูุชุบุฑ ุชฺฉุฑุงุฑ (iteration variable) ุฑุง <strong>Capture</strong> ูโฺฉูุฏุ ุฒุจุงู C# ุจุง ุขู ุทูุฑ ุฑูุชุงุฑ ูโฺฉูุฏ ฺฉู ุงูฺฏุงุฑ <strong>ุจุฑูู ุงุฒ ุญููู ุชุนุฑู ุดุฏู ุจุงุดุฏ</strong>. ุนู ุฏุฑ ูุฑ ุชฺฉุฑุงุฑุ ููุงู ูุชุบุฑ ฺฏุฑูุชู ูโุดูุฏ. ุจู ููู ุฏูู ุจุฑูุงููโ ุฒุฑ ุจูโุฌุง ููุงุด <code>012</code>ุ ููุฏุงุฑ <code>333</code> ุฑุง ฺุงูพ ูโฺฉูุฏ:</p>
<pre class="hljs"><code>Action[] actions = <span class="hljs-keyword">new</span> Action[<span class="hljs-number">3</span>];
<span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">3</span>; i++)
    actions[i] = () =&gt; Console.Write(i);

<span class="hljs-keyword">foreach</span> (Action a <span class="hljs-keyword">in</span> actions) a();     <span class="hljs-comment">// 333</span>
</code></pre>
<p>ูุฑ <strong>closure</strong> (ุจุฎุด ูพุฑุฑูฺฏ ุดุฏู) ููุงู ูุชุบุฑ <code>i</code> ุฑุง ูโฺฏุฑุฏ. ุงู ููุทู ุงุณุชุ ฺูู <code>i</code> ูุชุบุฑ ุงุณุช ฺฉู ููุฏุงุฑุด ุจู ุชฺฉุฑุงุฑูุง ุญููู ุจุงู ูโูุงูุฏุ ุญุช ูโุชูุงูุฏ ุฏุงุฎู ุจุฏููโ ุญูููุ ููุฏุงุฑ <code>i</code> ุฑุง ุชุบุฑ ุฏูุฏ. ูุชุฌู ุงู ุงุณุช ฺฉู ููุช <strong>delegate</strong>ูุง ุจุนุฏุงู ูุฑุงุฎูุงู ูโุดููุฏุ ููฺฏ ููุฏุงุฑ <code>i</code> ุฏุฑ ูุญุธูโ ูุฑุงุฎูุงู ุฑุง ูโุจููุฏุ ุนู <code>3</code>. ุจุฑุง ุฏุฑฺฉ ุจูุชุฑุ ุญููู ุฑุง ุงูโุทูุฑ ุจุงุฒููุณ ฺฉูุฏ:</p>
<pre class="hljs"><code>Action[] actions = <span class="hljs-keyword">new</span> Action[<span class="hljs-number">3</span>];
<span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>;
actions[<span class="hljs-number">0</span>] = () =&gt; Console.Write(i);
i = <span class="hljs-number">1</span>;
actions[<span class="hljs-number">1</span>] = () =&gt; Console.Write(i);
i = <span class="hljs-number">2</span>;
actions[<span class="hljs-number">2</span>] = () =&gt; Console.Write(i);
i = <span class="hljs-number">3</span>;
<span class="hljs-keyword">foreach</span> (Action a <span class="hljs-keyword">in</span> actions) a();    <span class="hljs-comment">// 333</span>
</code></pre>
<p>ุฑุงูโุญู ุจุฑุง ููุงุด <code>012</code> ุงู ุงุณุช ฺฉู ูุชุบุฑ ุชฺฉุฑุงุฑ ุฑุง ุจู ฺฉ <strong>ูุชุบุฑ ูุญู ุฌุฏุฏ</strong> ฺฉู ุฏุฑ ููุงู ูุญุฏูุฏูโ ุญููู ูุฑุงุฑ ุฏุงุฑุฏุ ุงูุชุณุงุจ ุฏูู:</p>
<pre class="hljs"><code>Action[] actions = <span class="hljs-keyword">new</span> Action[<span class="hljs-number">3</span>];
<span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">3</span>; i++)
{
    <span class="hljs-built_in">int</span> loopScopedi = i;
    actions[i] = () =&gt; Console.Write(loopScopedi);
}
<span class="hljs-keyword">foreach</span> (Action a <span class="hljs-keyword">in</span> actions) a();     <span class="hljs-comment">// 012</span>
</code></pre>
<p>ฺูู ุฏุฑ ูุฑ ุชฺฉุฑุงุฑุ ฺฉ ูุชุบุฑ ุฌุฏุฏ <code>loopScopedi</code> ุณุงุฎุชู ูโุดูุฏุ ูุฑ <strong>closure</strong> ฺฉ ูุชุบุฑ ูุชูุงูุช ุฑุง ูโฺฏุฑุฏ. โจ</p>
<blockquote>
<p><strong>ูฺฉุชู:</strong> ูุจู ุงุฒ ูุณุฎูโ C# 5.0ุ ุญูููโูุง <code>foreach</code> ูู ููู ุฑูุชุงุฑ ุฑุง ุฏุงุดุชูุฏ ู ุจุงุนุซ ุณุฑุฏุฑฺฏู ูโุดุฏูุฏ. ฺูู ูุชุบุฑ ุฏุฑ <code>foreach</code> ุชุบุฑูุงูพุฐุฑ ุงุณุชุ ุงูุชุธุงุฑ ูโุฑูุช ูุญู ุจุงุดุฏุ ูู ูุจูุฏ. ุฎูุดุจุฎุชุงูู ุงู ููุถูุน ุงุตูุงุญ ุดุฏู ู ุญุงูุง ูโุชูุงูุฏ ูุชุบุฑูุง <code>foreach</code> ุฑุง ุจุฏูู ูฺฏุฑุงู Capture ฺฉูุฏ. โ</p>
</blockquote>
<hr>
<h3>ููุงุณูโ <strong>Lambda Expressions</strong> ู <strong>Local Methods</strong> ๐</h3>
<p>ุนููฺฉุฑุฏ <strong>local methods</strong> (ุจุฎุด ยซLocal methodsยป ุฏุฑ ุตูุญู 106) ุดุจุงูุช ุฒุงุฏ ุจู <strong>lambda expressions</strong> ุฏุงุฑุฏุ ุงูุง ุณู ูุฒุช ุฏุงุฑูุฏ:</p>
<ol>
<li>ูโุชูุงููุฏ <strong>ุจุงุฒฺฏุดุช (recursive)</strong> ุจุงุดูุฏ (ุฎูุฏุดุงู ุฑุง ุตุฏุง ุจุฒููุฏ) ุจุฏูู ูุงุฒ ุจู ุฑูุดโูุง ูพฺุฏู.</li>
<li>ูุงุฒ ุจู ูุดุฎุต ฺฉุฑุฏู ููุน delegate ูุฏุงุฑูุฏ ู ฺฉุฏ ุดููุบ ููโุดูุฏ.</li>
<li><strong>ฺฉุงุฑุง ุจุดุชุฑ</strong> ุฏุงุฑูุฏ ฺูู ุณุฑุจุงุฑ delegate ุฑุง ุญุฐู ูโฺฉููุฏ.</li>
</ol>
<p><strong>Local methods</strong> ุจูููโุชุฑ ูุณุชูุฏ ฺูู ุงุฒ ูุงุณุทูโ delegate ุงุณุชูุงุฏู ููโฺฉููุฏ (ุงู ฺฉุงุฑ ุจุงุนุซ ุตุฑู ููุฏุงุฑ CPU ู ุญุงูุธู ูโุดูุฏ). ููฺูู ูโุชูุงููุฏ ุจู ูุชุบุฑูุง ูุญู ูุชุฏ ูุงูุฏ ุฏุณุชุฑุณ ุฏุงุดุชู ุจุงุดูุฏ ุจุฏูู ุงูฺฉู ฺฉุงููพุงูุฑ ูุฌุจูุฑ ุจู <strong>hoist ฺฉุฑุฏู</strong> ุขูโูุง ุฏุฑ ฺฉ ฺฉูุงุณ ูุฎู ุจุงุดุฏ.</p>
<p>ุงูุง ุฏุฑ ุจุณุงุฑ ุงุฒ ููุงุฑุฏ ุดูุง ุจู delegate ูุงุฒ ุฏุงุฑุฏุ ูุซู ููุช ฺฉู ูโุฎูุงูุฏ ูุชุฏ ุจุง ูพุงุฑุงูุชุฑ ุงุฒ ููุน delegate ุฑุง ุตุฏุง ุจุฒูุฏ:</p>
<pre class="hljs"><code><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Foo</span>(<span class="hljs-params">Func&lt;<span class="hljs-built_in">int</span>, <span class="hljs-built_in">bool</span>&gt; predicate</span>)</span> { ... }
</code></pre>
<p>(ูููููโูุง ุจุดุชุฑ ุฏุฑ ูุตู 8 ุฎูุงูุฏ ุฏุฏ.) ุฏุฑ ุงู ููุงูุนุ ุงุณุชูุงุฏู ุงุฒ <strong>lambda</strong> ูุนูููุงู ฺฉูุชุงูโุชุฑ ู ุชูุฒุชุฑ ุงุณุช.</p>
<hr>
<h3>ูุชุฏูุง ูุงุดูุงุณ (Anonymous Methods) ๐ถ๏ธ</h3>
<p><strong>Anonymous methods</strong> ูุงุจูุช ุฏุฑ C# 2.0 ุจูุฏูุฏ ฺฉู ุชุง ุญุฏ ุฒุงุฏ ุจุง <strong>lambda expressions</strong> ุฏุฑ C# 3.0 ุฌุงฺฏุฒู ุดุฏูุฏ. ูุชุฏูุง ูุงุดูุงุณ ูุซู lambda ูุณุชูุฏุ ุงูุง ุงูฺฉุงูุงุช ุฒุฑ ุฑุง ูุฏุงุฑูุฏ:</p>
<ul>
<li><strong>ูพุงุฑุงูุชุฑูุง ููุนโุฏู ุถูู (implicitly typed)</strong></li>
<li><strong>ููุดุชุงุฑ ุจู ุดฺฉู expression</strong> (ููุดู ุจุงุฏ ุจู ุตูุฑุช ุจููฺฉ ุจุงูู ุจุงุดูุฏ)</li>
<li>ุชูุงูุง <strong>ุชุจุฏู ุจู Expression Tree</strong> ุจุง <code>Expression&lt;T&gt;</code></li>
</ul>
<p>ูุซุงู:</p>
<pre class="hljs"><code><span class="hljs-function"><span class="hljs-built_in">delegate</span> <span class="hljs-built_in">int</span> <span class="hljs-title">Transformer</span>(<span class="hljs-params"><span class="hljs-built_in">int</span> i</span>)</span>;
Transformer sqr = <span class="hljs-built_in">delegate</span> (<span class="hljs-built_in">int</span> x) { <span class="hljs-keyword">return</span> x * x; };
Console.WriteLine(sqr(<span class="hljs-number">3</span>));  <span class="hljs-comment">// 9</span>
</code></pre>
<p>ุงู ูุนุงุฏู ููุดุชุงุฑ ุฒุฑ ุจุง lambda ุงุณุช:</p>
<pre class="hljs"><code>Transformer sqr = (<span class="hljs-built_in">int</span> x) =&gt; { <span class="hljs-keyword">return</span> x * x; };
<span class="hljs-comment">// ุง ุณุงุฏูโุชุฑ:</span>
Transformer sqr = x =&gt; x * x;
</code></pre>
<p>ูุชุฏูุง ูุงุดูุงุณ ูู ูุซู lambdaูุง ูุชุบุฑูุง ุจุฑูู ุฑุง Capture ูโฺฉููุฏ ู ุญุช ูโุชูุงููุฏ ุจุง ฺฉูููโ ฺฉูุฏ <code>static</code> ุดุจู lambdaูุง ุงุณุชุงุชฺฉ ุฑูุชุงุฑ ฺฉููุฏ.</p>
<p>ูฺฺฏ ุฎุงุต ุขูโูุง ุงู ุงุณุช ฺฉู <strong>ูโุชูุงู ูพุงุฑุงูุชุฑูุง ุฑุง ฺฉุงููุงู ุญุฐู ฺฉุฑุฏ</strong>ุ ุญุช ุงฺฏุฑ delegate ุขูโูุง ุฑุง ุงูุชุธุงุฑ ุฏุงุดุชู ุจุงุดุฏ. ุงู ุจุฑุง ุชุนุฑู event ุจุง handler ุฎุงู ููุฏ ุงุณุช:</p>
<pre class="hljs"><code><span class="hljs-keyword">public</span> <span class="hljs-keyword">event</span> EventHandler Clicked = <span class="hljs-built_in">delegate</span> { };
</code></pre>
<p>ุงู ฺฉุงุฑ ุจุงุนุซ ูโุดูุฏ ูุจู ุงุฒ ุตุฏุง ุฒุฏู event ูุงุฒ ุจู ุจุฑุฑุณ null ูุฏุงุดุชู ุจุงุดุฏ. ููฺูู ููุดุชู ุฒุฑ ูู ูุนุชุจุฑ ุงุณุช:</p>
<pre class="hljs"><code><span class="hljs-comment">// ูพุงุฑุงูุชุฑูุง ุญุฐู ุดุฏูโุงูุฏ:</span>
Clicked += <span class="hljs-built_in">delegate</span> { Console.WriteLine(<span class="hljs-string">&quot;clicked&quot;</span>); };
</code></pre>
<hr>
<h3>ุฏุณุชูุฑุงุช try ู ูุฏุฑุช ุงุณุชุซูุงูุง (try Statements and Exceptions) โ๏ธ</h3>
<p>ฺฉ ุฏุณุชูุฑ <code>try</code> ฺฉ ุจููฺฉ ฺฉุฏ ุฑุง ูุดุฎุต ูโฺฉูุฏ ฺฉู ููฺฉู ุงุณุช ุฎุทุง ุฑุฎ ุฏูุฏ ุง ูุงุฒ ุจู ูพุงฺฉุณุงุฒ ุฏุงุดุชู ุจุงุดุฏ. ุจููฺฉ <code>try</code> ุจุงุฏ ุญุฏุงูู ุจุง ฺฉ <code>catch</code> ุง ฺฉ <code>finally</code> (ุง ูุฑ ุฏู) ููุฑุงู ุจุงุดุฏ:</p>
<ul>
<li><strong>catch</strong> ุฒูุงู ุงุฌุฑุง ูโุดูุฏ ฺฉู ุฎุทุง ุฏุฑ ุจููฺฉ try ุฑุฎ ุฏูุฏ.</li>
<li><strong>finally</strong> ููุดู ุจุนุฏ ุงุฒ ุฎุฑูุฌ ุงุฒ try (ุง catch) ุงุฌุฑุง ูโุดูุฏ ู ูุนูููุงู ุจุฑุง ฺฉุงุฑูุง ูพุงฺฉุณุงุฒ ูุซู ุจุณุชู ุงุชุตุงูุงุช ุดุจฺฉู ุงุณุช.</li>
</ul>
<p><code>catch</code> ุจู ุดุก <code>Exception</code> ุฏุณุชุฑุณ ุฏุงุฑุฏ ฺฉู ุงุทูุงุนุงุช ุฎุทุง ุฑุง ูฺฏู ูโุฏุงุฑุฏ. ุดูุง ูโุชูุงูุฏ ุฎุทุง ุฑุง ูุฏุฑุช ฺฉูุฏ ุง ุฏูุจุงุฑู ูพุฑุชุงุจ ฺฉูุฏ (ุจุฑุง ูุงฺฏ ฺฉุฑุฏู ุง ุจุงูุง ุจุฑุฏู ุณุทุญ ุฎุทุง).</p>
<p>ูุซุงู:</p>
<pre class="hljs"><code><span class="hljs-keyword">try</span>
{
    <span class="hljs-comment">// ููฺฉู ุงุณุช ุฎุทุง ุฑุฎ ุฏูุฏ</span>
}
<span class="hljs-keyword">catch</span> (ExceptionA ex)
{
    <span class="hljs-comment">// ูุฏุฑุช ุฎุทุง ููุน ExceptionA</span>
}
<span class="hljs-keyword">catch</span> (ExceptionB ex)
{
    <span class="hljs-comment">// ูุฏุฑุช ุฎุทุง ููุน ExceptionB</span>
}
<span class="hljs-keyword">finally</span>
{
    <span class="hljs-comment">// ูพุงฺฉุณุงุฒ</span>
}
</code></pre>
<p>ุจุฑูุงููโ ุฒุฑ ุฑุง ุฏุฑ ูุธุฑ ุจฺฏุฑุฏ:</p>
<pre class="hljs"><code><span class="hljs-built_in">int</span> y = Calc(<span class="hljs-number">0</span>);
Console.WriteLine(y);

<span class="hljs-function"><span class="hljs-built_in">int</span> <span class="hljs-title">Calc</span>(<span class="hljs-params"><span class="hljs-built_in">int</span> x</span>)</span> =&gt; <span class="hljs-number">10</span> / x;
</code></pre>
<p>ฺูู <code>x</code> ุตูุฑ ุงุณุชุ ุฎุทุง <code>DivideByZeroException</code> ุฑุฎ ูโุฏูุฏ ู ุจุฑูุงูู ูุชููู ูโุดูุฏ. ุญุงูุง ุจุง <code>try/catch</code>:</p>
<pre class="hljs"><code><span class="hljs-keyword">try</span>
{
    <span class="hljs-built_in">int</span> y = Calc(<span class="hljs-number">0</span>);
    Console.WriteLine(y);
}
<span class="hljs-keyword">catch</span> (DivideByZeroException ex)
{
    Console.WriteLine(<span class="hljs-string">&quot;x cannot be zero&quot;</span>);
}
Console.WriteLine(<span class="hljs-string">&quot;program completed&quot;</span>);

<span class="hljs-function"><span class="hljs-built_in">int</span> <span class="hljs-title">Calc</span>(<span class="hljs-params"><span class="hljs-built_in">int</span> x</span>)</span> =&gt; <span class="hljs-number">10</span> / x;
</code></pre>
<p>ุฎุฑูุฌ:</p>
<pre class="hljs"><code>x cannot be zero
program completed
</code></pre>
<p>ุฏุฑ ุนููุ ุจูุชุฑ ุงุณุช <strong>ุฎุทุงูุง ูุงุจู ูพุดฺฏุฑ ุฑุง ูุจู ุงุฒ ูููุน ุจุฑุฑุณ ฺฉูุฏ</strong>ุ ูุซูุงู ุชูุณู ุจุฑ ุตูุฑ ุฑุง ฺฺฉ ฺฉูุฏุ ฺูู <strong>exceptionูุง ูุฒููโุจุฑ ูุณุชูุฏ</strong> (ุตุฏูุง ุณฺฉู ูพุฑุฏุงุฒูุฏู ุง ุจุดุชุฑ).</p>
<p>ููุช exception ุฑุฎ ูโุฏูุฏุ CLR ุจุฑุฑุณ ูโฺฉูุฏ:</p>
<ul>
<li>ุงฺฏุฑ <code>catch</code> ุณุงุฒฺฏุงุฑ ูพุฏุง ุดุฏ: ููุงู ุฑุง ุงุฌุฑุง ูโฺฉูุฏุ ุณูพุณ <code>finally</code> ู ุจุฑูุงูู ุงุฏุงูู ูโุงุจุฏ.</li>
<li>ุงฺฏุฑ ูพุฏุง ูุดุฏ: <code>finally</code> ุงุฌุฑุง ูโุดูุฏ (ุงฺฏุฑ ุจุงุดุฏ) ู CLR ุจู ุนูุจ ุฏุฑ stack ุฏูุจุงู <code>try</code> ูโฺฏุฑุฏุฏ.</li>
<li>ุงฺฏุฑ ูฺ ุชุงุจุน ูุณุฆููุช ูฺฏุฑูุช: ุจุฑูุงูู ูุชููู ูโุดูุฏ.</li>
</ul>
<hr>
<h3>ุจุฎุด catch (ุจุฎุด ฺฏุฑูุชู ุงุณุชุซูุงูุง) ๐ก๏ธ</h3>
<p>ฺฉ <strong>catch clause</strong> ูุดุฎุต ูโฺฉูุฏ ฺฉู ฺู ููุน ุงุณุชุซูุง (<strong>Exception</strong>) ุจุงุฏ ฺฏุฑูุชู ุดูุฏ. ุงู ููุน ุจุงุฏ ุง <strong>System.Exception</strong> ุจุงุดุฏ ุง ฺฉ ุฒุฑฺฉูุงุณ ุงุฒ <strong>System.Exception</strong>.</p>
<p>ุงฺฏุฑ <strong>System.Exception</strong> ุฑุง ุจฺฏุฑุฏุ ุชูุงู ุฎุทุงูุง ููฺฉู ุฑุง ุฎูุงูุฏ ฺฏุฑูุช. ุงู ฺฉุงุฑ ุฏุฑ ุดุฑุงุท ุฒุฑ ููุฏ ุงุณุช:</p>
<ul>
<li>ููุช ุจุฑูุงููโุชุงู ูโุชูุงูุฏ ุจุฏูู ุชูุฌู ุจู ููุน ุฎุงุต ุงุณุชุซูุงุ ุจูุจูุฏ ุงุจุฏ.</li>
<li>ููุช ูุตุฏ ุฏุงุฑุฏ ุงุณุชุซูุง ุฑุง ุฏูุจุงุฑู ูพุฑุชุงุจ ฺฉูุฏ (ูุซูุงู ุจุนุฏ ุงุฒ ุซุจุช ุง <strong>Log</strong> ฺฉุฑุฏู ุขู).</li>
<li>ููุช ููุฏูุฑ ุฎุทุง ุดูุง ุขุฎุฑู ุฎุท ุฏูุงุน ูุจู ุงุฒ ูพุงุงู ุจุฑูุงูู ุงุณุช.</li>
</ul>
<p>ุงูุง ุฏุฑ ุญุงูุช ูุนูููุ ุจูุชุฑ ุงุณุช ููุนโูุง ุฎุงุต ุงุณุชุซูุง ุฑุง ุจฺฏุฑุฏ ุชุง ูุฌุจูุฑ ูุดูุฏ ุจุง ุดุฑุงุท ุฑูุจูโุฑู ุดูุฏ ฺฉู ููุฏูุฑ ุดูุง ุจุฑุง ุขู ุทุฑุงุญ ูุดุฏู ุงุณุช (ูุซูุงู <strong>OutOfMemoryException</strong>).</p>
<p>ุจุฑุง ูุฏุฑุช ฺูุฏ ููุน ุงุณุชุซูุงุ ูโุชูุงูุฏ ุงุฒ ฺูุฏู ุจุฎุด <strong>catch</strong> ุงุณุชูุงุฏู ฺฉูุฏ (ูุฑฺูุฏ ุฏุฑ ุงู ูุซุงู ูโุชูุงู ุจู ุฌุง ูุฏุฑุช ุงุณุชุซูุงุ ุจุฑุฑุณ ูุฑูุฏโูุง ุฑุง ุงูุฌุงู ุฏุงุฏ):</p>
<pre class="hljs"><code><span class="hljs-keyword">class</span> <span class="hljs-title">Test</span>
{
  <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Main</span> (<span class="hljs-params"><span class="hljs-built_in">string</span>[] <span class="hljs-keyword">args</span></span>)</span>
  {
    <span class="hljs-keyword">try</span>
    {
      <span class="hljs-built_in">byte</span> b = <span class="hljs-built_in">byte</span>.Parse (<span class="hljs-keyword">args</span>[<span class="hljs-number">0</span>]);
      Console.WriteLine (b);
    }
    <span class="hljs-keyword">catch</span> (IndexOutOfRangeException)
    {
      Console.WriteLine (<span class="hljs-string">&quot;Please provide at least one argument&quot;</span>);
    }
    <span class="hljs-keyword">catch</span> (FormatException)
    {
      Console.WriteLine (<span class="hljs-string">&quot;That&#x27;s not a number!&quot;</span>);
    }
    <span class="hljs-keyword">catch</span> (OverflowException)
    {
      Console.WriteLine (<span class="hljs-string">&quot;You&#x27;ve given me more than a byte!&quot;</span>);
    }
  }
}
</code></pre>
<p>ุจุฑุง ูุฑ ุงุณุชุซูุง ููุท ฺฉ <strong>catch</strong> ุงุฌุฑุง ูโุดูุฏ. ุงฺฏุฑ ูโุฎูุงูุฏ ฺฉ ููุฏูุฑ ฺฉู ูุซู <strong>System.Exception</strong> ุฏุงุดุชู ุจุงุดุฏุ ุจุงุฏ ููุฏูุฑูุง ุฎุงุตโุชุฑ ุฑุง ูุจู ุงุฒ ุขู ูุฑุงุฑ ุฏูุฏ.</p>
<p>ฺฏุงู ูุงุฒ ูุฏุงุฑุฏ ุจู ูฺฺฏโูุง ุงุณุชุซูุง ุฏุณุชุฑุณ ุฏุงุดุชู ุจุงุดุฏ. ุฏุฑ ุงู ุญุงูุช ูโุชูุงูุฏ ูุชุบุฑ ุฑุง ุญุฐู ฺฉูุฏ:</p>
<pre class="hljs"><code><span class="hljs-keyword">catch</span> (OverflowException)   <span class="hljs-comment">// ุจุฏูู ูุชุบุฑ</span>
{
  ...
}
</code></pre>
<p>ุญุช ูโุชูุงูุฏ ูู ูุชุบุฑ ู ูู ููุน ุฑุง ุญุฐู ฺฉูุฏ (ุจู ุงู ูุนู ฺฉู ููู ุงุณุชุซูุงูุง ฺฏุฑูุชู ูโุดููุฏ):</p>
<pre class="hljs"><code><span class="hljs-keyword">catch</span> { ... }
</code></pre>
<hr>
<h3>Exception filters (ููุชุฑูุง ุงุณุชุซูุง) ๐</h3>
<p>ูโุชูุงูุฏ ุฏุฑ ุจุฎุด <strong>catch</strong> ฺฉ ููุชุฑ ุงุณุชุซูุง ุจุง ุงุณุชูุงุฏู ุงุฒ ฺฉููู <strong>when</strong> ูุดุฎุต ฺฉูุฏ:</p>
<pre class="hljs"><code><span class="hljs-keyword">catch</span> (WebException ex) <span class="hljs-keyword">when</span> (ex.Status == WebExceptionStatus.Timeout)
{
  ...
}
</code></pre>
<p>ุฏุฑ ุงู ูุซุงูุ ุงฺฏุฑ <strong>WebException</strong> ูพุฑุชุงุจ ุดูุฏุ ุนุจุงุฑุช ุจูู ุจุนุฏ ุงุฒ <strong>when</strong> ุงุฑุฒุงุจ ูโุดูุฏ. ุงฺฏุฑ ูุชุฌู <strong>false</strong> ุจุงุดุฏุ ุงู <strong>catch</strong> ูุงุฏุฏู ฺฏุฑูุชู ุดุฏู ู ุจู ุณุฑุงุบ <strong>catch</strong>ูุง ุจุนุฏ ูโุฑูุฏ.</p>
<p>ุจุง <strong>exception filters</strong> ูโุชูุงู ฺฉ ููุน ุงุณุชุซูุง ุฑุง ฺูุฏ ุจุงุฑ ุจุง ุดุฑุงุท ูุชูุงูุช ฺฏุฑูุช:</p>
<pre class="hljs"><code><span class="hljs-keyword">catch</span> (WebException ex) <span class="hljs-keyword">when</span> (ex.Status == WebExceptionStatus.Timeout)
{ ... }
<span class="hljs-keyword">catch</span> (WebException ex) <span class="hljs-keyword">when</span> (ex.Status == WebExceptionStatus.SendFailure)
{ ... }
</code></pre>
<p>ุนุจุงุฑุช ุจูู ุฏุฑ <strong>when</strong> ุญุช ูโุชูุงูุฏ ุดุงูู ูุชุฏูุง ุจุงุดุฏ ฺฉู ุนููุงุช ุฌุงูุจ ุงูุฌุงู ูโุฏููุฏุ ูุงููุฏ ุซุจุช ุฎุทุง ุจุฑุง ุงูุฏุงู ุนุจโุงุจ.</p>
<hr>
<h3>ุจุฎุด finally (ุจุฎุด ูพุงุงู) ๐งน</h3>
<p>ุจุฎุด <strong>finally</strong> ููุดู ุงุฌุฑุง ูโุดูุฏโฺู ุงุณุชุซูุง ุฑุฎ ุฏูุฏ ฺู ููุ ู ฺู <strong>try</strong> ุจู ุทูุฑ ฺฉุงูู ุงุฌุฑุง ุดูุฏ ุง ุฎุฑ. ูุนูููุงู ุงุฒ <strong>finally</strong> ุจุฑุง ฺฉุฏูุง ูพุงฺฉโุณุงุฒ ุงุณุชูุงุฏู ูโฺฉูู.</p>
<p>ุจุฎุด <strong>finally</strong> ุจุนุฏ ุงุฒ ูุฑ ฺฉ ุงุฒ ุงู ุญุงูุชโูุง ุงุฌุฑุง ูโุดูุฏ:</p>
<ul>
<li>ุจุนุฏ ุงุฒ ุงุชูุงู ฺฉ <strong>catch</strong> (ุง ุฒูุงู ฺฉู ฺฉ ุงุณุชุซูุง ุฌุฏุฏ ูพุฑุชุงุจ ุดูุฏ).</li>
<li>ุจุนุฏ ุงุฒ ุงุชูุงู ุจููฺฉ <strong>try</strong> (ุง ุฒูุงู ฺฉู ุงุณุชุซูุง ุฑุฎ ุฏูุฏ ฺฉู ููุฏูุฑ ุจุฑุงุด ูุฌูุฏ ูุฏุงุฑุฏ).</li>
<li>ุฒูุงู ฺฉู ฺฉูุชุฑู ุจุง ฺฉ ุฏุณุชูุฑ ูพุฑุด (ูุซู <strong>return</strong> ุง <strong>goto</strong>) ุงุฒ ุจููฺฉ <strong>try</strong> ุฎุงุฑุฌ ุดูุฏ.</li>
</ul>
<p>ุชููุง ููุงุฑุฏ ฺฉู ูโุชูุงููุฏ ูุงูุน ุงุฌุฑุง <strong>finally</strong> ุดููุฏุ ฺฉ ุญููู ุจโููุงุช ุง ูพุงุงู ูุงฺฏูุงู ูพุฑุฏุงุฒุด ุงุณุช.</p>
<p>ุจุฎุด <strong>finally</strong> ุจู ุจุฑูุงููโุชุงู ูุธู ู ูุทุนุช ุงุถุงูู ูโฺฉูุฏ. ุฏุฑ ูุซุงู ุฒุฑุ ูุงู ฺฉู ุจุงุฒ ุดุฏู ููุดู ุจุณุชู ูโุดูุฏุ ุตุฑูโูุธุฑ ุงุฒ ุงูฺฉู:</p>
<ul>
<li>ุจููฺฉ <strong>try</strong> ุจู ุทูุฑ ุนุงุฏ ุชูุงู ุดูุฏ.</li>
<li>ุงุฌุฑุง ุจู ุฏูู ุฎุงู ุจูุฏู ูุงู (<strong>EndOfStream</strong>) ุฒูุฏุชุฑ ุจุงุฒฺฏุฑุฏุฏ.</li>
<li>ฺฉ <strong>IOException</strong> ููฺฏุงู ุฎูุงูุฏู ูุงู ุฑุฎ ุฏูุฏ:</li>
</ul>
<pre class="hljs"><code><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">ReadFile</span>()</span>
{
  StreamReader reader = <span class="hljs-literal">null</span>;    <span class="hljs-comment">// ุฏุฑ ูุถุง ูุงู System.IO</span>
  <span class="hljs-keyword">try</span>
  {
    reader = File.OpenText (<span class="hljs-string">&quot;file.txt&quot;</span>);
    <span class="hljs-keyword">if</span> (reader.EndOfStream) <span class="hljs-keyword">return</span>;
    Console.WriteLine (reader.ReadToEnd());
  }
  <span class="hljs-keyword">finally</span>
  {
    <span class="hljs-keyword">if</span> (reader != <span class="hljs-literal">null</span>) reader.Dispose();
  }
}
</code></pre>
<p>ุฏุฑ ุงู ูุซุงูุ ูุงู ุฑุง ุจุง ูุฑุงุฎูุงู <strong>Dispose</strong> ุฑู <strong>StreamReader</strong> ุจุณุชู. ูุฑุงุฎูุงู <strong>Dispose</strong> ุฑู ฺฉ ุดุก ุฏุฑ ุฏุงุฎู <strong>finally</strong> ฺฉ ุฑูุด ุงุณุชุงูุฏุงุฑุฏ ุงุณุช ู ุฏุฑ #C ุจุง ุฏุณุชูุฑ <strong>using</strong> ูุฒ ูพุดุชุจุงู ูโุดูุฏ.</p>
<hr>
<h3>ุฏุณุชูุฑ <code>using</code> โป๏ธ</h3>
<p>ุจุณุงุฑ ุงุฒ ฺฉูุงุณโูุง ููุงุจุน ูุฏุฑุชโูุดุฏู (Unmanaged Resources) ูุงููุฏ <strong>ุฏุณุชฺฏุฑูโูุง ูุงู (File Handles)</strong>ุ <strong>ุฏุณุชฺฏุฑูโูุง ฺฏุฑุงูฺฉ (Graphics Handles)</strong> ุง <strong>ุงุชุตุงูุงุช ูพุงฺฏุงู ุฏุงุฏู (Database Connections)</strong> ุฑุง ุฏุฑ ุฎูุฏ ุฌุง ูโุฏููุฏ. ุงู ฺฉูุงุณโูุง ุงูุชุฑูุณ <strong><code>System.IDisposable</code></strong> ุฑุง ูพุงุฏูโุณุงุฒ ูโฺฉููุฏ ฺฉู ุชููุง ฺฉ ูุชุฏ ุจุฏูู ูพุงุฑุงูุชุฑ ุจู ูุงู <strong><code>Dispose</code></strong> ุฏุงุฑุฏ ู ุจุฑุง ูพุงฺฉโุณุงุฒ ุงู ููุงุจุน ุงุณุชูุงุฏู ูโุดูุฏ.</p>
<p>ุฏุณุชูุฑ <strong><code>using</code></strong> ฺฉ ูฺฏุงุฑุด ุณุงุฏู ู ุดฺฉู ุจุฑุง ูุฑุงุฎูุงู <strong><code>Dispose</code></strong> ุฑู ฺฉ ุดุก ูพุงุฏูโุณุงุฒ <strong><code>IDisposable</code></strong>ุ ุฏุฑูู ฺฉ ุจููฺฉ <strong><code>finally</code></strong> ูุฑุงูู ูโฺฉูุฏ.</p>
<p>ุจูโุนููุงู ูุซุงู:</p>
<pre class="hljs"><code><span class="hljs-keyword">using</span> (StreamReader reader = File.OpenText(<span class="hljs-string">&quot;file.txt&quot;</span>))
{
    ...
}
</code></pre>
<p>ุงู ูุทุนูโฺฉุฏ ุฏููุงู ูุนุงุฏู ุฒุฑ ุงุณุช:</p>
<pre class="hljs"><code>StreamReader reader = File.OpenText(<span class="hljs-string">&quot;file.txt&quot;</span>);
<span class="hljs-keyword">try</span>
{
    ...
}
<span class="hljs-keyword">finally</span>
{
    <span class="hljs-keyword">if</span> (reader != <span class="hljs-literal">null</span>)
        ((IDisposable)reader).Dispose();
}
</code></pre>
<hr>
<h3>ุงุนูุงูโูุง <code>using</code> (Using Declarations) โ๏ธ</h3>
<p>ุงฺฏุฑ ุฏุฑ <strong>C# 8 ู ูุณุฎูโูุง ุจุงูุงุชุฑ</strong>ุ ุจุฑุงฺฉุชโูุง ู ุจููฺฉ ฺฉุฏ ุจุนุฏ ุงุฒ ุฏุณุชูุฑ <strong><code>using</code></strong> ุญุฐู ุดููุฏุ ุงู ุฏุณุชูุฑ ุชุจุฏู ุจู <strong>ุงุนูุงู using</strong> ูโุดูุฏ. ุฏุฑ ุงู ุญุงูุชุ ููุจุน ุฒูุงู ุขุฒุงุฏ ูโุดูุฏ ฺฉู ุงุฌุฑุง ุจุฑูุงูู ุงุฒ ุจููฺฉ ูุญุตูุฑฺฉููุฏู ุฎุงุฑุฌ ฺฏุฑุฏุฏ.</p>
<p>ูุซุงู:</p>
<pre class="hljs"><code><span class="hljs-keyword">if</span> (File.Exists(<span class="hljs-string">&quot;file.txt&quot;</span>))
{
    <span class="hljs-keyword">using</span> <span class="hljs-keyword">var</span> reader = File.OpenText(<span class="hljs-string">&quot;file.txt&quot;</span>);
    Console.WriteLine(reader.ReadLine());
    ...
}
</code></pre>
<p>ุฏุฑ ุงู ุญุงูุชุ <strong><code>reader</code></strong> ุฒูุงู Dispose ูโุดูุฏ ฺฉู ุงุฌุฑุง ุจุฑูุงูู ุงุฒ ุจููฺฉ <strong><code>if</code></strong> ุฎุงุฑุฌ ุดูุฏ.</p>
<hr>
<h3>ูพุฑุชุงุจ ุงุณุชุซูุง (Throwing Exceptions) ๐</h3>
<p>ุงุณุชุซูุงูุง (Exceptions) ูโุชูุงููุฏ ูู ุชูุณุท <strong>ุฒูุงู ุงุฌุฑุง (Runtime)</strong> ู ูู ุฏุฑ <strong>ฺฉุฏูุง ฺฉุงุฑุจุฑ</strong> ูพุฑุชุงุจ ุดููุฏ. ุฏุฑ ูุซุงู ุฒุฑุ ูุชุฏ <strong><code>Display</code></strong> ฺฉ ุงุณุชุซูุง <strong><code>System.ArgumentNullException</code></strong> ุฑุง ูพุฑุชุงุจ ูโฺฉูุฏ:</p>
<pre class="hljs"><code><span class="hljs-keyword">try</span> { Display(<span class="hljs-literal">null</span>); }
<span class="hljs-keyword">catch</span> (ArgumentNullException ex)
{
    Console.WriteLine(<span class="hljs-string">&quot;Caught the exception&quot;</span>);
}

<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Display</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> name</span>)</span>
{
    <span class="hljs-keyword">if</span> (name == <span class="hljs-literal">null</span>)
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> ArgumentNullException(<span class="hljs-keyword">nameof</span>(name));
    Console.WriteLine(name);
}
</code></pre>
<p>ุงุฒ ุขูโุฌุง ฺฉู ุจุฑุฑุณ ุขุฑฺฏููุงู ุจุฑุง ููุฏุงุฑ <strong>null</strong> ู ูพุฑุชุงุจ <strong><code>ArgumentNullException</code></strong> ุจุณุงุฑ ุฑุงุฌ ุงุณุชุ ุงุฒ <strong>.NET 6</strong> ฺฉ ูุงูโุจุฑ ุงุฑุงุฆู ุดุฏู ุงุณุช:</p>
<pre class="hljs"><code><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Display</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> name</span>)</span>
{
    ArgumentNullException.ThrowIfNull(name);
    Console.WriteLine(name);
}
</code></pre>
<p>ุชูุฌู ฺฉูุฏ ฺฉู ุฏุฑ ุงู ุฑูุดุ ูุงุฒ ุจู ูุดุฎุต ฺฉุฑุฏู ูุงู ูพุงุฑุงูุชุฑ ูุฏุงุฑู. ุฏูู ุงู ููุถูุน ุฏุฑ ุจุฎุด <strong>CallerArgumentExpression</strong> (ุตูุญู 247) ุชูุถุญ ุฏุงุฏู ุฎูุงูุฏ ุดุฏ.</p>
<hr>
<h3>ุนุจุงุฑุชโูุง <code>throw</code> (Throw Expressions) ๐ฏ</h3>
<p>ุนุจุงุฑุช <strong><code>throw</code></strong> ูโุชูุงูุฏ ุจูโุนููุงู ฺฉ <strong>ุนุจุงุฑุช (Expression)</strong> ุฏุฑ ูุชุฏูุง <strong>Expression-bodied</strong> ุงุณุชูุงุฏู ุดูุฏ:</p>
<pre class="hljs"><code><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> <span class="hljs-title">Foo</span>()</span> =&gt; <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> NotImplementedException();
</code></pre>
<p>ููฺูู ูโุชูุงูุฏ ุฏุฑ ฺฉ <strong>ุนุจุงุฑุช ุดุฑุท ุณูโุชุง (Ternary Conditional Expression)</strong> ุธุงูุฑ ุดูุฏ:</p>
<pre class="hljs"><code><span class="hljs-function"><span class="hljs-built_in">string</span> <span class="hljs-title">ProperCase</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> <span class="hljs-keyword">value</span></span>)</span> =&gt;
    <span class="hljs-keyword">value</span> == <span class="hljs-literal">null</span> ? <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> ArgumentException(<span class="hljs-string">&quot;value&quot;</span>) :
    <span class="hljs-keyword">value</span> == <span class="hljs-string">&quot;&quot;</span> ? <span class="hljs-string">&quot;&quot;</span> :
    <span class="hljs-built_in">char</span>.ToUpper(<span class="hljs-keyword">value</span>[<span class="hljs-number">0</span>]) + <span class="hljs-keyword">value</span>.Substring(<span class="hljs-number">1</span>);
</code></pre>
<hr>
<h3>ูพุฑุชุงุจ ุฏูุจุงุฑู ุงุณุชุซูุง (Rethrowing an Exception) ๐</h3>
<p>ูโุชูุงูุฏ ฺฉ ุงุณุชุซูุง ุฑุง ฺฏุฑูุชู ู ุฏูุจุงุฑู ูพุฑุชุงุจ ฺฉูุฏ:</p>
<pre class="hljs"><code><span class="hljs-keyword">try</span>
{
    ...
}
<span class="hljs-keyword">catch</span> (Exception ex)
{
    <span class="hljs-comment">// Log error</span>
    ...
    <span class="hljs-keyword">throw</span>; <span class="hljs-comment">// ูพุฑุชุงุจ ุฏูุจุงุฑู ููุงู ุงุณุชุซูุง</span>
}
</code></pre>
<p>ุงฺฏุฑ ุจูโุฌุง <strong><code>throw</code></strong> ุงุฒ <strong><code>throw ex</code></strong> ุงุณุชูุงุฏู ฺฉููุ ุจุฑูุงูู ููฺูุงู ฺฉุงุฑ ูโฺฉูุฏ ุงูุง ุฎุงุตุช <strong><code>StackTrace</code></strong> ุฏฺฏุฑ ูุณุฑ ุฎุทุง ุงุตู ุฑุง ูุดุงู ููโุฏูุฏ.</p>
<p>ูพุฑุชุงุจ ุฏูุจุงุฑู ุจู ุดูุง ุงุฌุงุฒู ูโุฏูุฏ ุฎุทุง ุฑุง <strong>ุซุจุช (Log)</strong> ฺฉูุฏ ุจุฏูู ุงูฺฉู ุขู ุฑุง ูุงุฏุฏู ุจฺฏุฑุฏุ ุง ุฒูุงู ฺฉู ุดุฑุงุท ูุฑุงุชุฑ ุงุฒ ุงูุชุธุงุฑ ุงุณุชุ ุงุฒ ุงุฏุงูู ูุฏุฑุช ุฎุทุง ุตุฑูโูุธุฑ ฺฉูุฏ.</p>
<p>ฺฉ ุฏฺฏุฑ ุงุฒ ุณูุงุฑููุง ุฑุงุฌุ ูพุฑุชุงุจ ฺฉ ุงุณุชุซูุง <strong>ุฎุงุตโุชุฑ</strong> ุงุณุช:</p>
<pre class="hljs"><code><span class="hljs-keyword">try</span>
{
    <span class="hljs-comment">// Parse a DateTime from XML element data</span>
}
<span class="hljs-keyword">catch</span> (FormatException ex)
{
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> XmlException(<span class="hljs-string">&quot;Invalid DateTime&quot;</span>, ex);
}
</code></pre>
<p>ุฏูุช ฺฉูุฏ ฺฉู ููฺฏุงู ุณุงุฎุช <strong><code>XmlException</code></strong>ุ ุงุณุชุซูุง ุงุตู <strong><code>ex</code></strong> ุฑุง ุจูโุนููุงู ุขุฑฺฏููุงู ุฏูู ูพุงุณ ุฏุงุฏู. ุงู ุขุฑฺฏููุงู ุฎุงุตุช <strong><code>InnerException</code></strong> ุฑุง ููุฏุงุฑุฏู ูโฺฉูุฏ ู ุฏุฑ ุงุดฺฉุงูโุฒุฏุง ฺฉูฺฉ ุฒุงุฏ ูโฺฉูุฏ. ุชูุฑุจุงู ููู ุงููุงุน ุงุณุชุซูุง ฺูู ุณุงุฒูุฏูโุง ุฏุงุฑูุฏ.</p>
<hr>
<h3>ูพุฑุชุงุจ ฺฉ ุงุณุชุซูุง ฺฉูโุชุฑ (Less-Specific Exception)</h3>
<p>ุงู ุฑูุด ุฒูุงู ููุฏ ุงุณุช ฺฉู ุฏุฑ ุญุงู ุนุจูุฑ ุงุฒ ฺฉ <strong>ูุฑุฒ ุงุนุชูุงุฏ (Trust Boundary)</strong> ูุณุชุฏ ุชุง ุงุฒ ุงูุดุง ุงุทูุงุนุงุช ูู ุจุฑุง ููุงุฌูุงู ุจุงูููู ุฌููฺฏุฑ ฺฉูุฏ.</p>
<hr>
<h3>ูฺฺฏโูุง ฺฉูุฏ <strong>System.Exception</strong> โ๏ธ</h3>
<p>ูููโุชุฑู ูฺฺฏโูุง <strong>System.Exception</strong> ุจู ุดุฑุญ ุฒุฑ ูุณุชูุฏ:</p>
<ul>
<li>
<p><strong>StackTrace</strong><br>
ุฑุดุชูโุง (<strong>string</strong>) ฺฉู ุชูุงู ูุชุฏูุง ุฑุง ฺฉู ุงุฒ ููุทู ุดุฑูุน ุฑุฎุฏุงุฏ ุงุณุชุซูุง ุชุง ุจููฺฉ <strong>catch</strong> ูุฑุงุฎูุงู ุดุฏูโุงูุฏุ ููุงุด ูโุฏูุฏ.</p>
</li>
<li>
<p><strong>Message</strong><br>
ุฑุดุชูโุง ฺฉู ุชูุถุญ ุฎุทุง ุฑุง ุฏุฑ ุฎูุฏ ูฺฏู ูโุฏุงุฑุฏ.</p>
</li>
<li>
<p><strong>InnerException</strong><br>
ุงุณุชุซูุง ุฏุงุฎู (ุฏุฑ ุตูุฑุช ูุฌูุฏ) ฺฉู ุจุงุนุซ ุงุฌุงุฏ ุงุณุชุซูุง ุจุฑูู ุดุฏู ุงุณุช. ุงู ุงุณุชุซูุง ุฎูุฏ ูโุชูุงูุฏ ุดุงูู <strong>InnerException</strong> ุฏฺฏุฑ ูุฒ ุจุงุดุฏ.</p>
</li>
</ul>
<blockquote>
<p>ุฏุฑ ุฒุจุงู C# ุชูุงู ุงุณุชุซูุงูุง ุฏุฑ ุฒูุงู ุงุฌุฑุง (<strong>runtime exceptions</strong>) ุงุชูุงู ูโุงูุชูุฏ ู ูุนุงุฏู ุจุฑุง ุงุณุชุซูุงูุง ุจุฑุฑุณโุดุฏู ุฏุฑ ุฒูุงู ฺฉุงููพุงู (<strong>compile-time checked exceptions</strong>) ูุงููุฏ Java ูุฌูุฏ ูุฏุงุฑุฏ.</p>
</blockquote>
<hr>
<h3>ุงููุงุน ุฑุงุฌ ุงุณุชุซูุงูุง ๐จ</h3>
<p>ุงููุงุน ุฒุฑ ุงุฒ ุงุณุชุซูุงูุง ุจูโุทูุฑ ฺฏุณุชุฑุฏู ุฏุฑ ุณุฑุงุณุฑ <strong>CLR</strong> ู ฺฉุชุงุจุฎุงููโูุง <strong>.NET</strong> ุงุณุชูุงุฏู ูโุดููุฏ. ุดูุง ูโุชูุงูุฏ ุขูโูุง ุฑุง ุฎูุฏุชุงู ูพุฑุชุงุจ ฺฉูุฏ ุง ุงุฒ ุขูโูุง ุจูโุนููุงู ฺฉูุงุณ ูพุงู ุจุฑุง ุณุงุฎุช ุงููุงุน ุณูุงุฑุด ุงุณุชุซูุง ุงุณุชูุงุฏู ููุงุฏ:</p>
<ul>
<li>
<p><strong>System.ArgumentException</strong><br>
ุฒูุงู ูพุฑุชุงุจ ูโุดูุฏ ฺฉู ฺฉ ุชุงุจุน ุจุง ุขุฑฺฏููุงู ูุงูุนุชุจุฑ ูุฑุงุฎูุงู ุดูุฏ. ูุนูููุงู ูุดุงูโุฏููุฏู ฺฉ ุฎุทุง ุจุฑูุงููโููุณ ุงุณุช.</p>
</li>
<li>
<p><strong>System.ArgumentNullException</strong><br>
ุฒุฑฺฉูุงุณ <strong>ArgumentException</strong> ฺฉู ููุช ฺฉ ุขุฑฺฏููุงู ุชุงุจุน ุจูโุทูุฑ ุบุฑููุชุธุฑู <strong>null</strong> ุจุงุดุฏุ ูพุฑุชุงุจ ูโุดูุฏ.</p>
</li>
<li>
<p><strong>System.ArgumentOutOfRangeException</strong><br>
ุฒุฑฺฉูุงุณ <strong>ArgumentException</strong> ฺฉู ููุช ฺฉ ุขุฑฺฏููุงู (ูุนูููุงู ุนุฏุฏ) ุฎู ุจุฒุฑฺฏ ุง ุฎู ฺฉูฺฺฉ ุจุงุดุฏุ ูพุฑุชุงุจ ูโุดูุฏ. ุจุฑุง ูุซุงูุ ุงุฑุณุงู ฺฉ ุนุฏุฏ ููู ุจู ุชุงุจุน ฺฉู ููุท ููุงุฏุฑ ูุซุจุช ุฑุง ูโูพุฐุฑุฏ.</p>
</li>
<li>
<p><strong>System.InvalidOperationException</strong><br>
ุฒูุงู ูพุฑุชุงุจ ูโุดูุฏ ฺฉู ูุถุนุช ฺฉ ุดุก ุจุฑุง ุงุฌุฑุง ููููุชโุขูุฒ ูุชุฏ ููุงุณุจ ูุจุงุดุฏุ ุจุฏูู ุชูุฌู ุจู ููุฏุงุฑ ุขุฑฺฏููุงูโูุง. ูุซุงูโูุง ุดุงูู ุฎูุงูุฏู ฺฉ ูุงู ุจุงุฒูุดุฏู ุง ุฏุฑุงูุช ุนูุตุฑ ุจุนุฏ ุงุฒ ฺฉ ุดูุงุฑูุฏู (<strong>Enumerator</strong>) ุงุณุช ฺฉู ูุณุช ุฒุฑู ุขู ุฏุฑ ูุงูู ุงุฌุฑุง ุชุบุฑ ฺฉุฑุฏู ุงุณุช.</p>
</li>
<li>
<p><strong>System.NotSupportedException</strong><br>
ุฒูุงู ูพุฑุชุงุจ ูโุดูุฏ ฺฉู ฺฉ ูุงุจูุช ุฎุงุต ูพุดุชุจุงู ููโุดูุฏ. ูุซุงู ููุงุณุจ: ูุฑุงุฎูุงู ูุชุฏ <strong>Add</strong> ุฑู ูุฌููุนูโุง ฺฉู <strong>IsReadOnly</strong> ุขู <strong>true</strong> ุงุณุช.</p>
</li>
<li>
<p><strong>System.NotImplementedException</strong><br>
ุฒูุงู ูพุฑุชุงุจ ูโุดูุฏ ฺฉู ฺฉ ุชุงุจุน ูููุฒ ูพุงุฏูโุณุงุฒ ูุดุฏู ุงุณุช.</p>
</li>
<li>
<p><strong>System.ObjectDisposedException</strong><br>
ุฒูุงู ูพุฑุชุงุจ ูโุดูุฏ ฺฉู ุฑู ุดุฆ ฺฉู ูุจูุงู <strong>Dispose</strong> ุดุฏูุ ูุชุฏ ูุฑุงุฎูุงู ุดูุฏ.</p>
</li>
</ul>
<p>ฺฉ ุฏฺฏุฑ ุงุฒ ุงุณุชุซูุงูุง ุฑุงุฌ <strong>NullReferenceException</strong> ุงุณุช. ุงู ุงุณุชุซูุง ุชูุณุท <strong>CLR</strong> ุฒูุงู ูพุฑุชุงุจ ูโุดูุฏ ฺฉู ุชูุงุด ฺฉูุฏ ุจู ุนุถู ุงุฒ ุดุฆ ฺฉู ููุฏุงุฑ ุขู <strong>null</strong> ุงุณุช ุฏุณุชุฑุณ ูพุฏุง ฺฉูุฏ (ฺฉู ูุดุงูโุฏููุฏู ูุฌูุฏ ุจุงฺฏ ุฏุฑ ฺฉุฏ ุดูุงุณุช). ุจุฑุง ุชุณุชุ ูโุชูุงูุฏ ุจูโุทูุฑ ูุณุชูู ุงู ุงุณุชุซูุง ุฑุง ูพุฑุชุงุจ ฺฉูุฏ:</p>
<pre class="hljs"><code><span class="hljs-keyword">throw</span> <span class="hljs-literal">null</span>;
</code></pre>
<hr>
<h3>ุงูฺฏู ูุชุฏูุง <strong>TryXXX</strong> ๐</h3>
<p>ููฺฏุงู ููุดุชู ฺฉ ูุชุฏุ ุฒูุงู ฺฉู ูุดฺฉู ูพุด ูโุขุฏุ ุฏู ุงูุชุฎุงุจ ุฏุงุฑุฏ: ุง ฺฉ ฺฉุฏ ุฎุทุง ุจุฑฺฏุฑุฏุงูุฏ ุง ฺฉ ุงุณุชุซูุง ูพุฑุชุงุจ ฺฉูุฏ. ุจูโุทูุฑ ฺฉูุ ุฒูุงู ฺฉู ุฎุทุง ุฎุงุฑุฌ ุงุฒ ุฑููุฏ ุนุงุฏ ุจุฑูุงูู ุจุงุดุฏ ุง ุฒูุงู ฺฉู ุงูุชุธุงุฑ ูุฏุงุฑุฏ ูุฑุงุฎูุงููุฏู ุจุชูุงูุฏ ุจุง ุขู ููุงุจูู ฺฉูุฏุ ุงุณุชุซูุง ูพุฑุชุงุจ ูโฺฉูุฏ.</p>
<p>ุจุงุงูโุญุงูุ ฺฏุงู ุจูุชุฑ ุงุณุช ูุฑ ุฏู ุงูุชุฎุงุจ ุฑุง ุจู ูุตุฑูโฺฉููุฏู ุงุฑุงุฆู ุฏูุฏ. ูุซุงู ุงุฒ ุงู ููุฑุฏ ููุน <strong>int</strong> ุงุณุช ฺฉู ุฏู ูุณุฎู ุงุฒ ูุชุฏ <strong>Parse</strong> ุฑุง ุงุฑุงุฆู ูโุฏูุฏ:</p>
<pre class="hljs"><code><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-built_in">int</span> <span class="hljs-title">Parse</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> input</span>)</span>;
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-built_in">bool</span> <span class="hljs-title">TryParse</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> input, <span class="hljs-keyword">out</span> <span class="hljs-built_in">int</span> returnValue</span>)</span>;
</code></pre>
<p>ุงฺฏุฑ <strong>Parse</strong> ุดฺฉุณุช ุจุฎูุฑุฏุ ฺฉ ุงุณุชุซูุง ูพุฑุชุงุจ ูโฺฉูุฏุ ุงูุง <strong>TryParse</strong> ุฏุฑ ุงู ุญุงูุช ููุฏุงุฑ <strong>false</strong> ุจุฑูโฺฏุฑุฏุงูุฏ.</p>
<p>ูโุชูุงูุฏ ุงู ุงูฺฏู ุฑุง ุจุง ุงู ุฑูุด ูพุงุฏูโุณุงุฒ ฺฉูุฏ ฺฉู ูุชุฏ <strong>XXX</strong> ุฏุฑ ููุงุช ูุชุฏ <strong>TryXXX</strong> ุฑุง ูุฑุงุฎูุงู ฺฉูุฏ:</p>
<pre class="hljs"><code><span class="hljs-keyword">public</span> <span class="hljs-keyword">return</span>-<span class="hljs-function">type <span class="hljs-title">XXX</span>(<span class="hljs-params">input-type input</span>)</span>
{
    <span class="hljs-keyword">return</span>-type returnValue;
    <span class="hljs-keyword">if</span> (!TryXXX(input, <span class="hljs-keyword">out</span> returnValue))
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> YYYException(...);
    <span class="hljs-keyword">return</span> returnValue;
}
</code></pre>
<hr>
<h3>ุฌุงฺฏุฒูโูุง ุงุณุชุซูุงูุง ๐๏ธ</h3>
<p>ููุงููุฏ <strong>int.TryParse</strong>ุ ฺฉ ุชุงุจุน ูโุชูุงูุฏ ุจุง ุจุฑฺฏุฑุฏุงูุฏู ฺฉ ฺฉุฏ ุฎุทุง ุงุฒ ุทุฑู ููุฏุงุฑ ุจุงุฒฺฏุดุช ุง ูพุงุฑุงูุชุฑ ุจู ุชุงุจุน ูุฑุงุฎูุงููุฏูุ ุดฺฉุณุช ุฑุง ุงุทูุงุน ุฏูุฏ. ุงฺฏุฑฺู ุงู ุฑูุด ุจุฑุง ุฎุทุงูุง ุณุงุฏู ู ูุงุจู ูพุดโุจู ฺฉุงุฑุขูุฏ ุงุณุชุ ุงูุง ููฺฏุงู ููุงุฌูู ุจุง ุฎุทุงูุง ุบุฑูุนููู ุง ุบุฑูุงุจู ูพุดโุจู ุฏุณุชโููพุงฺฏุฑ ูโุดูุฏุ ุงูุถุง ูุชุฏูุง ุฑุง ุดููุบ ูโฺฉูุฏ ู ูพฺุฏฺฏโูุง ุบุฑุถุฑูุฑ ุงุฌุงุฏ ูโููุงุฏ.</p>
<p>ููฺูู ุงู ุฑูุด ุจุฑุง ุชูุงุจุน ฺฉู ูุชุฏ ูุณุชูุฏ (ูุงููุฏ ุนููฺฏุฑูุง ูุซู ุนููฺฏุฑ ุชูุณู ุง ูฺฺฏโูุง <strong>Properties</strong>) ูุงุจู ุงุณุชูุงุฏู ูุณุช. ฺฉ ุฌุงฺฏุฒู ุฏฺฏุฑ ูุฑุงุฑ ุฏุงุฏู ุฎุทุง ุฏุฑ ฺฉ ูุญู ูุดุชุฑฺฉ ุงุณุช ฺฉู ุชูุงู ุชูุงุจุน ุฏุฑ ุฒูุฌุฑู ูุฑุงุฎูุงู ุจุชูุงููุฏ ุขู ุฑุง ุจุจููุฏ (ูุซูุงู ฺฉ ูุชุฏ <strong>static</strong> ฺฉู ุฎุทุง ูุนู ุฑุง ุฏุฑ ูุฑ ูุฎ ุฐุฎุฑู ฺฉูุฏ). ุจุง ุงู ุญุงูุ ุงู ุฑูุด ูุงุฒููุฏ ูุดุงุฑฺฉุช ูุฑ ุชุงุจุน ุฏุฑ ุงูฺฏู ุงูุชุดุงุฑ ุฎุทุง ุงุณุช ฺฉู ูู ุฏุณุชโููพุงฺฏุฑ ู ูู ูุณุชุนุฏ ุฎุทุง ุฎูุงูุฏ ุจูุฏ.</p>
<hr>
<h3>ุดูุงุฑุด (Enumeration) ู ูพูุงุดฺฏุฑูุง (Iterators) ๐</h3>
<h4>ุดูุงุฑุด (Enumeration)</h4>
<p><strong>Enumerator (ุดูุงุฑุดโฺฏุฑ)</strong> ฺฉ ูฺฉุงูโููุง (cursor) <strong>ููุท ุฎูุงูุฏู</strong> ู <strong>ููุท ุฑู ุจู ุฌูู</strong> ุฑู ฺฉ ุฏูุจุงูู ุงุฒ ููุงุฏุฑ ุงุณุช. ุฏุฑ ุฒุจุงู #Cุ ฺฉ ููุน (type) ุจูโุนููุงู ุดูุงุฑุดโฺฏุฑ ุดูุงุฎุชู ูโุดูุฏ ุงฺฏุฑ ฺฉ ุงุฒ ุดุฑุงุท ุฒุฑ ุฑุง ุฏุงุดุชู ุจุงุดุฏ:</p>
<ul>
<li>ฺฉ ูุชุฏ ุนููู (public) ุจุฏูู ูพุงุฑุงูุชุฑ ุจู ูุงู <code>MoveNext</code> ู ฺฉ ูฺฺฏ (property) ุจู ูุงู <code>Current</code> ุฏุงุดุชู ุจุงุดุฏ.</li>
<li>ูุงุณุท <code>System.Collections.Generic.IEnumerator&lt;T&gt;</code> ุฑุง ูพุงุฏูโุณุงุฒ ฺฉูุฏ.</li>
<li>ูุงุณุท <code>System.Collections.IEnumerator</code> ุฑุง ูพุงุฏูโุณุงุฒ ฺฉูุฏ.</li>
</ul>
<p><strong>ุนุจุงุฑุช foreach</strong> ุฑู ฺฉ <strong>Enumerable object (ุดุก ุดูุงุฑุดโูพุฐุฑ)</strong> ูพูุงุด ูโฺฉูุฏ.<br>
ฺฉ <strong>Enumerable object</strong> ููุงุด ููุทู ฺฉ ุฏูุจุงูู ุงุณุช. ุงู ุดุก ุฎูุฏุด ูฺฉุงูโููุง ูุณุชุ ุจูฺฉู <strong>ูฺฉุงูโููุง ุชููุฏ ูโฺฉูุฏ</strong>. ุฏุฑ #Cุ ฺฉ ููุน ุจูโุนููุงู ุดูุงุฑุดโูพุฐุฑ ุดูุงุฎุชู ูโุดูุฏ ุงฺฏุฑ ฺฉ ุงุฒ ุดุฑุงุท ุฒุฑ ุฑุง ุฏุงุดุชู ุจุงุดุฏ (ุจุฑุฑุณโูุง ุจู ููู ุชุฑุชุจ ุงูุฌุงู ูโุดูุฏ):</p>
<ul>
<li>ฺฉ ูุชุฏ ุนููู ุจุฏูู ูพุงุฑุงูุชุฑ ุจู ูุงู <code>GetEnumerator</code> ุฏุงุดุชู ุจุงุดุฏ ฺฉู ฺฉ ุดูุงุฑุดโฺฏุฑ ุจุฑฺฏุฑุฏุงูุฏ.</li>
<li>ูุงุณุท <code>System.Collections.Generic.IEnumerable&lt;T&gt;</code> ุฑุง ูพุงุฏูโุณุงุฒ ฺฉูุฏ.</li>
<li>ูุงุณุท <code>System.Collections.IEnumerable</code> ุฑุง ูพุงุฏูโุณุงุฒ ฺฉูุฏ.</li>
<li>(ุงุฒ #C ูุณุฎู 9 ุจู ุจุนุฏ) ุจุชูุงูุฏ ุจู ฺฉ ูุชุฏ ุชูุณุนูโุง (extension method) ุจู ูุงู <code>GetEnumerator</code> ฺฉู ฺฉ ุดูุงุฑุดโฺฏุฑ ุจุฑูโฺฏุฑุฏุงูุฏุ ูุชุตู ุดูุฏ (ุจุฎุด <strong>&quot;Extension Methods&quot;</strong> ุฏุฑ ุตูุญู 217 ุฑุง ุจุจูุฏ).</li>
</ul>
<p><strong>ุงูฺฏู ุดูุงุฑุด</strong> ุจู ุดฺฉู ุฒุฑ ุงุณุช:</p>
<pre class="hljs"><code><span class="hljs-keyword">class</span> <span class="hljs-title">Enumerator</span>   <span class="hljs-comment">// ูุนูููุงู ูุงุณุท IEnumerator ุง IEnumerator&lt;T&gt; ุฑุง ูพุงุฏูโุณุงุฒ ูโฺฉูุฏ</span>
{
  <span class="hljs-keyword">public</span> IteratorVariableType Current { <span class="hljs-keyword">get</span> {...} }
  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-built_in">bool</span> <span class="hljs-title">MoveNext</span>()</span> {...}
}

<span class="hljs-keyword">class</span> <span class="hljs-title">Enumerable</span>   <span class="hljs-comment">// ูุนูููุงู ูุงุณุท IEnumerable ุง IEnumerable&lt;T&gt; ุฑุง ูพุงุฏูโุณุงุฒ ูโฺฉูุฏ</span>
{
  <span class="hljs-function"><span class="hljs-keyword">public</span> Enumerator <span class="hljs-title">GetEnumerator</span>()</span> {...}
}
</code></pre>
<p><strong>ููููู ูพูุงุด ุณุทุญ ุจุงูุง</strong> ุฑู ฺฉุงุฑุงฺฉุชุฑูุง ฺฉููู <code>&quot;beer&quot;</code> ุจุง ุงุณุชูุงุฏู ุงุฒ <code>foreach</code>:</p>
<pre class="hljs"><code><span class="hljs-keyword">foreach</span> (<span class="hljs-built_in">char</span> c <span class="hljs-keyword">in</span> <span class="hljs-string">&quot;beer&quot;</span>)
  Console.WriteLine(c);
</code></pre>
<p><strong>ููููู ูพูุงุด ุณุทุญ ูพุงู</strong> ุฑู ฺฉุงุฑุงฺฉุชุฑูุง <code>&quot;beer&quot;</code> ุจุฏูู ุงุณุชูุงุฏู ุงุฒ <code>foreach</code>:</p>
<pre class="hljs"><code><span class="hljs-keyword">using</span> (<span class="hljs-keyword">var</span> enumerator = <span class="hljs-string">&quot;beer&quot;</span>.GetEnumerator())
  <span class="hljs-keyword">while</span> (enumerator.MoveNext())
  {
    <span class="hljs-keyword">var</span> element = enumerator.Current;
    Console.WriteLine(element);
  }
</code></pre>
<blockquote>
<p>ุงฺฏุฑ ุดูุงุฑุดโฺฏุฑ ูุงุณุท <code>IDisposable</code> ุฑุง ูพุงุฏูโุณุงุฒ ฺฉูุฏุ ุนุจุงุฑุช <code>foreach</code> ูุงููุฏ ฺฉ ุนุจุงุฑุช <code>using</code> ุนูู ฺฉุฑุฏู ู <strong>ุจูโุทูุฑ ุถูู</strong> ุดุก ุดูุงุฑุดโฺฏุฑ ุฑุง ุขุฒุงุฏ (dispose) ูโฺฉูุฏ.</p>
</blockquote>
<p>ุฌุฒุฆุงุช ุจุดุชุฑ ุฏุฑ ููุฑุฏ ูุงุณุทโูุง ุดูุงุฑุด ุฏุฑ <strong>ูุตู 7</strong> ุชูุถุญ ุฏุงุฏู ุดุฏู ุงุณุช.</p>
<hr>
<h4>ููุฏุงุฑุฏู ุงููู ูุฌููุนูโูุง (Collection Initializers) ู ุนุจุงุฑุงุช ูุฌููุนูโุง (Collection Expressions) ๐</h4>
<p>ุดูุง ูโุชูุงูุฏ ุฏุฑ ฺฉ ูุฑุญููุ ฺฉ ุดุก ุดูุงุฑุดโูพุฐุฑ ุฑุง ุงุฌุงุฏ ู ููุฏุงุฑุฏู ฺฉูุฏ:</p>
<pre class="hljs"><code><span class="hljs-keyword">using</span> System.Collections.Generic;
<span class="hljs-keyword">var</span> list = <span class="hljs-keyword">new</span> List&lt;<span class="hljs-built_in">int</span>&gt; { <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span> };
</code></pre>
<p>ุงุฒ ูุณุฎู #C 12 ุจู ุจุนุฏุ ูโุชูุงูุฏ ุงู ฺฉุงุฑ ุฑุง ฺฉูุชุงูโุชุฑ ุงูุฌุงู ุฏูุฏ (ุจุง ุงุณุชูุงุฏู ุงุฒ <strong>ุจุฑุงฺฉุชโูุง</strong>):</p>
<pre class="hljs"><code><span class="hljs-keyword">using</span> System.Collections.Generic;
List&lt;<span class="hljs-built_in">int</span>&gt; list = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>];
</code></pre>
<p><strong>ุนุจุงุฑุงุช ูุฌููุนูโุง</strong> <strong>ูุฏูโููุน (target-typed)</strong> ูุณุชูุฏุ ุนู ููุน <code>[1, 2, 3]</code> ุจู ููุน ูุชุบุฑ ฺฉู ุจู ุขู ุงูุชุณุงุจ ุฏุงุฏู ูโุดูุฏ ุจุณุชฺฏ ุฏุงุฑุฏ. ูุซุงู:</p>
<pre class="hljs"><code><span class="hljs-built_in">int</span>[] array = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>];
Span&lt;<span class="hljs-built_in">int</span>&gt; span = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>];
</code></pre>
<p>ุญุช ูโุชูุงูุฏ ููฺฏุงู ูุฑุงุฎูุงู ูุชุฏูุง ูู ููุน ุฑุง ุญุฐู ฺฉูุฏ ุงฺฏุฑ ฺฉุงููพุงูุฑ ุจุชูุงูุฏ ุขู ุฑุง ุงุณุชูุจุงุท ฺฉูุฏ:</p>
<pre class="hljs"><code>Foo([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]);

<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Foo</span>(<span class="hljs-params">List&lt;<span class="hljs-built_in">int</span>&gt; numbers</span>)</span> { ... }
</code></pre>
<p>ฺฉุงููพุงูุฑ ุงู ฺฉุฏ ุฑุง ุจู ุงู ุดฺฉู ุชุฑุฌูู ูโฺฉูุฏ:</p>
<pre class="hljs"><code><span class="hljs-keyword">using</span> System.Collections.Generic;
List&lt;<span class="hljs-built_in">int</span>&gt; list = <span class="hljs-keyword">new</span> List&lt;<span class="hljs-built_in">int</span>&gt;();
list.Add(<span class="hljs-number">1</span>);
list.Add(<span class="hljs-number">2</span>);
list.Add(<span class="hljs-number">3</span>);
</code></pre>
<p>ุงู ููุถูุน ูุงุฒููุฏ ุงู ุงุณุช ฺฉู ุดุก ุดูุงุฑุดโูพุฐุฑ ูุงุณุท <code>System.Collections.IEnumerable</code> ุฑุง ูพุงุฏูโุณุงุฒ ฺฉูุฏ ู ฺฉ ูุชุฏ <code>Add</code> ุจุง ุชุนุฏุงุฏ ูพุงุฑุงูุชุฑ ููุงุณุจ ุฏุงุดุชู ุจุงุดุฏ. (ุฏุฑ ุนุจุงุฑุงุช ูุฌููุนูโุงุ ฺฉุงููพุงูุฑ ุงุฒ ุงูฺฏููุง ุฏฺฏุฑ ูู ุจุฑุง ุงุฌุงุฏ ูุฌููุนูโูุง ููุท ุฎูุงูุฏู ูพุดุชุจุงู ูโฺฉูุฏ.)</p>
<p>ููฺูู ูโุชูุงูุฏ ุฏฺฉุดูุฑโูุง ุฑุง ูู ุจู ููู ุดฺฉู ููุฏุงุฑุฏู ฺฉูุฏ (ุจุฎุด <strong>&quot;Dictionaries&quot;</strong> ุฏุฑ ุตูุญู 394 ุฑุง ุจุจูุฏ):</p>
<pre class="hljs"><code><span class="hljs-keyword">var</span> dict = <span class="hljs-keyword">new</span> Dictionary&lt;<span class="hljs-built_in">int</span>, <span class="hljs-built_in">string</span>&gt;()
{
  { <span class="hljs-number">5</span>, <span class="hljs-string">&quot;five&quot;</span> },
  { <span class="hljs-number">10</span>, <span class="hljs-string">&quot;ten&quot;</span> }
};
</code></pre>
<p>ุง ุจู ุดฺฉู ฺฉูุชุงูโุชุฑ:</p>
<pre class="hljs"><code><span class="hljs-keyword">var</span> dict = <span class="hljs-keyword">new</span> Dictionary&lt;<span class="hljs-built_in">int</span>, <span class="hljs-built_in">string</span>&gt;()
{
  [<span class="hljs-meta">3</span>] = <span class="hljs-string">&quot;three&quot;</span>,
  [<span class="hljs-meta">10</span>] = <span class="hljs-string">&quot;ten&quot;</span>
};
</code></pre>
<p>ุงู ุฑูุด ูู ุชููุง ุจุฑุง ุฏฺฉุดูุฑโูุงุ ุจูฺฉู ุจุฑุง ูุฑ ููุน ฺฉู <strong>Indexer</strong> ุฏุงุดุชู ุจุงุดุฏุ ูุนุชุจุฑ ุงุณุช.</p>
<hr>
<h4>ูพูุงุดฺฏุฑูุง (Iterators) โ๏ธ</h4>
<p>ุฏุฑ ุญุงู ฺฉู ุนุจุงุฑุช <code>foreach</code> <strong>ูุตุฑูโฺฉููุฏู</strong> ฺฉ ุดูุงุฑุดโฺฏุฑ ุงุณุชุ <strong>Iterator (ูพูุงุดฺฏุฑ)</strong> <strong>ุชููุฏฺฉููุฏู</strong> ฺฉ ุดูุงุฑุดโฺฏุฑ ุงุณุช.<br>
ูุซุงู ุฒุฑ ฺฉ ูพูุงุดฺฏุฑ ุงุณุช ฺฉู ฺฉ ุฏูุจุงูู ุงุฒ ุงุนุฏุงุฏ ูุจููุงฺ ุฑุง ุชููุฏ ูโฺฉูุฏ (ูุฑ ุนุฏุฏ ุญุงุตู ุฌูุน ุฏู ุนุฏุฏ ูุจู ุงุณุช):</p>
<pre class="hljs"><code><span class="hljs-keyword">using</span> System;
<span class="hljs-keyword">using</span> System.Collections.Generic;
<span class="hljs-keyword">foreach</span> (<span class="hljs-function"><span class="hljs-built_in">int</span> fib <span class="hljs-keyword">in</span> <span class="hljs-title">Fibs</span>(<span class="hljs-params"><span class="hljs-number">6</span></span>))
  Console.<span class="hljs-title">Write</span>(<span class="hljs-params">fib + <span class="hljs-string">&quot;  &quot;</span></span>)</span>;

<span class="hljs-function">IEnumerable&lt;<span class="hljs-built_in">int</span>&gt; <span class="hljs-title">Fibs</span>(<span class="hljs-params"><span class="hljs-built_in">int</span> fibCount</span>)</span>
{
  <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>, prevFib = <span class="hljs-number">1</span>, curFib = <span class="hljs-number">1</span>; i &lt; fibCount; i++)
  {
    <span class="hljs-keyword">yield</span> <span class="hljs-keyword">return</span> prevFib;
    <span class="hljs-built_in">int</span> newFib = prevFib + curFib;
    prevFib = curFib;
    curFib = newFib;
  }
}
</code></pre>
<p><strong>ุฎุฑูุฌ:</strong></p>
<pre class="hljs"><code>1  1  2  3  5  8
</code></pre>
<p>ุฏุฑ ุญุงู ฺฉู ุฏุณุชูุฑ <code>return</code> ูโฺฏูุฏ: <strong>&quot;ุงู ููุฏุงุฑ ุงุณุช ฺฉู ุงุฒ ุงู ูุชุฏ ุฎูุงุณุชู ุจูุฏ&quot;</strong>ุ ุฏุณุชูุฑ <code>yield return</code> ูโฺฏูุฏ: <strong>&quot;ุงู ุนูุตุฑ ุจุนุฏ ุงุณุช ฺฉู ุงุฒ ุงู ุดูุงุฑุดโฺฏุฑ ุฎูุงุณุชู ุจูุฏ&quot;</strong>.<br>
ุฏุฑ ูุฑ ุฏุณุชูุฑ <code>yield</code>ุ ฺฉูุชุฑู ุจู ูุฑุงุฎูุงููุฏู ุจุฑูโฺฏุฑุฏุฏุ ุงูุง <strong>ูุถุนุช ูุชุฏ ุญูุธ ูโุดูุฏ</strong> ุชุง ููุช ูุฑุงุฎูุงููุฏู ุนูุตุฑ ุจุนุฏ ุฑุง ุฏุฑุฎูุงุณุช ฺฉุฑุฏุ ูุชุฏ ุงุฒ ููุงูโุฌุง ุงุฏุงูู ุงุจุฏ. ุงู ูุถุนุช ุจู ุนูุฑ ุดูุงุฑุดโฺฏุฑ ูุงุจุณุชู ุงุณุช ู ุจุนุฏ ุงุฒ ุงุชูุงู ูพูุงุด ุขุฒุงุฏ ูโุดูุฏ.</p>
<p>ฺฉุงููพุงูุฑ ูุชุฏูุง ูพูุงุดฺฏุฑ ุฑุง ุจู ฺฉูุงุณโูุง ุฎุตูุต ุชุจุฏู ูโฺฉูุฏ ฺฉู ูุงุณุทโูุง <code>IEnumerable&lt;T&gt;</code> ู/ุง <code>IEnumerator&lt;T&gt;</code> ุฑุง ูพุงุฏูโุณุงุฒ ูโฺฉููุฏ.<br>
ููุทู ููุฌูุฏ ุฏุฑ ุจููฺฉ ูพูุงุดฺฏุฑ ุฏุฑ ูุชุฏ <code>MoveNext</code> ู ูฺฺฏ <code>Current</code> ฺฉูุงุณ ุชููุฏุดุฏู ุชูุณุท ฺฉุงููพุงูุฑ ูุฑุงุฑ ุฏุงุฏู ูโุดูุฏ. <strong>ุงู ุนู ููุช ูุชุฏ ูพูุงุดฺฏุฑ ุฑุง ุตุฏุง ูโุฒูุฏุ ูฺ ฺฉุฏ ุงุฌุฑุง ููโุดูุฏุ ุชููุง ฺฉ ููููู ุงุฒ ฺฉูุงุณ ุณุงุฎุชู ูโุดูุฏ!</strong><br>
ฺฉุฏ ุดูุง ุชููุง ููุช ุงุฌุฑุง ูโุดูุฏ ฺฉู ูพูุงุด ุดุฑูุน ุดูุฏุ ูุนูููุงู ุจุง ฺฉ ุนุจุงุฑุช <code>foreach</code>.</p>
<blockquote>
<p>ูพูุงุดฺฏุฑูุง ูโุชูุงููุฏ ูุชุฏูุง ูุญู (local methods) ูู ุจุงุดูุฏ (ุจุฎุด <strong>&quot;Local methods&quot;</strong> ุฏุฑ ุตูุญู 106 ุฑุง ุจุจูุฏ).</p>
</blockquote>
<hr>
<h3>ูุนูุง <strong>Iterator</strong> (ุชฺฉุฑุงุฑฺฉููุฏู) ๐</h3>
<p>ฺฉ <strong>Iterator</strong> ุง ยซุชฺฉุฑุงุฑฺฉููุฏูยป ูุชุฏุ ูฺฺฏ (Property) ุง ุงูุฏฺฉุณุฑ ุงุณุช ฺฉู ุดุงูู ฺฉ ุง ฺูุฏ ุฏุณุชูุฑ <code>yield</code> ุงุณุช. ฺฉ <strong>Iterator</strong> ุจุงุฏ ฺฉ ุงุฒ ฺูุงุฑ ุฑุงุจุท (Interface) ุฒุฑ ุฑุง ุจุฑฺฏุฑุฏุงูุฏุ ุฏุฑ ุบุฑ ุงู ุตูุฑุช ฺฉุงููพุงูุฑ ุฎุทุง ุชููุฏ ูโฺฉูุฏ:</p>
<pre class="hljs"><code><span class="hljs-comment">// ุฑุงุจุทโูุง Enumerable</span>
System.Collections.IEnumerable
System.Collections.Generic.IEnumerable&lt;T&gt;

<span class="hljs-comment">// ุฑุงุจุทโูุง Enumerator</span>
System.Collections.IEnumerator
System.Collections.Generic.IEnumerator&lt;T&gt;
</code></pre>
<p><strong>Iterator</strong> ุจุณุชู ุจู ุงูฺฉู ฺฉ ุฑุงุจุท <strong>Enumerable</strong> ุง <strong>Enumerator</strong> ุจุฑูโฺฏุฑุฏุงูุฏุ ุฑูุชุงุฑ ูุชูุงูุช ุฏุงุฑุฏ. ุชูุถุญ ฺฉุงูู ุงู ููุถูุน ุฏุฑ ูุตู ท ุขูุฏู ุงุณุช.</p>
<hr>
<h3>ุงุณุชูุงุฏู ุงุฒ ฺูุฏู ุฏุณุชูุฑ <code>yield</code></h3>
<p>ุฏุฑ ฺฉ <strong>Iterator</strong> ูโุชูุงู ฺูุฏู ุฏุณุชูุฑ <code>yield</code> ุงุณุชูุงุฏู ฺฉุฑุฏ:</p>
<pre class="hljs"><code><span class="hljs-keyword">foreach</span> (<span class="hljs-function"><span class="hljs-built_in">string</span> s <span class="hljs-keyword">in</span> <span class="hljs-title">Foo</span>())
    Console.<span class="hljs-title">WriteLine</span>(<span class="hljs-params">s</span>)</span>; <span class="hljs-comment">// ฺุงูพ ูโฺฉูุฏ: &quot;One&quot;, &quot;Two&quot;, &quot;Three&quot;</span>

<span class="hljs-function">IEnumerable&lt;<span class="hljs-built_in">string</span>&gt; <span class="hljs-title">Foo</span>()</span>
{
    <span class="hljs-keyword">yield</span> <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;One&quot;</span>;
    <span class="hljs-keyword">yield</span> <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;Two&quot;</span>;
    <span class="hljs-keyword">yield</span> <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;Three&quot;</span>;
}
</code></pre>
<hr>
<h3>ุงุณุชูุงุฏู ุงุฒ <code>yield break</code></h3>
<p>ุฏุฑ ฺฉ ุจููฺฉ <strong>Iterator</strong> ุงุณุชูุงุฏู ุงุฒ ุฏุณุชูุฑ <code>return</code> ูุฌุงุฒ ูุณุช. ุจุฑุง ุฎุฑูุฌ ุฒูุฏููฺฏุงู ุงุฒ <strong>Iterator</strong> (ุจุฏูู ุจุฑฺฏุฑุฏุงูุฏู ุนูุงุตุฑ ุจุดุชุฑ) ุจุงุฏ ุงุฒ <code>yield break</code> ุงุณุชูุงุฏู ฺฉูุฏ:</p>
<pre class="hljs"><code><span class="hljs-function">IEnumerable&lt;<span class="hljs-built_in">string</span>&gt; <span class="hljs-title">Foo</span>(<span class="hljs-params"><span class="hljs-built_in">bool</span> breakEarly</span>)</span>
{
    <span class="hljs-keyword">yield</span> <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;One&quot;</span>;
    <span class="hljs-keyword">yield</span> <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;Two&quot;</span>;
    <span class="hljs-keyword">if</span> (breakEarly)
        <span class="hljs-keyword">yield</span> <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">yield</span> <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;Three&quot;</span>;
}
</code></pre>
<hr>
<h3><strong>Iteratorูุง</strong> ู ุจููฺฉโูุง <strong>try/catch/finally</strong> โ๏ธ</h3>
<ul>
<li>ุงุณุชูุงุฏู ุงุฒ <code>yield return</code> ุฏุฑ ฺฉ ุจููฺฉ <code>try</code> ฺฉู ุดุงูู ุจุฎุด <code>catch</code> ุจุงุดุฏุ <strong>ูุฌุงุฒ ูุณุช</strong>:</li>
</ul>
<pre class="hljs"><code><span class="hljs-function">IEnumerable&lt;<span class="hljs-built_in">string</span>&gt; <span class="hljs-title">Foo</span>()</span>
{
    <span class="hljs-keyword">try</span> { <span class="hljs-keyword">yield</span> <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;One&quot;</span>; } <span class="hljs-comment">// ุบุฑูุฌุงุฒ</span>
    <span class="hljs-keyword">catch</span> { ... }
}
</code></pre>
<ul>
<li>
<p>ููฺูู ุงุณุชูุงุฏู ุงุฒ <code>yield return</code> ุฏุฑ ุจุฎุดโูุง <code>catch</code> ุง <code>finally</code> ูุฒ ูุฌุงุฒ ูุณุช.<br>
ุฏูู ุงู ูุญุฏูุฏุชโูุง ุงู ุงุณุช ฺฉู ฺฉุงููพุงูุฑ ุจุงุฏ <strong>Iteratorูุง</strong> ุฑุง ุจู ฺฉูุงุณโูุง ูุนููู ุจุง ูุชุฏูุง <code>MoveNext</code>ุ <code>Current</code> ู <code>Dispose</code> ุชุจุฏู ฺฉูุฏ ู ูุฏุฑุช ุจูุงฺฉโูุง ุฎุทุง ูพฺุฏฺฏ ุฒุงุฏ ุงุฌุงุฏ ูโฺฉูุฏ.</p>
</li>
<li>
<p>ุงูุง ูโุชูุงูุฏ ุฏุฑ ุจููฺฉ <code>try</code> ฺฉู <strong>ููุท</strong> ุดุงูู ฺฉ ุจุฎุด <code>finally</code> ุงุณุช ุงุฒ <code>yield return</code> ุงุณุชูุงุฏู ฺฉูุฏ:</p>
</li>
</ul>
<pre class="hljs"><code><span class="hljs-function">IEnumerable&lt;<span class="hljs-built_in">string</span>&gt; <span class="hljs-title">Foo</span>()</span>
{
    <span class="hljs-keyword">try</span> { <span class="hljs-keyword">yield</span> <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;One&quot;</span>; } <span class="hljs-comment">// ูุฌุงุฒ</span>
    <span class="hljs-keyword">finally</span> { ... }
}
</code></pre>
<p>ฺฉุฏ ููุฌูุฏ ุฏุฑ ุจููฺฉ <code>finally</code> ุฒูุงู ุงุฌุฑุง ูโุดูุฏ ฺฉู ุดูุงุฑูุฏู (<strong>Enumerator</strong>) ูุตุฑูโฺฉููุฏู ุจู ุงูุชูุง ุชูุงู ุจุฑุณุฏ ุง ุงุฒ ุจู ุจุฑูุฏ. ุฏุณุชูุฑ <code>foreach</code> ุจูโุตูุฑุช ุถูู ุดูุงุฑูุฏู ุฑุง Dispose ูโฺฉูุฏ ุงฺฏุฑ ุฒูุฏุชุฑ ุงุฒ ุญููู ุฎุงุฑุฌ ุดูุฏุ ุจูุงุจุฑุงู ุงู ุฑูุด ุงูู ุจุฑุง ุงุณุชูุงุฏู ุงุฒ ุดูุงุฑูุฏูโูุงุณุช.</p>
<hr>
<h3>ุงุญุชุงุท ููฺฏุงู ุงุณุชูุงุฏู ุงุฒ <strong>Enumeratorูุง</strong> ุจูโุตูุฑุช ุฏุณุช ๐</h3>
<p>ุงฺฏุฑ ุดูุงุฑูุฏู ุฑุง ุจูโุตูุฑุช ุฏุณุช ุงุณุชูุงุฏู ูโฺฉูุฏ ู ูุจู ุงุฒ ูพุงุงู ฺฉุงุฑ ุขู ุฑุง ุฑูุง ฺฉูุฏ ุจุฏูู ุงูฺฉู Dispose ฺฉูุฏุ ุจููฺฉ <code>finally</code> ุงุฌุฑุง ููโุดูุฏ. ุจุฑุง ุฌููฺฏุฑ ุงุฒ ุงู ูุดฺฉูุ ุดูุงุฑูุฏูโูุง ุฑุง ุฏุฑูู ฺฉ ุฏุณุชูุฑ <code>using</code> ูุฑุงุฑ ุฏูุฏ:</p>
<pre class="hljs"><code><span class="hljs-built_in">string</span> firstElement = <span class="hljs-literal">null</span>;
<span class="hljs-keyword">var</span> sequence = Foo();
<span class="hljs-keyword">using</span> (<span class="hljs-keyword">var</span> enumerator = sequence.GetEnumerator())
    <span class="hljs-keyword">if</span> (enumerator.MoveNext())
        firstElement = enumerator.Current;
</code></pre>
<hr>
<h3>ุชุฑฺฉุจ ุชูุงูโูุง (Composing Sequences) ๐งฉ</h3>
<p><strong>Iteratorูุง</strong> ูุงุจูุช ุชุฑฺฉุจ ุจุงูุง ุฏุงุฑูุฏ. ูุซุงู ุฒุฑ ุชููุง ุงุนุฏุงุฏ <strong>ูุจููุงฺ ุฒูุฌ</strong> ุฑุง ุชููุฏ ูโฺฉูุฏ:</p>
<pre class="hljs"><code><span class="hljs-keyword">using</span> System;
<span class="hljs-keyword">using</span> System.Collections.Generic;

<span class="hljs-keyword">foreach</span> (<span class="hljs-function"><span class="hljs-built_in">int</span> fib <span class="hljs-keyword">in</span> <span class="hljs-title">EvenNumbersOnly</span>(<span class="hljs-params">Fibs(<span class="hljs-number">6</span></span>)))
    Console.<span class="hljs-title">WriteLine</span>(<span class="hljs-params">fib</span>)</span>;

<span class="hljs-function">IEnumerable&lt;<span class="hljs-built_in">int</span>&gt; <span class="hljs-title">Fibs</span>(<span class="hljs-params"><span class="hljs-built_in">int</span> fibCount</span>)</span>
{
    <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>, prevFib = <span class="hljs-number">1</span>, curFib = <span class="hljs-number">1</span>; i &lt; fibCount; i++)
    {
        <span class="hljs-keyword">yield</span> <span class="hljs-keyword">return</span> prevFib;
        <span class="hljs-built_in">int</span> newFib = prevFib + curFib;
        prevFib = curFib;
        curFib = newFib;
    }
}

<span class="hljs-function">IEnumerable&lt;<span class="hljs-built_in">int</span>&gt; <span class="hljs-title">EvenNumbersOnly</span>(<span class="hljs-params">IEnumerable&lt;<span class="hljs-built_in">int</span>&gt; sequence</span>)</span>
{
    <span class="hljs-keyword">foreach</span> (<span class="hljs-built_in">int</span> x <span class="hljs-keyword">in</span> sequence)
        <span class="hljs-keyword">if</span> ((x % <span class="hljs-number">2</span>) == <span class="hljs-number">0</span>)
            <span class="hljs-keyword">yield</span> <span class="hljs-keyword">return</span> x;
}
</code></pre>
<p>ูฺฉุชู ููู ุงู ุงุณุช ฺฉู <strong>ูุฑ ุนูุตุฑ ุฏููุงู ุฒูุงู ูุญุงุณุจู ูโุดูุฏ ฺฉู ุฏุฑุฎูุงุณุช ุดูุฏ</strong>ุ ุนู ููุท ููฺฏุงู ูุฑุงุฎูุงู ูุชุฏ <code>MoveNext()</code> ููุฏุงุฑ ุฌุฏุฏ ุชููุฏ ูโุดูุฏ. (ุดฺฉู ด-ฑ ูุฑุขูุฏ ุฏุฑุฎูุงุณุช ู ุฎุฑูุฌ ุฏุงุฏูโูุง ุฑุง ุฏุฑ ุทูู ุฒูุงู ูุดุงู ูโุฏูุฏ.)</p>
<div align="center">
<p><img src="../../../assets/image/04/Table-4-1.jpeg" alt="Conventions-UsedThis-Book"></p>
</div>
<h3>ุชุฑฺฉุจโูพุฐุฑ ุงูฺฏู Iterator ุฏุฑ LINQ ู ุงููุงุน ููุฏุงุฑ ุชู (Nullable Value Types) โจ</h3>
<p>ุชุฑฺฉุจโูพุฐุฑ ุง <strong>Composability</strong> ุฏุฑ ุงูฺฏู <strong>Iterator</strong> (ุชฺฉุฑุงุฑฺฉููุฏู) ุจุณุงุฑ ููุฏ ู ฺฉุงุฑุจุฑุฏ ุงุณุชุ ูุฎุตูุตุงู ุฏุฑ <strong>LINQ</strong>. ูุง ุงู ููุถูุน ุฑุง ุฏูุจุงุฑู ุฏุฑ ูุตู ธ ุจูโุทูุฑ ฺฉุงูู ุจุฑุฑุณ ุฎูุงูู ฺฉุฑุฏ.</p>
<hr>
<h2>ุงููุงุน ููุฏุงุฑ ุชู (Nullable Value Types) ๐</h2>
<p>ุฏุฑ ุฒุจุงู C#ุ <strong>Reference Types</strong> (ุงููุงุน ูุฑุฌุน) ูโุชูุงููุฏ ูุดุงูโุฏููุฏู ฺฉ ููุฏุงุฑ ููุฌูุฏ ูุจุงุดูุฏุ ุนู ููุฏุงุฑ ุขูโูุง ูโุชูุงูุฏ <code>null</code> ุจุงุดุฏ:</p>
<pre class="hljs"><code><span class="hljs-built_in">string</span> s = <span class="hljs-literal">null</span>;   <span class="hljs-comment">// ูุดฺฉู ูุฏุงุฑุฏุ ููุน ูุฑุฌุน</span>
</code></pre>
<p>ุงูุง <strong>Value Types</strong> (ุงููุงุน ููุฏุงุฑ) ุจูโุตูุฑุช ุนุงุฏ ููโุชูุงููุฏ <code>null</code> ุจุงุดูุฏ ู ุงฺฏุฑ ุชูุงุด ฺฉูุฏุ ุฎุทุง ฺฉุงููพุงู ุฏุฑุงูุช ูโฺฉูุฏ:</p>
<pre class="hljs"><code><span class="hljs-built_in">int</span> i = <span class="hljs-literal">null</span>;   <span class="hljs-comment">// ุฎุทุง ฺฉุงููพุงูุ ููุน ููุฏุงุฑ ููโุชูุงูุฏ null ุจุงุดุฏ</span>
</code></pre>
<p>ุจุฑุง ุงูโฺฉู ฺฉ <strong>Value Type</strong> ูุงุจูุช ุฏุงุดุชู ููุฏุงุฑ ุชู ุฑุง ุฏุงุดุชู ุจุงุดุฏุ ุจุงุฏ ุงุฒ ฺฉ ุณุงุฎุชุงุฑ ุฎุงุต ุจู ูุงู <strong>Nullable Type</strong> ุงุณุชูุงุฏู ฺฉูุฏ. ุจุฑุง ุชุนุฑู ฺฉ ููุน Nullable ฺฉุงู ุงุณุช ุจุนุฏ ุงุฒ ููุน ุฏุงุฏู ุงุฒ ุนูุงูุช <code>?</code> ุงุณุชูุงุฏู ฺฉูุฏ:</p>
<pre class="hljs"><code><span class="hljs-built_in">int</span>? i = <span class="hljs-literal">null</span>;                  <span class="hljs-comment">// ุตุญุญุ ููุน Nullable</span>
Console.WriteLine(i == <span class="hljs-literal">null</span>);   <span class="hljs-comment">// ุฎุฑูุฌ True</span>
</code></pre>
<hr>
<h2>ุณุงุฎุชุงุฑ Nullable<T> ๐</h2>
<p>ุฏุฑ ูุงูุน <code>T?</code> ูุนุงุฏู <code>System.Nullable&lt;T&gt;</code> ุงุณุช. ุงู ฺฉ <strong>Struct</strong> ุณุจฺฉ ู ุชุบุฑูุงูพุฐุฑ (<strong>Immutable</strong>) ุงุณุช ฺฉู ููุท ุดุงูู ุฏู ููุฏ ุงุณุช:</p>
<ul>
<li><strong>Value</strong>: ููุฏุงุฑ ุฐุฎุฑู ุดุฏู</li>
<li><strong>HasValue</strong>: ูุดุงู ูโุฏูุฏ ฺฉู ุขุง ููุฏุงุฑ ููุฌูุฏ ุงุณุช ุง ุฎุฑ</li>
</ul>
<p>ุชุนุฑู ุณุงุฏู ุขู ุจู ุดฺฉู ุฒุฑ ุงุณุช:</p>
<pre class="hljs"><code><span class="hljs-keyword">public</span> <span class="hljs-keyword">struct</span> Nullable&lt;T&gt; <span class="hljs-keyword">where</span> T : <span class="hljs-keyword">struct</span>
{
    <span class="hljs-keyword">public</span> T Value { <span class="hljs-keyword">get</span>; }
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">bool</span> HasValue { <span class="hljs-keyword">get</span>; }
    <span class="hljs-function"><span class="hljs-keyword">public</span> T <span class="hljs-title">GetValueOrDefault</span>()</span>;
    <span class="hljs-function"><span class="hljs-keyword">public</span> T <span class="hljs-title">GetValueOrDefault</span>(<span class="hljs-params">T defaultValue</span>)</span>;
    ...
}
</code></pre>
<p>ููููู ฺฉุฏ:</p>
<pre class="hljs"><code><span class="hljs-built_in">int</span>? i = <span class="hljs-literal">null</span>;
Console.WriteLine(i == <span class="hljs-literal">null</span>);  <span class="hljs-comment">// True</span>
</code></pre>
<p>ุงู ฺฉุฏ ุฏุฑ ูพุดุช ุตุญูู ุจู ุดฺฉู ุฒุฑ ุชุฑุฌูู ูโุดูุฏ:</p>
<pre class="hljs"><code>Nullable&lt;<span class="hljs-built_in">int</span>&gt; i = <span class="hljs-keyword">new</span> Nullable&lt;<span class="hljs-built_in">int</span>&gt;();
Console.WriteLine(!i.HasValue);   <span class="hljs-comment">// True</span>
</code></pre>
<blockquote>
<p>ุชูุฌู: ุงฺฏุฑ ููุฏุงุฑ <strong>HasValue</strong> ุจุฑุงุจุฑ <strong>false</strong> ุจุงุดุฏ ู ุดูุง ุจุฎูุงูุฏ <strong>Value</strong> ุฑุง ุจุฎูุงูุฏุ ฺฉ <strong>InvalidOperationException</strong> ุฑุฎ ูโุฏูุฏ.<br>
ูุชุฏ <strong>GetValueOrDefault()</strong> ุฏุฑ ุตูุฑุช ฺฉู <strong>HasValue = true</strong> ุจุงุดุฏ ููุฏุงุฑ <strong>Value</strong> ุฑุง ุจุฑูโฺฏุฑุฏุงูุฏุ ูฺฏุฑูู ููุฏุงุฑ ูพุดโูุฑุถ ุง ููุฏุงุฑ ฺฉู ุดูุง ูุดุฎุต ฺฉุฑุฏูโุงุฏ ุฑุง ุจุฑูโฺฏุฑุฏุงูุฏ.</p>
</blockquote>
<p><strong>ูฺฉุชู ููู</strong>: ููุฏุงุฑ ูพุดโูุฑุถ ุจุฑุง ูุฑ <strong>T?</strong> ุจุฑุงุจุฑ <code>null</code> ุงุณุช.</p>
<hr>
<h2>ุชุจุฏูโูุง ุถูู ู ุตุฑุญ (Implicit ู Explicit Conversions) ๐</h2>
<p>ุชุจุฏู ฺฉ ููุฏุงุฑ <code>T</code> ุจู <code>T?</code> <strong>ุถูู</strong> ุงุณุช (ุงุญุชุงุฌ ุจู ุนูู ุฎุงุต ูุฏุงุฑุฏ).<br>
ุงูุง ุชุจุฏู ุงุฒ <code>T?</code> ุจู <code>T</code> <strong>ุตุฑุญ</strong> ุงุณุช ู ูุงุฒ ุจู <strong>Cast</strong> ุฏุงุฑุฏ:</p>
<pre class="hljs"><code><span class="hljs-built_in">int</span>? x = <span class="hljs-number">5</span>;         <span class="hljs-comment">// ุชุจุฏู ุถูู</span>
<span class="hljs-built_in">int</span> y = (<span class="hljs-built_in">int</span>)x;     <span class="hljs-comment">// ุชุจุฏู ุตุฑุญ</span>
</code></pre>
<p>ุฏุฑ ูุงูุนุ ุชุจุฏู ุตุฑุญ ุฏููุงู ูุนุงุฏู ุฏุณุชุฑุณ ุจู ูฺฺฏ <strong>Value</strong> ุงุณุช.<br>
ุจูุงุจุฑุงูุ ุงฺฏุฑ <strong>HasValue = false</strong> ุจุงุดุฏ ู ุดูุง ุจุฎูุงูุฏ Cast ฺฉูุฏุ ุงุณุชุซูุง <strong>InvalidOperationException</strong> ุงุฌุงุฏ ูโุดูุฏ.</p>
<hr>
<h2>Boxing ู Unboxing ุฏุฑ Nullable Types ๐</h2>
<p>ููฺฏุงู ฺฉู ฺฉ <strong>T?</strong> ุฌุนุจูโุจูุฏ (<strong>Box</strong>) ูโุดูุฏุ ููุฏุงุฑ ุฐุฎุฑูโุดุฏู ุฏุฑ <strong>Heap</strong> ููุท <strong>T</strong> ุงุณุชุ ูู <strong>T?</strong>. ุงู ุจูููโุณุงุฒ ููฺฉู ุงุณุช ุฒุฑุง <strong>Reference Types</strong> ูโุชูุงููุฏ ุจูโุทูุฑ ุทุจุน <code>null</code> ุฑุง ููุงุด ุฏููุฏ.</p>
<p>ููฺูู ูโุชูุงูุฏ <strong>Unboxing</strong> ุง ุฎุงุฑุฌ ฺฉุฑุฏู ุงุฒ ุฌุนุจู ุฑุง ุจุง ุนููฺฏุฑ <code>as</code> ุงูุฌุงู ุฏูุฏ. ุงฺฏุฑ ุนููุงุช ูุงูููู ุจุงุดุฏุ ูุชุฌู <code>null</code> ุฎูุงูุฏ ุจูุฏ:</p>
<pre class="hljs"><code><span class="hljs-built_in">object</span> o = <span class="hljs-string">&quot;string&quot;</span>;
<span class="hljs-built_in">int</span>? x = o <span class="hljs-keyword">as</span> <span class="hljs-built_in">int</span>?;
Console.WriteLine(x.HasValue);   <span class="hljs-comment">// False</span>
</code></pre>
<h3>ุนููฺฏุฑูุง ุงุฑุชูุง (Operator Lifting) ๐๏ธ</h3>
<p>ุณุงุฎุชุงุฑ <strong>Nullable<T></strong> ุนููฺฏุฑูุง ูุซู <code>&lt;</code>ุ <code>&gt;</code> ุง ุญุช <code>==</code> ุฑุง ุชุนุฑู ููโฺฉูุฏ. ุจุง ุงู ุญุงูุ ฺฉุฏ ุฒุฑ ุจุฏูู ูฺ ูุดฺฉู ฺฉุงููพุงู ู ุงุฌุฑุง ูโุดูุฏ:</p>
<pre class="hljs"><code><span class="hljs-built_in">int</span>? x = <span class="hljs-number">5</span>;
<span class="hljs-built_in">int</span>? y = <span class="hljs-number">10</span>;
<span class="hljs-built_in">bool</span> b = x &lt; y;      <span class="hljs-comment">// true</span>
</code></pre>
<p>ุงู ููุถูุน ุจู ุงู ุฏูู ุงุณุช ฺฉู ฺฉุงููพุงูุฑ ุนููฺฏุฑ <strong>ฺฉูุชุฑ ุงุฒ</strong> ุฑุง ุงุฒ ููุน ูพุงู (ุฏุฑ ุงูุฌุง <code>int</code>) ูุฑุถ ฺฏุฑูุชู ุง ุจู ุงุตุทูุงุญ <strong>ุงุฑุชูุง ุฏุงุฏู</strong> ุงุณุช. ุงุฒ ูุธุฑ ูููููุ ุนุจุงุฑุช ููุงุณู ุจุงูุง ุจู ุดฺฉู ุฒุฑ ุชุฑุฌูู ูโุดูุฏ:</p>
<pre class="hljs"><code><span class="hljs-built_in">bool</span> b = (x.HasValue &amp;&amp; y.HasValue) ? (x.Value &lt; y.Value) : <span class="hljs-literal">false</span>;
</code></pre>
<p>ุจู ุนุจุงุฑุช ุฏฺฏุฑุ ุงฺฏุฑ ูุฑ ุฏู ูุชุบุฑ <code>x</code> ู <code>y</code> ููุฏุงุฑ ุฏุงุดุชู ุจุงุดูุฏุ ููุงุณู ุจุง ุงุณุชูุงุฏู ุงุฒ ุนููฺฏุฑ ฺฉูุชุฑ ุงุฒ ููุน <code>int</code> ุงูุฌุงู ูโุดูุฏุ ุฏุฑ ุบุฑ ุงู ุตูุฑุชุ ูุชุฌู <code>false</code> ุฎูุงูุฏ ุจูุฏ.</p>
<p>ุงุฑุชูุง ุนููฺฏุฑ ุจู ุงู ูุนูุงุณุช ฺฉู ุดูุง ูโุชูุงูุฏ ุจู ุทูุฑ ุถูู ุงุฒ ุนููฺฏุฑูุง ููุน <code>T</code> ุฑู ููุน <code>T?</code> ุงุณุชูุงุฏู ฺฉูุฏ. ููฺูู ูโุชูุงูุฏ ุนููฺฏุฑูุง ูุฎุตูุต ุจู <code>T?</code> ุชุนุฑู ฺฉูุฏ ุชุง ุฑูุชุงุฑ ุฎุงุต ุฏุฑ ุจุฑุงุจุฑ ููุงุฏุฑ <code>null</code> ุฏุงุดุชู ุจุงุดูุฏุ ุงูุง ุฏุฑ ุจุดุชุฑ ููุงูุน ุจูุชุฑ ุงุณุช ุจู ฺฉุงููพุงูุฑ ุงุนุชูุงุฏ ฺฉูุฏ ุชุง ุจู ุทูุฑ ุฎูุฏฺฉุงุฑ ููุทู ูุฑุจูุท ุจู <code>nullable</code> ุฑุง ูพุงุฏูโุณุงุฒ ฺฉูุฏ. ฺูุฏ ูุซุงู:</p>
<pre class="hljs"><code><span class="hljs-built_in">int</span>? x = <span class="hljs-number">5</span>;
<span class="hljs-built_in">int</span>? y = <span class="hljs-literal">null</span>;

<span class="hljs-comment">// ูุซุงูโูุง ุนููฺฏุฑ ุจุฑุงุจุฑ</span>
Console.WriteLine (x == y);    <span class="hljs-comment">// False</span>
Console.WriteLine (x == <span class="hljs-literal">null</span>); <span class="hljs-comment">// False</span>
Console.WriteLine (x == <span class="hljs-number">5</span>);    <span class="hljs-comment">// True</span>
Console.WriteLine (y == <span class="hljs-literal">null</span>); <span class="hljs-comment">// True</span>
Console.WriteLine (y == <span class="hljs-number">5</span>);    <span class="hljs-comment">// False</span>
Console.WriteLine (y != <span class="hljs-number">5</span>);    <span class="hljs-comment">// True</span>

<span class="hljs-comment">// ูุซุงูโูุง ุนููฺฏุฑ ููุงุณูโุง</span>
Console.WriteLine (x &lt; <span class="hljs-number">6</span>);     <span class="hljs-comment">// True</span>
Console.WriteLine (y &lt; <span class="hljs-number">6</span>);     <span class="hljs-comment">// False</span>
Console.WriteLine (y &gt; <span class="hljs-number">6</span>);     <span class="hljs-comment">// False</span>

<span class="hljs-comment">// ูุซุงูโูุง ุณุงุฑ ุนููฺฏุฑูุง</span>
Console.WriteLine (x + <span class="hljs-number">5</span>);     <span class="hljs-comment">// 10</span>
Console.WriteLine (x + y);     <span class="hljs-comment">// null (ุฎุท ุฎุงู ฺุงูพ ูโุดูุฏ)</span>
</code></pre>
<hr>
<h3>ุฑูุชุงุฑ ุนููฺฏุฑูุง ุจุง ููุงุฏุฑ <code>null</code> ุฏุฑ Nullable ๐งฉ</h3>
<p>ฺฉุงููพุงูุฑ ุจุณุชู ุจู ููุน ุนููฺฏุฑุ ููุทู ูุชูุงูุช ุจุฑุง ุจุฑุฎูุฑุฏ ุจุง ููุงุฏุฑ <code>null</code> ุฏุฑ ูุธุฑ ูโฺฏุฑุฏ. ุฏุฑ ุงุฏุงููุ ููุงูู ูุฑุจูุท ุจู ูุฑ ุฏุณุชู ุงุฒ ุนููฺฏุฑูุง ุชูุถุญ ุฏุงุฏู ุดุฏู ุงุณุช.</p>
<h4>1. ุนููฺฏุฑูุง ุจุฑุงุจุฑ (<code>==</code> ู <code>!=</code>)</h4>
<p>ุงู ุนููฺฏุฑูุง ุฏููุงู ูุดุงุจู ููุนโูุง <strong>Reference</strong> ุจุง ููุงุฏุฑ <code>null</code> ุฑูุชุงุฑ ูโฺฉููุฏ:</p>
<ul>
<li>ุฏู ููุฏุงุฑ <code>null</code> ุจุฑุงุจุฑ ูุณุชูุฏ:</li>
</ul>
<pre class="hljs"><code>Console.WriteLine (<span class="hljs-literal">null</span> == <span class="hljs-literal">null</span>);                       <span class="hljs-comment">// True</span>
Console.WriteLine ((<span class="hljs-built_in">bool</span>?)<span class="hljs-literal">null</span> == (<span class="hljs-built_in">bool</span>?)<span class="hljs-literal">null</span>);         <span class="hljs-comment">// True</span>
</code></pre>
<ul>
<li>ุงฺฏุฑ ููุท ฺฉ ุงุฒ ุนููููุฏูุง <code>null</code> ุจุงุดุฏุ ุจุฑุงุจุฑ ูุณุชูุฏ.</li>
<li>ุงฺฏุฑ ูุฑ ุฏู ููุฏุงุฑ ุฏุงุดุชู ุจุงุดูุฏุ ููุงุฏุฑ ุขูโูุง ููุงุณู ูโุดูุฏ.</li>
</ul>
<hr>
<h4>2. ุนููฺฏุฑูุง ููุงุณูโุง (<code>&lt;</code>, <code>&lt;=</code>, <code>&gt;=</code>, <code>&gt;</code>)</h4>
<p>ููุงุณู ููุงุฏุฑ <code>null</code> ุจโูุนูุง ุงุณุชุ ุจูุงุจุฑุงู ููุงุณู ูุฑ ููุฏุงุฑ <code>null</code> ุจุง <code>null</code> ุง ููุฏุงุฑ ุบุฑ <code>null</code> ูุชุฌู <strong>false</strong> ุฎูุงูุฏ ุจูุฏ:</p>
<pre class="hljs"><code><span class="hljs-built_in">bool</span> b = x &lt; y;    <span class="hljs-comment">// ุชุฑุฌูู ุดุฏู:</span>
<span class="hljs-built_in">bool</span> b = (x.HasValue &amp;&amp; y.HasValue) 
         ? (x.Value &lt; y.Value)
         : <span class="hljs-literal">false</span>;
<span class="hljs-comment">// b ุจุฑุงุจุฑ false ุงุณุช (ุจุง ูุฑุถ x=5 ู y=null)</span>
</code></pre>
<hr>
<h4>3. ุณุงุฑ ุนููฺฏุฑูุง (<code>+</code>, <code>-</code>, <code>*</code>, <code>/</code>, <code>%</code>, <code>&amp;</code>, <code>|</code>, <code>^</code>, <code>&lt;&lt;</code>, <code>&gt;&gt;</code>, <code>+</code>, <code>++</code>, <code>--</code>, <code>!</code>, <code>~</code>)</h4>
<p>ูุฑฺฏุงู ฺฉ ุงุฒ ุนููููุฏูุง <code>null</code> ุจุงุดุฏุ ูุชุฌู ูุฒ <code>null</code> ุฎูุงูุฏ ุจูุฏ. ุงู ุงูฺฏู ุจุฑุง ฺฉุงุฑุจุฑุงู SQL ุขุดูุงุณุช:</p>
<pre class="hljs"><code><span class="hljs-built_in">int</span>? c = x + y;   <span class="hljs-comment">// ุชุฑุฌูู ุดุฏู:</span>
<span class="hljs-built_in">int</span>? c = (x.HasValue &amp;&amp; y.HasValue)
         ? (<span class="hljs-built_in">int</span>?) (x.Value + y.Value) 
         : <span class="hljs-literal">null</span>;
<span class="hljs-comment">// c ุจุฑุงุจุฑ null ุงุณุช (ุจุง ูุฑุถ x=5 ู y=null)</span>
</code></pre>
<p>ุชููุง ุงุณุชุซูุง ุฒูุงู ุงุณุช ฺฉู ุนููฺฏุฑูุง <code>&amp;</code> ู <code>|</code> ุฑู ููุน <code>bool?</code> ุงุนูุงู ุดููุฏ ฺฉู ุจูโุฒูุฏ ุชูุถุญ ุฏุงุฏู ูโุดูุฏ.</p>
<hr>
<h3>ุชุฑฺฉุจ ุงููุงุน Nullable ู Non-Nullable ๐งฎ</h3>
<p>ุดูุง ูโุชูุงูุฏ ุงููุงุน <code>nullable</code> ู <code>non-nullable</code> ุฑุง ุจุง ูู ุชุฑฺฉุจ ฺฉูุฏุ ฺูู ุชุจุฏู ุถูู ุงุฒ <code>T</code> ุจู <code>T?</code> ูุฌูุฏ ุฏุงุฑุฏ:</p>
<pre class="hljs"><code><span class="hljs-built_in">int</span>? a = <span class="hljs-literal">null</span>;
<span class="hljs-built_in">int</span> b = <span class="hljs-number">2</span>;
<span class="hljs-built_in">int</span>? c = a + b;   <span class="hljs-comment">// c ุจุฑุงุจุฑ null ุงุณุช - ูุนุงุฏู a + (int?)b</span>
</code></pre>
<hr>
<h3>ููุนโูุง Nullable ู ุนููฺฏุฑูุง <code>&amp;</code> ู <code>|</code> ุจุฑุง <code>bool?</code> ๐น</h3>
<p>ููฺฏุงู ฺฉู ุนููฺฏุฑูุง <code>&amp;</code> ู <code>|</code> ุจุฑุง ุนููููุฏูุง ุงุฒ ููุน <strong>bool?</strong> ุงุณุชูุงุฏู ูโุดููุฏุ ููุฏุงุฑ <code>null</code> ุจูโุนููุงู ฺฉ <strong>ููุฏุงุฑ ูุงุดูุงุฎุชู</strong> ุฏุฑ ูุธุฑ ฺฏุฑูุชู ูโุดูุฏ. ุจูุงุจุฑุงู:</p>
<ul>
<li>
<p><code>null | true</code> ุจุฑุงุจุฑ <strong>true</strong> ุงุณุชุ ุฒุฑุง:</p>
<ul>
<li>ุงฺฏุฑ ููุฏุงุฑ ูุงุดูุงุฎุชู false ุจุงุดุฏุ ูุชุฌู true ุงุณุช.</li>
<li>ุงฺฏุฑ ููุฏุงุฑ ูุงุดูุงุฎุชู true ุจุงุดุฏุ ูุชุฌู true ุงุณุช.</li>
</ul>
</li>
<li>
<p>ุจูโุทูุฑ ูุดุงุจูุ <code>null &amp; false</code> ุจุฑุงุจุฑ <strong>false</strong> ุงุณุช. ุงู ุฑูุชุงุฑ ุจุฑุง ฺฉุงุฑุจุฑุงู SQL ุขุดูุงุณุช.</p>
</li>
</ul>
<p>ูุซุงู ุฏฺฏุฑ:</p>
<pre class="hljs"><code><span class="hljs-built_in">bool</span>? n = <span class="hljs-literal">null</span>;
<span class="hljs-built_in">bool</span>? f = <span class="hljs-literal">false</span>;
<span class="hljs-built_in">bool</span>? t = <span class="hljs-literal">true</span>;

Console.WriteLine (n | n);    <span class="hljs-comment">// (null)</span>
Console.WriteLine (n | f);    <span class="hljs-comment">// (null)</span>
Console.WriteLine (n | t);    <span class="hljs-comment">// True</span>
Console.WriteLine (n &amp; n);    <span class="hljs-comment">// (null)</span>
Console.WriteLine (n &amp; f);    <span class="hljs-comment">// False</span>
Console.WriteLine (n &amp; t);    <span class="hljs-comment">// (null)</span>
</code></pre>
<hr>
<h3>Nullable Value Types ู ุนููฺฏุฑูุง ฺฉูฺฉ (<code>??</code> ู Null-Conditional) โก</h3>
<p>ููุนโูุง <strong>nullable</strong> ุจูโุฎูุจ ุจุง ุนููฺฏุฑ <strong>Null Coalescing (<code>??</code>)</strong> ฺฉุงุฑ ูโฺฉููุฏ:</p>
<pre class="hljs"><code><span class="hljs-built_in">int</span>? x = <span class="hljs-literal">null</span>;
<span class="hljs-built_in">int</span> y = x ?? <span class="hljs-number">5</span>;        <span class="hljs-comment">// y ุจุฑุงุจุฑ 5</span>

<span class="hljs-built_in">int</span>? a = <span class="hljs-literal">null</span>, b = <span class="hljs-number">1</span>, c = <span class="hljs-number">2</span>;
Console.WriteLine (a ?? b ?? c);  <span class="hljs-comment">// 1 (ุงููู ููุฏุงุฑ ุบุฑ-null)</span>
</code></pre>
<p>ุงุณุชูุงุฏู ุงุฒ <code>??</code> ุฑู ฺฉ ููุฏุงุฑ nullable ูุนุงุฏู ูุฑุงุฎูุงู ูุชุฏ <code>GetValueOrDefault</code> ุจุง ฺฉ ููุฏุงุฑ ูพุดโูุฑุถ ุงุณุชุ ุจุง ุงู ุชูุงูุช ฺฉู ุงฺฏุฑ ูุชุบุฑ null ูุจุงุดุฏุ ุนุจุงุฑุช ูพุดโูุฑุถ ูุฑฺฏุฒ ุงุฑุฒุงุจ ููโุดูุฏ.</p>
<p>ููฺูู <strong>Null-Conditional Operator (<code>?.</code>)</strong> ุจุง ููุนโูุง nullable ุจู ุฎูุจ ฺฉุงุฑ ูโฺฉูุฏ:</p>
<pre class="hljs"><code>System.Text.StringBuilder sb = <span class="hljs-literal">null</span>;
<span class="hljs-built_in">int</span>? length = sb?.ToString().Length;  <span class="hljs-comment">// length ุจุฑุงุจุฑ null ูโุดูุฏ</span>
</code></pre>
<p>ูโุชูุงูู ุงู ุฑุง ุจุง <code>??</code> ุชุฑฺฉุจ ฺฉูู ุชุง ุจู ุฌุง null ููุฏุงุฑ ุตูุฑ ุจุฑฺฏุฑุฏุงูู:</p>
<pre class="hljs"><code><span class="hljs-built_in">int</span> length = sb?.ToString().Length ?? <span class="hljs-number">0</span>;  <span class="hljs-comment">// ุงฺฏุฑ sb null ุจุงุดุฏุ ูุชุฌู 0 ุงุณุช</span>
</code></pre>
<hr>
<h3>ุณูุงุฑููุง ุงุณุชูุงุฏู ุงุฒ ููุนโูุง Nullable ๐ก</h3>
<p>ฺฉ ุงุฒ ุฑุงุฌโุชุฑู ฺฉุงุฑุจุฑุฏูุง ุจุฑุง <strong>nullable value types</strong> ููุงุด ููุงุฏุฑ ูุงุดูุงุฎุชู ุงุณุช. ุงู ุญุงูุช ุจูโูฺู ุฏุฑ ุจุฑูุงููโููุณ ูพุงฺฏุงู ุฏุงุฏู ุฑุงุฌ ุงุณุชุ ุฌุง ฺฉู ฺฉ ฺฉูุงุณ ุจู ุฌุฏูู ุจุง ุณุชููโูุง nullable ูฺฏุงุดุช ูโุดูุฏ.</p>
<p>ุงฺฏุฑ ุณุชููโูุง ุงุฒ ููุน <strong>string</strong> ุจุงุดูุฏุ ูุดฺฉู ูุฌูุฏ ูุฏุงุฑุฏ ุฒุฑุง string ููุน ูุฑุฌุน ุงุณุช ู ูโุชูุงูุฏ null ุจุงุดุฏ. ุงูุง ุงฺฉุซุฑ ุณุชููโูุง SQL ุจู ููุน struct ุฏุฑ CLR ูฺฏุงุดุช ูโุดููุฏุ ุจูุงุจุฑุงู ุงุณุชูุงุฏู ุงุฒ ููุนโูุง nullable ุจุณุงุฑ ููุฏ ุงุณุช:</p>
<pre class="hljs"><code><span class="hljs-comment">// ูฺฏุงุดุช ุจู ุฌุฏูู Customer ุฏุฑ ูพุงฺฏุงู ุฏุงุฏู</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Customer</span>
{
  ...
  <span class="hljs-keyword">public</span> <span class="hljs-built_in">decimal</span>? AccountBalance;
}
</code></pre>
<p>ููฺููุ ููุน nullable ูโุชูุงูุฏ ุจุฑุง ููุงุด <strong>ููุฏ ูพุดุชุจุงู (backing field)</strong> ฺฉ property ูุญุท (ambient property) ุงุณุชูุงุฏู ุดูุฏ. ฺฉ <strong>ambient property</strong> ุงฺฏุฑ null ุจุงุดุฏุ ููุฏุงุฑ parent ุฎูุฏ ุฑุง ุจุงุฒูโฺฏุฑุฏุงูุฏ:</p>
<pre class="hljs"><code><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Row</span>
{
  ...
  Grid parent;
  Color? color;

  <span class="hljs-keyword">public</span> Color Color
  {
    <span class="hljs-keyword">get</span> { <span class="hljs-keyword">return</span> color ?? parent.Color; }
    <span class="hljs-keyword">set</span> { color = <span class="hljs-keyword">value</span> == parent.Color ? (Color?)<span class="hljs-literal">null</span> : <span class="hljs-keyword">value</span>; }
  }
}
</code></pre>
<hr>
<h3>ุฌุงฺฏุฒูโูุง ุจุฑุง Nullable Value Types โ๏ธ</h3>
<p>ูุจู ุงุฒ ุงูฺฉู nullable value types ุจุฎุด ุงุฒ ุฒุจุงู C# ุจุงุดูุฏ (ูุจู ุงุฒ C# 2.0)ุ ุงุณุชุฑุงุชฺโูุง ูุฎุชูู ุจุฑุง ูุฏุฑุช ุขูโูุง ูุฌูุฏ ุฏุงุดุช. ฺฉ ุงุฒ ุงู ุงุณุชุฑุงุชฺโูุง ุงู ุจูุฏ ฺฉู ฺฉ ููุฏุงุฑ ุฎุงุต ุบุฑ-null ุฑุง ุจูโุนููุงู <strong>magic value</strong> ุง ููุฏุงุฑ null ูุฑุถ ฺฉูู.</p>
<p>ูุซุงูโูุง:</p>
<pre class="hljs"><code><span class="hljs-comment">// String.IndexOf ููุช ฺฉุงุฑุงฺฉุชุฑ ูพุฏุง ูุดูุฏุ -1 ุจุฑูโฺฏุฑุฏุงูุฏ</span>
<span class="hljs-built_in">int</span> i = <span class="hljs-string">&quot;Pink&quot;</span>.IndexOf(<span class="hljs-string">&#x27;b&#x27;</span>);
Console.WriteLine(i);  <span class="hljs-comment">// -1</span>

<span class="hljs-comment">// Array.IndexOf ููุช ุนูุตุฑ ูพุฏุง ูุดูุฏ (ู ุขุฑุงู ุงุฒ ุงูุฏุณ 1 ุดุฑูุน ุดูุฏ):</span>
Array a = Array.CreateInstance(<span class="hljs-keyword">typeof</span>(<span class="hljs-built_in">string</span>), <span class="hljs-keyword">new</span> <span class="hljs-built_in">int</span>[] {<span class="hljs-number">2</span>}, <span class="hljs-keyword">new</span> <span class="hljs-built_in">int</span>[] {<span class="hljs-number">1</span>});
a.SetValue(<span class="hljs-string">&quot;a&quot;</span>, <span class="hljs-number">1</span>);
a.SetValue(<span class="hljs-string">&quot;b&quot;</span>, <span class="hljs-number">2</span>);
Console.WriteLine(Array.IndexOf(a, <span class="hljs-string">&quot;c&quot;</span>));  <span class="hljs-comment">// 0</span>
</code></pre>
<p>ูุดฺฉู ุงูุชุฎุงุจ <strong>magic value</strong>:</p>
<ul>
<li>ูุฑ ููุน ููุฏุงุฑ ูโุชูุงูุฏ null ุฑุง ุจู ุดูู ูุชูุงูุช ููุงุด ุฏูุฏ. ุฏุฑ ููุงุจูุ nullable value types ฺฉ ุงูฺฏู ฺฉููุงุฎุช ุจุฑุง ููู ููุนโูุง ุงุฑุงุฆู ูโฺฉูุฏ.</li>
<li>ููฺฉู ุงุณุช ููุฏุงุฑ ูุดุฎุต ุจุฑุง null ูุฌูุฏ ูุฏุงุดุชู ุจุงุดุฏ.</li>
<li>ูุฑุงููุด ฺฉุฑุฏู ุชุณุช ููุฏุงุฑ (ูุซู HasValue) ุจุงุนุซ ุจุฑูุฒ ุฎุทุง ูโุดูุฏุ ุงูุง ุจุง nullable value types ุงู ุฎุทุง ุจูโุตูุฑุช <strong>InvalidOperationException</strong> ุฑู ููุงู ุฎุท ุฑุฎ ูโุฏูุฏ.</li>
<li>ูุงุจูุช null ุจูุฏู ฺฉ ููุฏุงุฑ ุฏุฑ ููุน ุขู ูุญุงุธ ููโุดูุฏ. ููุนโูุง ูุฏู ุจุฑูุงูู ุฑุง ูุดุฎุต ูโฺฉููุฏ ู ุจู ฺฉุงููพุงูุฑ ุงูฺฉุงู ุจุฑุฑุณ ุตุญุช ู ุฑุนุงุช ููุงุนุฏ ฺฉููุงุฎุช ุฑุง ูโุฏููุฏ.</li>
</ul>
<h3>ููุนโูุง Nullable Reference Types ๐ข</h3>
<p>ุฏุฑ ุญุงู ฺฉู <strong>nullable value types</strong> ุงูฺฉุงู null ุจูุฏู ุฑุง ุจู ููุนโูุง ููุฏุงุฑ (value types) ุงุถุงูู ูโฺฉููุฏุ <strong>nullable reference types</strong> (ุงุฒ C# 8 ุจู ุจุนุฏ) ุจุฑุนฺฉุณ ุนูู ูโฺฉููุฏ: ุขูโูุง ููุฏุงุฑ ุงุฒ <strong>non-nullability</strong> ุฑุง ุจู ููุนโูุง ูุฑุฌุน (reference types) ุงุถุงูู ูโฺฉููุฏ ุชุง ุงุฒ ุจุฑูุฒ <strong>NullReferenceException</strong> ุฌููฺฏุฑ ฺฉููุฏ.</p>
<p>ุงู ูุงุจูุช ฺฉ <strong>ุณุทุญ ุงูู</strong> ุงุถุงูู ูโฺฉูุฏ ฺฉู ุตุฑูุงู ุชูุณุท <strong>ฺฉุงููพุงูุฑ</strong> ุงุนูุงู ูโุดูุฏ ู ุจู ุตูุฑุช <strong>ูุดุฏุงุฑูุง (warnings)</strong> ุฒูุงู ุธุงูุฑ ูโุดูุฏ ฺฉู ฺฉุงููพุงูุฑ ุชุดุฎุต ุฏูุฏ ฺฉุฏ ููฺฉู ุงุณุช ุจุงุนุซ NullReferenceException ุดูุฏ.</p>
<hr>
<h3>ูุนุงูโุณุงุฒ Nullable Reference Types โ๏ธ</h3>
<p>ุจุฑุง ูุนุงู ฺฉุฑุฏู nullable reference typesุ ูโุชูุงูุฏ ฺฉ ุงุฒ ุงู ุฑูุดโูุง ุฑุง ุงุณุชูุงุฏู ฺฉูุฏ:</p>
<ol>
<li>ุงุถุงูู ฺฉุฑุฏู ุนูุตุฑ <code>&lt;Nullable&gt;</code> ุจู ูุงู <code>.csproj</code> ูพุฑูฺู (ุจุฑุง ฺฉู ูพุฑูฺู):</li>
</ol>
<pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">PropertyGroup</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">Nullable</span>&gt;</span>enable<span class="hljs-tag">&lt;/<span class="hljs-name">Nullable</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">PropertyGroup</span>&gt;</span>
</code></pre>
<ol start="2">
<li>ุง/ู ุงุณุชูุงุฏู ุงุฒ ุฏุณุชูุฑุงูุนููโูุง ุฒุฑ ุฏุฑ ฺฉุฏุ ุฏุฑ ูฺฉุงูโูุง ฺฉู ูโุฎูุงูุฏ ุงุนูุงู ุดูุฏ:</li>
</ol>
<pre class="hljs"><code><span class="hljs-meta">#nullable enable    // ูุนุงูโุณุงุฒ nullable reference types ุงุฒ ุงู ููุทู ุจู ุจุนุฏ</span>
<span class="hljs-meta">#nullable disable   // ุบุฑูุนุงูโุณุงุฒ nullable reference types ุงุฒ ุงู ููุทู ุจู ุจุนุฏ</span>
<span class="hljs-meta">#nullable restore   // ุจุงุฒฺฏุฑุฏุงูุฏู ุชูุธูุงุช ุจู ุญุงูุช ูพุฑูฺู</span>
</code></pre>
<hr>
<h3>ุชุนุฑู ููุนโูุง Nullable Reference</h3>
<p>ูพุณ ุงุฒ ูุนุงู ุดุฏูุ <strong>non-nullability</strong> ุจู ุตูุฑุช ูพุดโูุฑุถ ุงุนูุงู ูโุดูุฏ. ุจุฑุง ุงูฺฉู ฺฉ <strong>reference type</strong> ุจุชูุงูุฏ ููุฏุงุฑ null ุจฺฏุฑุฏุ ุจุงุฏ ุงุฒ ุนูุงูุช <code>?</code> ุงุณุชูุงุฏู ฺฉูุฏ. ูุซุงู:</p>
<pre class="hljs"><code><span class="hljs-meta">#nullable enable</span>

<span class="hljs-built_in">string</span> s1 = <span class="hljs-literal">null</span>;   <span class="hljs-comment">// ูุดุฏุงุฑ ฺฉุงููพุงูุฑ! โ</span>
<span class="hljs-built_in">string</span>? s2 = <span class="hljs-literal">null</span>;  <span class="hljs-comment">// ุตุญุญ โ: s2 ฺฉ nullable reference type ุงุณุช</span>
</code></pre>
<p>ุชูุฌู ฺฉูุฏ ฺฉู <strong>string ู string?</strong> ุฏุฑ ุฒูุงู ุงุฌุฑุง ุชูุงูุช ูุฏุงุฑูุฏุ ุจุฑ ุฎูุงู <strong>nullable value types</strong> ฺฉู ฺุฒ ูุงูุน ุจู ุณุณุชู ููุน ุงุถุงูู ูโฺฉููุฏ (<code>Nullable&lt;T&gt;</code>).</p>
<hr>
<h3>ูุดุฏุงุฑูุง ู ููุฏุงุฑุฏู ุงููู</h3>
<p>ุงฺฏุฑ ฺฉ ููุฏ non-nullable ุจุฏูู ููุฏุงุฑุฏู ุงููู ุชุนุฑู ุดูุฏุ ฺฉุงููพุงูุฑ ูุดุฏุงุฑ ูโุฏูุฏ:</p>
<pre class="hljs"><code><span class="hljs-keyword">class</span> <span class="hljs-title">Foo</span> { <span class="hljs-built_in">string</span> x; }   <span class="hljs-comment">// ูุดุฏุงุฑ: x ููุฏุงุฑุฏู ูุดุฏู</span>
</code></pre>
<p>ูุดุฏุงุฑ ุจุง ููุฏุงุฑุฏู ุงููู ููุฏ ุง ููุฏุงุฑุฏู ุฏุฑ ุณุงุฒูุฏู ุญุฐู ูโุดูุฏ.</p>
<hr>
<h3>ุนููฺฏุฑ Null-Forgiving (<code>!</code>) โ๏ธ</h3>
<p>ฺฉุงููพุงูุฑ ููฺฏุงู ุฏุณุชุฑุณ ุจู ฺฉ <strong>nullable reference type</strong> ฺฉู ุงุญุชูุงู NullReferenceException ุฏุงุฑุฏุ ูุดุฏุงุฑ ูโุฏูุฏ:</p>
<pre class="hljs"><code><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Foo</span>(<span class="hljs-params"><span class="hljs-built_in">string</span>? s</span>)</span> =&gt; Console.Write(s.Length);  <span class="hljs-comment">// ูุดุฏุงุฑ</span>
</code></pre>
<p>ุจุฑุง ุญุฐู ูุดุฏุงุฑุ ูโุชูุงู ุงุฒ <strong>null-forgiving operator</strong> ุงุณุชูุงุฏู ฺฉุฑุฏ:</p>
<pre class="hljs"><code><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Foo</span>(<span class="hljs-params"><span class="hljs-built_in">string</span>? s</span>)</span> =&gt; Console.Write(s!.Length);
</code></pre>
<p>โ๏ธ ุงู ุฑูุด ุฎุทุฑูุงฺฉ ุงุณุช ู ููฺฉู ุงุณุช ููุงู <strong>NullReferenceException</strong> ฺฉู ูโุฎูุงุณุชู ุฌููฺฏุฑ ฺฉูู ุฑุง ุงุฌุงุฏ ฺฉูุฏ. ุฑูุด ุงููโุชุฑ:</p>
<pre class="hljs"><code><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Foo</span>(<span class="hljs-params"><span class="hljs-built_in">string</span>? s</span>)</span>
{
    <span class="hljs-keyword">if</span> (s != <span class="hljs-literal">null</span>) 
        Console.Write(s.Length);
}
</code></pre>
<p>ฺฉุงููพุงูุฑ ุจุง ุชุญูู ุฌุฑุงู ุจุฑูุงูู (static flow analysis) ูโุชูุงูุฏ ุชุดุฎุต ุฏูุฏ ฺฉู ุฏุณุชุฑุณ ุงูู ุงุณุช ู ูุดุฏุงุฑูุง ุฑุง ูุฏูุฏ.</p>
<hr>
<h3>ูุญุฏูุฏุชโูุง ู ุชุญูู ฺฉุงููพุงูุฑ</h3>
<p>ฺฉุงููพุงูุฑ ุชูุงูุง ฺฉุงูู ุจุฑุง ุชุดุฎุต ุฎุทุฑ NullReferenceException ูุฏุงุฑุฏ. ูุซูุงู ููโุชูุงูุฏ ุชุดุฎุต ุฏูุฏ ฺฉู ุนูุงุตุฑ ฺฉ ุขุฑุงู ููุฏุงุฑุฏู ุดุฏูโุงูุฏ ุง ูู:</p>
<pre class="hljs"><code><span class="hljs-keyword">var</span> strings = <span class="hljs-keyword">new</span> <span class="hljs-built_in">string</span>[<span class="hljs-number">10</span>];
Console.WriteLine(strings[<span class="hljs-number">0</span>].Length);  <span class="hljs-comment">// ูฺ ูุดุฏุงุฑ ุชููุฏ ููโุดูุฏ</span>
</code></pre>
<hr>
<h3>ุชูฺฉฺฉ Annotation ู Warning Contexts ๐๏ธ</h3>
<p>ูุนุงู ฺฉุฑุฏู nullable reference types ุจุง ุฏุณุชูุฑ <code>#nullable enable</code> ุง <code>&lt;Nullable&gt;enable&lt;/Nullable&gt;</code> ุฏู ฺฉุงุฑ ุงูุฌุงู ูโุฏูุฏ:</p>
<ol>
<li><strong>nullable annotation context</strong>: ููู ูุชุบุฑูุง reference-type ุฑุง non-nullable ูุฑุถ ูโฺฉูุฏ ูฺฏุฑ ุขูฺฉู ุจุง <code>?</code> ูุดุฎุต ุดููุฏ.</li>
<li><strong>nullable warning context</strong>: ฺฉุงููพุงูุฑ ููฺฏุงู ููุงุฌูู ุจุง ฺฉุฏ ฺฉู ุงุญุชูุงู NullReferenceException ุฏุงุฑุฏุ ูุดุฏุงุฑ ูโุฏูุฏ.</li>
</ol>
<p>ูโุชูุงู ุงู ุฏู ููุฑุฏ ุฑุง ุฌุฏุงฺฏุงูู ูุนุงู ฺฉุฑุฏ:</p>
<pre class="hljs"><code><span class="hljs-meta">#nullable enable annotations  // ููุท annotation context ูุนุงู ุงุณุช</span>
<span class="hljs-meta">#nullable enable warnings     // ููุท <span class="hljs-keyword">warning</span> context ูุนุงู ุงุณุช</span>
</code></pre>
<p>ุง ุฏุฑ ูุงู ูพุฑูฺู:</p>
<pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">Nullable</span>&gt;</span>annotations<span class="hljs-tag">&lt;/<span class="hljs-name">Nullable</span>&gt;</span>
<span class="hljs-comment">&lt;!-- OR --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">Nullable</span>&gt;</span>warnings<span class="hljs-tag">&lt;/<span class="hljs-name">Nullable</span>&gt;</span>
</code></pre>
<p>ูุนุงู ฺฉุฑุฏู ููุท <strong>annotation context</strong> ุจุฑุง ฺฉูุงุณ ุง ุงุณูุจู ูุฏู ูโุชูุงูุฏ ุงููู ฺฏุงู ููุงุณุจ ุจุฑุง ุงูุฒูุฏู nullable reference types ุจุฏูู ููุงุฌูู ุจุง ูุดุฏุงุฑูุง ุจุงุดุฏ.</p>
<hr>
<h3>ุชุจุฏู ูุดุฏุงุฑูุง ุจู ุฎุทุง โก</h3>
<p>ุฏุฑ ูพุฑูฺูโูุง ุฌุฏุฏุ ูโุชูุงู nullable context ุฑุง ุงุฒ ุงุจุชุฏุง ูุนุงู ฺฉุฑุฏ ู ุญุช ูุดุฏุงุฑูุง ุฑุง ุจู ุฎุทุง ุชุจุฏู ูููุฏ ุชุง ูพุฑูฺู ุชุง ุฒูุงู ฺฉู ุชูุงู ูุดุฏุงุฑูุง null ุฑูุน ูุดุฏูโุงูุฏุ <strong>ูุงุจู ฺฉุงููพุงู ูุจุงุดุฏ</strong>:</p>
<pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">PropertyGroup</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">Nullable</span>&gt;</span>enable<span class="hljs-tag">&lt;/<span class="hljs-name">Nullable</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">WarningsAsErrors</span>&gt;</span>CS8600;CS8602;CS8603<span class="hljs-tag">&lt;/<span class="hljs-name">WarningsAsErrors</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">PropertyGroup</span>&gt;</span>
</code></pre>
<h3>ูุชุฏูุง ุชูุณุนูโุงูุชู (Extension Methods) โจ</h3>
<p><strong>ูุชุฏูุง ุชูุณุนูโุงูุชู</strong> ุงูฺฉุงู ุงูุฒูุฏู ูุชุฏูุง ุฌุฏุฏ ุจู ฺฉ ููุน ููุฌูุฏ ุฑุง ุจุฏูู ุชุบุฑ ุฏุฑ ุชุนุฑู ุงุตู ุขู ููุน ูุฑุงูู ูโฺฉููุฏ.</p>
<hr>
<h3>ุชุนุฑู Extension Method</h3>
<p>ฺฉ <strong>extension method</strong> ุฏุฑ ูุงูุน ฺฉ <strong>ูุชุฏ static</strong> ุฏุฑ ฺฉ ฺฉูุงุณ <strong>static</strong> ุงุณุช ฺฉู <strong>ูพุงุฑุงูุชุฑ ุงูู ุขู ุจุง ฺฉูุฏูุงฺู <code>this</code> ูุดุฎุต ุดุฏู</strong> ู ููุน ุงู ูพุงุฑุงูุชุฑุ ููุงู ููุน ุงุณุช ฺฉู ูโุฎูุงูู ฺฏุณุชุฑุด ุฏูู:</p>
<pre class="hljs"><code><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title">StringHelper</span>
{
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">bool</span> <span class="hljs-title">IsCapitalized</span>(<span class="hljs-params"><span class="hljs-keyword">this</span> <span class="hljs-built_in">string</span> s</span>)</span>
    {
        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">string</span>.IsNullOrEmpty(s)) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">char</span>.IsUpper(s[<span class="hljs-number">0</span>]);
    }
}
</code></pre>
<p>ุงู ูุชุฏ ุฑุง ูโุชูุงู ุจู ุตูุฑุช <strong>ูุชุฏ ููููู (instance method)</strong> ุฑู ุฑุดุชูโูุง ูุฑุงุฎูุงู ฺฉุฑุฏ:</p>
<pre class="hljs"><code>Console.WriteLine(<span class="hljs-string">&quot;Perth&quot;</span>.IsCapitalized());  <span class="hljs-comment">// True</span>
</code></pre>
<p>ฺฉุงููพุงูุฑ ุงู ฺฉุฏ ุฑุง ุจู ูุฑุงุฎูุงู ูุนููู <strong>static</strong> ุชุจุฏู ูโฺฉูุฏ:</p>
<pre class="hljs"><code>Console.WriteLine(StringHelper.IsCapitalized(<span class="hljs-string">&quot;Perth&quot;</span>));
</code></pre>
<hr>
<h3>ฺฏุณุชุฑุด ุงูุชุฑูุณโูุง</h3>
<p>ูโุชูุงู ุงู ูุชุฏูุง ุฑุง ุฑู <strong>interface</strong>ูุง ูุฒ ุงุนูุงู ฺฉุฑุฏ:</p>
<pre class="hljs"><code><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> T <span class="hljs-title">First</span>&lt;<span class="hljs-title">T</span>&gt;(<span class="hljs-params"><span class="hljs-keyword">this</span> IEnumerable&lt;T&gt; sequence</span>)</span>
{
    <span class="hljs-keyword">foreach</span> (T element <span class="hljs-keyword">in</span> sequence)
        <span class="hljs-keyword">return</span> element;
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> InvalidOperationException(<span class="hljs-string">&quot;No elements!&quot;</span>);
}

Console.WriteLine(<span class="hljs-string">&quot;Seattle&quot;</span>.First());  <span class="hljs-comment">// S</span>
</code></pre>
<hr>
<h3>ุฒูุฌุฑูโุณุงุฒ ูุชุฏูุง ุชูุณุนูโุงูุชู (Extension Method Chaining)</h3>
<p>ูุซู ูุชุฏูุง ูููููุ ูโุชูุงู extension methodูุง ุฑุง <strong>ุฒูุฌุฑูโุง</strong> ูุฑุงุฎูุงู ฺฉุฑุฏ:</p>
<pre class="hljs"><code><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title">StringHelper</span>
{
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">string</span> <span class="hljs-title">Pluralize</span>(<span class="hljs-params"><span class="hljs-keyword">this</span> <span class="hljs-built_in">string</span> s</span>)</span> { ... }
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">string</span> <span class="hljs-title">Capitalize</span>(<span class="hljs-params"><span class="hljs-keyword">this</span> <span class="hljs-built_in">string</span> s</span>)</span> { ... }
}

<span class="hljs-built_in">string</span> x = <span class="hljs-string">&quot;sausage&quot;</span>.Pluralize().Capitalize();   <span class="hljs-comment">// &quot;Sausages&quot;</span>
<span class="hljs-built_in">string</span> y = StringHelper.Capitalize(StringHelper.Pluralize(<span class="hljs-string">&quot;sausage&quot;</span>)); <span class="hljs-comment">// ูุนุงุฏู x</span>
</code></pre>
<hr>
<h3>ุญู ุงุจูุงู ู ููุงุนุฏ ุฏุณุชุฑุณ</h3>
<ol>
<li><strong>Namespace</strong>:<br>
ุจุฑุง ุฏุณุชุฑุณ ุจู extension methodุ ฺฉูุงุณ ุขู ุจุงุฏ ุฏุฑ <strong>scope</strong> ุจุงุดุฏ (ูุนูููุงู ุจุง import namespace):</li>
</ol>
<pre class="hljs"><code><span class="hljs-keyword">using</span> Utils;  <span class="hljs-comment">// ฺฉูุงุณ StringHelper ุฏุฑ namespace Utils ูุฑุงุฑ ุฏุงุฑุฏ</span>
</code></pre>
<ol start="2">
<li><strong>Extension method vs Instance method</strong>:<br>
ูุฑ ูุชุฏ ูููููโ ุณุงุฒฺฏุงุฑุ <strong>ุงูููุช ุจุดุชุฑ ูุณุจุช ุจู extension method ุฏุงุฑุฏ</strong>. ุจุฑุง ูุฑุงุฎูุงู extension method ุฏุฑ ุงู ุดุฑุงุทุ ุจุงุฏ ุงุฒ <strong>ูุฑุงุฎูุงู static</strong> ุงุณุชูุงุฏู ฺฉุฑุฏ:</li>
</ol>
<pre class="hljs"><code><span class="hljs-keyword">class</span> <span class="hljs-title">Test</span>
{
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Foo</span>(<span class="hljs-params"><span class="hljs-built_in">object</span> x</span>)</span> { }   <span class="hljs-comment">// ููุดู ุจุฑูุฏู ุงุณุช</span>
}

<span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Extensions</span>
{
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Foo</span>(<span class="hljs-params"><span class="hljs-keyword">this</span> Test t, <span class="hljs-built_in">int</span> x</span>)</span> { }
}

<span class="hljs-comment">// ูุฑุงุฎูุงู:</span>
Extensions.Foo(<span class="hljs-keyword">new</span> Test(), <span class="hljs-number">42</span>);   <span class="hljs-comment">// ุจุงุฏ ุงุฒ ุฑูุด static ุงุณุชูุงุฏู ุดูุฏ</span>
</code></pre>
<ol start="3">
<li><strong>Extension method vs Extension method</strong>:<br>
ุงฺฏุฑ ุฏู ูุชุฏ extension ุจุง ุงูุถุง ฺฉุณุงู ูุฌูุฏ ุฏุงุดุชู ุจุงุดุฏุ ุจุฑุง ุฑูุน ุงุจูุงู ุจุงุฏ ุจู ุตูุฑุช <strong>static</strong> ูุฑุงุฎูุงู ุดูุฏ.<br>
ุงฺฏุฑ ฺฉ ุงุฒ ูุชุฏูุง ุขุฑฺฏููุงูโูุง ุฎุงุตโุชุฑ ุฏุงุดุชู ุจุงุดุฏุ ูุชุฏ ุฎุงุตโุชุฑ ุจุฑูุฏู ุงุณุช.</li>
</ol>
<pre class="hljs"><code><span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title">StringHelper</span>
{
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">bool</span> <span class="hljs-title">IsCapitalized</span>(<span class="hljs-params"><span class="hljs-keyword">this</span> <span class="hljs-built_in">string</span> s</span>)</span> { ... }
}
<span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title">ObjectHelper</span>
{
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">bool</span> <span class="hljs-title">IsCapitalized</span>(<span class="hljs-params"><span class="hljs-keyword">this</span> <span class="hljs-built_in">object</span> s</span>)</span> { ... }
}

<span class="hljs-built_in">bool</span> test1 = <span class="hljs-string">&quot;Perth&quot;</span>.IsCapitalized();  <span class="hljs-comment">// ูุฑุงุฎูุงู StringHelper</span>
</code></pre>
<hr>
<h3>ฺฉุงูุด ุณุทุญ ฺฉ ูุชุฏ ุชูุณุนูโุงูุชู (Demoting an Extension Method)</h3>
<p>ูุฑุถ ฺฉูุฏ ฺฉ ูุชุฏ ุชูุณุนูโุงูุชู ุฏุฑ ฺฉุชุงุจุฎุงูู ุดุฎุต ุซุงูุซ ุจุง ฺฉ ูุชุฏ ุฌุฏุฏ ุฏุฑ ฺฉุชุงุจุฎุงูู .NET ุชุฏุงุฎู ุฏุงุฑุฏ. ูโุชูุงู ุจุฏูู ุญุฐู ุขูุ ุขู ุฑุง <strong>ุจู ฺฉ ูุชุฏ static ูุนููู ุชุจุฏู ฺฉุฑุฏ</strong>:</p>
<ul>
<li>ฺฉุงู ุงุณุช <code>this</code> ุฑุง ุงุฒ ูพุงุฑุงูุชุฑ ุงูู ุญุฐู ฺฉูู.</li>
<li>ูููโ ูุฑุงุฎูุงูโูุง ฺฉู ูุจูุงู ุจุง extension method ุจูุฏูโุงูุฏุ ููฺฏุงู ฺฉุงููพุงู ุฏูุจุงุฑู ุจู <strong>ูุฑุงุฎูุงู static</strong> ุชุจุฏู ูโุดููุฏ.</li>
<li>ูุตุฑูโฺฉููุฏฺฏุงู ฺฉุชุงุจุฎุงูู ููุท ุฒูุงู ุชุญุช ุชุฃุซุฑ ูุฑุงุฑ ูโฺฏุฑูุฏ ฺฉู ุฏูุจุงุฑู ูพุฑูฺู ุฑุง ฺฉุงููพุงู ฺฉููุฏ.</li>
</ul>
<hr>
<h3>ููุนโูุง ูุงุดูุงุณ (Anonymous Types) ู ุชุงูพูโูุง (Tuples) ุฏุฑ C# ๐ข</h3>
<hr>
<h2>ฑ. ููุนโูุง ูุงุดูุงุณ (Anonymous Types) โจ</h2>
<p>ฺฉ <strong>ููุน ูุงุดูุงุณ</strong>ุ ฺฉูุงุณ ุณุงุฏูโุง ุงุณุช ฺฉู <strong>ฺฉุงููพุงูุฑ ุจู ุตูุฑุช ุฎูุฏฺฉุงุฑ ุงุฌุงุฏ ูโฺฉูุฏ</strong> ุชุง ูุฌููุนูโุง ุงุฒ ููุงุฏุฑ ุฑุง ุฐุฎุฑู ฺฉูุฏ.</p>
<h3>ูุญูู ุชุนุฑู</h3>
<pre class="hljs"><code><span class="hljs-keyword">var</span> dude = <span class="hljs-keyword">new</span> { Name = <span class="hljs-string">&quot;Bob&quot;</span>, Age = <span class="hljs-number">23</span> };
</code></pre>
<p>ฺฉุงููพุงูุฑ ุชูุฑุจุงู ุงู ุฑุง ุจู ุตูุฑุช ุฒุฑ ุชุฑุฌูู ูโฺฉูุฏ:</p>
<pre class="hljs"><code><span class="hljs-keyword">internal</span> <span class="hljs-keyword">class</span> <span class="hljs-title">AnonymousGeneratedTypeName</span>
{
    <span class="hljs-keyword">private</span> <span class="hljs-built_in">string</span> name;
    <span class="hljs-keyword">private</span> <span class="hljs-built_in">int</span> age;
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">AnonymousGeneratedTypeName</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> name, <span class="hljs-built_in">int</span> age</span>)</span>
    {
        <span class="hljs-keyword">this</span>.name = name; <span class="hljs-keyword">this</span>.age = age;
    }
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> Name =&gt; name;
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">int</span> Age =&gt; age;
    <span class="hljs-comment">// ูุชุฏูุง Equalsุ GetHashCode ู ToString ุจุงุฒููุณ ุดุฏูโุงูุฏ</span>
}
</code></pre>
<blockquote>
<p>โ๏ธ ุจุงุฏ ููุดู ุงุฒ <code>var</code> ุจุฑุง ุงุฑุฌุงุน ุจู ููุน ูุงุดูุงุณ ุงุณุชูุงุฏู ฺฉุฑุฏุ ฺูู <strong>ูุงู ูุฏุงุฑุฏ</strong>.</p>
</blockquote>
<hr>
<h3>ููุงุนุฏ ู ูฺฉุงุช ููู</h3>
<ol>
<li><strong>ุงุณุชูุชุงุฌ ูุงู ูฺฺฏโูุง:</strong><br>
ุงฺฏุฑ ฺฉ ุนุจุงุฑุช ุดุงูู <strong>ุดูุงุณูโุง ููุฌูุฏ</strong> ุจุงุดุฏุ ูุงู ูฺฺฏ ูโุชูุงูุฏ ุงุฒ ุขู ุงุณุชุฎุฑุงุฌ ุดูุฏ:</li>
</ol>
<pre class="hljs"><code><span class="hljs-built_in">int</span> Age = <span class="hljs-number">23</span>;
<span class="hljs-keyword">var</span> dude = <span class="hljs-keyword">new</span> { Name = <span class="hljs-string">&quot;Bob&quot;</span>, Age, Age.ToString().Length };
<span class="hljs-comment">// ูุนุงุฏู:</span>
<span class="hljs-keyword">var</span> dude = <span class="hljs-keyword">new</span> { Name = <span class="hljs-string">&quot;Bob&quot;</span>, Age = Age, Length = Age.ToString().Length };
</code></pre>
<ol start="2">
<li><strong>ุจุฑุงุจุฑ ุจูุฏู ููุน ูุงุดูุงุณ:</strong><br>
ุฏู ููููู ูุงุดูุงุณ ุจุง <strong>ูฺฺฏโูุง ฺฉุณุงู ุฏุฑ ููุงู ุงุณูุจู</strong>ุ ููุน ฺฉุณุงู ุฏุงุฑูุฏ:</li>
</ol>
<pre class="hljs"><code><span class="hljs-keyword">var</span> a1 = <span class="hljs-keyword">new</span> { X = <span class="hljs-number">2</span>, Y = <span class="hljs-number">4</span> };
<span class="hljs-keyword">var</span> a2 = <span class="hljs-keyword">new</span> { X = <span class="hljs-number">2</span>, Y = <span class="hljs-number">4</span> };
Console.WriteLine(a1.GetType() == a2.GetType());  <span class="hljs-comment">// True</span>
</code></pre>
<ol start="3">
<li>
<p><strong>ููุงุณู ููุงุฏุฑ:</strong></p>
<ul>
<li><code>Equals</code> โ ููุงุณู ุฏุงุฏูโูุง (ุณุงุฎุชุงุฑ)</li>
<li><code>==</code> โ ููุงุณู ูุฑุฌุน (referential)</li>
</ul>
</li>
</ol>
<pre class="hljs"><code>Console.WriteLine(a1.Equals(a2));  <span class="hljs-comment">// True</span>
Console.WriteLine(a1 == a2);       <span class="hljs-comment">// False</span>
</code></pre>
<ol start="4">
<li><strong>ุขุฑุงูโุง ุงุฒ ููุน ูุงุดูุงุณ:</strong></li>
</ol>
<pre class="hljs"><code><span class="hljs-keyword">var</span> dudes = <span class="hljs-keyword">new</span>[]
{
    <span class="hljs-keyword">new</span> { Name = <span class="hljs-string">&quot;Bob&quot;</span>, Age = <span class="hljs-number">30</span> },
    <span class="hljs-keyword">new</span> { Name = <span class="hljs-string">&quot;Tom&quot;</span>, Age = <span class="hljs-number">40</span> }
};
</code></pre>
<ol start="5">
<li><strong>ุบุฑ ูุงุจู ุชุบุฑ ุจูุฏู (Immutable)</strong><br>
ุงุฒ C# 10 ุจู ุจุนุฏ ูโุชูุงู ุจุง <code>with</code> ฺฉ ูุณุฎู ุฌุฏุฏ ุจุง ุชุบุฑุงุช ุณุงุฎุช ุจุฏูู ุชุฎุฑุจ ูุณุฎู ุงุตู:</li>
</ol>
<pre class="hljs"><code><span class="hljs-keyword">var</span> a1 = <span class="hljs-keyword">new</span> { A = <span class="hljs-number">1</span>, B = <span class="hljs-number">2</span>, C = <span class="hljs-number">3</span>, D = <span class="hljs-number">4</span>, E = <span class="hljs-number">5</span> };
<span class="hljs-keyword">var</span> a2 = a1 <span class="hljs-keyword">with</span> { E = <span class="hljs-number">10</span> };
Console.WriteLine(a2);  <span class="hljs-comment">// { A = 1, B = 2, C = 3, D = 4, E = 10 }</span>
</code></pre>
<blockquote>
<p>ููุนโูุง ูุงุดูุงุณ ุจุณุงุฑ ฺฉุงุฑุจุฑุฏ ุฏุฑ <strong>LINQ</strong> ูุณุชูุฏ.</p>
</blockquote>
<hr>
<h2>ฒ. ุชุงูพูโูุง (Tuples) ๐น</h2>
<p><strong>ุชุงูพูโูุง</strong> ูุดุงุจู ููุนโูุง ูุงุดูุงุณ ูุณุชูุฏุ ุงูุง ุงูฺฉุงู ุจุงุฒฺฏุฑุฏุงูุฏู ฺูุฏ ููุฏุงุฑ ุงุฒ ฺฉ ูุชุฏ ุฑุง ุจุฏูู ูพุงุฑุงูุชุฑ <code>out</code> ูโุฏููุฏ.</p>
<h3>ุชุนุฑู ุณุงุฏู</h3>
<pre class="hljs"><code><span class="hljs-keyword">var</span> bob = (<span class="hljs-string">&quot;Bob&quot;</span>, <span class="hljs-number">23</span>);  <span class="hljs-comment">// ุงููุงูโูุง ูุงูโฺฏุฐุงุฑ ูุดุฏูโุงูุฏ</span>
Console.WriteLine(bob.Item1);  <span class="hljs-comment">// Bob</span>
Console.WriteLine(bob.Item2);  <span class="hljs-comment">// 23</span>
</code></pre>
<ul>
<li>ุชุงูพูโูุง <strong>Value Type</strong> ูุณุชูุฏ ู ุงููุงูโูุงุดุงู ูุงุจู ุชุบุฑ ุงุณุช:</li>
</ul>
<pre class="hljs"><code><span class="hljs-keyword">var</span> joe = bob;    <span class="hljs-comment">// ฺฉูพ ุงุฒ bob</span>
joe.Item1 = <span class="hljs-string">&quot;Joe&quot;</span>;
Console.WriteLine(bob);  <span class="hljs-comment">// (Bob, 23)</span>
Console.WriteLine(joe);  <span class="hljs-comment">// (Joe, 23)</span>
</code></pre>
<h3>ุชุนุฑู ุจุง ููุน ูุดุฎุต</h3>
<pre class="hljs"><code>(<span class="hljs-built_in">string</span>, <span class="hljs-built_in">int</span>) bob = (<span class="hljs-string">&quot;Bob&quot;</span>, <span class="hljs-number">23</span>);
</code></pre>
<ul>
<li>ูโุชูุงู ุชุงูพู ุฑุง ุงุฒ ูุชุฏ ุจุงุฒฺฏุฑุฏุงูุฏ:</li>
</ul>
<pre class="hljs"><code>(<span class="hljs-built_in">string</span>, <span class="hljs-built_in">int</span>) GetPerson() =&gt; (<span class="hljs-string">&quot;Bob&quot;</span>, <span class="hljs-number">23</span>);
(<span class="hljs-built_in">string</span>, <span class="hljs-built_in">int</span>) person = GetPerson();
Console.WriteLine(person.Item1);  <span class="hljs-comment">// Bob</span>
Console.WriteLine(person.Item2);  <span class="hljs-comment">// 23</span>
</code></pre>
<h3>ุณุงุฒฺฏุงุฑ ุจุง ุฌูุฑฺฉโูุง</h3>
<pre class="hljs"><code>Task&lt;(<span class="hljs-built_in">string</span>,<span class="hljs-built_in">int</span>)&gt;
Dictionary&lt;(<span class="hljs-built_in">string</span>,<span class="hljs-built_in">int</span>), Uri&gt;
IEnumerable&lt;(<span class="hljs-built_in">int</span> id, <span class="hljs-built_in">string</span> name)&gt;   <span class="hljs-comment">// ุงูฺฉุงู ูุงูโฺฏุฐุงุฑ ุงููุงูโูุง</span>
</code></pre>
<hr>
<h3>ูุงูโฺฏุฐุงุฑ ุงููุงูโูุง ุชุงูพู ู ูฺฉุงุช ูพุดุฑูุชู ๐ข</h3>
<hr>
<h2>ฑ. ูุงูโฺฏุฐุงุฑ ุงููุงูโูุง ููฺฏุงู ุงุฌุงุฏ ุชุงูพู</h2>
<p>ูโุชูุงู ุงููุงูโูุง ุฑุง ุจุง ูุงูโูุง ูุนูโุฏุงุฑ ูุดุฎุต ฺฉุฑุฏ:</p>
<pre class="hljs"><code><span class="hljs-keyword">var</span> tuple = (name: <span class="hljs-string">&quot;Bob&quot;</span>, age: <span class="hljs-number">23</span>);
Console.WriteLine(tuple.name);  <span class="hljs-comment">// Bob</span>
Console.WriteLine(tuple.age);   <span class="hljs-comment">// 23</span>
</code></pre>
<p>ููู ฺฉุงุฑ ููฺฏุงู <strong>ูุดุฎุต ฺฉุฑุฏู ููุน ุชุงูพู</strong> ูุฒ ููฺฉู ุงุณุช:</p>
<pre class="hljs"><code>(<span class="hljs-built_in">string</span> name, <span class="hljs-built_in">int</span> age) GetPerson() =&gt; (<span class="hljs-string">&quot;Bob&quot;</span>, <span class="hljs-number">23</span>);
<span class="hljs-keyword">var</span> person = GetPerson();
Console.WriteLine(person.name);  <span class="hljs-comment">// Bob</span>
Console.WriteLine(person.age);   <span class="hljs-comment">// 23</span>
</code></pre>
<hr>
<h2>ฒ. ุงุณุชูุงุฏู ุงุฒ ุฑฺฉูุฑุฏูุง (Records) ุจุฑุง ููุน ุจุงุฒฺฏุดุช ููโุชุฑ</h2>
<p>ุจู ุฌุง ุชุงูพู ูโุชูุงู ุงุฒ <strong>ุฑฺฉูุฑุฏูุง</strong> ุงุณุชูุงุฏู ฺฉุฑุฏ ุชุง ููุน ุจุงุฒฺฏุดุช <strong>ูู ู ูุงุจู ุชุบุฑ</strong> ุฏุงุดุชู ุจุงุดู:</p>
<pre class="hljs"><code><span class="hljs-keyword">record</span> <span class="hljs-title">Person</span>(<span class="hljs-title">string</span> <span class="hljs-title">Name</span>, <span class="hljs-title">int</span> <span class="hljs-title">Age</span>);

<span class="hljs-function">Person <span class="hljs-title">GetPerson</span>()</span> =&gt; <span class="hljs-keyword">new</span>(<span class="hljs-string">&quot;Bob&quot;</span>, <span class="hljs-number">23</span>);
<span class="hljs-keyword">var</span> person = GetPerson();
Console.WriteLine(person.Name);  <span class="hljs-comment">// Bob</span>
Console.WriteLine(person.Age);   <span class="hljs-comment">// 23</span>
</code></pre>
<p>ูุฒุงุง:</p>
<ul>
<li>ููุน ุจุงุฒฺฏุดุช ูุงูโฺฏุฐุงุฑ ุดุฏู ู ูุงุจู ุจุงุฒุณุงุฒ/refactor ุงุณุช.</li>
<li>ฺฉุงูุด ุชฺฉุฑุงุฑ ฺฉุฏ.</li>
<li>ุชุดูู ุจู ุทุฑุงุญ ุฎูุจ ู ุงุตูู OOP.</li>
</ul>
<hr>
<h2>ณ. ุงุณุชูุชุงุฌ ุฎูุฏฺฉุงุฑ ูุงู ุงููุงูโูุง</h2>
<p>ูุซุงู:</p>
<pre class="hljs"><code><span class="hljs-keyword">var</span> now = DateTime.Now;
<span class="hljs-keyword">var</span> tuple = (now.Day, now.Month, now.Year);
Console.WriteLine(tuple.Day);  <span class="hljs-comment">// OK</span>
</code></pre>
<blockquote>
<p>ฺฉุงููพุงูุฑ ุงุฒ ูุงู ููุฏ ุง ูพุฑุงูพุฑุช ุจุฑุง ุงููุงูโูุง ุงุณุชูุงุฏู ูโฺฉูุฏ.</p>
</blockquote>
<hr>
<h2>ด. ุณุงุฒฺฏุงุฑ ููุน (Type Compatibility) ู ุงุดุชุจุงูุงุช ูุญุชูู</h2>
<p>ุชุงูพูโูุง ููุท ุงุฒ ูุธุฑ <strong>ููุน ุงููุงูโูุง</strong> ุจุง ูู ุณุงุฒฺฏุงุฑูุฏุ <strong>ูุงู ุงููุงูโูุง ุงููุช ูุฏุงุฑุฏ</strong>:</p>
<pre class="hljs"><code>(<span class="hljs-built_in">string</span> name, <span class="hljs-built_in">int</span> age, <span class="hljs-built_in">char</span> sex) bob1 = (<span class="hljs-string">&quot;Bob&quot;</span>, <span class="hljs-number">23</span>, <span class="hljs-string">&#x27;M&#x27;</span>);
(<span class="hljs-built_in">string</span> age, <span class="hljs-built_in">int</span> sex, <span class="hljs-built_in">char</span> name) bob2 = bob1;  <span class="hljs-comment">// ุจุฏูู ุฎุทุง!</span>
Console.WriteLine(bob2.name);  <span class="hljs-comment">// M</span>
Console.WriteLine(bob2.age);   <span class="hljs-comment">// Bob</span>
Console.WriteLine(bob2.sex);   <span class="hljs-comment">// 23</span>
</code></pre>
<blockquote>
<p>โ๏ธ ุงู ูโุชูุงูุฏ ููุฌุฑ ุจู ูุชุงุฌ ฺฏุฌโฺฉููุฏู ุดูุฏ.</p>
</blockquote>
<hr>
<h2>ต. ุญุฐู ูุงู ุงููุงูโูุง ุฏุฑ ุฒูุงู ุงุฌุฑุง (Type Erasure)</h2>
<ul>
<li>ุชุงูพูโูุง ุงุฒ <code>ValueTuple&lt;&gt;</code> ุงุณุชูุงุฏู ูโฺฉููุฏ ู ุฏุฑ runtime <strong>ูุงู ุงููุงูโูุง ุฑุง ูุฏุงุฑูุฏ</strong>.</li>
<li>ููุท ุฏุฑ ุณูุฑุณ ฺฉุฏ ู ฺฉุงููพุงูุฑ ูุฌูุฏ ุฏุงุฑูุฏ.</li>
<li>ุฏุฑ ุจุดุชุฑ ุงุจุฒุงุฑูุง ูุซู <strong>Debugging</strong> ุง <strong>Reflection</strong> ูุงูโูุง ูุงุจู ูุดุงูุฏู ูุณุชูุฏ.</li>
</ul>
<hr>
<h2>ถ. ุงุฌุงุฏ alias ุจุฑุง ุชุงูพูโูุง (C# 12)</h2>
<p>ูโุชูุงู ุจุง <code>using</code> ุจุฑุง ุชุงูพูโูุง ูุงู ูุณุชุนุงุฑ ุชุนุฑู ฺฉุฑุฏ:</p>
<pre class="hljs"><code><span class="hljs-keyword">using</span> Point = (<span class="hljs-built_in">int</span>, <span class="hljs-built_in">int</span>);
Point p = (<span class="hljs-number">3</span>, <span class="hljs-number">4</span>);

<span class="hljs-comment">// ุจุง ูุงู ุงููุงู:</span>
<span class="hljs-keyword">using</span> Point = (<span class="hljs-built_in">int</span> X, <span class="hljs-built_in">int</span> Y);  <span class="hljs-comment">// Legal</span>
Point p2 = (<span class="hljs-number">3</span>, <span class="hljs-number">4</span>);
</code></pre>
<hr>
<h2>ท. ุงุณุชูุงุฏู ุงุฒ ValueTuple.Create</h2>
<p>ูโุชูุงู ุชุงูพู ุฑุง ุจุง ูุชุฏ ฺฉุงุฑุฎุงููโุง ูุฒ ุณุงุฎุช:</p>
<pre class="hljs"><code>ValueTuple&lt;<span class="hljs-built_in">string</span>,<span class="hljs-built_in">int</span>&gt; bob1 = ValueTuple.Create(<span class="hljs-string">&quot;Bob&quot;</span>, <span class="hljs-number">23</span>);
(<span class="hljs-built_in">string</span>,<span class="hljs-built_in">int</span>) bob2           = ValueTuple.Create(<span class="hljs-string">&quot;Bob&quot;</span>, <span class="hljs-number">23</span>);
(<span class="hljs-built_in">string</span> name,<span class="hljs-built_in">int</span> age) bob3  = ValueTuple.Create(<span class="hljs-string">&quot;Bob&quot;</span>, <span class="hljs-number">23</span>);
</code></pre>
<hr>
<h3>ุชุฌุฒู (Deconstructing) ุชุงูพูโูุง ๐งฉ</h3>
<p>ุชุงูพูโูุง ุจูโุตูุฑุช ุถูู ุงุฒ <strong>ุงูฺฏู ุชุฌุฒู (deconstruction pattern)</strong> ูพุดุชุจุงู ูโฺฉููุฏ (ุฑุฌูุน ฺฉูุฏ ุจู ุจุฎุด ยซDeconstructorsยป ุฏุฑ ุตูุญู ฑฑฐ)ุ ุจูุงุจุฑุงู ูโุชูุงูุฏ ุจู ุฑุงุญุช ฺฉ ุชุงูพู ุฑุง ุจู ูุชุบุฑูุง ุฌุฏุงฺฏุงูู ุชูุณู ฺฉูุฏ. ุจู ูุซุงู ุฒุฑ ุชูุฌู ฺฉูุฏ:</p>
<pre class="hljs"><code><span class="hljs-keyword">var</span> bob = (<span class="hljs-string">&quot;Bob&quot;</span>, <span class="hljs-number">23</span>);
<span class="hljs-built_in">string</span> name = bob.Item1;
<span class="hljs-built_in">int</span> age = bob.Item2;
</code></pre>
<p>ุจุง ุงุณุชูุงุฏู ุงุฒ <strong>deconstructor ุชุงูพู</strong>ุ ูโุชูุงู ฺฉุฏ ุฑุง ุณุงุฏูโุชุฑ ููุดุช:</p>
<pre class="hljs"><code><span class="hljs-keyword">var</span> bob = (<span class="hljs-string">&quot;Bob&quot;</span>, <span class="hljs-number">23</span>);
(<span class="hljs-built_in">string</span> name, <span class="hljs-built_in">int</span> age) = bob;   <span class="hljs-comment">// ุชุฌุฒู ุชุงูพู bob ุจู</span>
                                <span class="hljs-comment">// ูุชุบุฑูุง ุฌุฏุงฺฏุงูู (name ู age)</span>
Console.WriteLine(name);
Console.WriteLine(age);
</code></pre>
<p>ูุญู (syntax) ุชุฌุฒู ุดุจู ุจู ูุญู ุงุนูุงู ุชุงูพู ุจุง <strong>ุนูุงุตุฑ ูุงูโฺฏุฐุงุฑโุดุฏู</strong> ุงุณุชุ ุงูุง ุชูุงูุช ุฏุงุฑุฏ:</p>
<pre class="hljs"><code>(<span class="hljs-built_in">string</span> name, <span class="hljs-built_in">int</span> age)      = bob;   <span class="hljs-comment">// ุชุฌุฒู ฺฉ ุชุงูพู</span>
(<span class="hljs-built_in">string</span> name, <span class="hljs-built_in">int</span> age) bob2 = bob;   <span class="hljs-comment">// ุงุนูุงู ฺฉ ุชุงูพู ุฌุฏุฏ</span>
</code></pre>
<p>ูุซุงู ุฏฺฏุฑ ููฺฏุงู ูุฑุงุฎูุงู ฺฉ ูุชุฏ ุจุง <strong>ุงุณุชูุงุฏู ุงุฒ ุงุณุชูุชุงุฌ ููุน (var)</strong>:</p>
<pre class="hljs"><code><span class="hljs-keyword">var</span> (name, age, sex) = GetBob();
Console.WriteLine(name);  <span class="hljs-comment">// Bob</span>
Console.WriteLine(age);   <span class="hljs-comment">// 23</span>
Console.WriteLine(sex);   <span class="hljs-comment">// M</span>

(<span class="hljs-built_in">string</span> name, <span class="hljs-built_in">int</span> age, <span class="hljs-built_in">char</span> sex) GetBob() =&gt; (<span class="hljs-string">&quot;Bob&quot;</span>, <span class="hljs-number">23</span>, <span class="hljs-string">&#x27;M&#x27;</span>);
</code></pre>
<p>ููฺูู ูโุชูุงูุฏ ูุณุชููุงู <strong>ููุฏุงุฑุฏู ุจู ููุฏูุง ู ุฎุตูุตุงุช</strong> (fields and properties) ุงูุฌุงู ุฏูุฏุ ฺฉู ฺฉ ุฑูุด ฺฉูุชุงู ุจุฑุง ููุฏุงุฑุฏู ฺูุฏู ููุฏ ุง property ุฏุฑ ุณุงุฒูุฏู (constructor) ูุฑุงูู ูโฺฉูุฏ:</p>
<pre class="hljs"><code><span class="hljs-keyword">class</span> <span class="hljs-title">Point</span>
{
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">readonly</span> <span class="hljs-built_in">int</span> X, Y;
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Point</span>(<span class="hljs-params"><span class="hljs-built_in">int</span> x, <span class="hljs-built_in">int</span> y</span>)</span> =&gt; (X, Y) = (x, y);
}
</code></pre>
<hr>
<h3>ููุงุณู ุจุฑุงุจุฑ (Equality Comparison) โ๏ธ</h3>
<p>ูุงููุฏ <strong>anonymous types</strong>ุ ูุชุฏ <strong>Equals</strong> ุฏุฑ ุชุงูพูโูุง ฺฉ ููุงุณู ุณุงุฎุชุงุฑ (structural equality) ุงูุฌุงู ูโุฏูุฏุ ุนู ุฏุงุฏูโูุง ุฏุงุฎู ููุงุณู ูโุดููุฏ ูู ูุฑุงุฌุน (references):</p>
<pre class="hljs"><code><span class="hljs-keyword">var</span> t1 = (<span class="hljs-string">&quot;one&quot;</span>, <span class="hljs-number">1</span>);
<span class="hljs-keyword">var</span> t2 = (<span class="hljs-string">&quot;one&quot;</span>, <span class="hljs-number">1</span>);
Console.WriteLine(t1.Equals(t2));  <span class="hljs-comment">// True</span>
</code></pre>
<p>ุนูุงูู ุจุฑ ุงูุ <strong>ValueTuple&lt;&gt;</strong> ุนููฺฏุฑูุง <code>==</code> ู <code>!=</code> ุฑุง ุจุงุฒุชุนุฑู ฺฉุฑุฏู ุงุณุช:</p>
<pre class="hljs"><code>Console.WriteLine(t1 == t2);  <span class="hljs-comment">// True (ุงุฒ C# 7.3 ุจู ุจุนุฏ)</span>
</code></pre>
<p>ุชุงูพูโูุง ููฺูู <strong>ูุชุฏ GetHashCode</strong> ุฑุง ุจุงุฒุชุนุฑู ูโฺฉููุฏุ ุจูุงุจุฑุงู ูโุชูุงู ุงุฒ ุขูโูุง ุจูโุนููุงู <strong>ฺฉูุฏ ุฏุฑ ุฏฺฉุดูุฑโูุง</strong> ุงุณุชูุงุฏู ฺฉุฑุฏ. ููุงุณู ุจุฑุงุจุฑ ุฑุง ุฏุฑ ุจุฎุด ยซEquality Comparisonยป ุตูุญู ณดด ู ุฏฺฉุดูุฑโูุง ุฑุง ุฏุฑ ูุตู ท ุจูโุทูุฑ ููุตู ุจุฑุฑุณ ฺฉุฑุฏูโุงู.</p>
<p>ููุนโูุง <strong>ValueTuple&lt;&gt;</strong> ููฺูู ุฑุงุจุท <strong>IComparable</strong> ุฑุง ูพุงุฏูโุณุงุฒ ูโฺฉููุฏ (ุฑุฌูุน ฺฉูุฏ ุจู ยซOrder Comparisonยป ุตูุญู ณตต)ุ ุจูุงุจุฑุงู ูโุชูุงู ุงุฒ ุขูโูุง ุจูโุนููุงู ฺฉูุฏ ูุฑุชุจโุณุงุฒ ุงุณุชูุงุฏู ฺฉุฑุฏ.</p>
<hr>
<h3>ฺฉูุงุณโูุง System.Tuple ๐๏ธ</h3>
<p>ุฏุฑ ูุถุง ูุงู <strong>System</strong>ุ ุฎุงููุงุฏูโุง ุงุฒ ููุนโูุง generic ุจู ูุงู <strong>Tuple</strong> ูุฌูุฏ ุฏุงุฑุฏ (ูู ValueTuple). ุงูโูุง ุงุฒ ุณุงู ฒฐฑฐ ูุนุฑู ุดุฏูุฏ ู ุจูโุตูุฑุช ฺฉูุงุณ ุชุนุฑู ุดุฏูโุงูุฏุ ุฏุฑ ุญุงู ฺฉู <strong>ValueTuple</strong> ุจูโุตูุฑุช struct ูุณุชูุฏ.</p>
<p>ุฏุฑ ุนููุ ุชุนุฑู ุชุงูพูโูุง ุจูโุตูุฑุช ฺฉูุงุณุ ุงุดุชุจุงู ูุญุณูุจ ุดุฏุ ฺุฑุง ฺฉู ุฏุฑ ุณูุงุฑููุง ุฑุงุฌ ุงุณุชูุงุฏู ุงุฒ ุชุงูพูุ <strong>struct</strong> ฺฉู ุจูุชุฑ ุนูู ูโฺฉูุฏ ู ุงุฒ ุชุฎุตุต ุญุงูุธู ุงุถุงู ุฌููฺฏุฑ ูโฺฉูุฏ. ุจู ููู ุฏููุ ููุช ูุงฺฉุฑูุณุงูุช ูพุดุชุจุงู ุฒุจุงู ุจุฑุง ุชุงูพูโูุง ุฏุฑ C# 7 ุงุถุงูู ฺฉุฑุฏุ <strong>Tuple</strong> ูุฏู ุฑุง ฺฉูุงุฑ ฺฏุฐุงุดุช ู ุจู <strong>ValueTuple</strong> ุฌุฏุฏ ุฑู ุขูุฑุฏ.</p>
<p>ุจุง ุงู ุญุงูุ ูููุฒ ููฺฉู ุงุณุช ุฏุฑ ฺฉุฏูุง ูุจู ุงุฒ C# 7 ุจุง ฺฉูุงุณโูุง Tuple ุจุฑุฎูุฑุฏ ฺฉูุฏ. ุงูโูุง ูพุดุชุจุงู ุฒุจุงู ุฎุงุต ูุฏุงุฑูุฏ ู ุจู ุดฺฉู ุฒุฑ ุงุณุชูุงุฏู ูโุดููุฏ:</p>
<pre class="hljs"><code>Tuple&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">int</span>&gt; t = Tuple.Create(<span class="hljs-string">&quot;Bob&quot;</span>, <span class="hljs-number">23</span>);  <span class="hljs-comment">// ูุชุฏ ฺฉุงุฑุฎุงููโุง (Factory method)</span>
Console.WriteLine(t.Item1);  <span class="hljs-comment">// Bob</span>
Console.WriteLine(t.Item2);  <span class="hljs-comment">// 23</span>
</code></pre>
<hr>
<h3>ุฑฺฉูุฑุฏูุง (Records) ๐</h3>
<p>ุฑฺฉูุฑุฏ ฺฉ ููุน ุฎุงุต ุงุฒ <strong>ฺฉูุงุณ ุง struct</strong> ุงุณุช ฺฉู ุจุฑุง ฺฉุงุฑ ุจุง ุฏุงุฏูโูุง <strong>ุบุฑูุงุจู ุชุบุฑ (immutable/read-only)</strong> ุทุฑุงุญ ุดุฏู ุงุณุช.</p>
<p>ูฺฺฏ ููุฏ ุขูุ <strong>ุชุบุฑ ุบุฑูุฎุฑุจ (nondestructive mutation)</strong> ุงุณุชุ ุจุง ุงู ุญุงูุ ุฑฺฉูุฑุฏูุง ุจุฑุง ุงุฌุงุฏ ุงููุงุน ฺฉู ุตุฑูุงู ุฏุงุฏูโูุง ุฑุง ูฺฏู ูโุฏุงุฑูุฏ ุง ุชุฑฺฉุจ ูโฺฉููุฏ ูุฒ ููุฏ ูุณุชูุฏ. ุฏุฑ ููุงุฑุฏ ุณุงุฏูุ ุฑฺฉูุฑุฏูุง <strong>ฺฉุฏูุง ุงุถุงู ุฑุง ุญุฐู ูโฺฉููุฏ</strong> ู ุฏุฑ ุนู ุญุงูุ <strong>ููุงุณู ุจุฑุงุจุฑ ููุงุณุจ ุจุฑุง ุงููุงุน ุบุฑูุงุจู ุชุบุฑ</strong> ุฑุง ุฑุนุงุช ูโฺฉููุฏ.</p>
<p>ุฑฺฉูุฑุฏูุง ุตุฑูุงู ฺฉ <strong>ููููู ุฒูุงู ฺฉุงููพุงู ุฏุฑ C#</strong> ูุณุชูุฏ ู ุฏุฑ ุฒูุงู ุงุฌุฑุงุ CLR ุขูโูุง ุฑุง ุจูโุตูุฑุช ฺฉูุงุณ ุง struct ูุนููู ูโุจูุฏ (ุจุง ฺูุฏ ุนุถู ุงุถุงู ยซุชุฑฺฉุจโุดุฏูยป ุชูุณุท ฺฉุงููพุงูุฑ).</p>
<hr>
<h3>ููุฏูู ๐</h3>
<p>ููุดุชู <strong>ุงููุงุน ุบุฑูุงุจู ุชุบุฑ (immutable types)</strong> ฺฉู ุฏุฑ ุขูโูุง ููุฏูุง ูพุณ ุงุฒ ููุฏุงุฑุฏู ุงููู ูุงุจู ุชุบุฑ ูุจุงุดูุฏุ ฺฉ ุงุณุชุฑุงุชฺ ุฑุงุฌ ุจุฑุง ุณุงุฏูโุชุฑ ฺฉุฑุฏู ูุฑูโุงูุฒุงุฑ ู ฺฉุงูุด ุจุงฺฏโูุง ุงุณุช. ุงู ููุถูุน ููฺูู ุจุฎุด ุงุตู <strong>ุจุฑูุงููโููุณ ุชุงุจุน (functional programming)</strong> ุงุณุชุ ุฌุง ฺฉู ุงุฒ ุญุงูุช ูุงุจู ุชุบุฑ ุงุฌุชูุงุจ ูโุดูุฏ ู ุชูุงุจุน ุจูโุนููุงู ุฏุงุฏู ุฏุฑ ูุธุฑ ฺฏุฑูุชู ูโุดููุฏ. LINQ ูุฒ ุงุฒ ุงู ุงุตู ุงููุงู ฺฏุฑูุชู ุงุณุช.</p>
<p>ุจุฑุง ยซุชุบุฑยป ฺฉ ุดุก ุบุฑูุงุจู ุชุบุฑุ ุจุงุฏ ฺฉ ููููู ุฌุฏุฏ ุจุณุงุฒุฏ ู ุฏุงุฏูโูุง ุฑุง ุจุง ุชุบุฑุงุช ููุฑุฏ ูุธุฑ ุฎูุฏ ููุชูู ฺฉูุฏ (<strong>ุชุบุฑ ุบุฑูุฎุฑุจ โ nondestructive mutation</strong>). ุงุฒ ูุธุฑ ฺฉุงุฑุงุ ุงู ฺฉุงุฑ ุจู ุงูุฏุงุฒูโุง ฺฉู ูฺฉุฑ ูโฺฉูุฏ ูุงฺฉุงุฑุขูุฏ ูุณุชุ ุฒุฑุง <strong>ฺฉูพ ุณุทุญ (shallow copy)</strong> ููุดู ฺฉุงู ุงุณุช ู ูุงุฒ ุจู <strong>ฺฉูพ ุนูู (deep copy)</strong> ฺฉู ุดุงูู ุฒุฑุดโูุง ู ูุฌููุนูโูุง ูุฒ ุจุงุดุฏุ ูุณุชุ ฺุฑุง ฺฉู ุฏุงุฏูโูุง ุบุฑูุงุจู ุชุบุฑ ูุณุชูุฏ. ุงูุง ุงุฒ ูุธุฑ ุญุฌู ฺฉุฏููุณุ ูพุงุฏูโุณุงุฒ ุชุบุฑ ุบุฑูุฎุฑุจ ูโุชูุงูุฏ ุจุณุงุฑ ูพุฑุฒุญูุช ุจุงุดุฏุ ุจูโูฺู ููุช ุชุนุฏุงุฏ ุฒุงุฏ property ูุฌูุฏ ุฏุงุดุชู ุจุงุดุฏ. <strong>ุฑฺฉูุฑุฏูุง (records)</strong> ุงู ูุดฺฉู ุฑุง ุจุง ฺฉ <strong>ุงูฺฏู ูพุดุชุจุงูโุดุฏู ุชูุณุท ุฒุจุงู</strong> ุญู ูโฺฉููุฏ.</p>
<p>ูุณุฆูู ุฏูู ุงู ุงุณุช ฺฉู ุจุฑูุงููโููุณุงูโุจูโูฺู ุจุฑูุงููโููุณุงู ุชุงุจุนโฺฏุงู ุงุฒ ุงููุงุน ุบุฑูุงุจู ุชุบุฑ ุตุฑูุงู ุจุฑุง <strong>ุชุฑฺฉุจ ุฏุงุฏูโูุง</strong> ุงุณุชูุงุฏู ูโฺฉููุฏ (ุจุฏูู ุงูุฒูุฏู ุฑูุชุงุฑ). ุชุนุฑู ฺูู ุงููุงุน ฺฉุงุฑ ุจุดุชุฑ ุงุฒ ุขูฺู ุจุงุฏ ุจุงุดุฏ ูโุจุฑุฏุ ุฒุฑุง ูุงุฒู ุงุณุช <strong>ฺฉ ุณุงุฒูุฏู (constructor)</strong> ุฏุงุดุชู ุจุงุดุฏ ุชุง ูุฑ ูพุงุฑุงูุชุฑ ุฑุง ุจู ูุฑ property ุนููู ุงุฎุชุตุงุต ุฏูุฏ (ฺฉ <strong>deconstructor</strong> ูุฒ ููฺฉู ุงุณุช ููุฏ ุจุงุดุฏ). ุจุง ุฑฺฉูุฑุฏูุงุ ฺฉุงููพุงูุฑ ุงู ฺฉุงุฑ ุฑุง ุจุฑุง ุดูุง ุงูุฌุงู ูโุฏูุฏ.</p>
<p>ุฏุฑ ููุงุชุ ฺฉ ุงุฒ ูุชุงุฌ ุบุฑูุงุจู ุชุบุฑ ุจูุฏู ฺฉ ุดุก ุงู ุงุณุช ฺฉู <strong>ููุช ุขู ุชุบุฑ ููโฺฉูุฏ</strong>ุ ุจูุงุจุฑุงู ุจุฑุง ุงู ููุนโูุงุ ูพุงุฏูโุณุงุฒ <strong>ุจุฑุงุจุฑ ุณุงุฎุชุงุฑ (structural equality)</strong> ุจุดุชุฑ ููุฏ ุงุณุช ุชุง <strong>ุจุฑุงุจุฑ ูุฑุฌุน (referential equality)</strong>. ุจุฑุงุจุฑ ุณุงุฎุชุงุฑ ุนู ุฏู ููููู ุฒูุงู ุจุฑุงุจุฑูุฏ ฺฉู <strong>ุฏุงุฏูโูุง ุขูโูุง ฺฉุณุงู ุจุงุดุฏ</strong> (ูุงููุฏ ุชุงูพูโูุง). ุฑฺฉูุฑุฏูุง ุจูโุตูุฑุช ูพุดโูุฑุถ ุจุฑุงุจุฑ ุณุงุฎุชุงุฑ ุฑุง ูุฑุงูู ูโฺฉููุฏโุตุฑูโูุธุฑ ุงุฒ ุงูโฺฉู ููุน ุฒุฑู ฺฉูุงุณ ุจุงุดุฏ ุง structโุจุฏูู ูฺ ฺฉุฏ ุงุถุงู.</p>
<hr>
<h3>ุชุนุฑู ุฑฺฉูุฑุฏ ๐ท๏ธ</h3>
<p>ุชุนุฑู ฺฉ ุฑฺฉูุฑุฏ ุดุจู ุชุนุฑู <strong>ฺฉูุงุณ ุง struct</strong> ุงุณุช ู ูโุชูุงูุฏ ุดุงูู ููุงู ููุน ุงุนุถุง ุจุงุดุฏุ ุงุฒ ุฌููู ููุฏูุงุ propertyูุงุ ูุชุฏูุง ู ุบุฑู. ุฑฺฉูุฑุฏูุง ูโุชูุงููุฏ <strong>interfaceูุง</strong> ุฑุง ูพุงุฏูโุณุงุฒ ฺฉููุฏ ู ุฑฺฉูุฑุฏูุง ูุจุชู ุจุฑ ฺฉูุงุณ ูโุชูุงููุฏ ุงุฒ ุฑฺฉูุฑุฏูุง ุฏฺฏุฑ ุงุฑุซโุจุฑ ฺฉููุฏ.</p>
<p>ุจูโุตูุฑุช ูพุดโูุฑุถุ <strong>ููุน ุฒุฑู ุฑฺฉูุฑุฏ ฺฉูุงุณ ุงุณุช</strong>:</p>
<pre class="hljs"><code><span class="hljs-keyword">record</span> <span class="hljs-title">Point</span> { }   <span class="hljs-comment">// Point ฺฉ ฺฉูุงุณ ุงุณุช</span>
</code></pre>
<p>ุงุฒ C# 10 ุจู ุจุนุฏุ ููุน ุฒุฑู ุฑฺฉูุฑุฏ ูโุชูุงูุฏ struct ูุฒ ุจุงุดุฏ:</p>
<pre class="hljs"><code><span class="hljs-keyword">record</span> <span class="hljs-title">struct</span> <span class="hljs-title">Point</span> { }   <span class="hljs-comment">// Point ฺฉ struct ุงุณุช</span>
</code></pre>
<p>(ุงุณุชูุงุฏู ุงุฒ <code>record class</code> ูุฒ ูุงููู ุงุณุช ู ููุงู ูุนู <code>record</code> ุฑุง ุฏุงุฑุฏ.)</p>
<p>ฺฉ ุฑฺฉูุฑุฏ ุณุงุฏู ููฺฉู ุงุณุช ููุท ุชุนุฏุงุฏ <strong>property ุจุง init-only</strong> ุฏุงุดุชู ุจุงุดุฏ ู ุงุญุชูุงูุงู ฺฉ <strong>ุณุงุฒูุฏู</strong>:</p>
<pre class="hljs"><code><span class="hljs-keyword">record</span> <span class="hljs-title">Point</span>
{
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Point</span>(<span class="hljs-params"><span class="hljs-built_in">double</span> x, <span class="hljs-built_in">double</span> y</span>)</span> =&gt; (X, Y) = (x, y);
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">double</span> X { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">init</span>; }
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">double</span> Y { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">init</span>; }    
}
</code></pre>
<p>ุณุงุฒูุฏู ูุง ุงุฒ ฺฉ <strong>ูุงูุจุฑ (shortcut)</strong> ุงุณุชูุงุฏู ูโฺฉูุฏ ฺฉู ุฏุฑ ุจุฎุด ูุจู ุชูุถุญ ุฏุงุฏู ุดุฏ:</p>
<pre class="hljs"><code>(X, Y) = (x, y);
</code></pre>
<p>ุงู ุฏุฑ ูุงูุน ูุนุงุฏู ุงุณุช ุจุง:</p>
<pre class="hljs"><code>{ <span class="hljs-keyword">this</span>.X = x; <span class="hljs-keyword">this</span>.Y = y; }
</code></pre>
<hr>
<h3>ฺฉุงุฑูุง ฺฉุงููพุงูุฑ ููฺฏุงู ุชุนุฑู ุฑฺฉูุฑุฏ โ๏ธ</h3>
<p>ูพุณ ุงุฒ ฺฉุงููพุงูุ C# ุชุนุฑู ุฑฺฉูุฑุฏ ุฑุง ุจู ฺฉูุงุณ (ุง struct) ุชุจุฏู ูโฺฉูุฏ ู ูุฑุงุญู ุงุถุงู ุฒุฑ ุฑุง ุงูุฌุงู ูโุฏูุฏ:</p>
<ul>
<li>ููุดุชู <strong>ุณุงุฒูุฏู ฺฉูพ (copy constructor)</strong> ูุญุงูุธุชโุดุฏู ู ฺฉ <strong>ูุชุฏ Clone ูพููุงู</strong> ุจุฑุง ุชุณูู ุชุบุฑ ุบุฑูุฎุฑุจ</li>
<li>ุจุงุฒุชุนุฑู/ุจุงุฑฺฏุฐุงุฑ ูุฌุฏุฏ ูุชุฏูุง ูุฑุชุจุท ุจุง ุจุฑุงุจุฑ ุจุฑุง ูพุงุฏูโุณุงุฒ <strong>ุจุฑุงุจุฑ ุณุงุฎุชุงุฑ</strong></li>
<li>ุจุงุฒุชุนุฑู ูุชุฏ <strong>ToString()</strong> (ุจุฑุง ููุงุด propertyูุง ุนูููุ ูุดุงุจู anonymous types)</li>
</ul>
<p>ูุซุงู ุชูุฑุจุงู ุจุฑุงุจุฑ ุจุง ุขูฺู ุจุงูุง ุชุนุฑู ุดุฏ:</p>
<pre class="hljs"><code><span class="hljs-keyword">class</span> <span class="hljs-title">Point</span>
{  
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Point</span>(<span class="hljs-params"><span class="hljs-built_in">double</span> x, <span class="hljs-built_in">double</span> y</span>)</span> =&gt; (X, Y) = (x, y);
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">double</span> X { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">init</span>; }
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">double</span> Y { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">init</span>; }    

    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-title">Point</span>(<span class="hljs-params">Point original</span>)  <span class="hljs-comment">// ุณุงุฒูุฏู ฺฉูพ</span></span>
    {
        <span class="hljs-keyword">this</span>.X = original.X; <span class="hljs-keyword">this</span>.Y = original.Y;
    }

    <span class="hljs-comment">// ูุงู ุนุฌุจ ุชููุฏ ุดุฏู ุชูุณุท ฺฉุงููพุงูุฑ</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">virtual</span> Point &lt;Clone&gt;$() =&gt; <span class="hljs-keyword">new</span> Point(<span class="hljs-keyword">this</span>);  <span class="hljs-comment">// ูุชุฏ Clone</span>

    <span class="hljs-comment">// ฺฉุฏ ุงุถุงู ุจุฑุง ุจุงุฒุชุนุฑู Equals, ==, !=, GetHashCode, ToString()</span>
    <span class="hljs-comment">// ...</span>
}
</code></pre>
<hr>
<h3>ูุณุช ูพุงุฑุงูุชุฑูุง ๐</h3>
<p>ูฺ ฺุฒ ูุงูุน ูุฑุงุฑ ุฏุงุฏู <strong>ูพุงุฑุงูุชุฑูุง ุงุฎุชุงุฑ (optional)</strong> ุฏุฑ ุณุงุฒูุฏู ููโุดูุฏุ ุงูุง ฺฉ ุงูฺฏู ุฎูุจ (ุจูโูฺู ุฏุฑ ฺฉุชุงุจุฎุงููโูุง ุนููู) ุงู ุงุณุช ฺฉู ุขูโูุง ุฑุง <strong>ุงุฒ ุณุงุฒูุฏู ุญุฐู ฺฉุฑุฏู ู ุตุฑูุงู ุจูโุตูุฑุช propertyูุง init-only</strong> ุงุฑุงุฆู ุฏูุฏ:</p>
<pre class="hljs"><code><span class="hljs-keyword">new</span> Foo(<span class="hljs-number">123</span>, <span class="hljs-number">234</span>) { Optional2 = <span class="hljs-number">345</span> };

<span class="hljs-keyword">record</span> <span class="hljs-title">Foo</span>
{
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Foo</span>(<span class="hljs-params"><span class="hljs-built_in">int</span> required1, <span class="hljs-built_in">int</span> required2</span>)</span> { ... }
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">int</span> Required1 { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">init</span>; }
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">int</span> Required2 { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">init</span>; }
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">int</span> Optional1 { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">init</span>; }
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">int</span> Optional2 { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">init</span>; }
}
</code></pre>
<p>ูุฒุช ุงู ุงูฺฏู ุงู ุงุณุช ฺฉู ูโุชูุงู <strong>propertyูุง init-only ุฌุฏุฏ</strong> ุงุถุงูู ฺฉุฑุฏ ุจุฏูู ุงูฺฉู <strong>ุณุงุฒฺฏุงุฑ ุจุงูุฑ ุจุง ูุณุฎูโูุง ูุฏู</strong> ุฑุง ูุฎุชู ฺฉูุฏ.</p>
<hr>
<h3>ฺฉูุชุงูโุณุงุฒ ุชุนุฑู ุฑฺฉูุฑุฏ ุจุง ูุณุช ูพุงุฑุงูุชุฑูุง โก</h3>
<p>ุชุนุฑู ุฑฺฉูุฑุฏ ุฑุง ูโุชูุงู ุจุง <strong>ูุณุช ูพุงุฑุงูุชุฑูุง</strong> ฺฉูุชุงู ฺฉุฑุฏ:</p>
<pre class="hljs"><code><span class="hljs-keyword">record</span> <span class="hljs-title">Point</span>(<span class="hljs-title">double</span> <span class="hljs-title">X</span>, <span class="hljs-title">double</span> <span class="hljs-title">Y</span>)
{
    <span class="hljs-comment">// ูโุชูุงูุฏ ุงุนุถุง ฺฉูุงุณ ุงุถุงู ูุฒ ุชุนุฑู ฺฉูุฏ...</span>
}
</code></pre>
<p>ูพุงุฑุงูุชุฑูุง ูโุชูุงููุฏ ุดุงูู <strong>modifiers</strong> ูุงููุฏ <code>in</code> ู <code>params</code> ุจุงุดูุฏุ ุงูุง ูู <code>out</code> ุง <code>ref</code>. ุงฺฏุฑ ูุณุช ูพุงุฑุงูุชุฑ ูุดุฎุต ุดูุฏุ ฺฉุงููพุงูุฑ ฺฉุงุฑูุง ุงุถุงู ุฒุฑ ุฑุง ุงูุฌุงู ูโุฏูุฏ:</p>
<ul>
<li>ููุดุชู ฺฉ property <strong>init-only</strong> ุจุฑุง ูุฑ ูพุงุฑุงูุชุฑ</li>
<li>ููุดุชู <strong>ุณุงุฒูุฏู ุงุตู (primary constructor)</strong> ุจุฑุง ููุฏุงุฑุฏู propertyูุง</li>
<li>ููุดุชู ฺฉ <strong>deconstructor</strong></li>
</ul>
<p>ุจูุงุจุฑุงู ุงฺฏุฑ ุฑฺฉูุฑุฏ ุฎูุฏ ุฑุง ุณุงุฏู ุชุนุฑู ฺฉูู:</p>
<pre class="hljs"><code><span class="hljs-keyword">record</span> <span class="hljs-title">Point</span>(<span class="hljs-title">double</span> <span class="hljs-title">X</span>, <span class="hljs-title">double</span> <span class="hljs-title">Y</span>);
</code></pre>
<p>ฺฉุงููพุงูุฑ ุชูุฑุจุงู ููุงู ฺฉุฏ ุฑุง ุชููุฏ ูโฺฉูุฏ ฺฉู ุฏุฑ ุจุฎุด ูุจู ุฏุฏู. ุชููุง ุชูุงูุช ุฌุฒุฆ ุงู ุงุณุช ฺฉู ูุงู ูพุงุฑุงูุชุฑูุง ุฏุฑ ุณุงุฒูุฏู ุงุตู <code>X</code> ู <code>Y</code> ุฎูุงูุฏ ุจูุฏุ ูู <code>x</code> ู <code>y</code>:</p>
<pre class="hljs"><code><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Point</span>(<span class="hljs-params"><span class="hljs-built_in">double</span> X, <span class="hljs-built_in">double</span> Y</span>)  <span class="hljs-comment">// ุณุงุฒูุฏู ุงุตู</span></span>
{
    <span class="hljs-keyword">this</span>.X = X; <span class="hljs-keyword">this</span>.Y = Y;
}
</code></pre>
<hr>
<h3>ูุงุจูุชโูุง ุงุถุงู ูุณุช ูพุงุฑุงูุชุฑูุง</h3>
<ul>
<li>ูพุงุฑุงูุชุฑูุง <code>X</code> ู <code>Y</code> ุจูโุตูุฑุช ุฌุงุฏู ุฏุฑ ูุฑ <strong>initializer</strong> ููุฏ ุง property ุฏุฑ ุฑฺฉูุฑุฏ ุฏุฑ ุฏุณุชุฑุณ ูุณุชูุฏ</li>
<li>ฺฉุงููพุงูุฑ <strong>ฺฉ deconstructor</strong> ูุฒ ุชููุฏ ูโฺฉูุฏ:</li>
</ul>
<pre class="hljs"><code><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Deconstruct</span>(<span class="hljs-params"><span class="hljs-keyword">out</span> <span class="hljs-built_in">double</span> X, <span class="hljs-keyword">out</span> <span class="hljs-built_in">double</span> Y</span>)</span>
{
    X = <span class="hljs-keyword">this</span>.X; Y = <span class="hljs-keyword">this</span>.Y;
}
</code></pre>
<ul>
<li>ุฑฺฉูุฑุฏูุง ุจุง ูุณุช ูพุงุฑุงูุชุฑ ุฑุง ูโุชูุงู <strong>ุจูโุนููุงู subclass</strong> ุชุนุฑู ฺฉุฑุฏ:</li>
</ul>
<pre class="hljs"><code><span class="hljs-keyword">record</span> <span class="hljs-title">Point3D</span>(<span class="hljs-title">double</span> <span class="hljs-title">X</span>, <span class="hljs-title">double</span> <span class="hljs-title">Y</span>, <span class="hljs-title">double</span> <span class="hljs-title">Z</span>) : <span class="hljs-title">Point</span>(<span class="hljs-title">X</span>, <span class="hljs-title">Y</span>);
</code></pre>
<p>ฺฉู ฺฉุงููพุงูุฑ ุชููุฏ ูโฺฉูุฏ:</p>
<pre class="hljs"><code><span class="hljs-keyword">class</span> <span class="hljs-title">Point3D</span> : <span class="hljs-title">Point</span>
{
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">double</span> Z { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">init</span>; }
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Point3D</span>(<span class="hljs-params"><span class="hljs-built_in">double</span> X, <span class="hljs-built_in">double</span> Y, <span class="hljs-built_in">double</span> Z</span>) : <span class="hljs-title">base</span>(<span class="hljs-params">X, Y</span>)</span>
        =&gt; <span class="hljs-keyword">this</span>.Z = Z;
}
</code></pre>
<p>ูุณุช ูพุงุฑุงูุชุฑูุง ฺฉ <strong>ูุงูุจุฑ ุนุงู</strong> ุจุฑุง ฺฉูุงุณโูุง ูุณุชูุฏ ฺฉู ุตุฑูุงู <strong>ฺูุฏ ููุฏุงุฑ ุฑุง ฺฏุฑููโุจูุฏ ูโฺฉููุฏ (product type ุฏุฑ ุจุฑูุงููโููุณ ุชุงุจุน)</strong> ู ุจุฑุง <strong>ูููููโุณุงุฒ ุณุฑุน (prototyping)</strong> ููุฏ ูุณุชูุฏ. ุงูุจุชู ููฺฏุงู ูุงุฒ ุจู <strong>ุงุถุงูู ฺฉุฑุฏู ููุทู ุจู accessors init</strong> (ูุซูุงู ุงุนุชุจุงุฑุณูุฌ ูพุงุฑุงูุชุฑ) ฺูุฏุงู ููุงุณุจ ูุณุชูุฏ.</p>
<h3>ูุงุจูุช ุชุบุฑูพุฐุฑ ุฏุฑ ุฑฺฉูุฑุฏูุง Struct ๐</h3>
<p>ููุช ฺฉู <strong>ูุณุช ูพุงุฑุงูุชุฑ</strong> ุฏุฑ ฺฉ <strong>record struct</strong> ุชุนุฑู ูโฺฉูุฏุ ฺฉุงููพุงูุฑ ุจูโุตูุฑุช ูพุดโูุฑุถ <strong>propertyูุง ูุงุจู ููุดุชู (writable)</strong> ุงุฌุงุฏ ูโฺฉูุฏุ ูู propertyูุง <strong>init-only</strong>ุ ูฺฏุฑ ุงูฺฉู ุชุนุฑู ุฑฺฉูุฑุฏ ุฑุง ุจุง ฺฉููู ฺฉูุฏ <code>readonly</code> ูพุดโูุฑุถ ฺฉูุฏ:</p>
<pre class="hljs"><code><span class="hljs-function"><span class="hljs-keyword">readonly</span> <span class="hljs-keyword">record</span> <span class="hljs-keyword">struct</span> <span class="hljs-title">Point</span>(<span class="hljs-params"><span class="hljs-built_in">double</span> X, <span class="hljs-built_in">double</span> Y</span>)</span>;
</code></pre>
<p>ุฏูู ุงู ุฑูุชุงุฑ ุงู ุงุณุช ฺฉู ุฏุฑ <strong>ุณูุงุฑููุง ูุนููู</strong>ุ ูุฒุงุง ุงูู <strong>ุบุฑูุงุจู ุชุบุฑ ุจูุฏู (immutability)</strong> ุงุฒ ุงู ูุงุด ูโุดูุฏ ฺฉู <strong>ุฎุงูู ุง ูุญุท ูฺฏูุฏุงุฑูุฏู struct ุบุฑูุงุจู ุชุบุฑ ุงุณุช</strong>ุ ูู ุฎูุฏ struct.</p>
<p>ุฏุฑ ูุซุงู ุฒุฑุ ุญุช ุงฺฏุฑ ููุฏ <code>X</code> ูุงุจู ููุดุชู ุจุงุดุฏุ ูุงุฏุฑ ุจู ุชุบุฑ ุขู ูุณุชู:</p>
<pre class="hljs"><code><span class="hljs-keyword">var</span> test = <span class="hljs-keyword">new</span> Immutable();
test.Field.X++;  <span class="hljs-comment">// ุบุฑูุฌุงุฒุ ุฒุฑุง Field readonly ุงุณุช</span>
test.Prop.X++;   <span class="hljs-comment">// ุบุฑูุฌุงุฒุ ุฒุฑุง Prop ููุท { get; } ุฏุงุฑุฏ</span>

<span class="hljs-keyword">class</span> <span class="hljs-title">Immutable</span>
{
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">readonly</span> Mutable Field;
    <span class="hljs-keyword">public</span> Mutable Prop { <span class="hljs-keyword">get</span>; }
}

<span class="hljs-keyword">struct</span> Mutable { <span class="hljs-keyword">public</span> <span class="hljs-built_in">int</span> X, Y; }
</code></pre>
<p>ู ุงฺฏุฑ ุจุฎูุงูู ฺฉุงุฑ ูุงููุฏ ุฒุฑ ุงูุฌุงู ุฏูู:</p>
<pre class="hljs"><code><span class="hljs-keyword">var</span> test = <span class="hljs-keyword">new</span> Immutable();
Mutable m = test.Prop;
m.X++;
</code></pre>
<p>ุชูุงู ฺฉุงุฑ ฺฉู ุงูุฌุงู ูโุฏูู ุงู ุงุณุช ฺฉู ฺฉ <strong>ูุชุบุฑ ูุญู (local variable)</strong> ุฑุง ุชุบุฑ ูโุฏููุ ฺฉู ูุณุฎูโุง ฺฉูพ ุงุฒ <code>test.Prop</code> ุงุณุช. ุชุบุฑ ฺฉ ูุชุบุฑ ูุญู ูโุชูุงูุฏ ฺฉ <strong>ุจูููโุณุงุฒ ููุฏ</strong> ุจุงุดุฏ ู ูุฒุงุง <strong>ุณุณุชู ููุน ุบุฑูุงุจู ุชุบุฑ</strong> ุฑุง ููุถ ููโฺฉูุฏ.</p>
<p>ุงุฒ ุทุฑู ุฏฺฏุฑุ ุงฺฏุฑ <code>Field</code> ฺฉ ููุฏ ูุงุจู ููุดุชู ู <code>Prop</code> ฺฉ property ูุงุจู ููุดุชู ุจุงุดุฏุ ูโุชูุงูู ุจู ุฑุงุญุช <strong>ูุญุชูุงุช ุขูโูุง ุฑุง ุฌุงฺฏุฒู ฺฉูู</strong>โุตุฑูโูุธุฑ ุงุฒ ุงูฺฉู struct <code>Mutable</code> ฺฺฏููู ุชุนุฑู ุดุฏู ุงุณุช.</p>
<h3>ุชุบุฑุงุช ุบุฑูุฎุฑุจ (Nondestructive Mutation) ๐โจ</h3>
<p>ูููโุชุฑู ฺฉุงุฑ ฺฉู ฺฉุงููพุงูุฑ ุจุง <strong>ุชูุงู ุฑฺฉูุฑุฏูุง</strong> ุงูุฌุงู ูโุฏูุฏุ ุงุฌุงุฏ ฺฉ <strong>ฺฉูพโฺฉููุฏู (copy constructor)</strong> ู ฺฉ <strong>ูุชุฏ ูพููุงู Clone</strong> ุงุณุช. ุงู ุงูฺฉุงู ุฑุง ูุฑุงูู ูโฺฉูุฏ ฺฉู ุจุชูุงูุฏ ุจุง ุงุณุชูุงุฏู ุงุฒ <strong>ฺฉููู ฺฉูุฏ <code>with</code></strong>ุ ฺฉ ุชุบุฑ ุบุฑูุฎุฑุจ ุฑู ุฑฺฉูุฑุฏ ุงูุฌุงู ุฏูุฏ:</p>
<pre class="hljs"><code>Point p1 = <span class="hljs-keyword">new</span> Point(<span class="hljs-number">3</span>, <span class="hljs-number">3</span>);
Point p2 = p1 <span class="hljs-keyword">with</span> { Y = <span class="hljs-number">4</span> };
Console.WriteLine(p2);       <span class="hljs-comment">// Point { X = 3, Y = 4 }</span>

<span class="hljs-keyword">record</span> <span class="hljs-title">Point</span>(<span class="hljs-title">double</span> <span class="hljs-title">X</span>, <span class="hljs-title">double</span> <span class="hljs-title">Y</span>);
</code></pre>
<p>ุฏุฑ ุงู ูุซุงูุ <code>p2</code> ูุณุฎูโุง <strong>ฺฉูพ ุงุฒ <code>p1</code></strong> ุงุณุชุ ูู ุจุง ููุฏุงุฑ <strong>Y = 4</strong>. ูุฒุช ุงู ุฑูุด ููุช ูุงุถุญโุชุฑ ูโุดูุฏ ฺฉู ุฑฺฉูุฑุฏ ุชุนุฏุงุฏ ุฒุงุฏ property ุฏุงุดุชู ุจุงุดุฏ:</p>
<pre class="hljs"><code>Test t1 = <span class="hljs-keyword">new</span> Test(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>,<span class="hljs-number">6</span>,<span class="hljs-number">7</span>,<span class="hljs-number">8</span>);
Test t2 = t1 <span class="hljs-keyword">with</span> { A = <span class="hljs-number">10</span>, C = <span class="hljs-number">30</span> };
Console.WriteLine(t2);

<span class="hljs-keyword">record</span> <span class="hljs-title">Test</span>(<span class="hljs-title">int</span> <span class="hljs-title">A</span>, <span class="hljs-title">int</span> <span class="hljs-title">B</span>, <span class="hljs-title">int</span> <span class="hljs-title">C</span>, <span class="hljs-title">int</span> <span class="hljs-title">D</span>, <span class="hljs-title">int</span> <span class="hljs-title">E</span>, <span class="hljs-title">int</span> <span class="hljs-title">F</span>, <span class="hljs-title">int</span> <span class="hljs-title">G</span>, <span class="hljs-title">int</span> <span class="hljs-title">H</span>);
</code></pre>
<p>ุฎุฑูุฌ ุจู ุดฺฉู ุฒุฑ ุฎูุงูุฏ ุจูุฏ:</p>
<pre class="hljs"><code>Test { A = 10, B = 2, C = 30, D = 4, E = 5, F = 6, G = 7, H = 8 }
</code></pre>
<h3>ูุฑุงุญู ุชุบุฑ ุบุฑูุฎุฑุจ ๐๏ธ</h3>
<p>1๏ธโฃ ุงุจุชุฏุงุ <strong>ฺฉูพโฺฉููุฏู</strong> ุฑฺฉูุฑุฏ ุฑุง clone ูโฺฉูุฏ. ุจูโุทูุฑ ูพุดโูุฑุถุ ูุฑ ฺฉ ุงุฒ ููุฏูุง ุฏุงุฎู ุฑฺฉูุฑุฏ ฺฉูพ ูโุดููุฏุ ฺฉู ฺฉ <strong>ูุณุฎู ุฏูู</strong> ุงุฌุงุฏ ูโฺฉูุฏ ู ุงุฒ ุงุฌุฑุง ููุทู ุฏุฑ accessorูุง init ุฌููฺฏุฑ ูโฺฉูุฏ. ุชูุงู ููุฏูุง ุดุงูู <strong>ุนูููุ ุฎุตูุต ู ููุฏูุง ูพููุงู ูพุดุช propertyูุง ุงุชููุงุชฺฉ</strong> ุฏุฑ ฺฉูพ ฺฏูุฌุงูุฏู ูโุดููุฏ.</p>
<p>2๏ธโฃ ุณูพุณุ ูุฑ property ุฏุฑ <strong>ูุณุช ููุฏุงุฑุฏู ุงุนุถุง (member initializer)</strong> ุจูโุฑูุฒุฑุณุงู ูโุดูุฏุ ุงู ุจุงุฑ ุจุง ุงุณุชูุงุฏู ุงุฒ <strong>init accessor</strong>.</p>
<p>ฺฉุงููพุงูุฑ ฺฉุฏ ุฒุฑ ุฑุง:</p>
<pre class="hljs"><code>Test t2 = t1 <span class="hljs-keyword">with</span> { A = <span class="hljs-number">10</span>, C = <span class="hljs-number">30</span> };
</code></pre>
<p>ุจู ฺุฒ ุดุจู ุจู ุงู ุชุจุฏู ูโฺฉูุฏ:</p>
<pre class="hljs"><code>Test t2 = <span class="hljs-keyword">new</span> Test(t1);  <span class="hljs-comment">// ุงุณุชูุงุฏู ุงุฒ copy constructor ุจุฑุง clone ฺฉุฑุฏู t1 ููุฏ ุจู ููุฏ</span>
t2.A = <span class="hljs-number">10</span>;               <span class="hljs-comment">// ุจูโุฑูุฒุฑุณุงู property A</span>
t2.C = <span class="hljs-number">30</span>;               <span class="hljs-comment">// ุจูโุฑูุฒุฑุณุงู property C</span>
</code></pre>
<blockquote>
<p>โ๏ธ ููุงูโุทูุฑ ฺฉู ูโุจูุฏุ ููุดุชู ูุณุชูู ุงู ฺฉุฏ ุฏุฑ ุญุงูุช ุนุงุฏ <strong>ฺฉุงููพุงู ููโุดูุฏ</strong> ฺูู A ู C propertyูุง <strong>init-only</strong> ูุณุชูุฏ. ุนูุงูู ุจุฑ ุงูุ copy constructor <strong>protected</strong> ุงุณุช ู C# ุจุฑุง ุฏูุฑ ุฒุฏู ุงู ูุญุฏูุฏุชุ ุขู ุฑุง ุงุฒ ุทุฑู ูุชุฏ ูพููุงู <code>&lt;Clone&gt;$</code> ูุฑุงุฎูุงู ูโฺฉูุฏ.</p>
</blockquote>
<h3>ุชุนุฑู ฺฉูพโฺฉููุฏู ุณูุงุฑุด โ๏ธ</h3>
<p>ุงฺฏุฑ ูุงุฒู ุจุงุดุฏุ ูโุชูุงูุฏ <strong>copy constructor ุฎูุฏุชุงู</strong> ุฑุง ุชุนุฑู ฺฉูุฏ. ฺฉุงููพุงูุฑ ุงุฒ ุชุนุฑู ุดูุง ุงุณุชูุงุฏู ุฎูุงูุฏ ฺฉุฑุฏ:</p>
<pre class="hljs"><code><span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-title">Point</span>(<span class="hljs-params">Point original</span>)</span>
{
    <span class="hljs-keyword">this</span>.X = original.X; 
    <span class="hljs-keyword">this</span>.Y = original.Y;
}
</code></pre>
<p>ููุดุชู ฺฉูพโฺฉููุฏู ุณูุงุฑุด ููุฏ ุงุณุช ุงฺฏุฑ ุฑฺฉูุฑุฏ ุดูุง ุญุงู <strong>ุฒุฑ-ุงุดุงุก ุง ูุฌููุนูโูุง ูุงุจู ุชุบุฑ</strong> ุจุงุดุฏ ฺฉู ุจุงุฏ clone ุดููุฏุ ุง ููุฏูุง ูุญุงุณุจูโุดุฏูโุง ุฏุงุดุชู ุจุงุดุฏ ฺฉู ูโุฎูุงูุฏ ูพุงฺฉ ุดููุฏ. โ๏ธ ุชูุฌู ฺฉูุฏ ฺฉู ุชููุง ูโุชูุงูุฏ <strong>ุฌุงฺฏุฒู</strong> ฺฉูุฏุ ูู <strong>ุจูุจูุฏ ุฏูุฏ</strong>.</p>
<p>ุฏุฑ <strong>Subclass ฺฉุฑุฏู ุฑฺฉูุฑุฏ ุฏฺฏุฑ</strong>ุ copy constructor ูุณุฆูู <strong>ฺฉูพ ููุท ููุฏูุง ุฎูุฏุด</strong> ุงุณุช. ุจุฑุง ฺฉูพ ููุฏูุง ุฑฺฉูุฑุฏ ูพุงูุ ุงุฒ <strong>delegate ุจู base</strong> ุงุณุชูุงุฏู ฺฉูุฏ:</p>
<pre class="hljs"><code><span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-title">Point</span>(<span class="hljs-params">Point original</span>) : <span class="hljs-title">base</span>(<span class="hljs-params">original</span>)</span>
{
    ...
}
</code></pre>
<h3>ุงุนุชุจุงุฑุณูุฌ propertyูุง โ</h3>
<p>ุจุง propertyูุง <strong>ุตุฑุญ</strong>ุ ูโุชูุงูุฏ ููุทู ุงุนุชุจุงุฑุณูุฌ ุฑุง ุฏุฑ <strong>init accessor</strong> ุจููุณุฏ. ุจู ุนููุงู ูุซุงูุ ูุทูุฆู ูโุดูู X ูฺโฺฏุงู <strong>NaN</strong> ูุจุงุดุฏ:</p>
<pre class="hljs"><code><span class="hljs-keyword">record</span> <span class="hljs-title">Point</span>
{
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Point</span>(<span class="hljs-params"><span class="hljs-built_in">double</span> x, <span class="hljs-built_in">double</span> y</span>)</span> =&gt; (X, Y) = (x, y);
    <span class="hljs-built_in">double</span> _x;
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">double</span> X
    { 
        <span class="hljs-keyword">get</span> =&gt; _x;
        <span class="hljs-keyword">init</span>
        {
            <span class="hljs-keyword">if</span> (<span class="hljs-built_in">double</span>.IsNaN(<span class="hljs-keyword">value</span>))
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> ArgumentException(<span class="hljs-string">&quot;X Cannot be NaN&quot;</span>);
            _x = <span class="hljs-keyword">value</span>;
        }
    }
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">double</span> Y { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">init</span>; }    
}
</code></pre>
<p>ุจุง ุงู ุทุฑุงุญุ ุงุนุชุจุงุฑุณูุฌ ูู <strong>ุฏุฑ ุฒูุงู ุณุงุฎุช ุฑฺฉูุฑุฏ</strong> ู ูู <strong>ุฏุฑ ุฒูุงู ุชุบุฑ ุบุฑูุฎุฑุจ</strong> ุงูุฌุงู ูโุดูุฏ:</p>
<pre class="hljs"><code>Point p1 = <span class="hljs-keyword">new</span> Point(<span class="hljs-number">2</span>,<span class="hljs-number">3</span>);
Point p2 = p1 <span class="hljs-keyword">with</span> { X = <span class="hljs-built_in">double</span>.NaN };   <span class="hljs-comment">// ูพุฑุชุงุจ Exception</span>
</code></pre>
<p>ฺฉูพโฺฉููุฏู ุฎูุฏฺฉุงุฑุ <strong>ุชูุงู ููุฏูุง ู propertyูุง ุงุชููุงุชฺฉ</strong> ุฑุง ฺฉูพ ูโฺฉูุฏ:</p>
<pre class="hljs"><code><span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-title">Point</span>(<span class="hljs-params">Point original</span>)</span>
{
    _x = original._x; 
    Y = original.Y;
}
</code></pre>
<p>ฺฉูพ ฺฉุฑุฏู <code>_x</code> ุงุฒ ุทุฑู <strong>accessor</strong> ุงูุฌุงู ููโุดูุฏุ ูู ูุดฺฉู ุงุฌุงุฏ ููโฺฉูุฏ ฺูู ููุฏุงุฑ ูุจูุงู ุจุง <strong>init accessor</strong> ุจูโุตูุฑุช ุงูู ููุฏุงุฑุฏู ุดุฏู ุงุณุช.</p>
<h3>ููุฏูุง ูุญุงุณุจูโุดุฏู ู ุงุฑุฒุงุจ Lazy โก</h3>
<p>ฺฉ ุงุฒ ุงูฺฏููุง ุฑุงุฌ ุฏุฑ <strong>ุจุฑูุงููโููุณ ุชุงุจุน (Functional)</strong> ฺฉู ุจุง ุฑฺฉูุฑุฏูุง ุบุฑูุงุจู ุชุบุฑ ุฎูุจ ฺฉุงุฑ ูโฺฉูุฏุ <strong>lazy evaluation</strong> ุงุณุช: ููุฏุงุฑ ุชููุง ููุช ูุญุงุณุจู ูโุดูุฏ ฺฉู ูุงุฒู ุจุงุดุฏ ู ุณูพุณ ุจุฑุง ุงุณุชูุงุฏู ุจุนุฏ <strong>ฺฉุด</strong> ูโุดูุฏ.</p>
<p>ูุซูุงู ูโุฎูุงูู property ุฏุฑ ุฑฺฉูุฑุฏ Point ุชุนุฑู ฺฉูู ฺฉู ูุงุตูู ุงุฒ ูุจุฏุฃ (0,0) ุฑุง ุจุฑฺฏุฑุฏุงูุฏ:</p>
<pre class="hljs"><code><span class="hljs-keyword">record</span> <span class="hljs-title">Point</span>(<span class="hljs-title">double</span> <span class="hljs-title">X</span>, <span class="hljs-title">double</span> <span class="hljs-title">Y</span>)
{
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">double</span> DistanceFromOrigin =&gt; Math.Sqrt(X*X + Y*Y);
}
</code></pre>
<p>ุจุฑุง ุจูููโุณุงุฒ ู ุฌููฺฏุฑ ุงุฒ ูุญุงุณุจู ูฺฉุฑุฑุ ูโุชูุงูู ููุฏุงุฑ ุขู ุฑุง <strong>lazy</strong> ุฏุฑ ฺฉ ููุฏ ุฐุฎุฑู ฺฉูู:</p>
<pre class="hljs"><code><span class="hljs-keyword">record</span> <span class="hljs-title">Point</span>
{
    <span class="hljs-built_in">double</span>? _distance;
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">double</span> X { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">init</span>; }
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">double</span> Y { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">init</span>; }
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">double</span> DistanceFromOrigin =&gt; _distance ??= Math.Sqrt(X*X + Y*Y);
}
</code></pre>
<p>โ ุฏุฑ ุงู ุญุงูุชุ <code>_distance</code> ุชููุง <strong>ฺฉ ุจุงุฑ ูุญุงุณุจู</strong> ูโุดูุฏ ู ุชุบุฑ <code>X</code> ุง <code>Y</code> ุจุงุนุซ ูพุงฺฉ ุดุฏู ููุฏุงุฑ ฺฉุด ุดุฏู ูโุดูุฏ.</p>
<pre class="hljs"><code>Point p1 = <span class="hljs-keyword">new</span> Point(<span class="hljs-number">2</span>,<span class="hljs-number">3</span>);
Console.WriteLine(p1.DistanceFromOrigin);   <span class="hljs-comment">// 3.605551275463989</span>
Point p2 = p1 <span class="hljs-keyword">with</span> { Y = <span class="hljs-number">4</span> };
Console.WriteLine(p2.DistanceFromOrigin);   <span class="hljs-comment">// 4.47213595499958</span>
</code></pre>
<p>ูุฒุช ุฏฺฏุฑ ุงู ุงุณุช ฺฉู <strong>copy constructor ุฎูุฏฺฉุงุฑ</strong> ูุฒ ููุฏ ฺฉุด ุดุฏู <code>_distance</code> ุฑุง ฺฉูพ ูโฺฉูุฏุ ุจูุงุจุฑุงู ุงฺฏุฑ propertyูุง ุฏฺฏุฑ ฺฉู ุฏุฑ ูุญุงุณุจุงุช ุฏุฎู ูุณุชูุฏุ ุชุบุฑ ฺฉููุฏุ <strong>ููุฏุงุฑ ฺฉุด ุดุฏู ุงุฒ ุจู ููโุฑูุฏ</strong>.</p>
<p>ุงฺฏุฑ ูุฎูุงูุฏ ุงู ุฑูุชุงุฑ ุฑุง ุฏุงุดุชู ุจุงุดุฏุ ูโุชูุงูุฏ ุฏุฑ <strong>init accessor</strong> ููุฏุงุฑ ฺฉุด ุฑุง ูพุงฺฉ ฺฉูุฏ ุง ฺฉ <strong>copy constructor ุณูุงุฑุด</strong> ุจููุณุฏ ฺฉู ููุฏ ฺฉุด ุฑุง ูุงุฏุฏู ุจฺฏุฑุฏ.</p>
<hr>
<h3>ุณุงุฒูุฏูโูุง ุงููู (Primary Constructors) ๐๏ธโจ</h3>
<p>ููุช ฺฉ <strong>ุฑฺฉูุฑุฏ</strong> ุจุง <strong>ูุณุช ูพุงุฑุงูุชุฑูุง</strong> ุชุนุฑู ูโฺฉูุฏุ ฺฉุงููพุงูุฑ ุจูโุทูุฑ ุฎูุฏฺฉุงุฑ <strong>propertyูุง</strong> ุฑุง ุชุนุฑู ูโฺฉูุฏ ู ฺฉ <strong>ุณุงุฒูุฏู ุงููู (primary constructor)</strong> ู ฺฉ <strong>deconstructor</strong> ุงุฌุงุฏ ูโฺฉูุฏ. ููุงูโุทูุฑ ฺฉู ุฏุฏูุ ุงู ุฑูุด ุฏุฑ ููุงุฑุฏ ุณุงุฏู ุฎูุจ ฺฉุงุฑ ูโฺฉูุฏ ู ุฏุฑ ููุงุฑุฏ ูพฺุฏูโุชุฑ ูโุชูุงูุฏ ูุณุช ูพุงุฑุงูุชุฑูุง ุฑุง ุญุฐู ฺฉุฑุฏู ู propertyูุง ู ุณุงุฒูุฏู ุฑุง ุจูโุตูุฑุช ุฏุณุช ุจููุณุฏ.</p>
<p>C# ููฺูู ฺฉ ฺฏุฒูู <strong>ูุงูโุฑุงู ููุฏ</strong> ุงุฑุงุฆู ูโุฏูุฏุ ุงฺฏุฑ ุจุฎูุงูุฏ ุจุง <strong>ูุนูุง ุนุฌุจ ุณุงุฒูุฏูโูุง ุงููู</strong> ฺฉูุงุฑ ุจุงุฏุ ูโุชูุงูุฏ ฺฉ <strong>ูุณุช ูพุงุฑุงูุชุฑ ุชุนุฑู ฺฉูุฏ</strong> ู ุฏุฑ ุนู ุญุงู ุจุฑุฎ ุง ููู propertyูุง ุฑุง ุฎูุฏุชุงู ุชุนุฑู ฺฉูุฏ:</p>
<pre class="hljs"><code><span class="hljs-keyword">record</span> <span class="hljs-title">Student</span>(<span class="hljs-title">string</span> <span class="hljs-title">ID</span>, <span class="hljs-title">string</span> <span class="hljs-title">LastName</span>, <span class="hljs-title">string</span> <span class="hljs-title">GivenName</span>)
{
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> ID { <span class="hljs-keyword">get</span>; } = ID;
}
</code></pre>
<p>ุฏุฑ ุงู ุญุงูุชุ ูุง property <strong>ID</strong> ุฑุง <strong>ุจูโุทูุฑ ุฏุณุช ูุฏุฑุช ฺฉุฑุฏู</strong> ู ุขู ุฑุง ุจู ุตูุฑุช <strong>read-only</strong> ุชุนุฑู ฺฉุฑุฏู (ุจู ุฌุง init-only)ุ ุจูุงุจุฑุงู ุงู property ุฏฺฏุฑ ุฏุฑ <strong>ุชุบุฑ ุบุฑูุฎุฑุจ (nondestructive mutation)</strong> ุดุฑฺฉุช ููโฺฉูุฏ.</p>
<p>ุงฺฏุฑ ูฺโููุช ูุงุฒ ุจู ุชุบุฑ ุบุฑูุฎุฑุจ ฺฉ property ูุฏุงุฑุฏุ ุชุนุฑู ุขู ุจู ุตูุฑุช <strong>read-only</strong> ุงุฌุงุฒู ูโุฏูุฏ ุฏุงุฏูโูุง ูุญุงุณุจูโุดุฏู ุฑุง ุจุฏูู ูุงุฒ ุจู ููุดุชู ูฺฉุงูุณู ุชุงุฒูโุณุงุฒ ุฐุฎุฑู ฺฉูุฏ.</p>
<p>โ๏ธ ุฏูุช ฺฉูุฏ ฺฉู ูุงุฒู ุจูุฏ <strong>ฺฉ ููุฏุงุฑุฏู ุงููู ุจุฑุง property</strong> ุงุฑุงุฆู ุฏูู:</p>
<pre class="hljs"><code><span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> ID { <span class="hljs-keyword">get</span>; } = ID;
</code></pre>
<p>ุฒูุงู ฺฉู <strong>ุชุนุฑู property ุฑุง ุจู ุนูุฏู ูโฺฏุฑุฏ</strong>ุ ูุณุฆูู ููุฏุงุฑุฏู ุขู ูุณุชุฏ ู <strong>ุณุงุฒูุฏู ุงููู ุฏฺฏุฑ ุจูโุตูุฑุช ุฎูุฏฺฉุงุฑ ุขู ุฑุง ููุฏุงุฑุฏู ููโฺฉูุฏ</strong>. (ุงู ุฏููุงู ูุดุงุจู ุฑูุชุงุฑ ฺฉูุงุณโูุง ู structูุง ุจุง ุณุงุฒูุฏูโูุง ุงููู ุงุณุช.) ููฺูู ุชูุฌู ฺฉูุฏ ฺฉู <strong>ID ุฏุฑ ุงูุฌุง ุจู ูพุงุฑุงูุชุฑ ุณุงุฒูุฏู ุงููู ุงุดุงุฑู ุฏุงุฑุฏุ ูู ุจู property.</strong></p>
<hr>
<h3>ุฑฺฉูุฑุฏูุง struct ู ุจุงุฒุชุนุฑู property ุจู ุนููุงู field ๐งฑ</h3>
<p>ุจุง <strong>record struct</strong>ุ ูุงููู ุงุณุช ฺฉู property ุฑุง ุจู ุนููุงู <strong>field</strong> ุจุงุฒุชุนุฑู ฺฉูุฏ:</p>
<pre class="hljs"><code><span class="hljs-keyword">record</span> <span class="hljs-title">struct</span> <span class="hljs-title">Student</span>(<span class="hljs-title">string</span> <span class="hljs-title">ID</span>)
{
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> ID = ID;
}
</code></pre>
<p>ุทุจู <strong>ูุนูุง ุณุงุฒูุฏูโูุง ุงููู ุฏุฑ ฺฉูุงุณโูุง ู structูุง</strong>ุ ูพุงุฑุงูุชุฑูุง ุณุงุฒูุฏู ุงููู (ูุซู IDุ LastName ู GivenName) <strong>ุจูโุทูุฑ ุฌุงุฏู ุฏุฑ ุชูุงู initializerูุง field ู property ูุงุจู ุฏุณุชุฑุณ ูุณุชูุฏ</strong>. ูุซุงู:</p>
<pre class="hljs"><code><span class="hljs-keyword">record</span> <span class="hljs-title">Student</span>(<span class="hljs-title">string</span> <span class="hljs-title">ID</span>, <span class="hljs-title">string</span> <span class="hljs-title">LastName</span>, <span class="hljs-title">string</span> <span class="hljs-title">FirstName</span>)
{
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> ID { <span class="hljs-keyword">get</span>; } = ID;
    <span class="hljs-keyword">readonly</span> <span class="hljs-built_in">int</span> _enrollmentYear = <span class="hljs-built_in">int</span>.Parse(ID.Substring(<span class="hljs-number">0</span>, <span class="hljs-number">4</span>));
}
</code></pre>
<p>ุฏุฑ ุงู ูุซุงูุ <code>_enrollmentYear</code> ุงุฒ ฺูุงุฑ ุฑูู ุงูู <strong>ID</strong> ูุญุงุณุจู ุดุฏู ุงุณุช. ฺูู property <strong>ID read-only</strong> ุงุณุชุ ูโุชูุงู ุขู ุฑุง ุงูู ุฏุฑ ฺฉ <strong>field read-only</strong> ุฐุฎุฑู ฺฉุฑุฏุ ุจุฏูู ุงูฺฉู ุชุบุฑ ุบุฑูุฎุฑุจ ูุดฺฉู ุงุฌุงุฏ ฺฉูุฏ.</p>
<p>โ๏ธ ุงูุง ุฏุฑ ุฏูุง ูุงูุนุ ุจุฏูู <strong>ุณุงุฒูุฏู ุตุฑุญ</strong>ุ ูฺ ูฺฉุงู ูุฑฺฉุฒ ุจุฑุง ุงุนุชุจุงุฑุณูุฌ ID ู ูพุฑุชุงุจ <strong>exception ูุนูโุฏุงุฑ</strong> ูุฌูุฏ ูุฏุงุฑุฏ.</p>
<hr>
<h3>ุงุนุชุจุงุฑุณูุฌ ุจุง init-only accessors โ</h3>
<p>ุจุฑุง ุงูุฌุงู <strong>ุงุนุชุจุงุฑุณูุฌ</strong> ุฑู propertyูุงุ ุจุงุฏ ุงุฒ <strong>init-only accessor ุตุฑุญ</strong> ุงุณุชูุงุฏู ฺฉูุฏ:</p>
<pre class="hljs"><code><span class="hljs-keyword">record</span> <span class="hljs-title">Person</span>(<span class="hljs-title">string</span> <span class="hljs-title">Name</span>)
{
    <span class="hljs-built_in">string</span> _name = Name;
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> Name
    {
        <span class="hljs-keyword">get</span> =&gt; _name;
        <span class="hljs-keyword">init</span> =&gt; _name = <span class="hljs-keyword">value</span> ?? <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> ArgumentNullException(<span class="hljs-string">&quot;Name&quot;</span>);
    }
}
</code></pre>
<p>โ๏ธ ฺูู <strong>Name ฺฉ property ุงุชููุงุชฺฉ ูุณุช</strong>ุ ููโุชูุงู initializer ุชุนุฑู ฺฉุฑุฏ. ุจูุชุฑู ฺฉุงุฑ ุงู ุงุณุช ฺฉู initializer ุฑุง ุฑู <strong>field ูพุดุช property</strong> ูุฑุงุฑ ุฏูุฏุ ุงูุง ุงู ุจุงุนุซ ูโุดูุฏ ฺฉู <strong>check null ูุงุฏุฏู ฺฏุฑูุชู ุดูุฏ</strong>:</p>
<pre class="hljs"><code><span class="hljs-keyword">var</span> p = <span class="hljs-keyword">new</span> Person(<span class="hljs-literal">null</span>);    <span class="hljs-comment">// ููููุชโุขูุฒ! (check ูุงุฏุฏู ฺฏุฑูุชู ุดุฏ)</span>
</code></pre>
<p>ูุดฺฉู ุงุตู ุงู ุงุณุช ฺฉู <strong>ููโุชูุงู ุจุฏูู ููุดุชู ุณุงุฒูุฏูุ ูพุงุฑุงูุชุฑ ุณุงุฒูุฏู ุงููู ุฑุง ุจู property ุงุฎุชุตุงุต ุฏุงุฏ</strong>. ุฑุงูโุญู ุณุงุฏู ุงู ุงุณุช ฺฉู <strong>ูุณุช ูพุงุฑุงูุชุฑ ุฑุง ุญุฐู ฺฉุฑุฏู ู ฺฉ ุณุงุฒูุฏู ูุนููู ุจููุณุฏ</strong>:</p>
<pre class="hljs"><code><span class="hljs-keyword">record</span> <span class="hljs-title">Person</span>
{
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Person</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> name</span>)</span> =&gt; Name = name;  <span class="hljs-comment">// ุงุฎุชุตุงุต ุจู PROPERTY</span>
    <span class="hljs-built_in">string</span> _name;
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> Name { <span class="hljs-keyword">get</span> =&gt; _name; <span class="hljs-keyword">init</span> =&gt; ... }
}
</code></pre>
<hr>
<h3>ุฑฺฉูุฑุฏูุง ู ููุงุณู ุจุฑุงุจุฑ (Equality) โ๏ธ</h3>
<p>ูุงููุฏ <strong>structูุงุ anonymous types ู tuples</strong>ุ ุฑฺฉูุฑุฏูุง <strong>structural equality</strong> ุฑุง ุจู ุตูุฑุช ูพุดโูุฑุถ ุงุฑุงุฆู ูโฺฉููุฏุ ุนู ุฏู ุฑฺฉูุฑุฏ <strong>ุจุฑุงุจุฑูุฏ ุงฺฏุฑ ููุฏูุง ู propertyูุง ุงุชููุงุชฺฉ ุขููุง ุจุฑุงุจุฑ ุจุงุดูุฏ</strong>:</p>
<pre class="hljs"><code><span class="hljs-keyword">var</span> p1 = <span class="hljs-keyword">new</span> Point(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>);
<span class="hljs-keyword">var</span> p2 = <span class="hljs-keyword">new</span> Point(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>);
Console.WriteLine(p1.Equals(p2));   <span class="hljs-comment">// True</span>

<span class="hljs-keyword">record</span> <span class="hljs-title">Point</span>(<span class="hljs-title">double</span> <span class="hljs-title">X</span>, <span class="hljs-title">double</span> <span class="hljs-title">Y</span>);
</code></pre>
<p>ุนููฺฏุฑ <strong>==</strong> ูุฒ ุจุง ุฑฺฉูุฑุฏูุง ฺฉุงุฑ ูโฺฉูุฏ (ูุงููุฏ tuples):</p>
<pre class="hljs"><code>Console.WriteLine(p1 == p2);         <span class="hljs-comment">// True</span>
</code></pre>
<p>โ๏ธ ุงุฌุฑุง ูพุดโูุฑุถ ุจุฑุงุจุฑ ุจุฑุง ุฑฺฉูุฑุฏูุง ููฺฉู ุงุณุช ุขุณุจโูพุฐุฑ ุจุงุดุฏุ ุจูโุฎุตูุต ุงฺฏุฑ ุฑฺฉูุฑุฏ ุญุงู <strong>ููุงุฏุฑ lazyุ transientุ ุขุฑุงูโูุง ุง collectionูุง</strong> ุจุงุดุฏ ฺฉู ูุงุฒ ุจู ูุฏุฑุช ูฺู ุจุฑุง ููุงุณู ุฏุงุฑูุฏ. ุฎูุดุจุฎุชุงููุ ุงุตูุงุญ ุขู ูุณุจุชุงู ุณุงุฏู ุงุณุช ู ูุงุฒ ุจู ฺฉุงุฑ ุฒุงุฏ ูุฏุงุฑุฏ.</p>
<hr>
<h3>ููุดุชู Equals ุณูุงุฑุด ๐๏ธ</h3>
<p>ุจุฑ ุฎูุงู ฺฉูุงุณโูุง ู structูุงุ <strong>ููโุชูุงูุฏ object.Equals ุฑุง override ฺฉูุฏ</strong>ุ ุฏุฑ ุนูุถ ุจุงุฏ ฺฉ ูุชุฏ <strong>public Equals</strong> ุจุง ุงู <strong>ุงูุถุง</strong> ุชุนุฑู ฺฉูุฏ:</p>
<pre class="hljs"><code><span class="hljs-keyword">record</span> <span class="hljs-title">Point</span>(<span class="hljs-title">double</span> <span class="hljs-title">X</span>, <span class="hljs-title">double</span> <span class="hljs-title">Y</span>)
{
    <span class="hljs-built_in">double</span> _someOtherField;
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">virtual</span> <span class="hljs-built_in">bool</span> <span class="hljs-title">Equals</span>(<span class="hljs-params">Point other</span>)</span> =&gt;
        other != <span class="hljs-literal">null</span> &amp;&amp; X == other.X &amp;&amp; Y == other.Y;
}
</code></pre>
<ul>
<li>ูุชุฏ <strong>Equals</strong> ุจุงุฏ <strong>virtual</strong> ุจุงุดุฏุ ูู override.</li>
<li>ููุน ูพุงุฑุงูุชุฑ ุจุงุฏ <strong>ููุน ุฑฺฉูุฑุฏ ูุงูุน</strong> ุจุงุดุฏ (ุฏุฑ ุงู ูุซุงู Pointุ ูู object).</li>
<li>ููุช ุงูุถุง ุฏุฑุณุช ุจุงุดุฏุ ฺฉุงููพุงูุฑ ุจู ุตูุฑุช ุฎูุฏฺฉุงุฑ ูุชุฏ ุดูุง ุฑุง patch ูโฺฉูุฏ.</li>
</ul>
<p>ุฏุฑ ูุซุงู ุจุงูุงุ ููุทู ุจุฑุงุจุฑ ุฑุง ุชุบุฑ ุฏุงุฏู ุชุง ููุท <strong>X ู Y</strong> ููุงุณู ุดููุฏ ู <code>_someOtherField</code> ูุงุฏุฏู ฺฏุฑูุชู ุดูุฏ.</p>
<p>ุงฺฏุฑ ุฑฺฉูุฑุฏ ุฏฺฏุฑ ุฑุง <strong>subclass</strong> ฺฉูุฏุ ูโุชูุงูุฏ <strong>base.Equals</strong> ุฑุง ูุฑุงุฎูุงู ฺฉูุฏ:</p>
<pre class="hljs"><code><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">virtual</span> <span class="hljs-built_in">bool</span> <span class="hljs-title">Equals</span>(<span class="hljs-params">Point other</span>)</span> =&gt; <span class="hljs-keyword">base</span>.Equals(other) &amp;&amp; ...
</code></pre>
<p>โ ูฺฉุชู ููู: ุงฺฏุฑ ููุทู ุจุฑุงุจุฑ ุฑุง ุฎูุฏุชุงู ูพุงุฏู ฺฉูุฏุ ุจุงุฏ <strong>GetHashCode</strong> ุฑุง ูุฒ override ฺฉูุฏ. ุฎูุดุจุฎุชุงูู ุฏุฑ ุฑฺฉูุฑุฏูุง ูุงุฒ ุจู overload ฺฉุฑุฏู <strong>!= ุง ==</strong> ู ูพุงุฏูโุณุงุฒ <strong>IEquatable<T></strong> ูุณุชุ ููู ุงูโูุง ุจูโุตูุฑุช ุฎูุฏฺฉุงุฑ ุงูุฌุงู ูโุดูุฏ.</p>
<p>ููุถูุน <strong>ููุงุณู ุจุฑุงุจุฑ ุฑฺฉูุฑุฏูุง</strong> ุจู ุตูุฑุช ฺฉุงูู ุฏุฑ ุจุฎุด ยซEquality Comparisonยป ุตูุญู 344 ูพูุดุด ุฏุงุฏู ุดุฏู ุงุณุช.</p>
<h3>ุงูฺฏููุง (Patterns) ๐งฉโจ</h3>
<p>ุฏุฑ ูุตู ณุ ูุดุงู ุฏุงุฏู ฺฉู ฺฺฏููู ูโุชูุงู ุงุฒ ุนููฺฏุฑ <strong>is</strong> ุจุฑุง ุจุฑุฑุณ ููููุช <strong>ุชุจุฏู ูุฑุฌุน (reference conversion)</strong> ุงุณุชูุงุฏู ฺฉุฑุฏ:</p>
<pre class="hljs"><code><span class="hljs-keyword">if</span> (obj <span class="hljs-keyword">is</span> <span class="hljs-built_in">string</span>)
    Console.WriteLine(((<span class="hljs-built_in">string</span>)obj).Length);
</code></pre>
<p>ุง ุจู ุดฺฉู ฺฉูุชุงูโุชุฑ:</p>
<pre class="hljs"><code><span class="hljs-keyword">if</span> (obj <span class="hljs-keyword">is</span> <span class="hljs-built_in">string</span> s)
    Console.WriteLine(s.Length);
</code></pre>
<p>ุงู ุฑูุด ฺฉูุชุงูุ ฺฉ ุงุฒ <strong>ุงูฺฏููุง (type pattern)</strong> ุฑุง ุจู ฺฉุงุฑ ูโฺฏุฑุฏ. ุนููฺฏุฑ <strong>is</strong> ููฺูู ุงุฒ ุงูฺฏููุง ุฏฺฏุฑ ูพุดุชุจุงู ูโฺฉูุฏ ฺฉู ุฏุฑ ูุณุฎูโูุง ุงุฎุฑ C# ูุนุฑู ุดุฏูโุงูุฏุ ูุงููุฏ <strong>property pattern</strong>:</p>
<pre class="hljs"><code><span class="hljs-keyword">if</span> (obj <span class="hljs-keyword">is</span> <span class="hljs-built_in">string</span> { Length: <span class="hljs-number">4</span> })
    Console.WriteLine(<span class="hljs-string">&quot;A string with 4 characters&quot;</span>);
</code></pre>
<p>ุงูฺฏููุง ุฏุฑ ุฒูููโูุง ุฒุฑ ูพุดุชุจุงู ูโุดููุฏ:</p>
<ul>
<li>ุจุนุฏ ุงุฒ ุนููฺฏุฑ <strong>is</strong> <code>(variable is pattern)</code></li>
<li>ุฏุฑ <strong>switch statements</strong></li>
<li>ุฏุฑ <strong>switch expressions</strong></li>
</ul>
<p>ูุง ูุจูุงู <strong>type pattern</strong> (ู ุจู ุทูุฑ ุฎูุงุตูุ <strong>tuple pattern</strong>) ุฑุง ุฏุฑ ุจุฎุดโูุง ยซSwitching on typesยป ุตูุญู 89 ู ยซThe is operatorยป ุตูุญู 130 ูพูุดุด ุฏุงุฏูโุงู. ุฏุฑ ุงู ุจุฎุดุ ุงูฺฏููุง ูพุดุฑูุชูโุชุฑ ูุนุฑู ุดุฏู ุฏุฑ ูุณุฎูโูุง ุฌุฏุฏ C# ุฑุง ุจุฑุฑุณ ูโฺฉูู.</p>
<p>ุจุฑุฎ ุงุฒ ุงูฺฏููุง ุชุฎุตุตโุชุฑ ุนูุฏุชุงู ุจุฑุง ุงุณุชูุงุฏู ุฏุฑ <strong>switch statements/expressions</strong> ุทุฑุงุญ ุดุฏูโุงูุฏ ู ูุงุฒ ุจู <strong>when clauses</strong> ุฑุง ฺฉุงูุด ูโุฏููุฏ ู ุงูฺฉุงู ุงุณุชูุงุฏู ุงุฒ <strong>switch</strong> ุฑุง ุฏุฑ ููุงูุน ูุฑุงูู ูโฺฉููุฏ ฺฉู ูุจูุงู ุงูฺฉุงู ุขู ูุจูุฏ.</p>
<p>โ๏ธ ุจู ุงุฏ ุฏุงุดุชู ุจุงุดุฏ ฺฉู ููุดู ูโุชูุงูุฏ <strong>switch expressionูุง ูพฺุฏู</strong> ุฑุง ุจุง <strong>if ุณุงุฏู</strong> ุฌุงฺฏุฒู ฺฉูุฏุ ุง ุฏุฑ ุจุฑุฎ ููุงุฑุฏ ุงุฒ <strong>ุนููฺฏุฑ ุดุฑุท ุณูโุชุง (ternary operator)</strong> ุงุณุชูุงุฏู ฺฉูุฏุ ูุนูููุงู ุจุฏูู ูุงุฒ ุจู ฺฉุฏ ุงุถุงู ุฒุงุฏ.</p>
<hr>
<h3>ุงูฺฏู ุซุงุจุช (Constant Pattern) ๐ข</h3>
<p>ุงูฺฏู ุซุงุจุช ุจู ุดูุง ุงูฺฉุงู ูโุฏูุฏ ูุณุชููุงู ุจุง ฺฉ <strong>ุซุงุจุช (constant)</strong> ูุทุงุจูุช ุฏูุฏ ู ููฺฏุงู ฺฉุงุฑ ุจุง ููุน <strong>object</strong> ููุฏ ุงุณุช:</p>
<pre class="hljs"><code><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Foo</span>(<span class="hljs-params"><span class="hljs-built_in">object</span> obj</span>)</span>
{
    <span class="hljs-keyword">if</span> (obj <span class="hljs-keyword">is</span> <span class="hljs-number">3</span>) ...
}
</code></pre>
<p>ุงู ุนุจุงุฑุช ุจุง ฺฉุฏ ุฒุฑ ูุนุงุฏู ุงุณุช:</p>
<pre class="hljs"><code>obj <span class="hljs-keyword">is</span> <span class="hljs-built_in">int</span> &amp;&amp; (<span class="hljs-built_in">int</span>)obj == <span class="hljs-number">3</span>
</code></pre>
<p>โ๏ธ ฺูู ุงู ฺฉ ุนููฺฏุฑ <strong>static</strong> ุงุณุชุ C# ุงุฌุงุฒู ููโุฏูุฏ ฺฉู ูุณุชููุงู ุจุง <strong>==</strong> ฺฉ object ุฑุง ุจุง ฺฉ constant ููุงุณู ฺฉูุฏุ ุฒุฑุง ฺฉุงููพุงูุฑ ุจุงุฏ ููุนโูุง ุฑุง ุงุฒ ูุจู ุจุฏุงูุฏ.</p>
<p>ุจู ุชููุงุ ุงู ุงูฺฏู ฺฉุงุฑุจุฑุฏ ูุญุฏูุฏ ุฏุงุฑุฏุ ุฒุฑุง ุฌุงฺฏุฒู ููุทู ุขู ุงู ุงุณุช:</p>
<pre class="hljs"><code><span class="hljs-keyword">if</span> (<span class="hljs-number">3.</span>Equals(obj)) ...
</code></pre>
<p>ุจู ุฒูุฏ ุฎูุงูู ุฏุฏ ฺฉู <strong>ุงูฺฏู ุซุงุจุช</strong> ุจุง <strong>pattern combinators</strong> ุจุณุงุฑ ฺฉุงุฑุจุฑุฏโุชุฑ ูโุดูุฏ.</p>
<hr>
<h3>ุงูฺฏููุง ุฑุงุจุทูโุง (Relational Patterns) ๐</h3>
<p>ุงุฒ C# 9 ุจู ุจุนุฏุ ูโุชูุงูุฏ ุงุฒ ุนููฺฏุฑูุง <code>&lt;</code>, <code>&gt;</code>, <code>&lt;=</code>, <code>&gt;=</code> ุฏุฑ ุงูฺฏููุง ุงุณุชูุงุฏู ฺฉูุฏ:</p>
<pre class="hljs"><code><span class="hljs-keyword">if</span> (x <span class="hljs-keyword">is</span> &gt; <span class="hljs-number">100</span>) Console.WriteLine(<span class="hljs-string">&quot;x is greater than 100&quot;</span>);
</code></pre>
<p>ุงู ุงูฺฏู ุฏุฑ <strong>switch</strong> ุจุณุงุฑ ููุฏ ูโุดูุฏ:</p>
<pre class="hljs"><code><span class="hljs-function"><span class="hljs-built_in">string</span> <span class="hljs-title">GetWeightCategory</span>(<span class="hljs-params"><span class="hljs-built_in">decimal</span> bmi</span>)</span> =&gt; bmi <span class="hljs-keyword">switch</span>
{
    &lt; <span class="hljs-number">18.5</span>m =&gt; <span class="hljs-string">&quot;underweight&quot;</span>,
    &lt; <span class="hljs-number">25</span>m =&gt; <span class="hljs-string">&quot;normal&quot;</span>,
    &lt; <span class="hljs-number">30</span>m =&gt; <span class="hljs-string">&quot;overweight&quot;</span>,
    _ =&gt; <span class="hljs-string">&quot;obese&quot;</span>
};
</code></pre>
<p>โ๏ธ ุงูฺฏููุง ุฑุงุจุทูโุง ุญุช ุฒูุงู ฺฉู ูุชุบุฑ ุงุฒ ููุน <strong>object</strong> ุจุงุดุฏ ฺฉุงุฑ ูโฺฉููุฏุ ุงูุง ุจุงุฏ ุฏุฑ ุงุณุชูุงุฏู ุงุฒ <strong>ุซุงุจุชโูุง ุนุฏุฏ</strong> ุจุณุงุฑ ุฏูุช ฺฉูุฏ:</p>
<pre class="hljs"><code><span class="hljs-built_in">object</span> obj = <span class="hljs-number">2</span>m;                  <span class="hljs-comment">// obj ุงุฒ ููุน decimal ุงุณุช</span>
Console.WriteLine(obj <span class="hljs-keyword">is</span> &lt; <span class="hljs-number">3</span>m);   <span class="hljs-comment">// True</span>
Console.WriteLine(obj <span class="hljs-keyword">is</span> &lt; <span class="hljs-number">3</span>);    <span class="hljs-comment">// False</span>
</code></pre>
<hr>
<h3>ุชุฑฺฉุจโฺฉููุฏูโูุง ุงูฺฏู (Pattern Combinators) ๐</h3>
<p>ุงุฒ C# 9 ุจู ุจุนุฏุ ูโุชูุงูุฏ ุงุฒ ฺฉูุฏูุงฺูโูุง <strong>and, or, not</strong> ุจุฑุง ุชุฑฺฉุจ ุงูฺฏููุง ุงุณุชูุงุฏู ฺฉูุฏ:</p>
<pre class="hljs"><code><span class="hljs-function"><span class="hljs-built_in">bool</span> <span class="hljs-title">IsJanetOrJohn</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> name</span>)</span> =&gt; name.ToUpper() <span class="hljs-keyword">is</span> <span class="hljs-string">&quot;JANET&quot;</span> <span class="hljs-keyword">or</span> <span class="hljs-string">&quot;JOHN&quot;</span>;
<span class="hljs-function"><span class="hljs-built_in">bool</span> <span class="hljs-title">IsVowel</span>(<span class="hljs-params"><span class="hljs-built_in">char</span> c</span>)</span> =&gt; c <span class="hljs-keyword">is</span> <span class="hljs-string">&#x27;a&#x27;</span> <span class="hljs-keyword">or</span> <span class="hljs-string">&#x27;e&#x27;</span> <span class="hljs-keyword">or</span> <span class="hljs-string">&#x27;i&#x27;</span> <span class="hljs-keyword">or</span> <span class="hljs-string">&#x27;o&#x27;</span> <span class="hljs-keyword">or</span> <span class="hljs-string">&#x27;u&#x27;</span>;
<span class="hljs-function"><span class="hljs-built_in">bool</span> <span class="hljs-title">Between1And9</span>(<span class="hljs-params"><span class="hljs-built_in">int</span> n</span>)</span> =&gt; n <span class="hljs-keyword">is</span> &gt;= <span class="hljs-number">1</span> <span class="hljs-keyword">and</span> &lt;= <span class="hljs-number">9</span>;
<span class="hljs-function"><span class="hljs-built_in">bool</span> <span class="hljs-title">IsLetter</span>(<span class="hljs-params"><span class="hljs-built_in">char</span> c</span>)</span> =&gt; c <span class="hljs-keyword">is</span> &gt;= <span class="hljs-string">&#x27;a&#x27;</span> <span class="hljs-keyword">and</span> &lt;= <span class="hljs-string">&#x27;z&#x27;</span> <span class="hljs-keyword">or</span> &gt;= <span class="hljs-string">&#x27;A&#x27;</span> <span class="hljs-keyword">and</span> &lt;= <span class="hljs-string">&#x27;Z&#x27;</span>;
</code></pre>
<ul>
<li>ูุงููุฏ ุนููฺฏุฑูุง <code>&amp;&amp;</code> ู <code>||</code>ุ <strong>and</strong> ุงูููุช ุจุงูุงุชุฑ ูุณุจุช ุจู <strong>or</strong> ุฏุงุฑุฏ ู ูโุชูุงู ุจุง ูพุฑุงูุชุฒ ุงู ุชุฑุชุจ ุฑุง ุชุบุฑ ุฏุงุฏ.</li>
</ul>
<p>ฺฉ ุชุฑููุฏ ููุฏ ุงู ุงุณุช ฺฉู <strong>not combinator</strong> ุฑุง ุจุง <strong>type pattern</strong> ุชุฑฺฉุจ ฺฉูุฏ ุชุง ุจุฑุฑุณ ฺฉูุฏ ุขุง ฺฉ object <strong>ุงุฒ ููุน ุฎุงุต ูุณุช</strong>:</p>
<pre class="hljs"><code><span class="hljs-keyword">if</span> (obj <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-built_in">string</span>) ...
</code></pre>
<p>ุงู ุญุงูุช ุฒุจุงุชุฑ ุงุฒ ููุดุชู ุฒุฑ ุงุณุช:</p>
<pre class="hljs"><code><span class="hljs-keyword">if</span> (!(obj <span class="hljs-keyword">is</span> <span class="hljs-built_in">string</span>)) ...
</code></pre>
<h3>ุงูฺฏู <code>var</code> ๐ข</h3>
<p>ุงูฺฏู <strong>var</strong> ููุน <strong>type pattern</strong> ุงุณุช ฺฉู ุฏุฑ ุขู ุจู ุฌุง ูุงู ููุนุ ุงุฒ ฺฉููู ฺฉูุฏ <strong>var</strong> ุงุณุชูุงุฏู ูโฺฉูุฏ. ุงู ุชุจุฏู ููุดู ูููู ุงุณุช ู ูุฏู ุขู ููุท <strong>ุงูฺฉุงู ุงุณุชูุงุฏู ูุฌุฏุฏ ุงุฒ ูุชุบุฑ ุงุณุช ฺฉู ูพุณ ุงุฒ ุขู ูโุขุฏ</strong>:</p>
<pre class="hljs"><code><span class="hljs-function"><span class="hljs-built_in">bool</span> <span class="hljs-title">IsJanetOrJohn</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> name</span>)</span> =&gt; 
    name.ToUpper() <span class="hljs-keyword">is</span> <span class="hljs-keyword">var</span> upper &amp;&amp; (upper == <span class="hljs-string">&quot;JANET&quot;</span> || upper == <span class="hljs-string">&quot;JOHN&quot;</span>);
</code></pre>
<p>ุงู ูุนุงุฏู ฺฉุฏ ุฒุฑ ุงุณุช:</p>
<pre class="hljs"><code><span class="hljs-function"><span class="hljs-built_in">bool</span> <span class="hljs-title">IsJanetOrJohn</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> name</span>)</span>
{
    <span class="hljs-built_in">string</span> upper = name.ToUpper();
    <span class="hljs-keyword">return</span> upper == <span class="hljs-string">&quot;JANET&quot;</span> || upper == <span class="hljs-string">&quot;JOHN&quot;</span>;
}
</code></pre>
<p>๐ก ุชูุงูุง <strong>ูุนุฑู ู ุงุณุชูุงุฏู ูุฌุฏุฏ ฺฉ ูุชุบุฑ ูุงู</strong> (ูุซู <code>upper</code>) ุฏุฑ ฺฉ ูุชุฏ ุจุง <strong>expression-bodied</strong> ุจุณุงุฑ ฺฉุงุฑุจุฑุฏ ุงุณุชุ ุจู ูฺู ุฏุฑ <strong>lambda expressions</strong>.<br>
โ๏ธ ูุชุฃุณูุงููุ ุงู ุงูฺฏู ุนูุฏุชุงู ุฒูุงู ููุฏ ุงุณุช ฺฉู ูุชุฏ ููุฑุฏ ูุธุฑ <strong>ููุน ุจุงุฒฺฏุดุช bool</strong> ุฏุงุดุชู ุจุงุดุฏ.</p>
<hr>
<h3>ุงูฺฏููุง Tuple ู Positional ๐ฆ</h3>
<p><strong>Tuple pattern</strong> (ูุนุฑูโุดุฏู ุฏุฑ C# 8) ุจุฑุง ูุทุงุจูุช ุจุง <strong>tuples</strong> ุงุณุชูุงุฏู ูโุดูุฏ:</p>
<pre class="hljs"><code><span class="hljs-keyword">var</span> p = (<span class="hljs-number">2</span>, <span class="hljs-number">3</span>);
Console.WriteLine(<span class="hljs-function">p <span class="hljs-title">is</span> (<span class="hljs-params"><span class="hljs-number">2</span>, <span class="hljs-number">3</span></span>))</span>;  <span class="hljs-comment">// True</span>
</code></pre>
<p>ูโุชูุงูุฏ ุงุฒ ุขู ุจุฑุง <strong>switch</strong> ุฑู ฺูุฏ ููุฏุงุฑ ุงุณุชูุงุฏู ฺฉูุฏ:</p>
<pre class="hljs"><code><span class="hljs-function"><span class="hljs-built_in">int</span> <span class="hljs-title">AverageCelsiusTemperature</span>(<span class="hljs-params">Season season, <span class="hljs-built_in">bool</span> daytime</span>)</span> =&gt;
    (season, daytime) <span class="hljs-keyword">switch</span>
    {
        (Season.Spring, <span class="hljs-literal">true</span>) =&gt; <span class="hljs-number">20</span>,
        (Season.Spring, <span class="hljs-literal">false</span>) =&gt; <span class="hljs-number">16</span>,
        (Season.Summer, <span class="hljs-literal">true</span>) =&gt; <span class="hljs-number">27</span>,
        (Season.Summer, <span class="hljs-literal">false</span>) =&gt; <span class="hljs-number">22</span>,
        (Season.Fall, <span class="hljs-literal">true</span>) =&gt; <span class="hljs-number">18</span>,
        (Season.Fall, <span class="hljs-literal">false</span>) =&gt; <span class="hljs-number">12</span>,
        (Season.Winter, <span class="hljs-literal">true</span>) =&gt; <span class="hljs-number">10</span>,
        (Season.Winter, <span class="hljs-literal">false</span>) =&gt; <span class="hljs-number">-2</span>,
        _ =&gt; <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> Exception(<span class="hljs-string">&quot;Unexpected combination&quot;</span>)
    };

<span class="hljs-built_in">enum</span> Season { Spring, Summer, Fall, Winter };
</code></pre>
<p>โก <strong>Tuple pattern</strong> ุฏุฑ ูุงูุน ฺฉ <strong>ุญุงูุช ูฺู ุงุฒ positional pattern</strong> ุงุณุช (C# 8+) ฺฉู ุจุง ูุฑ ููุน ฺฉู ูุชุฏ <strong>Deconstruct</strong> ุงุฑุงุฆู ุฏูุฏุ ฺฉุงุฑ ูโฺฉูุฏ.</p>
<p>ูุซุงู ุจุง <strong>record Point</strong> ู <strong>deconstructor ุชููุฏ ุดุฏู ุชูุณุท ฺฉุงููพุงูุฑ</strong>:</p>
<pre class="hljs"><code><span class="hljs-keyword">var</span> p = <span class="hljs-keyword">new</span> Point(<span class="hljs-number">2</span>, <span class="hljs-number">2</span>);
Console.WriteLine(<span class="hljs-function">p <span class="hljs-title">is</span> (<span class="hljs-params"><span class="hljs-number">2</span>, <span class="hljs-number">2</span></span>))</span>;  <span class="hljs-comment">// True</span>
<span class="hljs-keyword">record</span> <span class="hljs-title">Point</span>(<span class="hljs-title">int</span> <span class="hljs-title">X</span>, <span class="hljs-title">int</span> <span class="hljs-title">Y</span>);      <span class="hljs-comment">// ุฏุงุฑุง deconstructor ุชููุฏ ุดุฏู ุชูุณุท ฺฉุงููพุงูุฑ</span>
</code></pre>
<p>ูโุชูุงูุฏ ููฺฏุงู <strong>match</strong>ุ ูุชุบุฑูุง ุฑุง <strong>deconstruct</strong> ฺฉูุฏ:</p>
<pre class="hljs"><code>Console.WriteLine(<span class="hljs-function">p <span class="hljs-title">is</span> (<span class="hljs-params"><span class="hljs-keyword">var</span> x, <span class="hljs-keyword">var</span> y</span>) &amp;&amp; x</span> == y);  <span class="hljs-comment">// True</span>
</code></pre>
<p>ูุซุงู <strong>switch expression</strong> ฺฉู <strong>type pattern</strong> ุฑุง ุจุง <strong>positional pattern</strong> ุชุฑฺฉุจ ูโฺฉูุฏ:</p>
<pre class="hljs"><code><span class="hljs-function"><span class="hljs-built_in">string</span> <span class="hljs-title">Print</span>(<span class="hljs-params"><span class="hljs-built_in">object</span> obj</span>)</span> =&gt; obj <span class="hljs-keyword">switch</span> 
{
    Point(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>) =&gt; <span class="hljs-string">&quot;Empty point&quot;</span>,
    Point(<span class="hljs-keyword">var</span> x, <span class="hljs-keyword">var</span> y) <span class="hljs-keyword">when</span> x == y =&gt; <span class="hljs-string">&quot;Diagonal&quot;</span>,
    ...
};
</code></pre>
<hr>
<h3>ุงูฺฏููุง Property ๐ท๏ธ</h3>
<p><strong>Property pattern</strong> (C# 8+) ุจุฑ ุงุณุงุณ ฺฉ ุง ฺูุฏ <strong>ููุฏุงุฑ property</strong> ฺฉ object ูุทุงุจูุช ูโุฏูุฏ.<br>
ูุซุงู ุณุงุฏู ูุจูุงู ุจุง <strong>is operator</strong> ุฏุงุดุชู:</p>
<pre class="hljs"><code><span class="hljs-keyword">if</span> (obj <span class="hljs-keyword">is</span> <span class="hljs-built_in">string</span> { Length:<span class="hljs-number">4</span> }) ...
</code></pre>
<p>โ๏ธ ุงู ุชููุง ฺฉู ุงุฒ ููุดุชู ฺฉุฏ ุฒุฑ ุตุฑููโุฌู ูโฺฉูุฏ:</p>
<pre class="hljs"><code><span class="hljs-keyword">if</span> (obj <span class="hljs-keyword">is</span> <span class="hljs-built_in">string</span> s &amp;&amp; s.Length == <span class="hljs-number">4</span>) ...
</code></pre>
<p>ุจุง <strong>switch statements</strong> ู <strong>expressions</strong>ุ property patterns ฺฉุงุฑุจุฑุฏ ุจุดุชุฑ ูพุฏุง ูโฺฉููุฏ.</p>
<p>ูุซุงู ุจุง ฺฉูุงุณ <strong>System.Uri</strong>:</p>
<pre class="hljs"><code><span class="hljs-function"><span class="hljs-built_in">bool</span> <span class="hljs-title">ShouldAllow</span>(<span class="hljs-params">Uri uri</span>)</span> =&gt; uri <span class="hljs-keyword">switch</span>
{
    { Scheme: <span class="hljs-string">&quot;http&quot;</span>,  Port: <span class="hljs-number">80</span>  } =&gt; <span class="hljs-literal">true</span>,
    { Scheme: <span class="hljs-string">&quot;https&quot;</span>, Port: <span class="hljs-number">443</span> } =&gt; <span class="hljs-literal">true</span>,
    { Scheme: <span class="hljs-string">&quot;ftp&quot;</span>,   Port: <span class="hljs-number">21</span>  } =&gt; <span class="hljs-literal">true</span>,
    { IsLoopback: <span class="hljs-literal">true</span> } =&gt; <span class="hljs-literal">true</span>,
    _ =&gt; <span class="hljs-literal">false</span>
};
</code></pre>
<p>ูโุชูุงูุฏ <strong>propertyูุง ุฑุง ุชู ุฏุฑ ุชู (nested)</strong> ฺฉูุฏุ ฺฉู ุงุฒ C# 10 ุจู ุจุนุฏ ูโุชูุงู ุณุงุฏูโุณุงุฒ ฺฉุฑุฏ:</p>
<pre class="hljs"><code>{ Scheme.Length: <span class="hljs-number">4</span>, Port: <span class="hljs-number">80</span> } =&gt; <span class="hljs-literal">true</span>,
</code></pre>
<p>ููฺูู ูโุชูุงู ุงุฒ <strong>ุงูฺฏููุง ุฏฺฏุฑ ุฏุงุฎู property patterns</strong> ุงุณุชูุงุฏู ฺฉุฑุฏุ ูุซู <strong>relational patterns</strong>:</p>
<pre class="hljs"><code>{ Host: { Length: &lt; <span class="hljs-number">1000</span> }, Port: &gt; <span class="hljs-number">0</span> } =&gt; <span class="hljs-literal">true</span>,
</code></pre>
<p>ุดุฑุงุท ูพฺุฏูโุชุฑ ุฑุง ูโุชูุงู ุจุง <strong>when clause</strong> ุจุงู ฺฉุฑุฏ:</p>
<pre class="hljs"><code>{ Scheme: <span class="hljs-string">&quot;http&quot;</span> } <span class="hljs-keyword">when</span> <span class="hljs-built_in">string</span>.IsNullOrWhiteSpace(uri.Query) =&gt; <span class="hljs-literal">true</span>,
</code></pre>
<p>ูโุชูุงูุฏ <strong>property pattern ุฑุง ุจุง type pattern ุชุฑฺฉุจ ฺฉูุฏ</strong> ู ูุชุบุฑ ูุนุฑู ฺฉูุฏ:</p>
<pre class="hljs"><code>Uri { Scheme: <span class="hljs-string">&quot;http&quot;</span>, Port: <span class="hljs-number">80</span> } httpUri =&gt; httpUri.Host.Length &lt; <span class="hljs-number">1000</span>,
</code></pre>
<p>ู ููู ูุชุบุฑ ุฑุง ูโุชูุงู ุฏุฑ <strong>when clause</strong> ุงุณุชูุงุฏู ฺฉุฑุฏ:</p>
<pre class="hljs"><code>Uri { Scheme: <span class="hljs-string">&quot;http&quot;</span>, Port: <span class="hljs-number">80</span> } httpUri 
    <span class="hljs-keyword">when</span> httpUri.Host.Length &lt; <span class="hljs-number">1000</span> =&gt; <span class="hljs-literal">true</span>,
</code></pre>
<p>ูฺฉุชู ุฌุงูุจ: ูโุชูุงู ูุชุบุฑูุง ุฑุง ุฏุฑ ุณุทุญ property ูุฒ ูุนุฑู ฺฉุฑุฏ:</p>
<pre class="hljs"><code>{ Scheme: <span class="hljs-string">&quot;http&quot;</span>, Port: <span class="hljs-number">80</span>, Host: <span class="hljs-built_in">string</span> host } =&gt; host.Length &lt; <span class="hljs-number">1000</span>,
</code></pre>
<p>ุชุงูพ ุถูู ูุฒ ูุฌุงุฒ ุงุณุชุ ุนู ูโุชูุงูุฏ <strong>string</strong> ุฑุง ุจุง <strong>var</strong> ุฌุงฺฏุฒู ฺฉูุฏ:</p>
<pre class="hljs"><code><span class="hljs-function"><span class="hljs-built_in">bool</span> <span class="hljs-title">ShouldAllow</span>(<span class="hljs-params">Uri uri</span>)</span> =&gt; uri <span class="hljs-keyword">switch</span>
{
    { Scheme: <span class="hljs-string">&quot;http&quot;</span>,  Port: <span class="hljs-number">80</span>, Host: <span class="hljs-keyword">var</span> host } =&gt; host.Length &lt; <span class="hljs-number">1000</span>,
    { Scheme: <span class="hljs-string">&quot;https&quot;</span>, Port: <span class="hljs-number">443</span> } =&gt; <span class="hljs-literal">true</span>,
    { Scheme: <span class="hljs-string">&quot;ftp&quot;</span>,   Port: <span class="hljs-number">21</span>  } =&gt; <span class="hljs-literal">true</span>,
    { IsLoopback: <span class="hljs-literal">true</span> } =&gt; <span class="hljs-literal">true</span>,
    _ =&gt; <span class="hljs-literal">false</span>
};
</code></pre>
<p>โ๏ธ ุฏุฑ ุจุณุงุฑ ุงุฒ ููุงุฑุฏุ ุตุฑููโุฌู ุฏุฑ ุชุนุฏุงุฏ ฺฉุงุฑุงฺฉุชุฑูุง ุฒุงุฏ ูุณุช. ุฌุงฺฏุฒู ุณุงุฏูโุชุฑ ูโุชูุงูุฏ ุงู ุจุงุดุฏ:</p>
<pre class="hljs"><code>{ Scheme: <span class="hljs-string">&quot;http&quot;</span>, Port: <span class="hljs-number">80</span> } =&gt; uri.Host.Length &lt; <span class="hljs-number">1000</span>,
</code></pre>
<p>ุง:</p>
<pre class="hljs"><code>{ Scheme: <span class="hljs-string">&quot;http&quot;</span>, Port: <span class="hljs-number">80</span>, Host: { Length: &lt; <span class="hljs-number">1000</span> } } =&gt; ...
</code></pre>
<h3>ุงูฺฏููุง List ๐</h3>
<p><strong>List patterns</strong> (ูุนุฑูโุดุฏู ุฏุฑ C# 11) ุฑู ูุฑ ููุน collection ูุงุจู ุดูุงุฑุด (<strong>Count</strong> ุง <strong>Length</strong>) ู ุจุง <strong>indexer ุนุฏุฏ</strong> ฺฉุงุฑ ูโฺฉููุฏ.</p>
<p>ฺฉ <strong>list pattern</strong> ุจุง ุงุณุชูุงุฏู ุงุฒ ุจุฑุงฺฉุชโูุง <code>[ ]</code> ุชุนุฑู ูโุดูุฏ:</p>
<pre class="hljs"><code><span class="hljs-built_in">int</span>[] numbers = { <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span> };
Console.Write(numbers <span class="hljs-keyword">is</span> [<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>]);   <span class="hljs-comment">// True</span>
</code></pre>
<ul>
<li>ุนูุงูุช <strong>underscore <code>_</code></strong> ุจุฑุง ูุทุงุจูุช ุจุง ฺฉ ุนูุตุฑ ุจุง ูุฑ ููุฏุงุฑ ุงุณุชูุงุฏู ูโุดูุฏ:</li>
</ul>
<pre class="hljs"><code>Console.Write(numbers <span class="hljs-keyword">is</span> [<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, _, _, <span class="hljs-number">4</span>]);   <span class="hljs-comment">// True</span>
</code></pre>
<ul>
<li>ูโุชูุงูุฏ ุงุฒ <strong>var pattern</strong> ุจุฑุง ฺฏุฑูุชู ฺฉ ุนูุตุฑ ุงุณุชูุงุฏู ฺฉูุฏ:</li>
</ul>
<pre class="hljs"><code>Console.Write(numbers <span class="hljs-keyword">is</span> [<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-keyword">var</span> x, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>] &amp;&amp; x &gt; <span class="hljs-number">1</span>);   <span class="hljs-comment">// True</span>
</code></pre>
<ul>
<li><strong>ุฏู ููุทู <code>..</code></strong> ุจุฑุง ูุดุฎุต ฺฉุฑุฏู ฺฉ <strong>slice</strong> ุงุณุชูุงุฏู ูโุดูุฏ ฺฉู ุตูุฑ ุง ฺูุฏ ุนูุตุฑ ุฑุง ูุทุงุจูุช ูโุฏูุฏ:</li>
</ul>
<pre class="hljs"><code>Console.Write(numbers <span class="hljs-keyword">is</span> [<span class="hljs-number">0</span>, .., <span class="hljs-number">4</span>]);    <span class="hljs-comment">// True</span>
</code></pre>
<ul>
<li>ุจุง ุขุฑุงูโูุง ุง ุณุงุฑ ุงููุงุน ฺฉู ุงุฒ <strong>indices ู ranges</strong> ูพุดุชุจุงู ูโฺฉููุฏุ ูโุชูุงู slice ุฑุง ุจุง var pattern ุชุฑฺฉุจ ฺฉุฑุฏ:</li>
</ul>
<pre class="hljs"><code>Console.Write(numbers <span class="hljs-keyword">is</span> [<span class="hljs-number">0</span>, .. <span class="hljs-keyword">var</span> mid, <span class="hljs-number">4</span>] &amp;&amp; mid.Contains(<span class="hljs-number">2</span>)); <span class="hljs-comment">// True</span>
</code></pre>
<p>โ๏ธ ฺฉ <strong>list pattern</strong> ูโุชูุงูุฏ ุญุฏุงฺฉุซุฑ ฺฉ slice ุฏุงุดุชู ุจุงุดุฏ.</p>
<hr>
<h3>Attributes ๐ท๏ธ</h3>
<p><strong>Attributes</strong> ูฺฉุงูุฒู <strong>extensible</strong> ุจุฑุง ุงุถุงูู ฺฉุฑุฏู ุงุทูุงุนุงุช <strong>ุณูุงุฑุด</strong> ุจู ุนูุงุตุฑ ฺฉุฏ ูุณุชูุฏ (assemblyุ ููุนุ memberุ return valueุ parameter ู generic type parameters).</p>
<ul>
<li>ุจุฑุง ุชุนุฑู ฺฉ attributeุ ุงุฒ ฺฉ ฺฉูุงุณ ฺฉู ุงุฒ <code>System.Attribute</code> ุงุฑุซโุจุฑ ูโฺฉูุฏ ุงุณุชูุงุฏู ูโฺฉูู.</li>
<li>ุจุฑุง ุงุนูุงู attributeุ ูุงู ููุน ุขู ุฑุง ุฏุฑ <strong>ุจุฑุงฺฉุชโูุง <code>[ ]</code></strong> ูุจู ุงุฒ ุนูุตุฑ ฺฉุฏ ูุฑุงุฑ ูโุฏูู:</li>
</ul>
<pre class="hljs"><code>[<span class="hljs-meta">ObsoleteAttribute</span>]
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Foo</span> {...}
</code></pre>
<p>โก ุจู ุฏูู ุงูฺฉู convention ุชูุงู attributeูุง ุจุง <code>Attribute</code> ุฎุชู ูโุดููุฏุ ูโุชูุงู suffix ุฑุง ุญุฐู ฺฉุฑุฏ:</p>
<pre class="hljs"><code>[<span class="hljs-meta">Obsolete</span>]
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Foo</span> {...}
</code></pre>
<ul>
<li>
<p>ูพุงุฑุงูุชุฑูุง attribute ุจู ุฏู ุฏุณุชู ุชูุณู ูโุดููุฏ:</p>
<ol>
<li><strong>Positional</strong>: ูุฑุจูุท ุจู ูพุงุฑุงูุชุฑูุง public constructor attribute</li>
<li><strong>Named</strong>: ูุฑุจูุท ุจู ููุฏูุง ุง propertyูุง ุนููู attribute</li>
</ol>
</li>
</ul>
<p>ูุซุงู ุจุง XmlTypeAttribute:</p>
<pre class="hljs"><code>[<span class="hljs-meta">XmlType(<span class="hljs-string">&quot;Customer&quot;</span>, Namespace=<span class="hljs-string">&quot;http://oreilly.com&quot;</span>)</span>]
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">CustomerEntity</span> { ... }
</code></pre>
<ul>
<li><strong>Positional</strong>: <code>&quot;Customer&quot;</code></li>
<li><strong>Named</strong>: <code>Namespace=&quot;http://oreilly.com&quot;</code></li>
</ul>
<hr>
<h3>ุงุนูุงู Attributes ุจู Assembly ู Fieldูุง ๐๏ธ</h3>
<ul>
<li>ูโุชูุงู ฺฉ attribute ุฑุง ุจู <strong>assembly</strong> ูุชุตู ฺฉุฑุฏ:</li>
</ul>
<pre class="hljs"><code>[<span class="hljs-meta">assembly: AssemblyFileVersion(<span class="hljs-string">&quot;1.2.3.4&quot;</span>)</span>]
</code></pre>
<ul>
<li>ุจุฑุง ุงุนูุงู attribute ุจู <strong>backing field</strong> ฺฉ property ุฎูุฏฺฉุงุฑ:</li>
</ul>
<pre class="hljs"><code>[<span class="hljs-meta">field:NonSerialized</span>]
<span class="hljs-keyword">public</span> <span class="hljs-built_in">int</span> MyProperty { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
</code></pre>
<hr>
<h3>Attributes ุฑู Lambda Expressions โก</h3>
<p>ุงุฒ C# 10 ุจู ุจุนุฏุ ูโุชูุงู attributeูุง ุฑุง ุจู <strong>methodุ ูพุงุฑุงูุชุฑูุง ู return value</strong> lambda ุงุถุงูู ฺฉุฑุฏ:</p>
<pre class="hljs"><code>Action&lt;<span class="hljs-built_in">int</span>&gt; a = [Description(<span class="hljs-string">&quot;Method&quot;</span>)]
               [<span class="hljs-meta">return: Description(<span class="hljs-string">&quot;Return value&quot;</span>)</span>]
               ([Description(<span class="hljs-string">&quot;Parameter&quot;</span>)] <span class="hljs-built_in">int</span> x) =&gt; Console.Write(x);
</code></pre>
<ul>
<li>ุงู ูฺฺฏ ุจุฑุง ูุฑููุฑฺฉโูุง ูุซู <strong><a href="http://ASP.NET">ASP.NET</a></strong> ููุฏ ุงุณุช ู ูุงุฒ ุจู ุชุนุฑู method ุฌุฏุงฺฏุงูู ุฑุง ุงุฒ ุจู ูโุจุฑุฏ.</li>
<li>ุจุฑุง ุฏุณุชุฑุณ ุจู ุงู attributeูุง:</li>
</ul>
<pre class="hljs"><code><span class="hljs-keyword">var</span> methodAtt = a.GetMethodInfo().GetCustomAttributes();
<span class="hljs-keyword">var</span> paramAtt  = a.GetMethodInfo().GetParameters()[<span class="hljs-number">0</span>].GetCustomAttributes();
<span class="hljs-keyword">var</span> returnAtt = a.GetMethodInfo().ReturnParameter.GetCustomAttributes();
</code></pre>
<p>โ๏ธ ุจุฑุง ุฌููฺฏุฑ ุงุฒ ุงุจูุงู ุณูุชฺฉุณุ <strong>ูพุงุฑุงูุชุฑ lambda ููุดู ุจุงุฏ ุฏุงุฎู ูพุฑุงูุชุฒ ุจุงุดุฏ</strong>.<br>
โ ุงุนูุงู attribute ุฑู <strong>expression-tree lambdas</strong> ูุฌุงุฒ ูุณุช.</p>
<h3>ูุดุฎุต ฺฉุฑุฏู ฺูุฏ Attribute ููุฒูุงู ๐ท๏ธ</h3>
<p>ูโุชูุงู ฺูุฏ <strong>attribute</strong> ุฑุง ุจู ฺฉ ุนูุตุฑ ฺฉุฏ ูุณุจุช ุฏุงุฏ. ุงู ฺฉุงุฑ ุฑุง ูโุชูุงู ุจู ุณู ุฑูุด ุงูุฌุงู ุฏุงุฏ:</p>
<ol>
<li>ุชูุงู attributeูุง ุฏุฑ ฺฉ ุฌูุช ุจุฑุงฺฉุช <code>[ ]</code>ุ ุจุง ฺฉุงูุง ุฌุฏุง ุดุฏู:</li>
</ol>
<pre class="hljs"><code>[<span class="hljs-meta">Serializable, Obsolete, CLSCompliant(false)</span>]
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Bar</span> { ... }
</code></pre>
<ol start="2">
<li>ูุฑ attribute ุฏุฑ ฺฉ ุฌูุช ุจุฑุงฺฉุช ุฌุฏุงฺฏุงูู:</li>
</ol>
<pre class="hljs"><code>[<span class="hljs-meta">Serializable</span>]
[<span class="hljs-meta">Obsolete</span>]
[<span class="hljs-meta">CLSCompliant(false)</span>]
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Bar</span> { ... }
</code></pre>
<ol start="3">
<li>ุชุฑฺฉุจ ุงุฒ ุฏู ุฑูุด ุจุงูุง:</li>
</ol>
<pre class="hljs"><code>[<span class="hljs-meta">Serializable, Obsolete</span>]
[<span class="hljs-meta">CLSCompliant(false)</span>]
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Bar</span> { ... }
</code></pre>
<p>ููู ูุซุงูโูุง ุจุงูุง ุงุฒ ูุธุฑ ูุนูุง <strong>ฺฉุณุงู</strong> ูุณุชูุฏ. โ</p>
<hr>
<h3>Caller Info Attributes ๐</h3>
<p>ุณู <strong>attribute ูฺู</strong> ูุฌูุฏ ุฏุงุฑุฏ ฺฉู ูโุชูุงู ูพุงุฑุงูุชุฑูุง ุงุฎุชุงุฑ ุฑุง ุจุง ุขูโูุง ุนูุงูุช ุฒุฏ ุชุง ฺฉุงููพุงูุฑ ุงุทูุงุนุงุช <strong>caller</strong> ุฑุง ุฏุฑ ููุฏุงุฑ ูพุดโูุฑุถ ูพุงุฑุงูุชุฑ ูุฑุงุฑ ุฏูุฏ:</p>
<ul>
<li><code>[CallerMemberName]</code>: ูุงู ุนุถู ูุฑุงุฎูุงููุฏู</li>
<li><code>[CallerFilePath]</code>: ูุณุฑ ูุงู ููุจุน ูุฑุงุฎูุงููุฏู</li>
<li><code>[CallerLineNumber]</code>: ุดูุงุฑู ุฎุท ูุฑุงุฎูุงููุฏู</li>
</ul>
<p>ูุซุงู:</p>
<pre class="hljs"><code><span class="hljs-keyword">using</span> System;
<span class="hljs-keyword">using</span> System.Runtime.CompilerServices;

<span class="hljs-keyword">class</span> <span class="hljs-title">Program</span>
{
    <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Main</span>()</span> =&gt; Foo();

    <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Foo</span>(<span class="hljs-params">
        [CallerMemberName] <span class="hljs-built_in">string</span> memberName = <span class="hljs-literal">null</span>,
        [CallerFilePath] <span class="hljs-built_in">string</span> filePath = <span class="hljs-literal">null</span>,
        [CallerLineNumber] <span class="hljs-built_in">int</span> lineNumber = <span class="hljs-number">0</span></span>)</span>
    {
        Console.WriteLine(memberName);
        Console.WriteLine(filePath);
        Console.WriteLine(lineNumber);
    }
}
</code></pre>
<p>ูุฑุถ ฺฉูุฏ ูุงู ุฏุฑ <code>c:\source\test\Program.cs</code> ุงุณุชุ ุฎุฑูุฌ:</p>
<pre class="hljs"><code>Main
c:\source\test\Program.cs
6
</code></pre>
<ul>
<li>ุงู ูฺฺฏ ุจุฑุง <strong>logging</strong> ู <strong>INotifyPropertyChanged</strong> ุจุณุงุฑ ููุฏ ุงุณุช.</li>
<li>ูุซุงู ุงุณุชูุงุฏู ุฏุฑ ฺฉูุงุณ ุจุง PropertyChanged:</li>
</ul>
<pre class="hljs"><code><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Foo</span> : <span class="hljs-title">INotifyPropertyChanged</span>
{
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">event</span> PropertyChangedEventHandler PropertyChanged = <span class="hljs-built_in">delegate</span> { };

    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">RaisePropertyChanged</span>(<span class="hljs-params">[CallerMemberName] <span class="hljs-built_in">string</span> propertyName = <span class="hljs-literal">null</span></span>)</span>
        =&gt; PropertyChanged(<span class="hljs-keyword">this</span>, <span class="hljs-keyword">new</span> PropertyChangedEventArgs(propertyName));

    <span class="hljs-built_in">string</span> customerName;
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> CustomerName
    {
        <span class="hljs-keyword">get</span> =&gt; customerName;
        <span class="hljs-keyword">set</span>
        {
            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">value</span> == customerName) <span class="hljs-keyword">return</span>;
            customerName = <span class="hljs-keyword">value</span>;
            RaisePropertyChanged();  <span class="hljs-comment">// ุชุจุฏู ูโุดูุฏ ุจู: RaisePropertyChanged(&quot;CustomerName&quot;);</span>
        }
    }
}
</code></pre>
<hr>
<h3>CallerArgumentExpression (C# 10) โ๏ธ</h3>
<ul>
<li><code>[CallerArgumentExpression]</code> ุซุจุช <strong>ุนุจุงุฑุช ูพุงุฑุงูุชุฑ</strong> ุฏุฑ ูุญู ูุฑุงุฎูุงู ุฑุง ููฺฉู ูโฺฉูุฏ.</li>
</ul>
<p>ูุซุงู:</p>
<pre class="hljs"><code>Print(Math.PI * <span class="hljs-number">2</span>);

<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Print</span>(<span class="hljs-params"><span class="hljs-built_in">double</span> number,
           [CallerArgumentExpression(<span class="hljs-string">&quot;number&quot;</span></span>)] <span class="hljs-built_in">string</span> expr</span> = <span class="hljs-literal">null</span>)
    =&gt; Console.WriteLine(expr);
<span class="hljs-comment">// ุฎุฑูุฌ: Math.PI * 2</span>
</code></pre>
<ul>
<li>ุญุช ฺฉุงููุชโูุง ูู ุฏุฑ ุฑุดุชู ูุฑุงุฑ ูโฺฏุฑูุฏ:</li>
</ul>
<pre class="hljs"><code>Print(Math.PI <span class="hljs-comment">/*(ฯ)*/</span> * <span class="hljs-number">2</span>);
<span class="hljs-comment">// ุฎุฑูุฌ: Math.PI /*(ฯ)*/ * 2</span>
</code></pre>
<p>ฺฉุงุฑุจุฑุฏ ุงุตู: <strong>ฺฉุชุงุจุฎุงููโูุง validation ู assertion</strong>:</p>
<pre class="hljs"><code>Assert(<span class="hljs-number">2</span> + <span class="hljs-number">2</span> == <span class="hljs-number">5</span>);

<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Assert</span>(<span class="hljs-params"><span class="hljs-built_in">bool</span> condition,
            [CallerArgumentExpression(<span class="hljs-string">&quot;condition&quot;</span></span>)] <span class="hljs-built_in">string</span> message</span> = <span class="hljs-literal">null</span>)
{
    <span class="hljs-keyword">if</span> (!condition) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> Exception(<span class="hljs-string">&quot;Assertion failed: &quot;</span> + message);
}
</code></pre>
<ul>
<li>ููููู ุฏฺฏุฑ: <code>ArgumentNullException.ThrowIfNull</code> ุฏุฑ .NET 6:</li>
</ul>
<pre class="hljs"><code>ArgumentNullException.ThrowIfNull(message);
</code></pre>
<p>โ๏ธ ูโุชูุงู <code>[CallerArgumentExpression]</code> ุฑุง ฺูุฏ ุจุงุฑ ุงุณุชูุงุฏู ฺฉุฑุฏ ุชุง ฺูุฏ ุนุจุงุฑุช ูพุงุฑุงูุชุฑ ุซุจุช ุดูุฏ.</p>
<hr>
<h3>Dynamic Binding ๐</h3>
<ul>
<li><strong>Dynamic binding</strong> ุฒูุงู <strong>resolve ฺฉุฑุฏู typeุ member ู operator</strong> ุฑุง ุจู <strong>runtime</strong> ููฺฉูู ูโฺฉูุฏ.</li>
<li>ููุฏ ุฏุฑ interoperating ุจุง <strong>dynamic languages</strong> ุง <strong>COM</strong> ู ููฺูู ุฒูุงู ฺฉู ูโุฎูุงูุฏ ุงุฒ <strong>reflection</strong> ุงุณุชูุงุฏู ฺฉูุฏ.</li>
</ul>
<pre class="hljs"><code><span class="hljs-built_in">dynamic</span> d = GetSomeObject();
d.Quack();  <span class="hljs-comment">// ฺฉุงููพุงูุฑ ุจุฑุฑุณ ููโฺฉูุฏุ ุงุฌุฑุง ุฏุฑ ุฒูุงู runtime</span>
</code></pre>
<ul>
<li>ุฏุฑ dynamic bindingุ ฺฉุงููพุงูุฑ <strong>binding</strong> ุฑุง ุจู runtime ูุงฺฏุฐุงุฑ ูโฺฉูุฏุ ุจุฑุฎูุงู <strong>static binding</strong> ฺฉู ุฏุฑ ุฒูุงู ฺฉุงููพุงู ุฑุฎ ูโุฏูุฏ.</li>
</ul>
<h3><strong>Static Binding ุฏุฑ ููุงุจู Dynamic Binding โก</strong></h3>
<p>ุฏุฑ C#ุ <strong>binding</strong> ุนู ุงุชุตุงู ูุงู ฺฉ ุนุถู (ูุงููุฏ ูุชุฏ) ุจู ูพุงุฏูโุณุงุฒ ุขู.</p>
<hr>
<h4><strong>Static Binding (Binding ุงุณุชุง) ๐๏ธ</strong></h4>
<ul>
<li>ุงุชุตุงู ุฏุฑ <strong>ุฒูุงู ฺฉุงููพุงู</strong> ุงูุฌุงู ูโุดูุฏ.</li>
<li>ฺฉุงููพุงูุฑ ุจุงุฏ <strong>ููุน ูุชุบุฑูุง ุฑุง ุจุฏุงูุฏ</strong> ุชุง ุจุชูุงูุฏ ูุชุฏูุง ุง ุนููฺฏุฑูุง ุฑุง ูพุฏุง ฺฉูุฏ.</li>
<li>ูุซุงู:</li>
</ul>
<pre class="hljs"><code>Duck d = <span class="hljs-keyword">new</span> Duck();
d.Quack();  <span class="hljs-comment">// ฺฉุงููพุงูุฑ ุจุฑุฑุณ ูโฺฉูุฏ ฺฉู ฺฉูุงุณ Duck ูุชุฏ Quack ุฏุงุฑุฏ ุง ุฎุฑ</span>
</code></pre>
<ul>
<li>ุงฺฏุฑ ููุน ูุชุบุฑ <code>object</code> ุจุงุดุฏุ ุฏุณุชุฑุณ ุจู ูุชุฏ ูุงูููู ุฎูุงูุฏ ุจูุฏ:</li>
</ul>
<pre class="hljs"><code><span class="hljs-built_in">object</span> d = <span class="hljs-keyword">new</span> Duck();
d.Quack();  <span class="hljs-comment">// ุฎุทุง ฺฉุงููพุงู</span>
</code></pre>
<hr>
<h4><strong>Dynamic Binding (Binding ูพูุง) ๐</strong></h4>
<ul>
<li>ุงุชุตุงู ุฏุฑ <strong>ุฒูุงู ุงุฌุฑุง (runtime)</strong> ุงูุฌุงู ูโุดูุฏ.</li>
<li>ููุน ูุชุบุฑ <code>dynamic</code> ุงุณุช ู ฺฉุงููพุงูุฑ ูุฑุถ ูโฺฉูุฏ <strong>ููฺฉู ุงุณุช ูุชุฏ ูุฌูุฏ ุฏุงุดุชู ุจุงุดุฏ</strong>:</li>
</ul>
<pre class="hljs"><code><span class="hljs-built_in">dynamic</span> d = <span class="hljs-keyword">new</span> Duck();
d.Quack();  <span class="hljs-comment">// ุจุฑุฑุณ ู ุงุชุตุงู ุฏุฑ ุฒูุงู ุงุฌุฑุง ุงูุฌุงู ูโุดูุฏ</span>
</code></pre>
<ul>
<li>ุงฺฏุฑ ููุน ูุงูุน ูุชุบุฑ ูุชุฏ ูุฏุงุดุชู ุจุงุดุฏุ <strong>RuntimeBinderException</strong> ูพุฑุชุงุจ ูโุดูุฏ:</li>
</ul>
<pre class="hljs"><code><span class="hljs-built_in">dynamic</span> d = <span class="hljs-number">5</span>;
d.Hello();  <span class="hljs-comment">// RuntimeBinderException</span>
</code></pre>
<hr>
<h4><strong>ุงููุงุน Dynamic Binding</strong></h4>
<ol>
<li>
<p><strong>Custom Binding</strong> ๐ง</p>
<ul>
<li>ุฒูุงู ฺฉู ุดุก dynamicุ ุงูุชุฑูุณ <code>IDynamicMetaObjectProvider</code> ุฑุง ูพุงุฏูโุณุงุฒ ฺฉูุฏ.</li>
<li>ุจุฑุง ฺฉูุชุฑู ุฑูุชุงุฑ ูุชุฏูุง ุฏุฑ ุฒุจุงูโูุง ุฏุงูุงูฺฉ ูุซู IronPython ุง IronRuby ุงุณุชูุงุฏู ูโุดูุฏ.</li>
<li>ูุซุงู:</li>
</ul>
</li>
</ol>
<pre class="hljs"><code><span class="hljs-keyword">using</span> System;
<span class="hljs-keyword">using</span> System.Dynamic;

<span class="hljs-built_in">dynamic</span> d = <span class="hljs-keyword">new</span> Duck();
d.Quack();  <span class="hljs-comment">// &quot;Quack method was called&quot;</span>
d.Waddle(); <span class="hljs-comment">// &quot;Waddle method was called&quot;</span>

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Duck</span> : <span class="hljs-title">DynamicObject</span>
{
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">override</span> <span class="hljs-built_in">bool</span> <span class="hljs-title">TryInvokeMember</span>(<span class="hljs-params">InvokeMemberBinder binder, <span class="hljs-built_in">object</span>[] <span class="hljs-keyword">args</span>, <span class="hljs-keyword">out</span> <span class="hljs-built_in">object</span> result</span>)</span>
    {
        Console.WriteLine(binder.Name + <span class="hljs-string">&quot; method was called&quot;</span>);
        result = <span class="hljs-literal">null</span>;
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    }
}
</code></pre>
<ol start="2">
<li>
<p><strong>Language Binding</strong> ๐</p>
<ul>
<li>ุฒูุงู ฺฉู ุดุก dynamicุ <code>IDynamicMetaObjectProvider</code> ุฑุง ูพุงุฏูโุณุงุฒ ูฺฉูุฏ.</li>
<li>ููุฏ ุจุฑุง ุฏูุฑ ุฒุฏู ูุญุฏูุฏุชโูุง ุณุณุชู ููุน .NET ู ุงุฌุชูุงุจ ุงุฒ ฺฉูพ ฺฉุฏ ุจุฑุง ูุฑ ููุน ุฏุงุฏู.</li>
<li>ูุซุงู ูุญุงุณุจู ูุงูฺฏู:</li>
</ul>
</li>
</ol>
<pre class="hljs"><code><span class="hljs-built_in">int</span> x = <span class="hljs-number">3</span>, y = <span class="hljs-number">4</span>;
Console.WriteLine(Mean(x, y));
<span class="hljs-function"><span class="hljs-built_in">dynamic</span> <span class="hljs-title">Mean</span>(<span class="hljs-params"><span class="hljs-built_in">dynamic</span> a, <span class="hljs-built_in">dynamic</span> b</span>)</span> =&gt; (a + b) / <span class="hljs-number">2</span>;
</code></pre>
<p>โ๏ธ <strong>ูฺฉุชู:</strong> ุฏุฑ dynamic bindingุ ุงููุช ููุน <strong>compile-time</strong> ุงุฒ ุจู ูโุฑูุฏุ ูู ุงููุช ููุน <strong>runtime</strong> ุญูุธ ูโุดูุฏ.</p>
<hr>
<h4><strong>ููุงุด Runtime ุดุก dynamic</strong></h4>
<pre class="hljs"><code><span class="hljs-built_in">dynamic</span> x = <span class="hljs-string">&quot;hello&quot;</span>;
Console.WriteLine(x.GetType().Name);  <span class="hljs-comment">// String</span>
x = <span class="hljs-number">123</span>;
Console.WriteLine(x.GetType().Name);  <span class="hljs-comment">// Int32</span>
</code></pre>
<ul>
<li><code>dynamic</code> ุงุฒ ูุธุฑ ุณุงุฎุชุงุฑ ุจุง <code>object</code> ฺฉุณุงู ุงุณุชุ ููุท ุงุฌุงุฒู ุนููุงุช ุฏุงูุงูฺฉ ูโุฏูุฏ.</li>
</ul>
<pre class="hljs"><code><span class="hljs-built_in">object</span> o = <span class="hljs-keyword">new</span> System.Text.StringBuilder();
<span class="hljs-built_in">dynamic</span> d = o;
d.Append(<span class="hljs-string">&quot;hello&quot;</span>);
Console.WriteLine(o);  <span class="hljs-comment">// hello</span>
</code></pre>
<ul>
<li>ุฏุฑ runtimeุ ุงุนุถุง dynamic ุจุง Attribute ูุดุฎุต ูโุดููุฏ:</li>
</ul>
<pre class="hljs"><code><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Test</span>
{
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">dynamic</span> Foo;
}
<span class="hljs-comment">// ูุนุงุฏู ุจุง:</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Test</span>
{
    [<span class="hljs-meta">System.Runtime.CompilerServices.DynamicAttribute</span>]
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">object</span> Foo;
}
</code></pre>
<hr>
<h4><strong>ุชุจุฏูโูุง Dynamic ๐</strong></h4>
<ul>
<li>dynamic ูุงุจูุช ุชุจุฏู ุถูู ุจุง ููู ููุนโูุง ุฑุง ุฏุงุฑุฏ:</li>
</ul>
<pre class="hljs"><code><span class="hljs-built_in">int</span> i = <span class="hljs-number">7</span>;
<span class="hljs-built_in">dynamic</span> d = i;
<span class="hljs-built_in">long</span> j = d;   <span class="hljs-comment">// ุจุฏูู ูุงุฒ ุจู cast</span>
</code></pre>
<ul>
<li>ุงฺฏุฑ ุชุจุฏู ุถูู ููฺฉู ูุจุงุดุฏุ <strong>RuntimeBinderException</strong> ูพุฑุชุงุจ ูโุดูุฏ:</li>
</ul>
<pre class="hljs"><code><span class="hljs-built_in">short</span> k = d;  <span class="hljs-comment">// RuntimeBinderException</span>
</code></pre>
<hr>
<h4><strong>ููุงุณู var ู dynamic</strong></h4>
<table>
<thead>
<tr>
<th>ูฺฺฏ</th>
<th><code>var</code></th>
<th><code>dynamic</code></th>
</tr>
</thead>
<tbody>
<tr>
<td>ุฒูุงู ุชุนู ููุน</td>
<td>Compile-time</td>
<td>Runtime</td>
</tr>
<tr>
<td>ูุซุงู</td>
<td><code>var y = &quot;hello&quot;;</code></td>
<td><code>dynamic x = &quot;hello&quot;;</code></td>
</tr>
<tr>
<td>ุฑูุชุงุฑ ุงูุชุณุงุจ</td>
<td>ุฎุทุง ฺฉุงููพุงู ุฏุฑ ููุน ูุงุฏุฑุณุช</td>
<td>ุฎุทุง ุฒูุงู ุงุฌุฑุง ุฏุฑ ููุน ูุงุฏุฑุณุช</td>
</tr>
</tbody>
</table>
<p>ูุซุงู:</p>
<pre class="hljs"><code><span class="hljs-built_in">dynamic</span> x = <span class="hljs-string">&quot;hello&quot;</span>;
<span class="hljs-keyword">var</span> y = x;        <span class="hljs-comment">// y ูุฒ dynamic ุงุณุช</span>
<span class="hljs-built_in">int</span> z = y;        <span class="hljs-comment">// Runtime error</span>
</code></pre>
<ul>
<li><code>var</code> ูโฺฏูุฏ: &quot;ุจฺฏุฐุงุฑ ููุน ุชูุณุท ฺฉุงููพุงูุฑ ูุดุฎุต ุดูุฏ&quot;</li>
<li><code>dynamic</code> ูโฺฏูุฏ: &quot;ุจฺฏุฐุงุฑ ููุน ุชูุณุท runtime ูุดุฎุต ุดูุฏ&quot;</li>
</ul>
<h3><strong>Dynamic Expressions ุฏุฑ C# ๐</strong></h3>
<p>ุฏุฑ C#ุ ุชูุฑุจุง ููู ุงุนุถุง ฺฉ ุดุก (fields, properties, methods, events, constructors, indexers, operators ู conversions) ุฑุง ูโุชูุงู <strong>ุจู ุตูุฑุช ุฏุงูุงูฺฉ</strong> ูุฑุงุฎูุงู ฺฉุฑุฏ.</p>
<hr>
<h4><strong>ูุชุฌู ูุชุฏูุง void</strong></h4>
<ul>
<li>ููโุชูุงูุฏ ูุชุฌู ฺฉ <strong>ุนุจุงุฑุช dynamic ุจุง ููุน ุจุงุฒฺฏุดุช void</strong> ุฑุง ูุตุฑู ฺฉูุฏ.</li>
<li>ุชูุงูุช ุจุง static typing: ุฎุทุง <strong>ุฏุฑ ุฒูุงู ุงุฌุฑุง</strong> ุฑุฎ ูโุฏูุฏ:</li>
</ul>
<pre class="hljs"><code><span class="hljs-built_in">dynamic</span> list = <span class="hljs-keyword">new</span> List&lt;<span class="hljs-built_in">int</span>&gt;();
<span class="hljs-keyword">var</span> result = list.Add(<span class="hljs-number">5</span>);  <span class="hljs-comment">// RuntimeBinderException</span>
</code></pre>
<hr>
<h4><strong>ุชุฃุซุฑ cascading dynamic</strong></h4>
<ul>
<li>ูุฑ ุนุจุงุฑุช ฺฉู ุดุงูู <strong>ุนููููุฏ dynamic</strong> ุจุงุดุฏุ ูุนูููุง ุฎูุฏุด dynamic ุฎูุงูุฏ ุจูุฏ:</li>
</ul>
<pre class="hljs"><code><span class="hljs-built_in">dynamic</span> x = <span class="hljs-number">2</span>;
<span class="hljs-keyword">var</span> y = x * <span class="hljs-number">3</span>;  <span class="hljs-comment">// ููุน static y: dynamic</span>
</code></pre>
<ul>
<li>
<p>ุงุณุชุซูุงูุง:</p>
<ol>
<li><strong>ฺฉุณุช ุจู ููุน static</strong>:</li>
</ol>
</li>
</ul>
<pre class="hljs"><code><span class="hljs-built_in">dynamic</span> x = <span class="hljs-number">2</span>;
<span class="hljs-keyword">var</span> y = (<span class="hljs-built_in">int</span>)x;  <span class="hljs-comment">// y ุงุฒ ููุน int</span>
</code></pre>
<ol start="2">
<li><strong>ุตุฏุง ุฒุฏู constructor</strong> ููุดู static ุงุณุช:</li>
</ol>
<pre class="hljs"><code><span class="hljs-built_in">dynamic</span> capacity = <span class="hljs-number">10</span>;
<span class="hljs-keyword">var</span> sb = <span class="hljs-keyword">new</span> System.Text.StringBuilder(capacity);  <span class="hljs-comment">// sb ุงุฒ ููุน StringBuilder</span>
</code></pre>
<hr>
<h3><strong>Dynamic Calls ุจุฏูู Dynamic Receiver</strong></h3>
<ul>
<li>ูุนูููโุชุฑู ุญุงูุชุ <strong>receiver ุฏุงูุงูฺฉ</strong> ุงุณุช:</li>
</ul>
<pre class="hljs"><code><span class="hljs-built_in">dynamic</span> x = ...;
x.Foo();  <span class="hljs-comment">// x receiver ุงุณุช</span>
</code></pre>
<ul>
<li>ุงูุง ูโุชูุงู <strong>ูุชุฏูุง statically known</strong> ุฑุง ุจุง ุขุฑฺฏููุงูโูุง dynamic ูุฑุงุฎูุงู ฺฉุฑุฏ.</li>
<li>ูุซุงู ุจุง overload resolution:</li>
</ul>
<pre class="hljs"><code><span class="hljs-keyword">class</span> <span class="hljs-title">Program</span>
{
    <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Foo</span>(<span class="hljs-params"><span class="hljs-built_in">int</span> x</span>)</span> =&gt; Console.WriteLine(<span class="hljs-string">&quot;int&quot;</span>);
    <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Foo</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> x</span>)</span> =&gt; Console.WriteLine(<span class="hljs-string">&quot;string&quot;</span>);

    <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Main</span>()</span>
    {
        <span class="hljs-built_in">dynamic</span> x = <span class="hljs-number">5</span>;
        <span class="hljs-built_in">dynamic</span> y = <span class="hljs-string">&quot;watermelon&quot;</span>;
        Foo(x);  <span class="hljs-comment">// int</span>
        Foo(y);  <span class="hljs-comment">// string</span>
    }
}
</code></pre>
<ul>
<li>ุงฺฏุฑ ูุงู ูุชุฏ ุง ุชุนุฏุงุฏ ูพุงุฑุงูุชุฑูุง ุฏุฑุณุช ูุจุงุดุฏุ <strong>ุฎุทุง ฺฉุงููพุงู</strong> ุฏุฑุงูุช ูโฺฉูู.</li>
</ul>
<hr>
<h3><strong>ุงุณุชูุงุฏู ุงุฒ Static Types ุฏุฑ Dynamic Binding</strong></h3>
<ul>
<li>ุญุช ุฏุฑ binding ุฏุงูุงูฺฉุ ุงฺฏุฑ ุจุฑุฎ ุขุฑฺฏููุงูโูุง <strong>static type ูุดุฎุต</strong> ุฏุงุดุชู ุจุงุดูุฏุ ุงุณุชูุงุฏู ูโุดูุฏ:</li>
</ul>
<pre class="hljs"><code><span class="hljs-keyword">class</span> <span class="hljs-title">Program</span>
{
    <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Foo</span>(<span class="hljs-params"><span class="hljs-built_in">object</span> x, <span class="hljs-built_in">object</span> y</span>)</span> { Console.WriteLine(<span class="hljs-string">&quot;oo&quot;</span>); }
    <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Foo</span>(<span class="hljs-params"><span class="hljs-built_in">object</span> x, <span class="hljs-built_in">string</span> y</span>)</span> { Console.WriteLine(<span class="hljs-string">&quot;os&quot;</span>); }
    <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Foo</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> x, <span class="hljs-built_in">object</span> y</span>)</span> { Console.WriteLine(<span class="hljs-string">&quot;so&quot;</span>); }
    <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Foo</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> x, <span class="hljs-built_in">string</span> y</span>)</span> { Console.WriteLine(<span class="hljs-string">&quot;ss&quot;</span>); }

    <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Main</span>()</span>
    {
        <span class="hljs-built_in">object</span> o = <span class="hljs-string">&quot;hello&quot;</span>;
        <span class="hljs-built_in">dynamic</span> d = <span class="hljs-string">&quot;goodbye&quot;</span>;
        Foo(o, d);  <span class="hljs-comment">// os</span>
    }
}
</code></pre>
<hr>
<h3><strong>ุชูุงุจุน ุบุฑูุงุจู ูุฑุงุฎูุงู Dynamically โ</strong></h3>
<ul>
<li>
<p>ุจุฑุฎ ุชูุงุจุน ููโุชูุงููุฏ ุจุง dynamic ูุฑุงุฎูุงู ุดููุฏ:</p>
<ol>
<li><strong>Extension methods</strong> (ุจุง syntax extension)</li>
<li><strong>ุงุนุถุง interface</strong> ุฏุฑ ุตูุฑุช ฺฉู ูุงุฒ ุจู cast ุจู ุขู interface ุจุงุดุฏ</li>
<li><strong>Base members ฺฉู ุชูุณุท subclass ูพููุงู ุดุฏูโุงูุฏ</strong></li>
</ol>
</li>
<li>
<p>ุฏูู: dynamic binding ููุท ุจู <strong>ูุงู ูุชุฏ ู receiver</strong> ูุงุฒ ุฏุงุฑุฏุ ุงูุง ุฏุฑ ุงู ุณู ููุฑุฏุ <strong>ููุน ุงุถุงู compile-time-only</strong> ูุฒ ุฏุฎู ุงุณุช ู ุฏุฑ runtime ููุฌูุฏ ูุณุช.</p>
</li>
</ul>
<hr>
<h4><strong>ูุซุงู: ูุฑุงุฎูุงู ุนุถู Interface ุจุง dynamic</strong></h4>
<pre class="hljs"><code><span class="hljs-keyword">interface</span> <span class="hljs-title">IFoo</span> { <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Test</span>()</span>; }
<span class="hljs-keyword">class</span> <span class="hljs-title">Foo</span> : <span class="hljs-title">IFoo</span> { <span class="hljs-keyword">void</span> IFoo.Test() {} }

IFoo f = <span class="hljs-keyword">new</span> Foo();
<span class="hljs-built_in">dynamic</span> d = f;
d.Test();  <span class="hljs-comment">// Runtime exception</span>
</code></pre>
<ul>
<li>cast ุจู interface ุฏุฑ ุฒูุงู ฺฉุงููพุงู ูุดุฎุต ูโฺฉูุฏ ฺฉู binding ุจุงุฏ ุฑู IFoo ุงูุฌุงู ุดูุฏุ ุงูุง ุฏุฑ runtime ุงู ุงุทูุงุนุงุช ุงุฒ ุฏุณุช ูโุฑูุฏ.</li>
</ul>
<hr>
<h4><strong>ุฑุงูฺฉุงุฑ: ฺฉุชุงุจุฎุงูู Uncapsulator โก</strong></h4>
<ul>
<li>ฺฉุชุงุจุฎุงูู open-source ุจุฑุง <strong>dynamic ุจูุชุฑ</strong>ุ ุญู ูุดฺฉู ูุฑุงุฎูุงู ุงุนุถุง interfaceุ base types ู static members ุจู ุตูุฑุช ุฏุงูุงูฺฉ.</li>
<li>ูุซุงู:</li>
</ul>
<pre class="hljs"><code>IFoo f = <span class="hljs-keyword">new</span> Foo();
<span class="hljs-built_in">dynamic</span> uf = f.Uncapsulate();
uf.Test();  <span class="hljs-comment">// ุญุงูุง ฺฉุงุฑ ูโฺฉูุฏ</span>
</code></pre>
<ul>
<li>
<p>ูุงุจูุชโูุง Uncapsulator:</p>
<ul>
<li>Cast ุจู base types ู interfaces</li>
<li>ูุฑุงุฎูุงู static members ุจู ุตูุฑุช ุฏุงูุงูฺฉ</li>
<li>ุฏุณุชุฑุณ ุจู ุงุนุถุง ุบุฑ ุนููู (nonpublic members)</li>
</ul>
</li>
</ul>
<h3>ุจุงุฑฺฏุฐุงุฑ ูุฌุฏุฏ ุนููฺฏุฑูุง (Operator Overloading) โ๏ธ</h3>
<p>ุดูุง ูโุชูุงูุฏ ุนููฺฏุฑูุง ุฑุง ุจุงุฑฺฏุฐุงุฑ ูุฌุฏุฏ ฺฉูุฏ ุชุง ูุญู (syntax) ุทุจุนโุชุฑ ุจุฑุง ููุนโูุง ุณูุงุฑุด ูุฑุงูู ุดูุฏ. ุจุงุฑฺฏุฐุงุฑ ูุฌุฏุฏ ุนููฺฏุฑูุง ุจุดุชุฑ ุจุฑุง ูพุงุฏูโุณุงุฒ <code>struct</code>ูุง ุณูุงุฑุด ฺฉู ููุงุงูฺฏุฑ ููุนโูุง ุฏุงุฏูโุง ูุณุจุชุงู ุงุจุชุฏุง ูุณุชูุฏุ ููุงุณุจ ุงุณุช. ุจูโุนููุงู ูุซุงูุ ฺฉ ููุน ุนุฏุฏ ุณูุงุฑุด ฺฏุฒููโ ุจุณุงุฑ ููุงุณุจ ุจุฑุง ุจุงุฑฺฏุฐุงุฑ ูุฌุฏุฏ ุนููฺฏุฑูุง ุงุณุช.</p>
<p>ุนููฺฏุฑูุง ููุงุฏู ุฒุฑ ูุงุจู ุจุงุฑฺฏุฐุงุฑ ูุฌุฏุฏ ูุณุชูุฏ:</p>
<pre class="hljs"><code>+ (unary) - (unary) ! ห ++ --
+ % &gt;&gt;
&gt;= &amp; == &lt;= * / | ^ &lt;&lt; != &gt; &lt; 
</code></pre>
<p>ุนููฺฏุฑูุง ุฒุฑ ูุฒ ูุงุจู ุจุงุฑฺฏุฐุงุฑ ูุฌุฏุฏ ูุณุชูุฏ:</p>
<ul>
<li>ุชุจุฏูโูุง ุถูู ู ุตุฑุญ (ุจุง ฺฉููุงุช ฺฉูุฏ <code>implicit</code> ู <code>explicit</code>)</li>
<li>ุนููฺฏุฑูุง <code>true</code> ู <code>false</code> (ูู ููุงุฏุฑ ุซุงุจุช)</li>
</ul>
<p>ุนููฺฏุฑูุง ุฒุฑ ุจูโุตูุฑุช ุบุฑูุณุชูู ุจุงุฑฺฏุฐุงุฑ ูโุดููุฏ:</p>
<ul>
<li>ุนููฺฏุฑูุง ุชุฑฺฉุจ (<code>+=, /=</code> ู ุบุฑู) ุจูโุทูุฑ ุถูู ุจุง ุจุงุฒููุณ ุนููฺฏุฑูุง ุบุฑุชุฑฺฉุจ (<code>+, /</code>) ุจุงุฒููุณ ูโุดููุฏ.</li>
<li>ุนููฺฏุฑูุง ุดุฑุท <code>&amp;&amp;</code> ู <code>||</code> ุจูโุทูุฑ ุถูู ุจุง ุจุงุฒููุณ ุนููฺฏุฑูุง ุจุช <code>&amp;</code> ู <code>|</code> ุจุงุฒููุณ ูโุดููุฏ.</li>
</ul>
<hr>
<h3>ุชูุงุจุน ุนููฺฏุฑ (Operator Functions) ๐๏ธ</h3>
<p>ุจุฑุง ุจุงุฑฺฏุฐุงุฑ ฺฉ ุนููฺฏุฑุ ุจุงุฏ ฺฉ <strong>ุชุงุจุน ุนููฺฏุฑ</strong> ุชุนุฑู ฺฉูุฏ. ููุงูู ุชูุงุจุน ุนููฺฏุฑ ุจู ุดุฑุญ ุฒุฑ ุงุณุช:</p>
<ul>
<li>ูุงู ุชุงุจุน ุจุง ฺฉููู ฺฉูุฏ <code>operator</code> ู ุณูพุณ ููุงุฏ ุนููฺฏุฑ ูุดุฎุต ูโุดูุฏ.</li>
<li>ุชุงุจุน ุนููฺฏุฑ ุจุงุฏ <code>static</code> ู <code>public</code> ุจุงุดุฏ.</li>
<li>ูพุงุฑุงูุชุฑูุง ุชุงุจุน ุนููฺฏุฑ ูุดุงูโุฏููุฏูโ ุนููููุฏูุง ูุณุชูุฏ.</li>
<li>ููุน ุจุงุฒฺฏุดุช ุชุงุจุน ุนููฺฏุฑ ูุดุงูโุฏููุฏูโ ูุชุฌูโ ฺฉ ุนุจุงุฑุช ุงุณุช.</li>
<li>ุญุฏุงูู ฺฉ ุงุฒ ุนููููุฏูุง ุจุงุฏ ุงุฒ ููุน ุจุงุดุฏ ฺฉู ุชุงุจุน ุนููฺฏุฑ ุฏุฑ ุขู ุชุนุฑู ุดุฏู ุงุณุช.</li>
</ul>
<p>ูุซุงู ุฒุฑ ฺฉ <code>struct</code> ุจู ูุงู <code>Note</code> ุชุนุฑู ูโฺฉูุฏ ฺฉู ููุงุงูฺฏุฑ ฺฉ ูุช ููุณู ุงุณุช ู ุณูพุณ ุนููฺฏุฑ <code>+</code> ุฑุง ุจุงุฑฺฏุฐุงุฑ ูโฺฉูุฏ:</p>
<pre class="hljs"><code><span class="hljs-keyword">public</span> <span class="hljs-keyword">struct</span> Note
{
    <span class="hljs-built_in">int</span> <span class="hljs-keyword">value</span>;
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Note</span> (<span class="hljs-params"><span class="hljs-built_in">int</span> semitonesFromA</span>)</span> { <span class="hljs-keyword">value</span> = semitonesFromA; }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Note <span class="hljs-keyword">operator</span> + (Note x, <span class="hljs-built_in">int</span> semitones)
    {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Note (x.<span class="hljs-keyword">value</span> + semitones);
    }
}
</code></pre>
<p>ุงู ุจุงุฑฺฏุฐุงุฑ ุจู ูุง ุงุฌุงุฒู ูโุฏูุฏ ฺฉ <code>int</code> ุฑุง ุจู ฺฉ <code>Note</code> ุงุถุงูู ฺฉูู:</p>
<pre class="hljs"><code>Note B = <span class="hljs-keyword">new</span> Note (<span class="hljs-number">2</span>);
Note CSharp = B + <span class="hljs-number">2</span>;
</code></pre>
<p>ุจุงุฑฺฏุฐุงุฑ ฺฉ ุนููฺฏุฑุ ุจูโุทูุฑ ุฎูุฏฺฉุงุฑ ุนููฺฏุฑ ุชุฑฺฉุจ ูุชูุงุธุฑ ุฑุง ูุฒ ุจุงุฑฺฏุฐุงุฑ ูโฺฉูุฏ. ุฏุฑ ูุซุงู ูุงุ ฺูู <code>+</code> ุฑุง ุจุงุฒููุณ ฺฉุฑุฏูุ ูโุชูุงูู ุงุฒ <code>+=</code> ูู ุงุณุชูุงุฏู ฺฉูู:</p>
<pre class="hljs"><code>CSharp += <span class="hljs-number">2</span>;
</code></pre>
<p>ููุงููุฏ ูุชุฏูุง ู ูพุฑุงูพุฑุชโูุงุ C# ุงุฌุงุฒู ูโุฏูุฏ ุชูุงุจุน ุนููฺฏุฑ ฺฉู ุดุงูู ฺฉ ุนุจุงุฑุช ูุณุชูุฏ ุจุง <strong>ูุญู ุจุฏูู-ุนุจุงุฑุช (expression-bodied syntax)</strong> ฺฉูุชุงูโุชุฑ ููุดุชู ุดููุฏ:</p>
<pre class="hljs"><code><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Note <span class="hljs-keyword">operator</span> + (Note x, <span class="hljs-built_in">int</span> semitones)
    =&gt; <span class="hljs-keyword">new</span> Note (x.<span class="hljs-keyword">value</span> + semitones);
</code></pre>
<hr>
<h3>ุนููฺฏุฑูุง Checked โ๏ธ</h3>
<p>ุงุฒ C# 11 ุจู ุจุนุฏุ ููฺฏุงู ุชุนุฑู ุชุงุจุน ุนููฺฏุฑุ ูโุชูุงู ูุณุฎูโ <code>checked</code> ุขู ุฑุง ูุฒ ุชุนุฑู ฺฉุฑุฏ:</p>
<pre class="hljs"><code><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Note <span class="hljs-keyword">operator</span> + (Note x, <span class="hljs-built_in">int</span> semitones)
    =&gt; <span class="hljs-keyword">new</span> Note (x.<span class="hljs-keyword">value</span> + semitones);

<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Note <span class="hljs-keyword">operator</span> checked + (Note x, <span class="hljs-built_in">int</span> semitones)
    =&gt; checked (<span class="hljs-keyword">new</span> Note (x.<span class="hljs-keyword">value</span> + semitones));
</code></pre>
<p>ูุณุฎูโ <code>checked</code> ุฏุงุฎู ุนุจุงุฑุชโูุง ุง ุจููฺฉโูุง <code>checked</code> ูุฑุงุฎูุงู ูโุดูุฏ:</p>
<pre class="hljs"><code>Note B = <span class="hljs-keyword">new</span> Note (<span class="hljs-number">2</span>);
Note other = checked (B + <span class="hljs-built_in">int</span>.MaxValue);  <span class="hljs-comment">// ูพุฑุชุงุจ OverflowException</span>
</code></pre>
<hr>
<h3>ุจุงุฑฺฏุฐุงุฑ ุนููฺฏุฑูุง ุจุฑุงุจุฑ ู ููุงุณู โ๏ธ</h3>
<p>ุนููฺฏุฑูุง ุจุฑุงุจุฑ ู ููุงุณู ฺฏุงู ููฺฏุงู ููุดุชู <code>struct</code>ูุง ู ุฏุฑ ููุงุฑุฏ ูุงุฏุฑ ููฺฏุงู ููุดุชู ฺฉูุงุณโูุง ุจุงุฒููุณ ูโุดููุฏ. ููุงูู ู ุงูุฒุงูุงุช ุฎุงุต ุจุฑุง ุจุงุฑฺฏุฐุงุฑ ุงู ุนููฺฏุฑูุง ูุฌูุฏ ุฏุงุฑุฏ ฺฉู ุฏุฑ ูุตู ถ ุชูุถุญ ุฏุงุฏู ุดุฏู ุงุณุช. ุฎูุงุตู ุงู ููุงูู:</p>
<p><strong>ุฌูุชโุจูุฏ (Pairing)</strong><br>
ฺฉุงููพุงูุฑ C# ุงุทููุงู ูโุฏูุฏ ฺฉู ุนููฺฏุฑูุง ููุทู ุฌูุช ุดุฏูุ ูุฑ ุฏู ุชุนุฑู ุดุฏู ุจุงุดูุฏ: <code>(== !=), (&lt; &gt;), (&lt;= &gt;=)</code></p>
<p><strong>Equals ู GetHashCode</strong><br>
ุฏุฑ ุจุดุชุฑ ููุงุฑุฏุ ุงฺฏุฑ <code>==</code> ู <code>!=</code> ุฑุง ุจุงุฑฺฏุฐุงุฑ ูโฺฉูุฏุ ุจุงุฏ ูุชุฏูุง <code>Equals</code> ู <code>GetHashCode</code> ุชุนุฑู ุดุฏู ุฏุฑ <code>object</code> ุฑุง ุจุงุฒููุณ ฺฉูุฏ ุชุง ุฑูุชุงุฑ ูุนูุงุฏุงุฑ ุฏุงุดุชู ุจุงุดุฏ. ุงฺฏุฑ ุงู ฺฉุงุฑ ุฑุง ูฺฉูุฏุ ฺฉุงููพุงูุฑ ูุดุฏุงุฑ ูโุฏูุฏ.</p>
<p><strong>IComparable ู IComparable<T></strong><br>
ุงฺฏุฑ <code>&lt; &gt;</code> ู <code>&lt;= &gt;=</code> ุฑุง ุจุงุฑฺฏุฐุงุฑ ูโฺฉูุฏุ ุจูุชุฑ ุงุณุช <code>IComparable</code> ู <code>IComparable&lt;T&gt;</code> ุฑุง ูพุงุฏูโุณุงุฒ ฺฉูุฏ.</p>
<hr>
<h3>ุชุจุฏูโูุง ุถูู ู ุตุฑุญ ุณูุงุฑุด ๐</h3>
<p>ุชุจุฏูโูุง ุถูู ู ุตุฑุญ ูุฒ ุนููฺฏุฑูุง ูุงุจู ุจุงุฑฺฏุฐุงุฑ ูุณุชูุฏ. ุงู ุชุจุฏูโูุง ูุนูููุงู ุจุฑุง ุณุงุฏู ู ุทุจุน ฺฉุฑุฏู ุชุจุฏู ุจู ููุนโูุง ูุฑุชุจุท (ูุซูุงู ููุนโูุง ุนุฏุฏ) ุงุณุชูุงุฏู ูโุดููุฏ.</p>
<p>ุจุฑุง ุชุจุฏู ุจู ููุนโูุง ฺฉูุชุฑ ูุฑุชุจุทุ ุฑูุดโูุง ุฒุฑ ููุงุณุจโุชุฑ ูุณุชูุฏ:</p>
<ul>
<li>ููุดุชู ฺฉ ุณุงุฒูุฏู ฺฉู ูพุงุฑุงูุชุฑ ุขู ุงุฒ ููุน ูุจุฏุฃ ุจุงุดุฏ.</li>
<li>ููุดุชู ูุชุฏูุง <code>ToXXX</code> ู (static) <code>FromXXX</code> ุจุฑุง ุชุจุฏู ุจู ููุนโูุง.</li>
</ul>
<p>ููุงูโุทูุฑ ฺฉู ุฏุฑ ุจุญุซ ููุนโูุง ุชูุถุญ ุฏุงุฏู ุดุฏุ ุฏูู ุงุตู ุชุจุฏูโูุง ุถูู ุงู ุงุณุช ฺฉู ุชุถูู ูโฺฉููุฏ ุนููุงุช ููููุชโุขูุฒ ุจุงุดุฏ ู ุงุทูุงุนุงุช ุงุฒ ุฏุณุช ูุฑูุฏ. ุฏุฑ ููุงุจูุ ุชุจุฏู ุตุฑุญ ุฒูุงู ูุงุฒู ุงุณุช ฺฉู ุดุฑุงุท ุฒูุงู ุงุฌุฑุง ูุดุฎุต ฺฉูุฏ ุขุง ุชุจุฏู ูููู ุงุณุช ุง ุงุทูุงุนุงุช ููฺฉู ุงุณุช ุงุฒ ุฏุณุช ุจุฑูุฏ.</p>
<p>ูุซุงู ุฒุฑ ุชุจุฏู ุจู ููุน ููุณู <code>Note</code> ู <code>double</code> (ููุงุด ูุฑฺฉุงูุณ ุจุฑ ุญุณุจ ูุฑุชุฒ) ุฑุง ูุดุงู ูโุฏูุฏ:</p>
<pre class="hljs"><code><span class="hljs-comment">// ุชุจุฏู ุจู ูุฑุชุฒ</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">implicit</span> <span class="hljs-keyword">operator</span> <span class="hljs-title">double</span> (<span class="hljs-params">Note x</span>)</span>
    =&gt; <span class="hljs-number">440</span> * Math.Pow(<span class="hljs-number">2</span>, (<span class="hljs-built_in">double</span>)x.<span class="hljs-keyword">value</span> / <span class="hljs-number">12</span>);

<span class="hljs-comment">// ุชุจุฏู ุงุฒ ูุฑุชุฒ (ุฏูู ุชุง ูุฒุฏฺฉโุชุฑู ููโูพุฑุฏู)</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">explicit</span> <span class="hljs-keyword">operator</span> <span class="hljs-title">Note</span> (<span class="hljs-params"><span class="hljs-built_in">double</span> x</span>)</span>
    =&gt; <span class="hljs-keyword">new</span> Note((<span class="hljs-built_in">int</span>)(<span class="hljs-number">0.5</span> + <span class="hljs-number">12</span> * (Math.Log(x/<span class="hljs-number">440</span>) / Math.Log(<span class="hljs-number">2</span>))));
</code></pre>
<pre class="hljs"><code>Note n = (Note)<span class="hljs-number">554.37</span>;  <span class="hljs-comment">// ุชุจุฏู ุตุฑุญ</span>
<span class="hljs-built_in">double</span> x = n;           <span class="hljs-comment">// ุชุจุฏู ุถูู</span>
</code></pre>
<p>ุจุง ุชูุฌู ุจู ุฑุงูููุงโูุง ุฎูุฏุ ุงู ูุซุงู ููฺฉู ุงุณุช ุจูุชุฑ ุจุงุดุฏ ุจุง ูุชุฏ <code>ToFrequency</code> ู ูุชุฏ ุงุณุชุงุชฺฉ <code>FromFrequency</code> ูพุงุฏูโุณุงุฒ ุดูุฏุ ุจู ุฌุง ุงุณุชูุงุฏู ุงุฒ ุนููฺฏุฑูุง ุถูู ู ุตุฑุญ.</p>
<p>ุชุจุฏูโูุง ุณูุงุฑุด ุชูุณุท ุนููฺฏุฑูุง <code>as</code> ู <code>is</code> ูุงุฏุฏู ฺฏุฑูุชู ูโุดููุฏ:</p>
<pre class="hljs"><code>Console.WriteLine(<span class="hljs-number">554.37</span> <span class="hljs-keyword">is</span> Note);   <span class="hljs-comment">// False</span>
Note n = <span class="hljs-number">554.37</span> <span class="hljs-keyword">as</span> Note;             <span class="hljs-comment">// ุฎุทุง</span>
</code></pre>
<h3>ุจุงุฑฺฏุฐุงุฑ ูุฌุฏุฏ ุนููฺฏุฑูุง true ู false โ</h3>
<p>ุนููฺฏุฑูุง <code>true</code> ู <code>false</code> ุจู ูุฏุฑุช ุฏุฑ ููุนโูุง ุจุงุฑฺฏุฐุงุฑ ูโุดููุฏ ฺฉู ุจู ูุญุงุธ ยซุฑูุญยป ุจูู ูุณุชูุฏ ูู ุชุจุฏู ุจู <code>bool</code> ูุฏุงุฑูุฏ. ูููููโ ุขู ููุน ุงุณุช ฺฉู ููุทู ุณูโุญุงูุชู (three-state logic) ุฑุง ูพุงุฏูโุณุงุฒ ูโฺฉูุฏ. ุจุง ุจุงุฑฺฏุฐุงุฑ ุงู ุนููฺฏุฑูุงุ ุงู ููุน ูโุชูุงูุฏ ุจูโุทูุฑ ฺฉูพุงุฑฺู ุจุง ุฏุณุชูุฑุงุช ุดุฑุท ู ุนููฺฏุฑูุง ฺฉุงุฑ ฺฉูุฏุ ูุงููุฏ: <code>if</code>, <code>do</code>, <code>while</code>, <code>for</code>, <code>&amp;&amp;</code>, <code>||</code> ู <code>?:</code>.</p>
<p>ุณุงุฎุชุงุฑ <code>System.Data.SqlTypes.SqlBoolean</code> ุงู ูุงุจูุช ุฑุง ุงุฑุงุฆู ูโุฏูุฏ:</p>
<pre class="hljs"><code>SqlBoolean a = SqlBoolean.Null;
<span class="hljs-keyword">if</span> (a)
    Console.WriteLine(<span class="hljs-string">&quot;True&quot;</span>);
<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (!a)
    Console.WriteLine(<span class="hljs-string">&quot;False&quot;</span>);
<span class="hljs-keyword">else</span>
    Console.WriteLine(<span class="hljs-string">&quot;Null&quot;</span>);
</code></pre>
<p>ุฎุฑูุฌ:</p>
<pre class="hljs"><code>Null
</code></pre>
<p>ฺฉุฏ ุฒุฑ ุจุงุฒูพุงุฏูโุณุงุฒ ุจุฎุดโูุง ููุฑุฏ ูุงุฒ <code>SqlBoolean</code> ุจุฑุง ูุดุงู ุฏุงุฏู ุนููฺฏุฑูุง <code>true</code> ู <code>false</code> ุงุณุช:</p>
<pre class="hljs"><code><span class="hljs-keyword">public</span> <span class="hljs-keyword">struct</span> SqlBoolean
{
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">bool</span> <span class="hljs-keyword">operator</span> <span class="hljs-title">true</span>(<span class="hljs-params">SqlBoolean x</span>)</span>
        =&gt; x.m_value == True.m_value;
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">bool</span> <span class="hljs-keyword">operator</span> <span class="hljs-title">false</span>(<span class="hljs-params">SqlBoolean x</span>)</span>
        =&gt; x.m_value == False.m_value;

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> SqlBoolean <span class="hljs-keyword">operator</span> !(SqlBoolean x)
    {
        <span class="hljs-keyword">if</span> (x.m_value == Null.m_value) <span class="hljs-keyword">return</span> Null;
        <span class="hljs-keyword">if</span> (x.m_value == False.m_value) <span class="hljs-keyword">return</span> True;
        <span class="hljs-keyword">return</span> False;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">readonly</span> SqlBoolean Null = <span class="hljs-keyword">new</span> SqlBoolean(<span class="hljs-number">0</span>);
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">readonly</span> SqlBoolean False = <span class="hljs-keyword">new</span> SqlBoolean(<span class="hljs-number">1</span>);
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">readonly</span> SqlBoolean True = <span class="hljs-keyword">new</span> SqlBoolean(<span class="hljs-number">2</span>);

    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-title">SqlBoolean</span>(<span class="hljs-params"><span class="hljs-built_in">byte</span> <span class="hljs-keyword">value</span></span>)</span> { m_value = <span class="hljs-keyword">value</span>; }
    <span class="hljs-keyword">private</span> <span class="hljs-built_in">byte</span> m_value;
}
</code></pre>
<hr>
<h3>ฺูุฏุฑุฎุช ุงุณุชุง (Static Polymorphism) ๐</h3>
<p>ุฏุฑ ุจุฎุด ยซCalling Static Virtual/Abstract Interface Membersยป ุตูุญู ธฒถุ ูฺฺฏ ูพุดุฑูุชูโุง ูุนุฑู ุดุฏ ฺฉู ุฏุฑ ุขู ฺฉ ุฑุงุจุท (interface) ูโุชูุงูุฏ ุงุนุถุง <code>static virtual</code> ุง <code>static abstract</code> ุชุนุฑู ฺฉูุฏ ฺฉู ุชูุณุท ฺฉูุงุณโูุง ู <code>struct</code>ูุง ุจูโุตูุฑุช ุงุนุถุง ุงุณุชุง ูพุงุฏูโุณุงุฒ ูโุดููุฏ.</p>
<p>ุณูพุณ ุฏุฑ ุจุฎุด ยซGeneric Constraintsยป ุตูุญู ฑถณ ูุดุงู ุฏุงุฏู ุดุฏ ฺฉู ุงุนูุงู ูุญุฏูุฏุช ุฑุงุจุท ุฑู ูพุงุฑุงูุชุฑ ููุนุ ุงูฺฉุงู ุฏุณุชุฑุณ ูุชุฏ ุจู ุงุนุถุง ุขู ุฑุงุจุท ุฑุง ูุฑุงูู ูโฺฉูุฏ. ุฏุฑ ุงู ุจุฎุดุ ูุดุงู ุฎูุงูู ุฏุงุฏ ฺฉู ฺฺฏููู ุงู ูุงุจูุช ฺูุฏุฑุฎุช ุงุณุชุง ุฑุง ููฺฉู ูโุณุงุฒุฏ ู ูฺฺฏโูุง ูุงููุฏ ุฑุงุถุงุช ุนููู (generic math) ุฑุง ูุนุงู ูโฺฉูุฏ.</p>
<p>ุจุฑุง ูููููุ ุฑุงุจุท ุฒุฑ ฺฉ ูุชุฏ ุงุณุชุง ุชุนุฑู ูโฺฉูุฏ ฺฉู ฺฉ ููููู ุชุตุงุฏู ุงุฒ ููุน <code>T</code> ุงุฌุงุฏ ูโฺฉูุฏ:</p>
<pre class="hljs"><code><span class="hljs-keyword">interface</span> <span class="hljs-title">ICreateRandom</span>&lt;<span class="hljs-title">T</span>&gt;
{
    <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">abstract</span> T <span class="hljs-title">CreateRandom</span>()</span>;  <span class="hljs-comment">// ุงุฌุงุฏ ฺฉ ููููู ุชุตุงุฏู ุงุฒ T</span>
}
</code></pre>
<p>ูุฑุถ ฺฉูุฏ ูโุฎูุงูู ุงู ุฑุงุจุท ุฑุง ุฏุฑ ุฑฺฉูุฑุฏ ุฒุฑ ูพุงุฏูโุณุงุฒ ฺฉูู:</p>
<pre class="hljs"><code><span class="hljs-keyword">record</span> <span class="hljs-title">Point</span>(<span class="hljs-title">int</span> <span class="hljs-title">X</span>, <span class="hljs-title">int</span> <span class="hljs-title">Y</span>);
</code></pre>
<p>ุจุง ฺฉูฺฉ ฺฉูุงุณ <code>System.Random</code> (ฺฉู ูุชุฏ <code>Next</code> ุขู ฺฉ ุนุฏุฏ ุตุญุญ ุชุตุงุฏู ุชููุฏ ูโฺฉูุฏ)ุ ูโุชูุงูู ูุชุฏ ุงุณุชุง <code>CreateRandom</code> ุฑุง ุจู ุงู ุตูุฑุช ูพุงุฏูโุณุงุฒ ฺฉูู:</p>
<pre class="hljs"><code><span class="hljs-keyword">record</span> <span class="hljs-title">Point</span>(<span class="hljs-title">int</span> <span class="hljs-title">X</span>, <span class="hljs-title">int</span> <span class="hljs-title">Y</span>) : <span class="hljs-title">ICreateRandom</span>&lt;<span class="hljs-title">Point</span>&gt;
{
    <span class="hljs-keyword">static</span> Random rnd = <span class="hljs-keyword">new</span>();
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Point <span class="hljs-title">CreateRandom</span>()</span> =&gt; <span class="hljs-keyword">new</span> Point(rnd.Next(), rnd.Next());
}
</code></pre>
<p>ุจุฑุง ูุฑุงุฎูุงู ุงู ูุชุฏ ุงุฒ ุทุฑู ุฑุงุจุทุ ุงุฒ ูพุงุฑุงูุชุฑ ููุน ูุญุฏูุฏ ุดุฏู ุงุณุชูุงุฏู ูโฺฉูู. ูุชุฏ ุฒุฑ ฺฉ ุขุฑุงู ุฏุงุฏูโ ุชุณุช ุจุง ุงู ุฑูุด ุงุฌุงุฏ ูโฺฉูุฏ:</p>
<pre class="hljs"><code><span class="hljs-function">T[] <span class="hljs-title">CreateTestData</span>&lt;<span class="hljs-title">T</span>&gt;(<span class="hljs-params"><span class="hljs-built_in">int</span> count</span>) <span class="hljs-keyword">where</span> T : ICreateRandom&lt;T&gt;</span>
{
    T[] result = <span class="hljs-keyword">new</span> T[count];
    <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>; i &lt; count; i++)
        result[i] = T.CreateRandom();
    <span class="hljs-keyword">return</span> result;
}
</code></pre>
<p>ูุซุงู ุงุณุชูุงุฏู:</p>
<pre class="hljs"><code>Point[] testData = CreateTestData&lt;Point&gt;(<span class="hljs-number">50</span>);  <span class="hljs-comment">// ุงุฌุงุฏ ตฐ ููุทู ุชุตุงุฏู</span>
</code></pre>
<p>ูุฑุงุฎูุงู ูุชุฏ ุงุณุชุง <code>CreateRandom</code> ุฏุฑ <code>CreateTestData</code> ฺูุฏุฑุฎุช ุงุณุชุ ุฒุฑุง ููโุชููุง ุจุง <code>Point</code> ุจูฺฉู ุจุง ูุฑ ููุน ฺฉู <code>ICreateRandom&lt;T&gt;</code> ุฑุง ูพุงุฏูโุณุงุฒ ฺฉุฑุฏู ุจุงุดุฏุ ฺฉุงุฑ ูโฺฉูุฏ. ุงู ุจุง ฺูุฏุฑุฎุช ูููููโุง ูุชูุงูุช ุงุณุชุ ุฒุฑุง ุจุฑุง ูุฑุงุฎูุงู <code>CreateRandom</code> ูุงุฒ ุจู ูููููโุง ุงุฒ <code>ICreateRandom&lt;T&gt;</code> ูุฏุงุฑูุ ุจูฺฉู ุขู ุฑุง ุฑู ููุน ุฎูุฏ ูุฑุงุฎูุงู ูโฺฉูู.</p>
<hr>
<h3>ุนููฺฏุฑูุง ฺูุฏุฑุฎุช (Polymorphic Operators) โก</h3>
<p>ุงุฒ ุขูุฌุง ฺฉู ุนููฺฏุฑูุง ุงุณุงุณุงู ุชูุงุจุน ุงุณุชุง ูุณุชูุฏ (ุตูุญู ฒตถ)ุ ูโุชูุงู ุขูโูุง ุฑุง ูุฒ ุจูโุนููุงู ุงุนุถุง ุงุณุชุงุ ูุฌุงุฒ ุง ุฑุงุจุท ุชุนุฑู ฺฉุฑุฏ:</p>
<pre class="hljs"><code><span class="hljs-keyword">interface</span> <span class="hljs-title">IAddable</span>&lt;<span class="hljs-title">T</span>&gt; <span class="hljs-keyword">where</span> <span class="hljs-title">T</span> : <span class="hljs-title">IAddable</span>&lt;<span class="hljs-title">T</span>&gt;
{
    <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">static</span> T <span class="hljs-keyword">operator</span> + (T left, T right);
}
</code></pre>
<p>ูุญุฏูุฏุช ููุน ุฎูุฏุงุฑุฌุงุน (self-referencing type constraint) ุฏุฑ ุงู ุชุนุฑู ุฑุงุจุท ุจุฑุง ุฑุนุงุช ููุงูู ฺฉุงููพุงูุฑ ุฏุฑ ุจุงุฑฺฏุฐุงุฑ ุนููฺฏุฑ ุถุฑูุฑ ุงุณุช. ุจู ุฎุงุทุฑ ุจุงูุฑุฏ ฺฉู ููฺฏุงู ุชุนุฑู ุชุงุจุน ุนููฺฏุฑุ ุญุฏุงูู ฺฉ ุงุฒ ุนููููุฏูุง ุจุงุฏ ุงุฒ ููุน ุจุงุดุฏ ฺฉู ุชุงุจุน ุฏุฑ ุขู ุชุนุฑู ุดุฏู ุงุณุช. ุฏุฑ ุงู ูุซุงูุ ุนููููุฏูุง ุงุฒ ููุน <code>T</code> ูุณุชูุฏุ ุฏุฑ ุญุงู ฺฉู ููุน ุดุงูู <code>IAddable&lt;T&gt;</code> ุงุณุชุ ุจูุงุจุฑุงู ูุงุฒ ุจู ูุญุฏูุฏุช ููุน ุฎูุฏุงุฑุฌุงุน ุฏุงุฑู ุชุง <code>T</code> ุจุชูุงูุฏ ุจูโุนููุงู <code>IAddable&lt;T&gt;</code> ุฏุฑ ูุธุฑ ฺฏุฑูุชู ุดูุฏ.</p>
<p>ูพุงุฏูโุณุงุฒ ุฑุงุจุท ุจู ุงู ุตูุฑุช ุงุณุช:</p>
<pre class="hljs"><code><span class="hljs-keyword">record</span> <span class="hljs-title">Point</span>(<span class="hljs-title">int</span> <span class="hljs-title">X</span>, <span class="hljs-title">int</span> <span class="hljs-title">Y</span>) : <span class="hljs-title">IAddable</span>&lt;<span class="hljs-title">Point</span>&gt;
{
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Point <span class="hljs-keyword">operator</span> + (Point left, Point right) =&gt;
        <span class="hljs-keyword">new</span> Point(left.X + right.X, left.Y + right.Y);
}
</code></pre>
<p>ุจุง ูพุงุฑุงูุชุฑ ููุน ูุญุฏูุฏ ุดุฏูุ ูโุชูุงูู ูุชุฏ ุจููุณู ฺฉู ุนููฺฏุฑ ุฌูุน ุฑุง ุจูโุตูุฑุช ฺูุฏุฑุฎุช ูุฑุงุฎูุงู ฺฉูุฏ:</p>
<pre class="hljs"><code><span class="hljs-function">T <span class="hljs-title">Sum</span>&lt;<span class="hljs-title">T</span>&gt;(<span class="hljs-params"><span class="hljs-keyword">params</span> T[] values</span>) <span class="hljs-keyword">where</span> T : IAddable&lt;T&gt;</span>
{
    T total = values[<span class="hljs-number">0</span>];
    <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = <span class="hljs-number">1</span>; i &lt; values.Length; i++)
        total += values[i];
    <span class="hljs-keyword">return</span> total;
}
</code></pre>
<p>ูุฑุงุฎูุงู ุนููฺฏุฑ <code>+</code> (ุงุฒ ุทุฑู <code>+=</code>) ฺูุฏุฑุฎุช ุงุณุชุ ุฒุฑุง ุจู <code>IAddable&lt;T&gt;</code> ูุชุตู ูโุดูุฏุ ูู <code>Point</code>. ุจูุงุจุฑุงู ูุชุฏ <code>Sum</code> ุจุง ุชูุงู ููุนโูุง ฺฉู <code>IAddable&lt;T&gt;</code> ุฑุง ูพุงุฏูโุณุงุฒ ฺฉุฑุฏูโุงูุฏ ฺฉุงุฑ ูโฺฉูุฏ.</p>
<p>ุงูุจุชูุ ุฑุงุจุท ูุงููุฏ <code>IAddable&lt;T&gt;</code> ุฒูุงู ููุฏุชุฑ ุงุณุช ฺฉู ุฏุฑ runtime ุฏุงุชโูุช ุชุนุฑู ุดูุฏ ู ููู ููุนโูุง ุนุฏุฏ .NET ุขู ุฑุง ูพุงุฏูโุณุงุฒ ฺฉููุฏ. ุฎูุดุจุฎุชุงูู ุงุฒ .NET 7ุ ูุถุง ูุงู <code>System.Numerics</code> ูุณุฎูโุง ูพุดุฑูุชูโุชุฑ ุงุฒ <code>IAddable</code> ุฑุง ููุฑุงู ุจุง ุณุงุฑ ุฑุงุจุทโูุง ุฑุงุถ ุงุฑุงุฆู ูโุฏูุฏโฺฉู ุจุดุชุฑ ุขูโูุง ุชุญุช ูพูุดุด <code>INumber&lt;TSelf&gt;</code> ูุณุชูุฏ.</p>
<h3>ุฑุงุถุงุช ุนููู (Generic Math) โ</h3>
<p>ูุจู ุงุฒ .NET 7ุ ฺฉุฏ ฺฉู ุนููุงุช ุญุณุงุจ ุงูุฌุงู ูโุฏุงุฏุ ุจุงุฏ ุจุฑุง ฺฉ ููุน ุนุฏุฏ ูุดุฎุต ููุดุชู ูโุดุฏ:</p>
<pre class="hljs"><code><span class="hljs-function"><span class="hljs-built_in">int</span> <span class="hljs-title">Sum</span>(<span class="hljs-params"><span class="hljs-keyword">params</span> <span class="hljs-built_in">int</span>[] numbers</span>)   <span class="hljs-comment">// ููุท ุจุง int ฺฉุงุฑ ูโฺฉูุฏ</span></span>
{
    <span class="hljs-comment">// ุจุง doubleุ decimal ู ุบุฑู ฺฉุงุฑ ููโฺฉูุฏ</span>
    <span class="hljs-built_in">int</span> total = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">foreach</span> (<span class="hljs-built_in">int</span> n <span class="hljs-keyword">in</span> numbers)
        total += n;
    <span class="hljs-keyword">return</span> total;
}
</code></pre>
<p>ุฏุฑ .NET 7ุ ุฑุงุจุท <code>INumber&lt;TSelf&gt;</code> ูุนุฑู ุดุฏ ุชุง ุนููุงุช ุญุณุงุจ ุฑุง ุฏุฑ ุชูุงู ููุนโูุง ุนุฏุฏ ฺฉูพุงุฑฺู ฺฉูุฏ. ุงู ุนู ุญุงูุง ูโุชูุงู ูุณุฎูโ ุนููู (generic) ูุชุฏ ุจุงูุง ุฑุง ููุดุช:</p>
<pre class="hljs"><code><span class="hljs-function">T <span class="hljs-title">Sum</span>&lt;<span class="hljs-title">T</span>&gt;(<span class="hljs-params"><span class="hljs-keyword">params</span> T[] numbers</span>) <span class="hljs-keyword">where</span> T : INumber&lt;T&gt;</span>
{
    T total = T.Zero;
    <span class="hljs-keyword">foreach</span> (T n <span class="hljs-keyword">in</span> numbers)
        total += n;  <span class="hljs-comment">// ุนููฺฏุฑ ุฌูุน ุจุฑุง ูุฑ ููุน ุนุฏุฏ ูุฑุงุฎูุงู ูโุดูุฏ</span>
    <span class="hljs-keyword">return</span> total;
}

<span class="hljs-built_in">int</span> intSum = Sum(<span class="hljs-number">3</span>, <span class="hljs-number">5</span>, <span class="hljs-number">7</span>);
<span class="hljs-built_in">double</span> doubleSum = Sum(<span class="hljs-number">3.2</span>, <span class="hljs-number">5.3</span>, <span class="hljs-number">7.1</span>);
<span class="hljs-built_in">decimal</span> decimalSum = Sum(<span class="hljs-number">3.2</span>m, <span class="hljs-number">5.3</span>m, <span class="hljs-number">7.1</span>m);
</code></pre>
<p>ุชูุงู ููุนโูุง ุนุฏุฏ ุตุญุญ ู ุงุนุดุงุฑ ุฏุฑ .NET (ู ููฺูู <code>char</code>) ุฑุงุจุท <code>INumber&lt;TSelf&gt;</code> ุฑุง ูพุงุฏูโุณุงุฒ ูโฺฉููุฏ. ุงู ุฑุงุจุท ุฑุง ูโุชูุงู ุจูโุนููุงู ฺฉ ุฑุงุจุท ฺฉู (umbrella interface) ุชุตูุฑ ฺฉุฑุฏ ฺฉู ุดุงูู ุฑุงุจุทโูุง ุฌุฒุฆโุชุฑ ุจุฑุง ูุฑ ููุน ุนููุงุช ุญุณุงุจ (ุฌูุนุ ุชูุฑูุ ุถุฑุจุ ุชูุณูุ ุจุงูโูุงูุฏูุ ููุงุณู ู ุบุฑู) ู ููฺูู ุฑุงุจุทโูุง ุจุฑุง ูพุงุฑุณูฺฏ ู ูุงูุจโุจูุฏ ุงุณุช.</p>
<p>ูุซุงู ุงุฒ ฺูู ุฑุงุจุท:</p>
<pre class="hljs"><code><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title">IAdditionOperators</span>&lt;<span class="hljs-title">TSelf</span>, <span class="hljs-title">TOther</span>, <span class="hljs-title">TResult</span>&gt;
    <span class="hljs-keyword">where</span> <span class="hljs-title">TSelf</span> : <span class="hljs-title">IAdditionOperators</span>&lt;<span class="hljs-title">TSelf</span>, <span class="hljs-title">TOther</span>, <span class="hljs-title">TResult</span>&gt;?
{
    <span class="hljs-keyword">static</span> <span class="hljs-keyword">abstract</span> TResult <span class="hljs-keyword">operator</span> + (TSelf left, TOther right);
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">virtual</span> TResult <span class="hljs-keyword">operator</span> checked + 
        (TSelf left, TOther right) =&gt; left + right;  <span class="hljs-comment">// ูุฑุงุฎูุงู ุนููฺฏุฑ ุจุงูุง</span>
}
</code></pre>
<p>ุนููฺฏุฑ ุงุณุชุง ู ุงูุชุฒุงุน <code>+</code> ููุงู ฺุฒ ุงุณุช ฺฉู ุจุงุนุซ ูโุดูุฏ ุนููฺฏุฑ <code>+=</code> ุฏุงุฎู ูุชุฏ <code>Sum</code> ฺฉุงุฑ ฺฉูุฏ. ููฺูู ุชูุฌู ฺฉูุฏ ฺฉู ุงุณุชูุงุฏู ุงุฒ <code>static virtual</code> ุฑู ุนููฺฏุฑ <code>checked</code>ุ ุฑูุชุงุฑ ูพุดโูุฑุถ ุจุฑุง ูพุงุฏูโุณุงุฒุงู ฺฉู ูุณุฎูโ <code>checked</code> ุนููฺฏุฑ ุฌูุน ุฑุง ุงุฑุงุฆู ููโฺฉููุฏุ ูุฑุงูู ูโฺฉูุฏ.</p>
<p>ูุถุง ูุงู <code>System.Numerics</code> ููฺูู ุดุงูู ุฑุงุจุทโูุง ุงุณุช ฺฉู ุจุฎุด ุงุฒ <code>INumber</code> ูุณุชูุฏ ู ูุฎุตูุต ุนููุงุช ููุนโูุง ุฎุงุต ุงุฒ ุงุนุฏุงุฏ (ูุซู ุงุนุฏุงุฏ ุงุนุดุงุฑ) ูุณุชูุฏ.</p>
<p>ุจูโุนููุงู ูุซุงูุ ุจุฑุง ูุญุงุณุจูโ <strong>ูุงูฺฏู ูุฑุจุนุงุช (Root Mean Square)</strong> ูโุชูุงูู ุฑุงุจุท <code>IRootFunctions&lt;T&gt;</code> ุฑุง ุจู ููุฑุณุช ูุญุฏูุฏุชโูุง ุงุถุงูู ฺฉูู ุชุง ูุชุฏ ุงุณุชุง <code>RootN</code> ุขู ุจุฑุง <code>T</code> ุฏุฑ ุฏุณุชุฑุณ ุจุงุดุฏ:</p>
<pre class="hljs"><code><span class="hljs-function">T <span class="hljs-title">RMS</span>&lt;<span class="hljs-title">T</span>&gt;(<span class="hljs-params"><span class="hljs-keyword">params</span> T[] values</span>) <span class="hljs-keyword">where</span> T : INumber&lt;T&gt;, IRootFunctions&lt;T&gt;</span>
{
    T total = T.Zero;
    <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>; i &lt; values.Length; i++)
        total += values[i] * values[i];

    <span class="hljs-comment">// ุงุณุชูุงุฏู ุงุฒ T.CreateChecked ุจุฑุง ุชุจุฏู values.Length (ููุน int) ุจู T</span>
    T count = T.CreateChecked(values.Length);
    <span class="hljs-keyword">return</span> T.RootN(total / count, <span class="hljs-number">2</span>);  <span class="hljs-comment">// ูุญุงุณุจู ุฑุดู ุฏูู (ูุฑุจุน)</span>
}
</code></pre>
<hr>
<h3>ฺฉุฏ ูุงุงูู ู ุงุดุงุฑูโฺฏุฑูุง (Unsafe Code and Pointers) โ๏ธ</h3>
<p>C# ุงูฺฉุงู ุฏุณุชุฑุณ ูุณุชูู ุจู ุญุงูุธู ุฑุง ุงุฒ ุทุฑู ุงุดุงุฑูโฺฏุฑูุง ุฏุฑ ุจููฺฉโูุง ฺฉุฏ <code>unsafe</code> ูุฑุงูู ูโฺฉูุฏ. ููุนโูุง ุงุดุงุฑูโฺฏุฑ ุจุฑุง ุชุนุงูู ุจุง APIูุง ุจูู (native)ุ ุฏุณุชุฑุณ ุจู ุญุงูุธู ุฎุงุฑุฌ ุงุฒ heap ูุฏุฑุชโุดุฏูุ ู ูพุงุฏูโุณุงุฒ ุจูููโุณุงุฒโูุง ฺฉูฺฺฉ ุฏุฑ ููุงุท ุญุณุงุณ ุนููฺฉุฑุฏ ููุฏ ูุณุชูุฏ.</p>
<p>ูพุฑูฺูโูุง ฺฉู ุดุงูู ฺฉุฏ ูุงุงูู ูุณุชูุฏุ ุจุงุฏ ุฏุฑ ูุงู ูพุฑูฺู <code>&lt;AllowUnsafeBlocks&gt;true&lt;/AllowUnsafeBlocks&gt;</code> ุฑุง ูุดุฎุต ฺฉููุฏ.</p>
<h4>ุงุตูู ุงููู ุงุดุงุฑูโฺฏุฑูุง (Pointer Basics)</h4>
<p>ุจุฑุง ูุฑ ููุน ููุฏุงุฑ ุง ูุฑุฌุน <code>V</code>ุ ููุน ุงุดุงุฑูโฺฏุฑ ูุชูุงุธุฑ <code>V*</code> ูุฌูุฏ ุฏุงุฑุฏ. ฺฉ ููููู ุงุฒ ุงุดุงุฑูโฺฏุฑ ุขุฏุฑุณ ฺฉ ูุชุบุฑ ุฑุง ูฺฏู ูโุฏุงุฑุฏ. ููุนโูุง ุงุดุงุฑูโฺฏุฑ ูโุชูุงููุฏ ุจู ุตูุฑุช ูุงุงูู ุจู ูุฑ ููุน ุงุดุงุฑูโฺฏุฑ ุฏฺฏุฑ ุชุจุฏู (cast) ุดููุฏ.</p>
<p>ุนููฺฏุฑูุง ุงุตู ุงุดุงุฑูโฺฏุฑ ุนุจุงุฑุชโุงูุฏ ุงุฒ:</p>
<div align="center">
<p><img src="../../../assets/image/04/Table-4-2.jpeg" alt="Conventions-UsedThis-Book"></p>
</div>
<h3>ฺฉุฏ ูุงุงูู ู ุงุดุงุฑูโฺฏุฑูุง (ุงุฏุงูู) โก</h3>
<p>ููุงููุฏ ุฒุจุงู Cุ ุงุถุงูู ฺฉุฑุฏู (ุง ฺฉู ฺฉุฑุฏู) ฺฉ ุขูุณุช ุนุฏุฏ ุตุญุญ ุจู ฺฉ ุงุดุงุฑูโฺฏุฑุ ฺฉ ุงุดุงุฑูโฺฏุฑ ุฏฺฏุฑ ุชููุฏ ูโฺฉูุฏ. ฺฉู ฺฉุฑุฏู ฺฉ ุงุดุงุฑูโฺฏุฑ ุงุฒ ุฏฺฏุฑ ฺฉ ุนุฏุฏ ุตุญุญ ถด ุจุช ุชููุฏ ูโฺฉูุฏ (ุฏุฑ ูุฑ ุฏู ูพูุชูุฑู ณฒ ู ถด ุจุช).</p>
<hr>
<h3>ฺฉุฏ ูุงุงูู (Unsafe Code) ๐ก๏ธ</h3>
<p>ุจุง ุนูุงูุชโฺฏุฐุงุฑ ฺฉ ููุนุ ุนุถู ููุนุ ุง ุจููฺฉ ุฏุณุชูุฑ ุจุง ฺฉูุฏูุงฺู <code>unsafe</code>ุ ุงุฌุงุฒู ุฏุงุฑุฏ ุงุฒ ููุนโูุง ุงุดุงุฑูโฺฏุฑ ุงุณุชูุงุฏู ฺฉูุฏ ู ุนููุงุช ุงุดุงุฑูโฺฏุฑ ุจู ุณุจฺฉ C ุฑู ุญุงูุธู ุงูุฌุงู ุฏูุฏ. ูุซุงู ุฒุฑ ุงุณุชูุงุฏู ุงุฒ ุงุดุงุฑูโฺฏุฑูุง ุจุฑุง ูพุฑุฏุงุฒุด ุณุฑุน ฺฉ ุจุชโููพ ุฑุง ูุดุงู ูโุฏูุฏ:</p>
<pre class="hljs"><code><span class="hljs-function"><span class="hljs-keyword">unsafe</span> <span class="hljs-keyword">void</span> <span class="hljs-title">BlueFilter</span>(<span class="hljs-params"><span class="hljs-built_in">int</span>[,] bitmap</span>)</span>
{
    <span class="hljs-built_in">int</span> length = bitmap.Length;
    <span class="hljs-keyword">fixed</span> (<span class="hljs-built_in">int</span>* b = bitmap)
    {
        <span class="hljs-built_in">int</span>* p = b;
        <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>; i &lt; length; i++)
            *p++ &amp;= <span class="hljs-number">0xFF</span>;
    }
}
</code></pre>
<p>ฺฉุฏ ูุงุงูู ูโุชูุงูุฏ ุณุฑุนโุชุฑ ุงุฒ ูพุงุฏูโุณุงุฒ ุงูู ูุดุงุจู ุงุฌุฑุง ุดูุฏ. ุฏุฑ ุงู ูุซุงูุ ูุณุฎู ุงูู ูุงุฒ ุจู ุญูููโ ุชู ุฏุฑ ุชู ุจุง ุงูุฏุณโุฏู ุขุฑุงู ู ุจุฑุฑุณ ุญุฏูุฏ ุฏุงุดุช. ููฺููุ ูุชุฏ ูุงุงูู C# ูโุชูุงูุฏ ุณุฑุนโุชุฑ ุงุฒ ูุฑุงุฎูุงู ฺฉ ุชุงุจุน C ุฎุงุฑุฌ ุจุงุดุฏุ ฺูู ุณุฑุจุงุฑ ุชุฑฺฉ ูุญุท ุงุฌุฑุง ูุฏุฑุชโุดุฏู ูุฌูุฏ ูุฏุงุฑุฏ.</p>
<hr>
<h3>ุฏุณุชูุฑ fixed ๐</h3>
<p>ุฏุณุชูุฑ <code>fixed</code> ุจุฑุง <strong>ุณูุฌุงู ฺฉุฑุฏู (pin)</strong> ฺฉ ุด ูุฏุฑุชโุดุฏู ูุงููุฏ ุจุชโููพ ุงุณุชูุงุฏู ูโุดูุฏ. ุฏุฑ ุทูู ุงุฌุฑุง ุจุฑูุงููุ ุจุณุงุฑ ุงุฒ ุงุดุง ุงุฒ heap ุชุฎุตุต ู ุขุฒุงุฏ ูโุดููุฏ. ุจุฑุง ุฌููฺฏุฑ ุงุฒ ูุฏุฑุฑูุช ุง ุชฺฉูโุชฺฉู ุดุฏู ุญุงูุธูุ ุฌูุนโุขูุฑูุฏู ุฒุจุงูู (GC) ุงุดุง ุฑุง ุฌุงุจูโุฌุง ูโฺฉูุฏ. ุงฺฏุฑ ุขุฏุฑุณ ฺฉ ุด ุชุบุฑ ฺฉูุฏุ ุงุดุงุฑู ุจู ุขู ุจโูุงุฏู ุงุณุชุ ุจูุงุจุฑุงู <code>fixed</code> ุจู GC ูโฺฏูุฏ ุด ุฑุง ุฌุงุจูโุฌุง ูฺฉูุฏ. ุงุณุชูุงุฏู ุจุด ุงุฒ ุญุฏ ุงุฒ ุจููฺฉโูุง <code>fixed</code> ูโุชูุงูุฏ ุฑู ฺฉุงุฑุง ุฒูุงู ุงุฌุฑุง ุชุงุซุฑ ุจฺฏุฐุงุฑุฏุ ุจูุงุจุฑุงู ุจูุชุฑ ุงุณุช ุงุฒ ุขูโูุง ฺฉูุชุงู ุงุณุชูุงุฏู ฺฉูุฏ ู ุงุฒ ุชุฎุตุต ุญุงูุธู ุฏุฑูู ุจููฺฉ <code>fixed</code> ุฎูุฏุฏุงุฑ ฺฉูุฏ.</p>
<p>ุฏุฑูู ุฏุณุชูุฑ <code>fixed</code>ุ ูโุชูุงูุฏ ฺฉ ุงุดุงุฑูโฺฏุฑ ุจู ูุฑ ููุน ููุฏุงุฑุ ุขุฑุงูโุง ุงุฒ ููุนโูุง ููุฏุงุฑุ ุง ุฑุดุชู ุฏุฑุงูุช ฺฉูุฏ. ุฏุฑ ููุฑุฏ ุขุฑุงูโูุง ู ุฑุดุชูโูุงุ ุงุดุงุฑูโฺฏุฑ ุฏุฑ ูุงูุน ุจู ุงููู ุนูุตุฑ ุงุดุงุฑู ูโฺฉูุฏ ฺฉู ุงุฒ ููุน ููุฏุงุฑ ุงุณุช.</p>
<p>ูููููโุง ุงุฒ ุณูุฌุงู ฺฉุฑุฏู ููุน ููุฏุงุฑ ุฏุงุฎู ููุน ูุฑุฌุน:</p>
<pre class="hljs"><code>Test test = <span class="hljs-keyword">new</span> Test();
<span class="hljs-keyword">unsafe</span>
{
    <span class="hljs-keyword">fixed</span> (<span class="hljs-built_in">int</span>* p = &amp;test.X)   <span class="hljs-comment">// ุณูุฌุงู ฺฉุฑุฏู test</span>
    {
        *p = <span class="hljs-number">9</span>;
    }
}
Console.WriteLine(test.X);

<span class="hljs-keyword">class</span> <span class="hljs-title">Test</span> { <span class="hljs-keyword">public</span> <span class="hljs-built_in">int</span> X; }
</code></pre>
<p>ุชูุถุญุงุช ุจุดุชุฑ ุฏุฑุจุงุฑูโ <code>fixed</code> ุฏุฑ ุจุฎุด ยซMapping a Struct to Unmanaged Memoryยป ุตูุญู นนท ุขูุฏู ุงุณุช.</p>
<hr>
<h3>ุนููฺฏุฑ ุงุดุงุฑูโฺฏุฑ ุจู ุนุถู (Pointer-to-Member Operator) ๐</h3>
<p>ุนูุงูู ุจุฑ ุนููฺฏุฑูุง <code>&amp;</code> ู <code>*</code>ุ C# ุนููฺฏุฑ ุณุจฺฉ C++ ุนู <code>-&gt;</code> ุฑุง ูุฒ ุงุฑุงุฆู ูโุฏูุฏ ฺฉู ูโุชูุงู ุงุฒ ุขู ุฑู <code>struct</code>ูุง ุงุณุชูุงุฏู ฺฉุฑุฏ:</p>
<pre class="hljs"><code>Test test = <span class="hljs-keyword">new</span> Test();
<span class="hljs-keyword">unsafe</span>
{
    Test* p = &amp;test;
    p-&gt;X = <span class="hljs-number">9</span>;
    System.Console.WriteLine(test.X);
}
<span class="hljs-keyword">struct</span> Test { <span class="hljs-keyword">public</span> <span class="hljs-built_in">int</span> X; }
</code></pre>
<hr>
<h3>ฺฉูุฏูุงฺู stackalloc ๐</h3>
<p>ุจุง ุงุณุชูุงุฏู ุงุฒ <code>stackalloc</code> ูโุชูุงูุฏ ุญุงูุธูโุง ุฑุง ุจูโุทูุฑ ูุณุชูู ุฏุฑ <strong>ุงุณุชฺฉ</strong> ุงุฎุชุตุงุต ุฏูุฏ. ฺูู ุฑู ุงุณุชฺฉ ุชุฎุตุต ูโุงุจุฏุ ุทูู ุนูุฑ ุขู ูุญุฏูุฏ ุจู ุงุฌุฑุง ูุชุฏ ุงุณุชุ ููุงููุฏ ูุชุบุฑูุง ูุญู ุฏฺฏุฑ ฺฉู ุชูุณุท lambdaุ iterator ุง ูุชุฏ async ุงูุฒุงุด ุทูู ุนูุฑ ูุงูุชูโุงูุฏ. ุจููฺฉ ูโุชูุงูุฏ ุงุฒ ุนููฺฏุฑ <code>[]</code> ุจุฑุง ุฏุณุชุฑุณ ุจู ุญุงูุธู ุงุณุชูุงุฏู ฺฉูุฏ:</p>
<pre class="hljs"><code><span class="hljs-built_in">int</span>* a = <span class="hljs-keyword">stackalloc</span> <span class="hljs-built_in">int</span>[<span class="hljs-number">10</span>];
<span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; ++i)
    Console.WriteLine(a[i]);
</code></pre>
<p>ุฏุฑ ูุตู ฒณุ ูุดุงู ุฏุงุฏู ูโุดูุฏ ฺฺฏููู ูโุชูุงู ุจุง <code>Span&lt;T&gt;</code> ุญุงูุธู ุงุฎุชุตุงุตโุงูุชู ุฑู ุงุณุชฺฉ ุฑุง ุจุฏูู ุงุณุชูุงุฏู ุงุฒ <code>unsafe</code> ูุฏุฑุช ฺฉุฑุฏ:</p>
<pre class="hljs"><code>Span&lt;<span class="hljs-built_in">int</span>&gt; a = <span class="hljs-keyword">stackalloc</span> <span class="hljs-built_in">int</span>[<span class="hljs-number">10</span>];
<span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; ++i)
    Console.WriteLine(a[i]);
</code></pre>
<hr>
<h3>ุจุงูุฑูุง ุจุง ุงูุฏุงุฒู ุซุงุจุช (Fixed-Size Buffers) ๐งฑ</h3>
<p>ฺฉูุฏูุงฺู <code>fixed</code> ฺฉุงุฑุจุฑุฏ ุฏฺฏุฑ ูุฒ ุฏุงุฑุฏ: ุงุฌุงุฏ ุจุงูุฑูุง ุจุง ุงูุฏุงุฒู ุซุงุจุช ุฏุฑูู <code>struct</code>ูุง (ููุฏ ุจุฑุง ูุฑุงุฎูุงู ุชูุงุจุน unmanagedุ ูุตู ฒด).</p>
<pre class="hljs"><code><span class="hljs-keyword">unsafe</span> <span class="hljs-keyword">struct</span> UnsafeUnicodeString
{
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">short</span> Length;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">fixed</span> <span class="hljs-built_in">byte</span> Buffer[<span class="hljs-number">30</span>];   <span class="hljs-comment">// ุชุฎุตุต ณฐ ุจุงุช</span>
}

<span class="hljs-keyword">unsafe</span> <span class="hljs-keyword">class</span> <span class="hljs-title">UnsafeClass</span>
{
    UnsafeUnicodeString uus;

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">UnsafeClass</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> s</span>)</span>
    {
        uus.Length = (<span class="hljs-built_in">short</span>)s.Length;
        <span class="hljs-keyword">fixed</span> (<span class="hljs-built_in">byte</span>* p = uus.Buffer)
            <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>; i &lt; s.Length; i++)
                p[i] = (<span class="hljs-built_in">byte</span>)s[i];
    }
}

<span class="hljs-keyword">new</span> UnsafeClass(<span class="hljs-string">&quot;Christian Troy&quot;</span>);
</code></pre>
<p>ูฺฉุงุช ููู:</p>
<ul>
<li>ุจุงูุฑูุง ุจุง ุงูุฏุงุฒู ุซุงุจุช ุขุฑุงู ูุณุชูุฏุ ุงฺฏุฑ <code>Buffer</code> ุขุฑุงู ุจูุฏุ ุดุงูู ูุฑุฌุน ุจู ุดุก ุฑู heap ูุฏุฑุชโุดุฏู ูโุดุฏุ ูู ณฐ ุจุงุช ุฏุงุฎู ุฎูุฏ <code>struct</code>.</li>
<li>ฺฉูุฏูุงฺู <code>fixed</code> ุฏุฑ ุงู ูุซุงู ููฺูู ุดุก ุฑู heap (ููููู <code>UnsafeClass</code>) ุฑุง ุณูุฌุงู ูโฺฉูุฏ. ุจูุงุจุฑุงู <code>fixed</code> ุฏู ูุนูุง ุฏุงุฑุฏ: <strong>ุซุงุจุช ุฏุฑ ุงูุฏุงุฒู</strong> ู <strong>ุซุงุจุช ุฏุฑ ูฺฉุงู</strong>. ุงุบูุจ ุจุง ูู ุงุณุชูุงุฏู ูโุดููุฏุ ุฒุฑุง ฺฉ ุจุงูุฑ ุจุง ุงูุฏุงุฒู ุซุงุจุช ุจุงุฏ ุฏุฑ ูฺฉุงู ุซุงุจุช ุจุงุดุฏ ุชุง ูุงุจู ุงุณุชูุงุฏู ุจุงุดุฏ.</li>
</ul>
<h3>ุงุดุงุฑูโฺฏุฑ void (<code>void*</code>) ๐น</h3>
<p>ฺฉ <strong>ุงุดุงุฑูโฺฏุฑ void</strong> (<code>void*</code>) ูฺ ูุฑุถ ุฏุฑุจุงุฑู ููุน ุฏุงุฏู ูพุงู ูุฏุงุฑุฏ ู ุจุฑุง ุชูุงุจุน ฺฉู ุจุง ุญุงูุธู ุฎุงู ฺฉุงุฑ ูโฺฉููุฏ ููุฏ ุงุณุช. ุชุจุฏู ุถูู ุงุฒ ูุฑ ููุน ุงุดุงุฑูโฺฏุฑ ุจู <code>void*</code> ูุฌูุฏ ุฏุงุฑุฏ.</p>
<p>ูฺฉุงุช ููู:</p>
<ul>
<li>ฺฉ <code>void*</code> ูุงุจู <strong>ุฏุณุชุฑุณ ูุณุชูู (dereference)</strong> ูุณุช.</li>
<li>ุนููุงุช ุญุณุงุจ ุฑู ุงุดุงุฑูโฺฏุฑูุง void ุงูฺฉุงูโูพุฐุฑ ูุณุช.</li>
</ul>
<p>ูุซุงู:</p>
<pre class="hljs"><code><span class="hljs-built_in">short</span>[] a = { <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">5</span>, <span class="hljs-number">8</span>, <span class="hljs-number">13</span>, <span class="hljs-number">21</span>, <span class="hljs-number">34</span>, <span class="hljs-number">55</span> };
<span class="hljs-keyword">unsafe</span>
{
    <span class="hljs-keyword">fixed</span> (<span class="hljs-built_in">short</span>* p = a)
    {
        <span class="hljs-comment">// sizeof ุงูุฏุงุฒู ููุน ููุฏุงุฑ ุฑุง ุจุฑุญุณุจ ุจุงุช ุจุฑูโฺฏุฑุฏุงูุฏ</span>
        Zap(p, a.Length * <span class="hljs-keyword">sizeof</span>(<span class="hljs-built_in">short</span>));
    }
}

<span class="hljs-keyword">foreach</span> (<span class="hljs-built_in">short</span> x <span class="hljs-keyword">in</span> a)
    Console.WriteLine(x);   <span class="hljs-comment">// ููู ููุงุฏุฑ ุตูุฑ ฺุงูพ ูโุดููุฏ</span>

<span class="hljs-function"><span class="hljs-keyword">unsafe</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Zap</span>(<span class="hljs-params"><span class="hljs-keyword">void</span>* memory, <span class="hljs-built_in">int</span> byteCount</span>)</span>
{
    <span class="hljs-built_in">byte</span>* b = (<span class="hljs-built_in">byte</span>*)memory;
    <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>; i &lt; byteCount; i++)
        *b++ = <span class="hljs-number">0</span>;
}
</code></pre>
<hr>
<h3>ุงุนุฏุงุฏ ุจุง ุงูุฏุงุฒู ุจูู (Native-Sized Integers) ๐งฎ</h3>
<p>ููุนโูุง <code>nint</code> ู <code>nuint</code> (ูุนุฑู ุดุฏู ุฏุฑ C# 9) ุงูุฏุงุฒูโุง ูุทุงุจู ูุถุง ุขุฏุฑุณ ูพุฑุฏุงุฒุด ุฏุฑ ุฒูุงู ุงุฌุฑุง ุฏุงุฑูุฏ (ุฏุฑ ุนููุ ณฒ ุง ถด ุจุช). ุงู ููุนโูุง ูุงููุฏ ุงุนุฏุงุฏ ุงุณุชุงูุฏุงุฑุฏ ุฑูุชุงุฑ ูโฺฉููุฏ ู ุงุฒ ุนููุงุช ุญุณุงุจ ู ุจุฑุฑุณ ุณุฑุฑุฒ (overflow) ูพุดุชุจุงู ฺฉุงูู ุฏุงุฑูุฏ:</p>
<pre class="hljs"><code><span class="hljs-built_in">nint</span> x = <span class="hljs-number">123</span>, y = <span class="hljs-number">234</span>;
checked
{
    <span class="hljs-built_in">nint</span> sum = x + y, product = x * y;
    Console.WriteLine(product);
}
</code></pre>
<p>ูฺฺฏโูุง:</p>
<ul>
<li>ูโุชูุงู ุจู ุขูโูุง ููุงุฏุฑ ุตุญุญ ณฒ ุจุช ุฏุงุฏุ ุงูุง ูู ถด ุจุช (ููฺฉู ุงุณุช ุฏุฑ ุฒูุงู ุงุฌุฑุง ุณุฑุฑุฒ ุฑุฎ ุฏูุฏ).</li>
<li>ุชุจุฏู ุจู ุง ุงุฒ ุฏฺฏุฑ ููุนโูุง ุนุฏุฏ ุตุญุญ ุจุง cast ุตุฑุญ ุงูฺฉุงูโูพุฐุฑ ุงุณุช.</li>
<li>ูโุชูุงู ุงุฒ ุขูโูุง ุจุฑุง ููุงุด ุขุฏุฑุณ ุญุงูุธู ุง ุขูุณุช ุจุฏูู ุงุณุชูุงุฏู ุงุฒ ุงุดุงุฑูโฺฏุฑ ุงุณุชูุงุฏู ฺฉุฑุฏ.</li>
<li><code>nuint</code> ุจุฑุง ููุงุด ุทูู ฺฉ ุจูุงฺฉ ุญุงูุธู ููุงุณุจ ุงุณุช.</li>
</ul>
<p>ูุซุงู ุจุฑุง ุจูุจูุฏ ฺฉุงุฑุง ููฺฏุงู ฺฉุงุฑ ุจุง ุงุดุงุฑูโฺฏุฑูุง:</p>
<pre class="hljs"><code><span class="hljs-function"><span class="hljs-keyword">unsafe</span> <span class="hljs-built_in">nint</span> <span class="hljs-title">AddressDif</span>(<span class="hljs-params"><span class="hljs-built_in">char</span>* x, <span class="hljs-built_in">char</span>* y</span>)</span> =&gt; (<span class="hljs-built_in">nint</span>)x - (<span class="hljs-built_in">nint</span>)y;
</code></pre>
<p>ฺฉ ูุซุงู ูุงูุน ุงุฒ ฺฉุงุฑุจุฑุฏ <code>nint</code> ู <code>nuint</code> ุฏุฑ ฺฉูุงุฑ ุงุดุงุฑูโฺฏุฑูุงุ ูพุงุฏูโุณุงุฒ <code>Buffer.MemoryCopy</code> ุงุณุช.</p>
<hr>
<h3>ุฑูุชุงุฑ ุฒูุงู ุงุฌุฑุง ุฏุฑ .NET 7+ โ๏ธ</h3>
<p>ุฏุฑ ูพุฑูฺูโูุง ฺฉู ูุฏู ุขูโูุง .NET 7 ุง ุจุงูุงุชุฑ ุงุณุชุ <code>nint</code> ู <code>nuint</code> ูุนุงุฏู <code>System.IntPtr</code> ู <code>System.UIntPtr</code> ุนูู ูโฺฉููุฏุ ูุดุงุจู ุงูฺฉู <code>int</code> ูุนุงุฏู <code>System.Int32</code> ุงุณุช.</p>
<ul>
<li><code>IntPtr</code> ู <code>UIntPtr</code> ุงุฒ .NET 7 ุจู ุจุนุฏ ูุงุจูุช ุงูุฌุงู ุนููุงุช ุญุณุงุจ ู ุจุฑุฑุณ ุณุฑุฑุฒ ุจุง ฺฉุงููพุงูุฑ C# ุฑุง ุฏุงุฑูุฏ.</li>
<li>ุงุถุงูู ุดุฏู ูุงุจูุช ุญุณุงุจ checked ุจู IntPtr/UIntPtr ฺฉ ุชุบุฑ ูู ุดฺฉุณุชู ุณุงุฒฺฏุงุฑ ูุญุณูุจ ูโุดูุฏุ ุงูุง ุงุซุฑ ุขู ูุญุฏูุฏ ุงุณุช ู ููุท ุฏุฑ ุตูุฑุช ฺฉู ูพุฑูฺู ุฏูุจุงุฑู ุจุง ูุฏู .NET 7+ ฺฉุงููพุงู ุดูุฏุ ููฺฉู ุงุณุช ุฑุฎ ุฏูุฏ.</li>
</ul>
<hr>
<h3>ุฑูุชุงุฑ ุฒูุงู ุงุฌุฑุง ุฏุฑ .NET 6 ุง ูพุงูโุชุฑ โก</h3>
<p>ุฏุฑ ูพุฑูฺูโูุง ฺฉู ูุฏู ุขูโูุง .NET 6 ุง ูพุงูโุชุฑ ุงุณุชุ <code>nint</code> ู <code>nuint</code> ูููุฒ ุงุฒ <code>IntPtr</code> ู <code>UIntPtr</code> ุงุณุชูุงุฏู ูโฺฉููุฏ.</p>
<ul>
<li>ฺูู ููุนโูุง ูุฏู <code>IntPtr</code> ู <code>UIntPtr</code> ุงฺฉุซุฑ ุนููุงุช ุญุณุงุจ ุฑุง ูพุดุชุจุงู ููโฺฉููุฏุ ฺฉุงููพุงูุฑ ุฎูุงูุง ุฑุง ูพุฑ ูโฺฉูุฏ ุชุง ุฑูุชุงุฑ <code>nint</code>/<code>nuint</code> ูุดุงุจู .NET 7+ ุดูุฏ.</li>
<li>ูโุชูุงู ุชุตูุฑ ฺฉุฑุฏ ฺฉู ฺฉ ูุชุบุฑ <code>nint</code>/<code>nuint</code> ูุงููุฏ <code>IntPtr</code>/<code>UIntPtr</code> ุจุง ฺฉ ยซฺฉูุงู ูฺูยป ุงุณุช ฺฉู ฺฉุงููพุงูุฑ ุขู ุฑุง ุจูโุนููุงู ฺฉ IntPtr/UIntPtr ูุฏุฑู ูโุดูุงุณุฏ.</li>
<li>ุงู ฺฉูุงู ุฏุฑ ุตูุฑุช ุชุจุฏู ุจู IntPtr/UIntPtr ุงุฒ ุจู ูโุฑูุฏ:</li>
</ul>
<pre class="hljs"><code><span class="hljs-built_in">nint</span> x = <span class="hljs-number">123</span>;
Console.WriteLine(x * x);   <span class="hljs-comment">// ุฏุฑุณุช: ุถุฑุจ ูพุดุชุจุงู ูโุดูุฏ</span>
IntPtr y = x;
Console.WriteLine(y * y);   <span class="hljs-comment">// ุฎุทุง ฺฉุงููพุงู: ุนููฺฏุฑ * ูพุดุชุจุงู ููโุดูุฏ</span>
</code></pre>
<hr>
<h3>ุงุดุงุฑูโฺฏุฑูุง ุชุงุจุน (Function Pointers) ๐</h3>
<p>ฺฉ <strong>ุงุดุงุฑูโฺฏุฑ ุชุงุจุน</strong> (ูุนุฑู ุฏุฑ C# 9) ูุงููุฏ delegate ุงุณุช ุงูุง ุจุฏูู ูุงุณุทู ููููู delegateุ ูุณุชููุงู ุจู ุขุฏุฑุณ ฺฉ ูุชุฏ ุงุดุงุฑู ูโฺฉูุฏ.</p>
<p>ูฺฺฏโูุง:</p>
<ul>
<li>ููุท ุจู ูุชุฏูุง ุงุณุชุง (static) ุงุดุงุฑู ูโฺฉูุฏ.</li>
<li>ูุงุจูุช multicast ูุฏุงุฑุฏ.</li>
<li>ูุงุฒููุฏ ุฒููู <code>unsafe</code> ุงุณุช (ุฒุฑุง ุงุฒ ุจุฑุฑุณ ููุน ุฒูุงู ุงุฌุฑุง ุนุจูุฑ ูโฺฉูุฏ).</li>
<li>ูุฏู ุงุตู: ุณุงุฏูโุณุงุฒ ู ุจูููโุณุงุฒ ุชุนุงูู ุจุง APIูุง unmanaged.</li>
</ul>
<p>ุชุนุฑู ููุน ุงุดุงุฑูโฺฏุฑ ุชุงุจุน:</p>
<pre class="hljs"><code><span class="hljs-built_in">delegate</span>*&lt;<span class="hljs-built_in">int</span>, <span class="hljs-built_in">char</span>, <span class="hljs-built_in">string</span>, <span class="hljs-keyword">void</span>&gt;   <span class="hljs-comment">// void ููุน ุจุงุฒฺฏุดุช ุงุณุช</span>
</code></pre>
<p>ูุทุงุจู ุชุงุจุน ุฒุฑ:</p>
<pre class="hljs"><code><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">SomeFunction</span>(<span class="hljs-params"><span class="hljs-built_in">int</span> x, <span class="hljs-built_in">char</span> y, <span class="hljs-built_in">string</span> z</span>)
</span></code></pre>
<p>ุนููฺฏุฑ <code>&amp;</code> ฺฉ ุงุดุงุฑูโฺฏุฑ ุชุงุจุน ุงุฒ ฺฏุฑูู ูุชุฏ ุงุฌุงุฏ ูโฺฉูุฏ. ูุซุงู ฺฉุงูู:</p>
<pre class="hljs"><code><span class="hljs-keyword">unsafe</span>
{
    <span class="hljs-built_in">delegate</span>*&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">int</span>&gt; functionPointer = &amp;GetLength;
    <span class="hljs-built_in">int</span> length = functionPointer(<span class="hljs-string">&quot;Hello, world&quot;</span>);
    <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-built_in">int</span> <span class="hljs-title">GetLength</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> s</span>)</span> =&gt; s.Length;
}
</code></pre>
<p>ูฺฉุงุช ููู:</p>
<ul>
<li><code>functionPointer</code> ฺฉ ุดุก ูุณุช ฺฉู ุจุชูุงู ุฑู ุขู <code>Invoke</code> ูุฑุงุฎูุงู ฺฉุฑุฏ.</li>
<li>ูุณุชููุงู ุจู ุขุฏุฑุณ ุญุงูุธู ูุชุฏ ูุฏู ุงุดุงุฑู ูโฺฉูุฏ:</li>
</ul>
<pre class="hljs"><code>Console.WriteLine((IntPtr)functionPointer);
</code></pre>
<ul>
<li>ูุงููุฏ ูุฑ ุงุดุงุฑูโฺฏุฑ ุฏฺฏุฑุ ุจุฑุฑุณ ููุน ุฒูุงู ุงุฌุฑุง ูุฏุงุฑุฏ.</li>
<li>ููููู ุฒุฑ ูุชุฌู ุชุงุจุน ุฑุง ุจู <code>decimal</code> ุชุจุฏู ูโฺฉูุฏ ู ููฺฉู ุงุณุช ุญุงูุธู ุชุตุงุฏู ุฏุฑ ุฎุฑูุฌ ุฏุฎู ุดูุฏ:</li>
</ul>
<pre class="hljs"><code><span class="hljs-keyword">var</span> pointer2 = (<span class="hljs-built_in">delegate</span>*&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">decimal</span>&gt;)(IntPtr)functionPointer;
Console.WriteLine(pointer2(<span class="hljs-string">&quot;Hello, unsafe world&quot;</span>));
</code></pre>
<h3><code>[SkipLocalsInit]</code> โก</h3>
<p>ููุช C# ฺฉ ูุชุฏ ุฑุง ฺฉุงููพุงู ูโฺฉูุฏุ ฺฉ flag ุชููุฏ ูโฺฉูุฏ ฺฉู ุจู runtime ูโฺฏูุฏ ูุชุบุฑูุง ูุญู ูุชุฏ ุฑุง ุจู ููุงุฏุฑ ูพุดโูุฑุถุดุงู ููุฏุงุฑุฏู ฺฉูุฏ (ุจุง ุตูุฑ ฺฉุฑุฏู ุญุงูุธู).</p>
<p>ุงุฒ C# 9 ุจู ุจุนุฏุ ูโุชูุงูุฏ ุงุฒ ฺฉุงููพุงูุฑ ุจุฎูุงูุฏ ุงู flag ุฑุง ุชููุฏ ูฺฉูุฏ ุจุง ุงุนูุงู <strong>attribute</strong> <code>[SkipLocalsInit]</code> ุฑู ฺฉ ูุชุฏ (ุฏุฑ namespace <code>System.Runtime.CompilerServices</code>):</p>
<pre class="hljs"><code>[<span class="hljs-meta">SkipLocalsInit</span>]
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Foo</span>() ...
</span></code></pre>
<p>ูโุชูุงูุฏ ุงู attribute ุฑุง ุฑู ฺฉ ููุน (type) ุงุนูุงู ฺฉูุฏโฺฉู ูุนุงุฏู ุงุนูุงู ุขู ุฑู ููู ูุชุฏูุง ุขู ููุน ุงุณุชโุง ุญุช ุฑู ฺฉู ฺฉ ูุงฺูู (module) ฺฉู ูุญุชูุง ฺฉ assembly ุงุณุช:</p>
<pre class="hljs"><code>[<span class="hljs-meta">module: System.Runtime.CompilerServices.SkipLocalsInit</span>]
</code></pre>
<p>ุฏุฑ ุณูุงุฑููุง ุงูู ูุนูููุ <code>[SkipLocalsInit]</code> ุชุฃุซุฑ ุฒุงุฏ ุฑู ุนููฺฉุฑุฏ ุง ฺฉุงุฑฺฉุฑุฏ ูุฏุงุฑุฏุ ฺูู <strong>ูุงููู ุชุฎุตุต ูุทุน (definite assignment)</strong> ุฏุฑ C# ูุงุฒ ุฏุงุฑุฏ ฺฉู ูุชุบุฑูุง ูุญู ูุจู ุงุฒ ุฎูุงูุฏู ุดุฏู ููุฏุงุฑุฏู ุดููุฏ. ุงู ุจุฏุงู ูุนูุงุณุช ฺฉู JIT optimizer ุงุญุชูุงูุงู ููุงู ฺฉุฏ ูุงุดู ุฑุง ุชููุฏ ูโฺฉูุฏุ ฺู attribute ุงุนูุงู ุดุฏู ุจุงุดุฏ ุง ูู.</p>
<p>ุงูุง ุฏุฑ ุฒููู unsafeุ ุงุณุชูุงุฏู ุงุฒ <code>[SkipLocalsInit]</code> ูโุชูุงูุฏ ุจุงุฑ CLR ุจุฑุง ููุฏุงุฑุฏู ุงููู ูุชุบุฑูุง ูุญู ุงุฒ ููุน value ุฑุง ฺฉุงูุด ุฏูุฏ ู ุจุงุนุซ <strong>ุงูุฒุงุด ุฌุฒุฆ ุนููฺฉุฑุฏ</strong> ุดูุฏุ ูุฎุตูุตุงู ุฏุฑ ูุชุฏูุง ฺฉู ุงุณุชูุงุฏู ุฒุงุฏ ุงุฒ ุงุณุชฺฉ ุฏุงุฑูุฏ (ูุซูุงู ุจุง stackalloc ุจุฒุฑฺฏ). ูุซุงู ุฒุฑ ุญุงูุธู ููุฏุงุฑุฏูโูุดุฏู ุฑุง ฺุงูพ ูโฺฉูุฏ ููุช <code>[SkipLocalsInit]</code> ุงุนูุงู ุดุฏู ุจุงุดุฏ (ุจู ุฌุง ุตูุฑ):</p>
<pre class="hljs"><code>[<span class="hljs-meta">SkipLocalsInit</span>]
<span class="hljs-function"><span class="hljs-keyword">unsafe</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Foo</span>()</span>
{
    <span class="hljs-built_in">int</span> local;
    <span class="hljs-built_in">int</span>* ptr = &amp;local;
    Console.WriteLine(*ptr);

    <span class="hljs-built_in">int</span>* a = <span class="hljs-keyword">stackalloc</span> <span class="hljs-built_in">int</span>[<span class="hljs-number">100</span>];
    <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">100</span>; ++i) Console.WriteLine(a[i]);
}
</code></pre>
<p>ุฌุงูุจ ุงู ฺฉู ูโุชูุงู ุจู ููุงู ูุชุฌู ุฏุฑ ูุญุท โุงููโ ุจุง ุงุณุชูุงุฏู ุงุฒ <code>Span&lt;T&gt;</code> ุฑุณุฏ:</p>
<pre class="hljs"><code>[<span class="hljs-meta">SkipLocalsInit</span>]
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Foo</span>()</span>
{
    Span&lt;<span class="hljs-built_in">int</span>&gt; a = <span class="hljs-keyword">stackalloc</span> <span class="hljs-built_in">int</span>[<span class="hljs-number">100</span>];
    <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">100</span>; ++i) Console.WriteLine(a[i]);
}
</code></pre>
<p>ุจูุงุจุฑุงูุ ุงุณุชูุงุฏู ุงุฒ <code>[SkipLocalsInit]</code> ูุงุฒ ุฏุงุฑุฏ ฺฉู ูพุฑูฺู ุดูุง ุจุง <code>&lt;AllowUnsafeBlocks&gt;</code> ุจุฑุงุจุฑ <code>true</code> ฺฉุงููพุงู ุดูุฏโุญุช ุงฺฏุฑ ูฺ ูุชุฏ unsafe ุนูุงูุชโฺฏุฐุงุฑ ูุดุฏู ุจุงุดุฏ.</p>
<hr>
<h3>ุฏุณุชูุฑุงุช ูพุดโูพุฑุฏุงุฒูุฏู (Preprocessor Directives) ๐๏ธ</h3>
<p>ุฏุณุชูุฑุงุช ูพุดโูพุฑุฏุงุฒูุฏู ุจู ฺฉุงููพุงูุฑ ุงุทูุงุนุงุช ุงุถุงู ุฏุฑุจุงุฑู ุจุฎุดโูุง ฺฉุฏ ูโุฏููุฏ. ุฑุงุฌโุชุฑู ุขูโูุง <strong>ุฏุณุชูุฑุงุช ุดุฑุท</strong> ูุณุชูุฏ ฺฉู ุฑุงู ุจุฑุง ุดุงูู ุง ุญุฐู ุจุฎุดโูุง ุงุฒ ฺฉุฏ ุฏุฑ ุฒูุงู ฺฉุงููพุงู ูุฑุงูู ูโฺฉููุฏ:</p>
<pre class="hljs"><code><span class="hljs-meta">#<span class="hljs-keyword">define</span> DEBUG</span>

<span class="hljs-keyword">class</span> <span class="hljs-title">MyClass</span>
{
    <span class="hljs-built_in">int</span> x;
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Foo</span>()</span>
    {
        <span class="hljs-meta">#<span class="hljs-keyword">if</span> DEBUG</span>
            Console.WriteLine(<span class="hljs-string">&quot;Testing: x = {0}&quot;</span>, x);
        <span class="hljs-meta">#<span class="hljs-keyword">endif</span></span>
    }
    ...
}
</code></pre>
<p>ุฏุฑ ุงู ูุซุงูุ ุฏุณุชูุฑ ุฏุงุฎู <code>Foo</code> ูุดุฑูุท ุจู ูุฌูุฏ ุณูุจู <code>DEBUG</code> ฺฉุงููพุงู ูโุดูุฏ. ุงฺฏุฑ ุณูุจู <code>DEBUG</code> ุญุฐู ุดูุฏุ ุฏุณุชูุฑ ฺฉุงููพุงู ููโุดูุฏ.</p>
<p>ูโุชูุงู ุณูุจูโูุง ูพุดโูพุฑุฏุงุฒูุฏู ุฑุง ุฏุฑ ูุงู ุณูุฑุณ ุชุนุฑู ฺฉุฑุฏ ุง ุฏุฑ ุณุทุญ ูพุฑูฺู ุฏุฑ ูุงู <code>.csproj</code>:</p>
<pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">PropertyGroup</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">DefineConstants</span>&gt;</span>DEBUG;ANOTHERSYMBOL<span class="hljs-tag">&lt;/<span class="hljs-name">DefineConstants</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">PropertyGroup</span>&gt;</span>
</code></pre>
<p>ุจุง ุฏุณุชูุฑุงุช <code>#if</code> ู <code>#elif</code> ูโุชูุงู ุงุฒ ุนููฺฏุฑูุง <code>||</code>ุ <code>&amp;&amp;</code> ู <code>!</code> ุจุฑุง ุงูุฌุงู ุนููุงุช <strong>orุ and ู not</strong> ุฑู ฺูุฏ ุณูุจู ุงุณุชูุงุฏู ฺฉุฑุฏ. ูุซุงู:</p>
<pre class="hljs"><code><span class="hljs-meta">#<span class="hljs-keyword">if</span> TESTMODE &amp;&amp; !DEBUG</span>
    ...
<span class="hljs-meta">#<span class="hljs-keyword">endif</span></span>
</code></pre>
<p>ุชูุฌู ฺฉูุฏ ฺฉู ุงู ฺฉ ุนุจุงุฑุช ูุนููู C# ูุณุช ู ุณูุจูโูุง ูฺ ุงุฑุชุจุงุท ุจุง ูุชุบุฑูุงโฺู static ู ฺู ุบุฑโูุฏุงุฑูุฏ.</p>
<hr>
<h3><code>#error</code> ู <code>#warning</code> โ๏ธ</h3>
<p>ุงู ุฏุณุชูุฑุงุช ุงุฒ ุณูุกุงุณุชูุงุฏู ุชุตุงุฏู ุงุฒ ุฏุณุชูุฑุงุช ุดุฑุท ุฌููฺฏุฑ ูโฺฉููุฏุ ุจุง ุงุฌุงุฏ <strong>ูุดุฏุงุฑ ุง ุฎุทุง ุชูุณุท ฺฉุงููพุงูุฑ</strong> ุฏุฑ ุตูุฑุช ูุฌููุนู ูุงูุทููุจ ุงุฒ ุณูุจูโูุง.</p>
<p>ุฌุฏูู ด-ฑ ููุฑุณุช ุฏุณุชูุฑุงุช ูพุดโูพุฑุฏุงุฒูุฏู ุฑุง ุงุฑุงุฆู ูโุฏูุฏ.</p>
<div align="center">
<p><img src="../../../assets/image/04/Table-4-3.jpeg" alt="Conventions-UsedThis-Book"></p>
</div>
<h3>Conditional Attributes ๐ฏ</h3>
<p>ฺฉ <strong>attribute</strong> ฺฉู ุจุง <code>Conditional</code> ุชุฒุฆู ุดุฏู ุจุงุดุฏุ ุชููุง ุฏุฑ ุตูุฑุช ฺฉุงููพุงู ูโุดูุฏ ฺฉู <strong>ุณูุจู ูพุดโูพุฑุฏุงุฒูุฏู ูุดุฎุต ุดุฏู</strong> ููุฌูุฏ ุจุงุดุฏ:</p>
<pre class="hljs"><code><span class="hljs-comment">// file1.cs</span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> DEBUG</span>
<span class="hljs-keyword">using</span> System;
<span class="hljs-keyword">using</span> System.Diagnostics;

[<span class="hljs-meta">Conditional(<span class="hljs-string">&quot;DEBUG&quot;</span>)</span>]
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">TestAttribute</span> : <span class="hljs-title">Attribute</span> {}

<span class="hljs-comment">// file2.cs</span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> DEBUG</span>
[<span class="hljs-meta">Test</span>]
<span class="hljs-keyword">class</span> <span class="hljs-title">Foo</span>
{
    [<span class="hljs-meta">Test</span>]
    <span class="hljs-built_in">string</span> s;
}
</code></pre>
<p>ฺฉุงููพุงูุฑ ุชููุง ุฒูุงู attributeูุง <code>[Test]</code> ุฑุง ุฏุฑ ูุงู <code>file2.cs</code> ูุงุฑุฏ ูโฺฉูุฏ ฺฉู ุณูุจู <code>DEBUG</code> ุฏุฑ ูุญุฏูุฏู ุขู ูุงู ุชุนุฑู ุดุฏู ุจุงุดุฏ.</p>
<hr>
<h3>Pragma Warning โ๏ธ</h3>
<p>ฺฉุงููพุงูุฑ ููุช ฺุฒ ุฏุฑ ฺฉุฏ ุดูุง ุฑุง ุบุฑุนูุฏ ุชุดุฎุต ุฏูุฏุ ฺฉ <strong>ูุดุฏุงุฑ (warning)</strong> ุงุฌุงุฏ ูโฺฉูุฏ. ุจุฑ ุฎูุงู ุฎุทุงูุงุ ูุดุฏุงุฑูุง ูุนูููุงู ูุงูุน ฺฉุงููพุงู ุดุฏู ุจุฑูุงูู ููโุดููุฏ.</p>
<p>ูุดุฏุงุฑูุง ฺฉุงููพุงูุฑ ุจุณุงุฑ ููุฏูุฏ ุจุฑุง ุดูุงุณุง ุจุงฺฏโูุงุ ุงูุง ููุช ูุดุฏุงุฑูุง ฺฉุงุฐุจ ุฒุงุฏ ุดููุฏุ ููุฏ ุจูุฏูุดุงู ฺฉุงูุด ูโุงุจุฏ. ุฏุฑ ุจุฑูุงููโูุง ุจุฒุฑฺฏุ ุญูุธ <strong>ูุณุจุช ุณฺฏูุงู ุจู ููุฒ</strong> ุจุฑุง ูุดุงูุฏู ูุดุฏุงุฑูุง ูุงูุน ุถุฑูุฑ ุงุณุช.</p>
<p>ุจุฑุง ุงู ููุธูุฑุ ูโุชูุงูุฏ ูุดุฏุงุฑูุง ุฑุง ุจูโุตูุฑุช ุงูุชุฎุงุจ ุจุง ุฏุณุชูุฑ <code>#pragma warning</code> ุบุฑูุนุงู ฺฉูุฏ. ูุซุงู:</p>
<pre class="hljs"><code><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Foo</span>
{
    <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Main</span>()</span> { }

    <span class="hljs-meta">#<span class="hljs-keyword">pragma</span> <span class="hljs-keyword">warning</span> disable 414</span>
    <span class="hljs-keyword">static</span> <span class="hljs-built_in">string</span> Message = <span class="hljs-string">&quot;Hello&quot;</span>;   <span class="hljs-comment">// ุงู ูุดุฏุงุฑ ุบุฑูุนุงู ุดุฏ</span>
    <span class="hljs-meta">#<span class="hljs-keyword">pragma</span> <span class="hljs-keyword">warning</span> restore 414</span>
}
</code></pre>
<p>ุงฺฏุฑ ุดูุงุฑู ูุดุฏุงุฑ ุฏุฑ ุฏุณุชูุฑ <code>#pragma warning</code> ุญุฐู ุดูุฏุ ููู ูุดุฏุงุฑูุง ุบุฑูุนุงู ุง ูุนุงู ูโุดููุฏ.<br>
ุจุง ุฏูุช ุฏุฑ ุงุณุชูุงุฏู ุงุฒ ุงู ุฏุณุชูุฑุ ูโุชูุงู ูพุฑูฺู ุฑุง ุจุง ุณูุฆฺ <code>/warnaserror</code> ฺฉุงููพุงู ฺฉุฑุฏโฺฉู ุจุงุนุซ ูโุดูุฏ ูุฑ ูุดุฏุงุฑ ุจุงููุงูุฏู ุจู ฺฉ <strong>ุฎุทุง</strong> ุชุจุฏู ุดูุฏ.</p>
<hr>
<h3>ูุณุชูุฏุณุงุฒ XML ๐</h3>
<p>ฺฉ <strong>ฺฉุงููุช ูุณุชูุฏุณุงุฒ (documentation comment)</strong>ุ ุชฺฉูโุง ุงุฒ XML ุงุณุช ฺฉู ฺฉ ููุน ุง ุนุถู ุฑุง ูุณุชูุฏ ูโฺฉูุฏ. ุงู ฺฉุงููุช ุฏุฑุณุช ูุจู ุงุฒ ุชุนุฑู ููุน ุง ุนุถู ูุฑุงุฑ ูโฺฏุฑุฏ ู ุจุง ุณู ุงุณูุด <code>///</code> ุดุฑูุน ูโุดูุฏ:</p>
<pre class="hljs"><code><span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span>Cancels a running query.<span class="hljs-doctag">&lt;/summary&gt;</span></span>
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Cancel</span>()</span> { ... }
</code></pre>
<p>ฺฉุงููุชโูุง ฺูุฏุฎุท ุจู ุงู ุตูุฑุช ูุณุชูุฏ:</p>
<pre class="hljs"><code><span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span>
<span class="hljs-comment"><span class="hljs-doctag">///</span> Cancels a running query</span>
<span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span>
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Cancel</span>()</span> { ... }
</code></pre>
<p>ุง ุจู ุงู ุดฺฉู (ุจุง ุณุชุงุฑู ุงุถุงู):</p>
<pre class="hljs"><code><span class="hljs-comment">/** 
    &lt;summary&gt; Cancels a running query. &lt;/summary&gt;
*/</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Cancel</span>()</span> { ... }
</code></pre>
<p>ุงฺฏุฑ ฺฏุฒูู ุฒุฑ ุจู ูุงู <code>.csproj</code> ุงุถุงูู ุดูุฏ:</p>
<pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">PropertyGroup</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">DocumentationFile</span>&gt;</span>SomeFile.xml<span class="hljs-tag">&lt;/<span class="hljs-name">DocumentationFile</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">PropertyGroup</span>&gt;</span>
</code></pre>
<p>ฺฉุงููพุงูุฑ <strong>ฺฉุงููุชโูุง ูุณุชูุฏุณุงุฒ</strong> ุฑุง ุงุณุชุฎุฑุงุฌ ู ุฏุฑ ูุงู XML ูุดุฎุต ุดุฏู ุฌูุนโุขูุฑ ูโฺฉูุฏ. ฺฉุงุฑุจุฑุฏูุง:</p>
<ul>
<li>ุงฺฏุฑ ุฏุฑ ููุงู ูููุฏุฑ ุงุณูุจู ฺฉุงููพุงูโุดุฏู ูุฑุงุฑ ฺฏุฑุฏุ ุงุจุฒุงุฑูุง ูุซู <strong>Visual Studio</strong> ู <strong>LINQPad</strong> ุจูโุทูุฑ ุฎูุฏฺฉุงุฑ ูุงู XML ุฑุง ูโุฎูุงููุฏ ู ุงุฒ ุขู ุจุฑุง ุงุฑุงุฆู IntelliSense ุงุณุชูุงุฏู ูโฺฉููุฏ.</li>
<li>ุงุจุฒุงุฑูุง ุฌุงูุจ (ูุซู Sandcastle ู NDoc) ูโุชูุงููุฏ ูุงู XML ุฑุง ุจู HTML ุชุจุฏู ฺฉููุฏ.</li>
</ul>
<hr>
<h3>ุชฺฏโูุง ุงุณุชุงูุฏุงุฑุฏ XML ุจุฑุง ูุณุชูุฏุณุงุฒ ๐</h3>
<p>ุชฺฏโูุง ุงุณุชุงูุฏุงุฑุฏ XML ฺฉู Visual Studio ู ุงุจุฒุงุฑูุง ุชููุฏ ูุณุชูุฏุงุช ูโุดูุงุณูุฏ:</p>
<ul>
<li>
<p><code>&lt;summary&gt;</code><br>
ุชูุถุญ ฺฉูุชุงู ฺฉู IntelliSense ููุงุด ูโุฏูุฏุ ูุนูููุงู ฺฉ ุฌููู ุง ุนุจุงุฑุช ฺฉูุชุงู ุงุณุช.</p>
</li>
<li>
<p><code>&lt;remarks&gt;</code><br>
ูุชู ุงุถุงู ฺฉู ููุน ุง ุนุถู ุฑุง ุดุฑุญ ูโุฏูุฏ. ุงุจุฒุงุฑูุง ูุณุชูุฏุณุงุฒ ุงู ูุชู ุฑุง ุฏุฑ ุชูุถุญ ฺฉู ุงุฏุบุงู ูโฺฉููุฏ.</p>
</li>
<li>
<p><code>&lt;param&gt;</code><br>
ุชูุถุญ ูพุงุฑุงูุชุฑ ฺฉ ูุชุฏ:</p>
<pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">param</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;name&quot;</span>&gt;</span>...<span class="hljs-tag">&lt;/<span class="hljs-name">param</span>&gt;</span>
</code></pre>
</li>
</ul>
<ul>
<li><code>&lt;returns&gt;</code><br>
ุชูุถุญ ููุฏุงุฑ ุจุฑฺฏุดุช ฺฉ ูุชุฏ.</li>
</ul>
<ul>
<li>
<p><code>&lt;exception&gt;</code><br>
ูุณุช ุงุณุชุซูุงูุง ฺฉู ูุชุฏ ูโุชูุงูุฏ ูพุฑุชุงุจ ฺฉูุฏ:</p>
<pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">exception</span> <span class="hljs-attr">cref</span>=<span class="hljs-string">&quot;type&quot;</span>&gt;</span>...<span class="hljs-tag">&lt;/<span class="hljs-name">exception</span>&gt;</span>
</code></pre>
</li>
</ul>
<ul>
<li>
<p><code>&lt;example&gt;</code><br>
ูุซุงู ุนูู (ุดุงูู ุชูุถุญ ู ฺฉุฏ ููููู):</p>
<pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">example</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">code</span>&gt;</span>...<span class="hljs-tag">&lt;/<span class="hljs-name">code</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">example</span>&gt;</span>
</code></pre>
</li>
<li>
<p><code>&lt;c&gt;</code> ู <code>&lt;code&gt;</code></p>
<ul>
<li><code>&lt;c&gt;</code>: ูุทุนู ฺฉุฏ ุฎุท ุฏุงุฎู ูุซุงู.</li>
<li><code>&lt;code&gt;</code>: ููููู ฺฉุฏ ฺูุฏุฎุท ุฏุงุฎู ูุซุงู.</li>
</ul>
</li>
</ul>
<ul>
<li>
<p><code>&lt;see&gt;</code><br>
ุงุฑุฌุงุน ุฏุงุฎู ุจู ฺฉ ููุน ุง ุนุถู ุฏฺฏุฑ:</p>
<pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">see</span> <span class="hljs-attr">cref</span>=<span class="hljs-string">&quot;member&quot;</span>&gt;</span>...<span class="hljs-tag">&lt;/<span class="hljs-name">see</span>&gt;</span>
</code></pre>
</li>
</ul>
<ul>
<li><code>&lt;seealso&gt;</code><br>
ุงุฑุฌุงุน ูุชูุงุจู ุจู ููุน ุง ุนุถู ุฏฺฏุฑุ ูุนูููุงู ุฏุฑ ุจุฎุด โSee Alsoโ.</li>
</ul>
<ul>
<li>
<p><code>&lt;paramref&gt;</code><br>
ุงุฑุฌุงุน ุจู ูพุงุฑุงูุชุฑ ุฏุฑ <code>&lt;summary&gt;</code> ุง <code>&lt;remarks&gt;</code>:</p>
<pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">paramref</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;name&quot;</span>/&gt;</span>
</code></pre>
</li>
</ul>
<ul>
<li>
<p><code>&lt;list&gt;</code><br>
ุงุฌุงุฏ ูุณุช ุจููุชโุฏุงุฑุ ุดูุงุฑูโุฏุงุฑ ุง ุฌุฏูู:</p>
<pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">list</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;bullet|number|table&quot;</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">listheader</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">term</span>&gt;</span>...<span class="hljs-tag">&lt;/<span class="hljs-name">term</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">description</span>&gt;</span>...<span class="hljs-tag">&lt;/<span class="hljs-name">description</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">listheader</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">item</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">term</span>&gt;</span>...<span class="hljs-tag">&lt;/<span class="hljs-name">term</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">description</span>&gt;</span>...<span class="hljs-tag">&lt;/<span class="hljs-name">description</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">item</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">list</span>&gt;</span>
</code></pre>
</li>
<li>
<p><code>&lt;para&gt;</code><br>
ุงุฌุงุฏ ฺฉ ูพุงุฑุงฺฏุฑุงู ุฌุฏุง:</p>
<pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">para</span>&gt;</span>...<span class="hljs-tag">&lt;/<span class="hljs-name">para</span>&gt;</span>
</code></pre>
</li>
<li>
<p><code>&lt;include&gt;</code><br>
ุงุฏุบุงู ฺฉ ูุงู XML ุฎุงุฑุฌ ฺฉู ูุณุชูุฏุงุช ุฑุง ุฏุงุฑุฏ:</p>
<pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">include</span> <span class="hljs-attr">file</span>=<span class="hljs-string">&#x27;filename&#x27;</span> <span class="hljs-attr">path</span>=<span class="hljs-string">&#x27;tagpath[@name=&quot;id&quot;]&#x27;</span>&gt;</span>...<span class="hljs-tag">&lt;/<span class="hljs-name">include</span>&gt;</span>
</code></pre>
</li>
</ul>
<h3>User-Defined Tags ๐ท๏ธ</h3>
<p>ฺุฒ ุจูโุฎุตูุต ุฏุฑ ููุฑุฏ ุชฺฏโูุง ูพุดโูุฑุถ XML ฺฉู ุชูุณุท ฺฉุงููพุงูุฑ C# ุดูุงุฎุชู ูโุดููุฏ ูุฌูุฏ ูุฏุงุฑุฏ ู ุดูุง ุขุฒุงุฏ ูุณุชุฏ <strong>ุชฺฏโูุง ุฎูุฏุชุงู</strong> ุฑุง ุชุนุฑู ฺฉูุฏ.</p>
<p>ุชููุง ูพุฑุฏุงุฒุด ูฺูโุง ฺฉู ฺฉุงููพุงูุฑ ุงูุฌุงู ูโุฏูุฏ ูุฑุจูุท ุจู:</p>
<ul>
<li><code>&lt;param&gt;</code>: ฺฉู ูุงู ูพุงุฑุงูุชุฑ ุฑุง ุจุฑุฑุณ ูโฺฉูุฏ ู ูุทูุฆู ูโุดูุฏ ุชูุงู ูพุงุฑุงูุชุฑูุง ูุชุฏ ูุณุชูุฏุณุงุฒ ุดุฏู ุจุงุดูุฏ.</li>
<li>ุตูุช <code>cref</code>: ฺฉู ุจุฑุฑุณ ูโฺฉูุฏ ุงู ุตูุช ุจู ฺฉ ููุน ุง ุนุถู ูุงูุน ุงุฑุฌุงุน ูโุฏูุฏ ู ุขู ุฑุง ุจู ฺฉ <strong>ID ฺฉุงููุงู ูุงุฌุฏ ุดุฑุงุท</strong> ุงุฒ ููุน ุง ุนุถู ฺฏุณุชุฑุด ูโุฏูุฏ.</li>
</ul>
<p>ููฺูู ูโุชูุงูุฏ ุงุฒ ุตูุช <code>cref</code> ุฏุฑ ุชฺฏโูุง ุฎูุฏุชุงู ุงุณุชูุงุฏู ฺฉูุฏุ ฺฉุงููพุงูุฑ ููุงู ุจุฑุฑุณ ู ฺฏุณุชุฑุด ุฑุง ุงูุฌุงู ูโุฏูุฏุ ุฏุฑุณุช ูุงููุฏ ุชฺฏโูุง ูพุดโูุฑุถ <code>&lt;exception&gt;</code>, <code>&lt;permission&gt;</code>, <code>&lt;see&gt;</code>, ู <code>&lt;seealso&gt;</code>.</p>
<hr>
<h3>Type or Member Cross-References ๐</h3>
<p>ูุงูโูุง ููุน ู ุงุฑุฌุงุนุงุช ูุชูุงุจู ุจู ููุน ุง ุนุถู ุจู <strong>IDูุง ฺฉุชุง</strong> ุชุจุฏู ูโุดููุฏ ฺฉู ููุน ุง ุนุถู ุฑุง ูุดุฎุต ูโฺฉููุฏ.</p>
<p>ุงู ูุงูโูุง ุดุงูู ุฏู ุจุฎุด ูุณุชูุฏ:</p>
<ol>
<li><strong>ูพุดโููุฏ (prefix)</strong> ฺฉู ูุดุฎุต ูโฺฉูุฏ ID ฺู ฺุฒ ุฑุง ููุงูุฏฺฏ ูโฺฉูุฏ.</li>
<li><strong>ุงูุถุง (signature)</strong> ููุน ุง ุนุถู.</li>
</ol>
<p>ุฏุฑ ุงุฏุงููุ ูพุดโููุฏูุง ุงุนุถุง (member prefixes) ูุนุฑู ูโุดููุฏ:</p>
<div align="center">
<p><img src="../../../assets/image/04/Table-4-4.jpeg" alt="Conventions-UsedThis-Book"></p>
</div>
<h3>ูููููโุง ุงุฒ Type ู Member IDs ๐</h3>
<p>ููุงุนุฏ ฺฉู ูุดุฎุต ูโฺฉููุฏ <strong>ุงูุถุงูุง (signatures)</strong> ฺฺฏููู ุชููุฏ ูโุดููุฏุ ูุณุชูุฏ ุดุฏูโุงูุฏุ ุงฺฏุฑฺู ูุณุจุชุงู ูพฺุฏู ูุณุชูุฏ.</p>
<p>ุฏุฑ ุงูุฌุง ฺฉ ูุซุงู ุงุฒ ฺฉ ููุน ู IDูุง ุชููุฏุดุฏู ุขู ุขูุฑุฏู ุดุฏู ุงุณุช:</p>
<pre class="hljs"><code><span class="hljs-comment">// ูุถุงูุง ูุงู (Namespaces) ุงูุถุง ูุณุชูู ูุฏุงุฑูุฏ</span>
<span class="hljs-keyword">namespace</span> <span class="hljs-title">NS</span>
{
    <span class="hljs-comment"><span class="hljs-doctag">///</span> T:NS.MyClass</span>
    <span class="hljs-keyword">class</span> <span class="hljs-title">MyClass</span>
    {
        <span class="hljs-comment"><span class="hljs-doctag">///</span> F:NS.MyClass.aField</span>
        <span class="hljs-built_in">string</span> aField;

        <span class="hljs-comment"><span class="hljs-doctag">///</span> P:NS.MyClass.aProperty</span>
        <span class="hljs-built_in">short</span> aProperty { <span class="hljs-keyword">get</span> { ... } <span class="hljs-keyword">set</span> { ... } }

        <span class="hljs-comment"><span class="hljs-doctag">///</span> T:NS.MyClass.NestedType</span>
        <span class="hljs-keyword">class</span> <span class="hljs-title">NestedType</span> { ... }

        <span class="hljs-comment"><span class="hljs-doctag">///</span> M:NS.MyClass.X()</span>
        <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">X</span>()</span> { ... }

        <span class="hljs-comment"><span class="hljs-doctag">///</span> M:NS.MyClass.Y(System.Int32,System.Double@,System.Decimal@)</span>
        <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Y</span>(<span class="hljs-params"><span class="hljs-built_in">int</span> p1, <span class="hljs-keyword">ref</span> <span class="hljs-built_in">double</span> p2, <span class="hljs-keyword">out</span> <span class="hljs-built_in">decimal</span> p3</span>)</span> { ... }

        <span class="hljs-comment"><span class="hljs-doctag">///</span> M:NS.MyClass.Z(System.Char[],System.Single[0:,0:])</span>
        <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Z</span>(<span class="hljs-params"><span class="hljs-built_in">char</span>[] p1, <span class="hljs-built_in">float</span>[,] p2</span>)</span> { ... }

        <span class="hljs-comment"><span class="hljs-doctag">///</span> M:NS.MyClass.op_Addition(NS.MyClass,NS.MyClass)</span>
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> MyClass <span class="hljs-keyword">operator</span> + (MyClass c1, MyClass c2) { ... }

        <span class="hljs-comment"><span class="hljs-doctag">///</span> M:NS.MyClass.op_Implicit(NS.MyClass)~System.Int32</span>
        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">implicit</span> <span class="hljs-keyword">operator</span> <span class="hljs-title">int</span>(<span class="hljs-params">MyClass c</span>)</span> { ... }

        <span class="hljs-comment"><span class="hljs-doctag">///</span> M:NS.MyClass.#ctor</span>
        MyClass() { ... }

        <span class="hljs-comment"><span class="hljs-doctag">///</span> M:NS.MyClass.Finalize</span>
        ~MyClass() { ... }

        <span class="hljs-comment"><span class="hljs-doctag">///</span> M:NS.MyClass.#cctor</span>
        <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-title">MyClass</span>()</span> { ... }
    }
}
</code></pre>
<ul>
<li><code>T:</code> ูพุดโููุฏ ุจุฑุง <strong>Type</strong></li>
<li><code>F:</code> ูพุดโููุฏ ุจุฑุง <strong>Field</strong></li>
<li><code>P:</code> ูพุดโููุฏ ุจุฑุง <strong>Property</strong></li>
<li><code>M:</code> ูพุดโููุฏ ุจุฑุง <strong>Method</strong></li>
</ul>
<p>IDูุง ุดุงูู <strong>ูุถุง ูุงูุ ูุงู ฺฉูุงุณุ ู ูุงู ุนุถู</strong> ูุณุชูุฏ ู ุจุฑุง ูุชุฏูุงุ ูพุงุฑุงูุชุฑูุง ู ููุน ุจุงุฒฺฏุดุช ูุฒ ุฏููุงู ูุดุฎุต ูโุดููุฏ.</p>
<p>ุงู ุณุณุชู ุจู <strong>ฺฉุงููพุงูุฑ ู ุงุจุฒุงุฑูุง ูุณุชูุฏุณุงุฒ</strong> ุงุฌุงุฒู ูโุฏูุฏ ุชุง ุงุฑุฌุงุนุงุช ุฏุงุฎู ู ุฎุงุฑุฌ ุฑุง ุจูโุฏุฑุณุช ูพฺฏุฑ ฺฉููุฏ ู ุฎุทุงูุง ุงุญุชูุงู ุฑุง ุชุดุฎุต ุฏููุฏ.</p>

</main>


 

  <!-- ููุชุฑ ูุดุชุฑฺฉ -->
  <footer class="footer">
    <div class="container">
      <p>
        <img src="/icone/copyright.svg" alt="ฺฉูพโุฑุงุช" width="14" height="14"
             style="vertical-align:middle;margin-inline:4px">
        <span id="y"></span> Gitab โ ุจุฑุง ุชูุณุนูโุฏููุฏฺฏุงู
      </p>
    </div>
  </footer>

  <!-- ุณุงู + ุงุณฺฉุฑูพุช ุชู -->
  <script>
    document.getElementById('y').textContent = new Date().getFullYear();

    (() => {
      const root = document.documentElement;
      const btn = document.getElementById('themeToggle');
      const KEY = 'gitab-theme';
      const media = window.matchMedia('(prefers-color-scheme: dark)');
      const getEffective = s => s === 'auto' ? (media.matches ? 'dark' : 'light') : s;
      function updateTheme(s) {
        root.setAttribute('data-theme', s);
        const mode = getEffective(s);
        root.dataset.colorMode = mode;
        btn.dataset.icon = mode === 'dark' ? 'moon' : 'sun';
      }
      const saved = localStorage.getItem(KEY) || 'auto';
      updateTheme(saved);
      btn.addEventListener('click', () => {
        const curr = localStorage.getItem(KEY) || 'auto';
        const next = curr === 'auto' ? 'dark' : curr === 'dark' ? 'light' : 'auto';
        localStorage.setItem(KEY, next);
        updateTheme(next);
      });
      media.addEventListener('change', () => {
        if ((localStorage.getItem(KEY) || 'auto') === 'auto') updateTheme('auto');
      });
      window.addEventListener('DOMContentLoaded', () => updateTheme(saved));
    })();
  </script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
<script>hljs.highlightAll();</script>

<script>
document.querySelectorAll('pre code').forEach(block => {
  const btn = document.createElement('button');
  btn.className = 'copy-btn';

  const icon = document.createElement('img');
  icon.src = '/icone/copy.svg';
  icon.alt = 'Copy';
  btn.appendChild(icon);

  block.parentNode.insertBefore(btn, block);

  btn.addEventListener('click', async () => {
    await navigator.clipboard.writeText(block.textContent);
    btn.classList.add('copied');
    setTimeout(() => btn.classList.remove('copied'), 1500);
  });
});
</script>
<script>
  document.body.dataset.page = window.location.pathname;
</script>
<script>
  // ุจุงุฒ ู ุจุณุชู ฺฉุฑุฏู ููู ููุจุงู
  const menuBtn = document.querySelector(".menu-toggle");
  const nav = document.querySelector(".nav");

  if (menuBtn && nav) {
    // ุจุงุฒ ู ุจุณุชู ุดุฏู ุจุง ุฏฺฉูู
    menuBtn.addEventListener("click", (e) => {
      e.stopPropagation(); // ูุฐุงุฑู ฺฉูฺฉ ุฑู ุฎูุฏ ุฏฺฉูู ุจุงุนุซ ุจุณุชู ุดุฏู ุจุดู
      nav.classList.toggle("show");
    });

    // ุจุณุชู ููู ุจุง ฺฉูฺฉ ุจุฑูู
    document.addEventListener("click", (e) => {
      const clickedInsideNav = nav.contains(e.target);
      const clickedMenuButton = menuBtn.contains(e.target);
      if (!clickedInsideNav && !clickedMenuButton) {
        nav.classList.remove("show");
      }
    });
  }
</script>



</body>

</html>
