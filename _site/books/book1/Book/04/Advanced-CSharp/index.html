<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ฺฉุชุงุจุฎุงูู ูู</title>
  <link rel="stylesheet" href="/styles/main.css" />

</head>
<body class="rtl-site">
  <header>
    <h1>๐ ูพุงุฑุณ ฺฉุชุงุจ</h1>
  </header>

  <main class="markdown-body">
    <h1>ูุตู ฺูุงุฑู: ุณ ุดุงุฑูพ ูพุดุฑูุชู</h1>
<p>ุฏุฑ ุงู ูุตูุ ูุจุงุญุซ ูพุดุฑูุชู <code>C#</code> ุฑุง ูพูุดุด ูโุฏูู ฺฉู ุจุฑ ููุงูู ุจุฑุฑุณโุดุฏู ุฏุฑ ูุตูโูุง ฒ ู ณ ุงุณุชูุงุฑ ูุณุชูุฏ. ุดูุง ุจุงุฏ ฺูุงุฑ ุจุฎุด ุงูู ุฑุง ุจู ุชุฑุชุจ ุจุฎูุงูุฏุ ูโุชูุงูุฏ ุจูู ุจุฎุดโูุง ุฑุง ุจู ูุฑ ุชุฑุชุจ ุจุฎูุงูุฏ.</p>
<h2>ุฏูฺฏุชโูุง (Delegates)</h2>
<p>ุฏูฺฏุช ฺฉ ุดุก ุงุณุช ฺฉู ูโุฏุงูุฏ ฺฺฏููู ฺฉ ูุชุฏ ุฑุง ูุฑุงุฎูุงู ฺฉูุฏ.</p>
<p>ฺฉ ููุน ุฏูฺฏุช (<code>delegate type</code>) ููุน ูุชุฏ ุฑุง ุชุนุฑู ูโฺฉูุฏ ฺฉู ูููููโูุง ุฏูฺฏุช ูโุชูุงููุฏ ูุฑุงุฎูุงู ฺฉููุฏ. ุจู ุทูุฑ ุฎุงุตุ ุขู ููุน ุจุงุฒฺฏุดุช ู ุงููุงุน ูพุงุฑุงูุชุฑูุง ูุชุฏ ุฑุง ุชุนุฑู ูโฺฉูุฏ. ฺฉุฏ ุฒุฑ ฺฉ ููุน ุฏูฺฏุช ุจู ูุงู <code>Transformer</code> ุชุนุฑู ูโฺฉูุฏ:</p>
<pre><code class="language-C#">
delegate int Transformer (int x);
</code></pre>
<p><code>Transformer</code> ุจุง ูุฑ ูุชุฏ ฺฉู ุฏุงุฑุง ููุน ุจุงุฒฺฏุดุช <code>int</code> ู ฺฉ ูพุงุฑุงูุชุฑ <code>int</code> ุจุงุดุฏุ ุณุงุฒฺฏุงุฑ ุงุณุชุ ูุงููุฏ ุงู:</p>
<pre><code class="language-C#">
int Square (int x) { return x * x; }
</code></pre>
<p>ุงุ ุจู ุตูุฑุช ฺฉูุชุงูโุชุฑ:</p>
<pre><code class="language-C#">
int Square (int x) =&gt; x * x;
</code></pre>
<p>ุงุฎุชุตุงุต ฺฉ ูุชุฏ ุจู ฺฉ ูุชุบุฑ ุฏูฺฏุชุ ฺฉ ููููู ุฏูฺฏุช (<strong>delegate instance</strong>) ุงุฌุงุฏ ูโฺฉูุฏ:</p>
<pre><code class="language-C#">
Transformer t = Square;
</code></pre>
<p>ูโุชูุงูุฏ ฺฉ ููููู ุฏูฺฏุช ุฑุง ุจู ููุงู ุฑูุด ฺฉู ฺฉ ูุชุฏ ุฑุง ูุฑุงุฎูุงู ูโฺฉูุฏุ ูุฑุงุฎูุงู ฺฉูุฏ:</p>
<pre><code class="language-C#">
int answer = t(3);    // answer ุจุฑุงุจุฑ 9 ุงุณุช
</code></pre>
<p>ุฏุฑ ุงูุฌุง ฺฉ ูุซุงู ฺฉุงูู ุขูุฑุฏู ุดุฏู ุงุณุช:</p>
<pre><code class="language-C#">
delegate int Transformer (int x);   // ุงุนูุงู ููุน ุฏูฺฏุช
Transformer t = Square;             // ุงุฌุงุฏ ููููู ุฏูฺฏุช
int result = t(3);                  // ูุฑุงุฎูุงู ุฏูฺฏุช
Console.WriteLine (result);         // 9
int Square (int x) =&gt; x * x;
</code></pre>
<p>ฺฉ ููููู ุฏูฺฏุช ุจู ูุนูุง ูุงูุน ฺฉููู ุจู ุนููุงู ููุงูุฏู (<code>delegate</code>) ุจุฑุง ูุฑุงุฎูุงููุฏู ุนูู ูโฺฉูุฏ: ูุฑุงุฎูุงููุฏู ุฏูฺฏุช ุฑุง ูุฑุงุฎูุงู ูโฺฉูุฏุ ู ุณูพุณ ุฏูฺฏุช ูุชุฏ ูุฏู ุฑุง ูุฑุงุฎูุงู ูโฺฉูุฏ. ุงู ุบุฑูุณุชูู ุจูุฏูุ ูุฑุงุฎูุงููุฏู ุฑุง ุงุฒ ูุชุฏ ูุฏู ุฌุฏุง ูโฺฉูุฏ.</p>
<p>ุฏุณุชูุฑ:</p>
<pre><code class="language-C#">
Transformer t = Square;
</code></pre>
<p>ุดฺฉู ฺฉูุชุงูโุดุฏูโุง ุงุฒ:</p>
<pre><code class="language-C#">
Transformer t = new Transformer (Square);
</code></pre>
<p>ุงุณุช.</p>
<p>ุนุจุงุฑุช t(3) ุดฺฉู ฺฉูุชุงูโุดุฏูโุง ุงุฒ t.Invoke(3) ุงุณุช.</p>
<p>ุงุฒ ูุธุฑ ููุ ููุช ุจู <code>Square</code> ุจุฏูู ูพุฑุงูุชุฒ ุง ุขุฑฺฏููุงู ุงุฑุฌุงุน ูโุฏููุ ฺฉ ฺฏุฑูู ูุชุฏ (<strong>method group</strong>) ุฑุง ูุดุฎุต ูโฺฉูู. ุงฺฏุฑ ูุชุฏ <code>overload</code> ุดุฏู ุจุงุดุฏุ C# ุจุฑ ุงุณุงุณ ุงูุถุง (<code>signature</code>) ุฏูฺฏุช ฺฉู ุจู ุขู ุงุฎุชุตุงุต ุฏุงุฏู ูโุดูุฏุ <code>overload</code> ุตุญุญ ุฑุง ุงูุชุฎุงุจ ุฎูุงูุฏ ฺฉุฑุฏ.
ุฏูฺฏุช ุดุจู ฺฉ <code>callback</code> ุงุณุชุ ฺฉู ฺฉ ุงุตุทูุงุญ ุนููู ุจุฑุง ุณุงุฎุชุงุฑูุง ูุงููุฏ ุงุดุงุฑูโฺฏุฑูุง ุชุงุจุน C ุงุณุช.</p>
<h3>ููุดุชู ูุชุฏูุง Plug-in ุจุง ุฏูฺฏุชโูุง</h3>
<p>ุจู ฺฉ ูุชุบุฑ ุฏูฺฏุช ุฏุฑ ุฒูุงู ุงุฌุฑุง ฺฉ ูุชุฏ ุงุฎุชุตุงุต ุฏุงุฏู ูโุดูุฏ. ุงู ุจุฑุง ููุดุชู ูุชุฏูุง plug-in ููุฏ ุงุณุช. ุฏุฑ ุงู ูุซุงูุ ูุง ฺฉ ูุชุฏ ฺฉุงุฑุจุฑุฏ ุจู ูุงู <code>Transform</code> ุฏุงุฑู ฺฉู ฺฉ ุชุจุฏู (transform) ุฑุง ุจู ูุฑ ุนูุตุฑ ุฏุฑ ฺฉ ุขุฑุงู ุงุนุฏุงุฏ ุตุญุญ ุงุนูุงู ูโฺฉูุฏ. ูุชุฏ <code>Transform</code> ุฏุงุฑุง ฺฉ ูพุงุฑุงูุชุฑ ุฏูฺฏุช ุงุณุช ฺฉู ูโุชูุงูุฏ ุงุฒ ุขู ุจุฑุง ูุดุฎุต ฺฉุฑุฏู ฺฉ <code>transform</code> plug-in ุงุณุชูุงุฏู ฺฉูุฏ:</p>
<pre><code class="language-C#">int[] values = { 1, 2, 3 };
Transform (values, Square);      // ูุชุฏ Square ุฑุง ุจู ุขู ูุชุตู ูโฺฉูุฏ
foreach (int i in values)
 Console.Write (i + &quot;  &quot;);      // 1   4   9

void Transform (int[] values, Transformer t)
{
  for (int i = 0; i &lt; values.Length; i++)
    values[i] = t (values[i]);
}
int Square (int x) =&gt; x * x;
int Cube (int x) =&gt; x * x * x;
delegate int Transformer (int x);
</code></pre>
<p>ูโุชูุงูู ุชุจุฏู ุฑุง ููุท ุจุง ุชุบุฑ <code>Square</code> ุจู <code>Cube</code> ุฏุฑ ุฎุท ุฏูู ฺฉุฏ ุชุบุฑ ุฏูู.
ูุชุฏ <code>Transform</code> ูุง ฺฉ ุชุงุจุน ูุฑุชุจู ุจุงูุงุชุฑ (<strong>higher-order function</strong>) ุงุณุช ุฒุฑุง ุชุงุจุน ุงุณุช ฺฉู ฺฉ ุชุงุจุน ุฑุง ุจู ุนููุงู ุขุฑฺฏููุงู ูโฺฏุฑุฏ. (ูุชุฏ ฺฉู ฺฉ ุฏูฺฏุช ุฑุง ุจุฑูโฺฏุฑุฏุงูุฏ ูุฒ ฺฉ ุชุงุจุน ูุฑุชุจู ุจุงูุงุชุฑ ุฎูุงูุฏ ุจูุฏ.)</p>
<h3>ูุฏูโูุง ูุชุฏ ููููู ู ุซุงุจุช (Instance and Static Method Targets)</h3>
<p>ูุชุฏ ูุฏู ฺฉ ุฏูฺฏุช ูโุชูุงูุฏ ฺฉ ูุชุฏ ูุญู (<strong>local</strong>)ุ ุซุงุจุช (<strong>static</strong>)ุ ุง ููููู (<strong>instance</strong>) ุจุงุดุฏ. ฺฉุฏ ุฒุฑ ฺฉ ูุชุฏ ูุฏู ุซุงุจุช ุฑุง ูุดุงู ูโุฏูุฏ:</p>
<pre><code class="language-C#">Transformer t = Test.Square;
Console.WriteLine (t(10));      // 100
class Test { public static int Square (int x) =&gt; x * x; }
delegate int Transformer (int x);
</code></pre>
<p>ฺฉุฏ ุฒุฑ ฺฉ ูุชุฏ ูุฏู ููููู ุฑุง ูุดุงู ูโุฏูุฏ:</p>
<pre><code class="language-C#">Test test = new Test();
Transformer t = test.Square;
Console.WriteLine (t(10));      // 100
class Test { public int Square (int x) =&gt; x * x; }
delegate int Transformer (int x);

</code></pre>
<p>ููฺฏุงู ฺฉู ฺฉ ูุชุฏ ููููู ุจู ฺฉ ุดุก ุฏูฺฏุช ุงุฎุชุตุงุต ุฏุงุฏู ูโุดูุฏุ ุฏูฺฏุช ุนูุงูู ุจุฑ ูุชุฏุ ฺฉ ุงุฑุฌุงุน ุจู ูููููโุง ฺฉู ูุชุฏ ุจู ุขู ุชุนูู ุฏุงุฑุฏ ูุฒ ุญูุธ ูโฺฉูุฏ. ูฺฺฏ <code>Target</code> ุงุฒ ฺฉูุงุณ <code>System</code>.<code>Delegate</code> ุงู ููููู ุฑุง ููุงุด ูโุฏูุฏ (ู ุจุฑุง ุฏูฺฏุช ฺฉู ุจู ฺฉ ูุชุฏ ุซุงุจุช ุงุฑุฌุงุน ูโุฏูุฏุ <code>null</code> ุฎูุงูุฏ ุจูุฏ). ุฏุฑ ุงูุฌุง ฺฉ ูุซุงู ุขูุฑุฏู ุดุฏู ุงุณุช:</p>
<pre><code class="language-C#">MyReporter r = new MyReporter();
r.Prefix = &quot;%Complete: &quot;;
ProgressReporter p = r.ReportProgress;
p(99);                                 // %Complete: 99
Console.WriteLine (p.Target == r);     // True
Console.WriteLine (p.Method);          // Void ReportProgress(Int32)
r.Prefix = &quot;&quot;;
p(99);                                 // 99
public delegate void ProgressReporter (int percentComplete);
class MyReporter
{
  public string Prefix = &quot;&quot;;
  public void ReportProgress (int percentComplete)
    =&gt; Console.WriteLine (Prefix + percentComplete);
}


</code></pre>
<p>ุงุฒ ุขูุฌุง ฺฉู ููููู ุฏุฑ ูฺฺฏ <code>Target</code> ุฏูฺฏุช ุฐุฎุฑู ูโุดูุฏุ ุทูู ุนูุฑ ุขู (ุญุฏุงูู ุชุง ุฒูุงู ฺฉู ุฏูฺฏุช ุนูุฑ ุฏุงุฑุฏ) ุงูุฒุงุด ูโุงุจุฏ.</p>
<h3>ุฏูฺฏุชโูุง ฺูุฏูพุฎุด (Multicast Delegates)</h3>
<p>ุชูุงู ูููููโูุง ุฏูฺฏุช ูุงุจูุช ฺูุฏูพุฎุด (<code>multicast</code>) ุฏุงุฑูุฏ. ุงู ุจู ุงู ูุนู ุงุณุช ฺฉู ฺฉ ููููู ุฏูฺฏุช ูโุชูุงูุฏ ูู ุชููุง ุจู ฺฉ ูุชุฏ ูุฏูุ ุจูฺฉู ุจู ูุณุช ุงุฒ ูุชุฏูุง ูุฏู ูุฒ ุงุฑุฌุงุน ุฏูุฏ. ุนููฺฏุฑูุง <code>+</code> ู <code>+=</code> ูููููโูุง ุฏูฺฏุช ุฑุง ุจุง ูู ุชุฑฺฉุจ ูโฺฉููุฏ:</p>
<pre><code class="language-C#">SomeDelegate d = SomeMethod1;
d += SomeMethod2;
</code></pre>
<p>ุฎุท ุขุฎุฑ ุงุฒ ูุธุฑ ุนููฺฉุฑุฏ ููุงููุฏ ฺฉุฏ ุฒุฑ ุงุณุช:</p>
<pre><code class="language-C#">d = d + SomeMethod2;
</code></pre>
<p>ูุฑุงุฎูุงู d ุงฺฉููู ูุฑ ุฏู <code>SomeMethod1</code> ู <code>SomeMethod2</code> ุฑุง ูุฑุงุฎูุงู ุฎูุงูุฏ ฺฉุฑุฏ. ุฏูฺฏุชโูุง ุจู ุชุฑุชุจ ฺฉู ุงุถุงูู ูโุดููุฏุ ูุฑุงุฎูุงู ูโฺฏุฑุฏูุฏ.
ุนููฺฏุฑูุง - ู -= ุนููููุฏ ุฏูฺฏุช ุณูุช ุฑุงุณุช ุฑุง ุงุฒ ุนููููุฏ ุฏูฺฏุช ุณูุช ฺูพ ุญุฐู ูโฺฉููุฏ:</p>
<pre><code class="language-C#">
d -= SomeMethod1;
</code></pre>
<p>ูุฑุงุฎูุงู d ุงฺฉููู ุชููุง ุจุงุนุซ ูุฑุงุฎูุงู <code>SomeMethod2</code> ุฎูุงูุฏ ุดุฏ.</p>
<p>ูุฑุงุฎูุงู <code>+</code> ุง <code>+=</code> ุฑู ฺฉ ูุชุบุฑ ุฏูฺฏุช ุจุง ููุฏุงุฑ <code>null</code> ูุฒ ฺฉุงุฑ ูโฺฉูุฏ ู ูุนุงุฏู ุงุฎุชุตุงุต ูุชุบุฑ ุจู ฺฉ ููุฏุงุฑ ุฌุฏุฏ ุงุณุช:</p>
<pre><code class="language-C#">
SomeDelegate d = null;
d += SomeMethod1;       // ูุนุงุฏู (ููุช d ุจุฑุงุจุฑ null ุงุณุช) d = SomeMethod1;
</code></pre>
<p>ุจู ุทูุฑ ูุดุงุจูุ ูุฑุงุฎูุงู -= ุฑู ฺฉ ูุชุบุฑ ุฏูฺฏุช ุจุง ฺฉ ูุฏู ุชุทุงุจูโุงูุชูุ ูุนุงุฏู ุงุฎุชุตุงุต <code>null</code> ุจู ุขู ูุชุบุฑ ุงุณุช.</p>
<p>ุฏูฺฏุชโูุง ุบุฑูุงุจู ุชุบุฑ (<code>immutable</code>) ูุณุชูุฏุ ุจูุงุจุฑุงู ููุช <code>+=</code> ุง <code>-=</code> ุฑุง ูุฑุงุฎูุงู ูโฺฉูุฏุ ุฏุฑ ูุงูุน ฺฉ ููููู ุฏูฺฏุช ุฌุฏุฏ ุงุฌุงุฏ ฺฉุฑุฏู ู ุขู ุฑุง ุจู ูุชุบุฑ ููุฌูุฏ ุงุฎุชุตุงุต ูโุฏูุฏ.</p>
<p>ุงฺฏุฑ ฺฉ ุฏูฺฏุช ฺูุฏูพุฎุด ุฏุงุฑุง ููุน ุจุงุฒฺฏุดุช nonvoid ุจุงุดุฏุ ูุฑุงุฎูุงููุฏู ููุฏุงุฑ ุจุงุฒฺฏุดุช ุฑุง ุงุฒ ุขุฎุฑู ูุชุฏ ฺฉู ูุฑุงุฎูุงู ูโุดูุฏ ุฏุฑุงูุช ูโฺฉูุฏ. ูุชุฏูุง ูุจู ููฺูุงู ูุฑุงุฎูุงู ูโุดููุฏุ ุงูุง ููุงุฏุฑ ุจุงุฒฺฏุดุช ุขูโูุง ุฏูุฑ ุฑุฎุชู ูโุดูุฏ. ุฏุฑ ุจุดุชุฑ ุณูุงุฑููุง ฺฉู ุงุฒ ุฏูฺฏุชโูุง ฺูุฏูพุฎุด ุงุณุชูุงุฏู ูโุดูุฏุ ุขูโูุง ุฏุงุฑุง ุงููุงุน ุจุงุฒฺฏุดุช void ูุณุชูุฏุ ุจูุงุจุฑุงู ุงู ุธุฑุงูุช ูุทุฑุญ ููโุดูุฏ.</p>
<p>ุชูุงู ุงููุงุน ุฏูฺฏุช ุจู ุตูุฑุช ุถูู ุงุฒ <strong>System.MulticastDelegate</strong> ฺฉู ุงุฒ <strong>System.Delegate</strong> ุจู ุงุฑุซ ูโุจุฑุฏุ ูุดุชู ูโุดููุฏ. C# ุนููุงุช <code>+</code>, <code>-</code>, <code>+=</code>, ู <code>-=</code> ุฑู ฺฉ ุฏูฺฏุช ุฑุง ุจู ูุชุฏูุง static Combine ู Remove ุงุฒ ฺฉูุงุณ <strong>System.Delegate</strong> ฺฉุงููพุงู ูโฺฉูุฏ.</p>
<h4>ูุซุงู ุฏูฺฏุช ฺูุฏูพุฎุด</h4>
<p>ูุฑุถ ฺฉูุฏ ฺฉ ูุชุฏ ููุดุชูโุงุฏ ฺฉู ุงุฌุฑุง ุขู ุฒูุงู ุฒุงุฏ ูโุจุฑุฏ. ุงู ูุชุฏ ูโุชูุงูุฏ ุจู ุทูุฑ ููุธู ุจุง ูุฑุงุฎูุงู ฺฉ ุฏูฺฏุชุ ูพุดุฑูุช ฺฉุงุฑ ุฑุง ุจู ูุฑุงุฎูุงููุฏู ฺฏุฒุงุฑุด ุฏูุฏ. ุฏุฑ ุงู ูุซุงูุ ูุชุฏ <code>HardWork</code> ฺฉ ูพุงุฑุงูุชุฑ ุฏูฺฏุช <code>ProgressReporter</code> ุฏุงุฑุฏ ฺฉู ุขู ุฑุง ุจุฑุง ูุดุงู ุฏุงุฏู ูพุดุฑูุช ูุฑุงุฎูุงู ูโฺฉูุฏ:</p>
<pre><code class="language-C#">
public delegate void ProgressReporter (int percentComplete);
public class Util
{
  public static void HardWork (ProgressReporter p)
  {
    for (int i = 0; i &lt; 10; i++)
    {
      p (i * 10);                           // ูุฑุงุฎูุงู ุฏูฺฏุช
      System.Threading.Thread.Sleep (100);  // ุดุจูโุณุงุฒ ฺฉุงุฑ ุณุฎุช
    }
  }
}
</code></pre>
<p>ุจุฑุง ูุธุงุฑุช ุจุฑ ูพุดุฑูุชุ ูโุชูุงูู ฺฉ ููููู ุฏูฺฏุช ฺูุฏูพุฎุด <code>p</code> ุงุฌุงุฏ ฺฉููุ ุจู ุทูุฑ ฺฉู ูพุดุฑูุช ุชูุณุท ุฏู ูุชุฏ ูุณุชูู ูุธุงุฑุช ุดูุฏ:</p>
<pre><code class="language-C#">
ProgressReporter p = WriteProgressToConsole;
p += WriteProgressToFile;
Util.HardWork (p);

void WriteProgressToConsole (int percentComplete)
  =&gt; Console.WriteLine (percentComplete);
void WriteProgressToFile (int percentComplete)
  =&gt; System.IO.File.WriteAllText (&quot;progress.txt&quot;,
                                   percentComplete.ToString());
</code></pre>
<h3>ุงููุงุน ุฏูฺฏุช ุฌูุฑฺฉ (Generic Delegate Types)</h3>
<p>ฺฉ ููุน ุฏูฺฏุช ูโุชูุงูุฏ ุดุงูู ูพุงุฑุงูุชุฑูุง ููุน ุฌูุฑฺฉ ุจุงุดุฏ:</p>
<pre><code class="language-C#">public delegate T Transformer (T arg);
</code></pre>
<p>ุจุง ุงู ุชุนุฑูุ ูโุชูุงูู ฺฉ ูุชุฏ ฺฉุงุฑุจุฑุฏ <code>Transform</code> ุนููู ุจููุณู ฺฉู ุจุฑ ุฑู ูุฑ ููุน ฺฉุงุฑ ูโฺฉูุฏ:</p>
<pre><code class="language-C#">int[] values = { 1, 2, 3 };
Util.Transform (values, Square);      // ูุชุตู ฺฉุฑุฏู Square
foreach (int i in values)
  Console.Write (i + &quot;  &quot;);           // 1   4   9

int Square (int x) =&gt; x * x;
public class Util
{
  public static void Transform (T[] values, Transformer t)
  {
    for (int i = 0; i &lt; values.Length; i++)
      values[i] = t (values[i]);
  }
}

</code></pre>
<h3>ุฏูฺฏุชโูุง Func ู Action</h3>
<p>ุจุง ุฏูฺฏุชโูุง ุฌูุฑฺฉุ ุงูฺฉุงู ููุดุชู ูุฌููุนูโุง ฺฉูฺฺฉ ุงุฒ ุงููุงุน ุฏูฺฏุชโูุง ูุฑุงูู ูโุดูุฏ ฺฉู ุจู ูุฏุฑ ุนููู ูุณุชูุฏ ฺฉู ูโุชูุงููุฏ ุจุฑุง ูุชุฏูุง ุจุง ูุฑ ููุน ุจุงุฒฺฏุดุช ู ูุฑ ุชุนุฏุงุฏ ุขุฑฺฏููุงู (ููุทู) ฺฉุงุฑ ฺฉููุฏ. ุงู ุฏูฺฏุชโูุงุ ุฏูฺฏุชโูุง <strong>Func</strong> ู <strong>Action</strong> ูุณุชูุฏ ฺฉู ุฏุฑ ูุถุง ูุงู <code>System</code> ุชุนุฑู ุดุฏูโุงูุฏ (ุญุงุดูโููุณโูุง <code>in</code> ู <code>out</code> ูุดุงูโุฏููุฏู <code>variance</code> ูุณุชูุฏุ ฺฉู ุจู ุฒูุฏ ุฏุฑ ุฒููู ุฏูฺฏุชโูุง ูพูุดุด ูโุฏูู):</p>
<pre><code class="language-C#">
delegate TResult Func                 ();
delegate TResult Func           (T arg);
delegate TResult Func   (T1 arg1, T2 arg2);
... ู ูููโุทูุฑ ุชุง T16

delegate void Action                 ();
delegate void Action           (T arg);
delegate void Action   (T1 arg1, T2 arg2);

... ู ูููโุทูุฑ ุชุง T16
</code></pre>
<p>ุงู ุฏูฺฏุชโูุง ุจุณุงุฑ ุนููู ูุณุชูุฏ. ุฏูฺฏุช <code>Transformer</code> ุฏุฑ ูุซุงู ูุจู ูุง ูโุชูุงูุฏ ุจุง ฺฉ ุฏูฺฏุช <code>Func</code> ุฌุงฺฏุฒู ุดูุฏ ฺฉู ฺฉ ุขุฑฺฏููุงู ุงุฒ ููุน <code>T</code> ูโฺฏุฑุฏ ู ฺฉ ููุฏุงุฑ ุงุฒ ููุงู ููุน ุฑุง ุจุฑูโฺฏุฑุฏุงูุฏ:</p>
<pre><code class="language-C#">
public static void Transform (T[] values, Func transformer)
{
  for (int i = 0; i &lt; values.Length; i++)
    values[i] = transformer (values[i]);
}
</code></pre>
<p>ุชููุง ุณูุงุฑููุง ุนูู ฺฉู ุชูุณุท ุงู ุฏูฺฏุชโูุง ูพูุดุด ุฏุงุฏู ููโุดููุฏุ ูพุงุฑุงูุชุฑูุง <code>ref/out</code> ู ุงุดุงุฑูโฺฏุฑ ูุณุชูุฏ.</p>
<p>ููฺฏุงู ฺฉู C# ุจุฑุง ุงููู ุจุงุฑ ูุนุฑู ุดุฏุ ุฏูฺฏุชโูุง <code>Func</code> ู <code>Action</code> ูุฌูุฏ ูุฏุงุดุชูุฏ (ุฒุฑุง ุฌูุฑฺฉโูุง ูุฌูุฏ ูุฏุงุดุชูุฏ). ุจู ููู ุฏูู ุชุงุฑุฎ ุงุณุช ฺฉู ุจุณุงุฑ ุงุฒ ุจุฎุดโูุง <strong>.NET</strong> ุจู ุฌุง <code>Func</code> ู <code>Action</code> ุงุฒ ุงููุงุน ุฏูฺฏุชโูุง ุณูุงุฑุด ุงุณุชูุงุฏู ูโฺฉููุฏ.</p>
<h3>ุฏูฺฏุชโูุง ุฏุฑ ุจุฑุงุจุฑ ุงูุชุฑูุณโูุง (Delegates Versus Interfaces)</h3>
<p>ูุดฺฉู ฺฉู ูโุชูุงูุฏ ุจุง ฺฉ ุฏูฺฏุช ุญู ฺฉูุฏุ ุจุง ฺฉ ุงูุชุฑูุณ ูุฒ ูุงุจู ุญู ุงุณุช. ุจุฑุง ูุซุงูุ ูโุชูุงูู ูุซุงู ูุจู ุฎูุฏ ุฑุง ุจุง ฺฉ ุงูุชุฑูุณ ุจู ูุงู <code>ITransformer</code> ุจู ุฌุง ุฏูฺฏุช ุจุงุฒููุณ ฺฉูู:</p>
<pre><code class="language-C#">
int[] values = { 1, 2, 3 };
Util.TransformAll (values, new Squarer());
foreach (int i in values)
  Console.WriteLine (i);

public interface ITransformer
{
  int Transform (int x);
}

public class Util
{
  public static void TransformAll (int[] values, ITransformer t)
  {
    for (int i = 0; i &lt; values.Length; i++)
      values[i] = t.Transform (values[i]);
  }
}

class Squarer : ITransformer
{
  public int Transform (int x) =&gt; x * x;
}
</code></pre>
<p>ุทุฑุงุญ ุจุง ุฏูฺฏุช ููฺฉู ุงุณุช ุงูุชุฎุงุจ ุจูุชุฑ ูุณุจุช ุจู ุทุฑุงุญ ุจุง ุงูุชุฑูุณ ุจุงุดุฏ ุงฺฏุฑ ฺฉ ุง ฺูุฏ ููุฑุฏ ุงุฒ ุดุฑุงุท ุฒุฑ ุฏุฑุณุช ุจุงุดุฏ:</p>
<ul>
<li>
<p>ุงูุชุฑูุณ ููุท ฺฉ ูุชุฏ ุฑุง ุชุนุฑู ูโฺฉูุฏ.</p>
</li>
<li>
<p>ูุงุจูุช ฺูุฏูพุฎุด (<strong>multicast</strong>) ููุฑุฏ ูุงุฒ ุจุงุดุฏ.</p>
</li>
<li>
<p><strong>subscriber</strong> ูุงุฒ ุฏุงุดุชู ุจุงุดุฏ ุงูุชุฑูุณ ุฑุง ฺูุฏู ุจุงุฑ ูพุงุฏูโุณุงุฒ ฺฉูุฏ.</p>
</li>
</ul>
<p>ุฏุฑ ูุซุงู <code>ITransformerุ</code> ูุง ูุงุฒ ุจู ฺูุฏูพุฎุด ูุฏุงุฑูุ ุงูุง ุงูุชุฑูุณ ููุท ฺฉ ูุชุฏ ุฑุง ุชุนุฑู ูโฺฉูุฏ. ุนูุงูู ุจุฑ ุงูุ ููฺฉู ุงุณุช <code>subscriber</code> ูุง ูุงุฒ ุฏุงุดุชู ุจุงุดุฏ <code>ITransformer</code> ุฑุง ฺูุฏู ุจุงุฑ ูพุงุฏูโุณุงุฒ ฺฉูุฏ ุชุง ุชุจุฏูโูุง ูุฎุชูู ูุงููุฏ ูุฑุจุน ุง ูฺฉุนุจ ุฑุง ูพุดุชุจุงู ฺฉูุฏ. ุจุง ุงูุชุฑูุณโูุงุ ูุฌุจูุฑู ุจุฑุง ูุฑ ุชุจุฏู ฺฉ ููุน (<code>type</code>) ุฌุฏุงฺฏุงูู ุจููุณูุ ุฒุฑุง ฺฉ ฺฉูุงุณ ููุท ูโุชูุงูุฏ ฺฉ ุจุงุฑ <code>ITransformer</code> ุฑุง ูพุงุฏูโุณุงุฒ ฺฉูุฏ. ุงู ฺฉุงุฑ ูุณุจุชุงู ุฏุณุช ู ูพุง ฺฏุฑ ุงุณุช:</p>
<pre><code class="language-C#">
int[] values = { 1, 2, 3 };
Util.TransformAll (values, new Cuber());
foreach (int i in values)
  Console.WriteLine (i);

class Squarer : ITransformer
{
  public int Transform (int x) =&gt; x * x;
}
class Cuber : ITransformer
{
  public int Transform (int x) =&gt; x * x * x;
}
</code></pre>
<h3>ุณุงุฒฺฏุงุฑ ุฏูฺฏุช (Delegate Compatibility)</h3>
<h4>ุณุงุฒฺฏุงุฑ ููุน (Type compatibility)</h4>
<p>ุงููุงุน ุฏูฺฏุชโูุง ุญุช ุงฺฏุฑ ุงูุถุง ุขูโูุง ฺฉุณุงู ุจุงุดุฏุ ุจุง ฺฉุฏฺฏุฑ ูุงุณุงุฒฺฏุงุฑ ูุณุชูุฏ:</p>
<pre><code class="language-C#">
D1 d1 = Method1;
D2 d2 = d1;                           // ุฎุทุง ุฒูุงู ฺฉุงููพุงู

void Method1() { }
delegate void D1();
delegate void D2();
</code></pre>
<p>ุจุง ุงู ุญุงูุ ฺฉุฏ ุฒุฑ ูุฌุงุฒ ุงุณุช:</p>
<pre><code class="language-D2"></code></pre>
<p>ูููููโูุง ุฏูฺฏุช ุฒูุงู ุจุฑุงุจุฑ ุฏุฑ ูุธุฑ ฺฏุฑูุชู ูโุดููุฏ ฺฉู ูุชุฏูุง ูุฏู ฺฉุณุงู ุฏุงุดุชู ุจุงุดูุฏ:</p>
<pre><code class="language-C#">
D d1 = Method1;
D d2 = Method1;
Console.WriteLine (d1 == d2);         // True

void Method1() { }
delegate void D();
</code></pre>
<p>ุฏูฺฏุชโูุง ฺูุฏูพุฎุด ูุฒ ุงฺฏุฑ ุจู ูุชุฏูุง ฺฉุณุงู ู ุจู ููุงู ุชุฑุชุจ ุงุฑุฌุงุน ุฏููุฏุ ุจุฑุงุจุฑ ุฏุฑ ูุธุฑ ฺฏุฑูุชู ูโุดููุฏ.</p>
<h4>ุณุงุฒฺฏุงุฑ ูพุงุฑุงูุชุฑ (Parameter compatibility)</h4>
<p>ููุช ฺฉ ูุชุฏ ุฑุง ูุฑุงุฎูุงู ูโฺฉูุฏุ ูโุชูุงูุฏ ุขุฑฺฏููุงูโูุง ุจุง ุงููุงุน ุฎุงุตโุชุฑ ุงุฒ ูพุงุฑุงูุชุฑูุง ุขู ูุชุฏ ุงุฑุงุฆู ุฏูุฏ. ุงู ุฑูุชุงุฑ ุนุงุฏ ฺูุฏุฑุฎุช (<strong>polymorphic</strong>) ุงุณุช. ุจู ููู ุฏููุ ฺฉ ุฏูฺฏุช ูโุชูุงูุฏ ุงููุงุน ูพุงุฑุงูุชุฑ ุฎุงุตโุชุฑ ูุณุจุช ุจู ูุชุฏ ูุฏู ุฎูุฏ ุฏุงุดุชู ุจุงุดุฏ. ุจู ุงู ูฺฺฏ Contravariance ฺฏูุชู ูโุดูุฏ. ุฏุฑ ุงูุฌุง ฺฉ ูุซุงู ุขูุฑุฏู ุดุฏู ุงุณุช:</p>
<pre><code class="language-C#">
StringAction sa = new StringAction (ActOnObject);
sa (&quot;hello&quot;); // ุฎุฑูุฌ: hello

void ActOnObject (object o) =&gt; Console.WriteLine (o);
delegate void StringAction (string s);
</code></pre>
<p>ฺฉ ุฏูฺฏุช ุจู ุณุงุฏฺฏ ูุชุฏ ุฑุง ุจู ูุงุจุช ุงุฒ ุดุฎุต ุฏฺฏุฑ ูุฑุงุฎูุงู ูโฺฉูุฏ. ุฏุฑ ุงู ุญุงูุชุ <code>StringAction</code> ุจุง ฺฉ ุขุฑฺฏููุงู ุงุฒ ููุน <strong>string</strong> ูุฑุงุฎูุงู ูโุดูุฏ. ููุช ุขุฑฺฏููุงู ุจู ูุชุฏ ูุฏู ุงุฑุณุงู ูโุดูุฏุ ุจู ุตูุฑุช ุถูู ุจู <code>object</code> ุชุจุฏู ูโุดูุฏ.</p>
<p>ุงูฺฏู ุงุณุชุงูุฏุงุฑุฏ ุฑูุฏุงุฏ ุจู ุดูุง ฺฉูฺฉ ูโฺฉูุฏ ุงุฒ ุทุฑู ุงุณุชูุงุฏู ุงุฒ ฺฉูุงุณ ูพุงู ูุดุชุฑฺฉ <code>EventArgs</code> ุงุฒ <code>contravariance</code> ุจูุฑู ุจุจุฑุฏ. ุจุฑุง ูุซุงูุ ูโุชูุงูุฏ ฺฉ ูุชุฏ ูุงุญุฏ ุฏุงุดุชู ุจุงุดุฏ ฺฉู ุชูุณุท ุฏู ุฏูฺฏุช ูุฎุชูู ูุฑุงุฎูุงู ูโุดูุฏุ ฺฉ MouseEventArgs ู ุฏฺฏุฑ KeyEventArgs ุฑุง ุงุฑุณุงู ูโฺฉูุฏ.</p>
<h4>ุณุงุฒฺฏุงุฑ ููุน ุจุงุฒฺฏุดุช (Return type compatibility)</h4>
<p>ุงฺฏุฑ ฺฉ ูุชุฏ ุฑุง ูุฑุงุฎูุงู ฺฉูุฏุ ููฺฉู ุงุณุช ููุน ุฑุง ุฏุฑุงูุช ฺฉูุฏ ฺฉู ุฎุงุตโุชุฑ ุงุฒ ุขู ฺุฒ ุจุงุดุฏ ฺฉู ุฏุฑุฎูุงุณุช ฺฉุฑุฏูโุงุฏ. ุงู ูุฒ ุฑูุชุงุฑ ุนุงุฏ ฺูุฏุฑุฎุช ุงุณุช. ุจู ููู ุฏููุ ูุชุฏ ูุฏู ฺฉ ุฏูฺฏุช ููฺฉู ุงุณุช ููุน ุฎุงุตโุชุฑ ุงุฒ ุขูฺู ุฏูฺฏุช ุชูุถุญ ูโุฏูุฏุ ุจุฑฺฏุฑุฏุงูุฏ. ุจู ุงู ูฺฺฏ Covariance ฺฏูุชู ูโุดูุฏ:</p>
<pre><code class="language-C#">
ObjectRetriever o = new ObjectRetriever (RetrieveString);
object result = o();
Console.WriteLine (result);      // ุฎุฑูุฌ: hello

string RetrieveString() =&gt; &quot;hello&quot;;
delegate object ObjectRetriever();
</code></pre>
<p><code>ObjectRetriever</code> ุงูุชุธุงุฑ ุฏุงุฑุฏ ฺฉ <code>object</code> ุจุฑฺฏุฑุฏุงูุฏู ุดูุฏุ ุงูุง ฺฉ ุฒุฑฺฉูุงุณ ุงุฒ <code>object</code> ูุฒ ฺฉุงุฑุณุงุฒ ุงุณุช: ุงููุงุน ุจุงุฒฺฏุดุช ุฏูฺฏุช <code>covariant</code> ูุณุชูุฏ.</p>
<h4>ูุงุฑุงูุณ ูพุงุฑุงูุชุฑ ููุน ุฏูฺฏุช ุฌูุฑฺฉ (Generic delegate type parameter variance)</h4>
<p>ุฏุฑ ูุตู ณุ ุฏุฏู ฺฉู ฺฺฏููู ุงูุชุฑูุณโูุง ุฌูุฑฺฉ ุงุฒ ูพุงุฑุงูุชุฑูุง ููุน <code>covariant</code> ู <code>contravariant</code> ูพุดุชุจุงู ูโฺฉููุฏ. ููู ูุงุจูุช ุจุฑุง ุฏูฺฏุชโูุง ูุฒ ูุฌูุฏ ุฏุงุฑุฏ.</p>
<p>ุงฺฏุฑ ฺฉ ููุน ุฏูฺฏุช ุฌูุฑฺฉ ุชุนุฑู ูโฺฉูุฏุ ุจูุชุฑ ุงุณุช:</p>
<ul>
<li>
<p>ฺฉ ูพุงุฑุงูุชุฑ ููุน ุฑุง ฺฉู ููุท ุฏุฑ ููุฏุงุฑ ุจุงุฒฺฏุดุช ุงุณุชูุงุฏู ูโุดูุฏุ ุจู ุนููุงู covariant (<code>out</code>) ุนูุงูุชโฺฏุฐุงุฑ ฺฉูุฏ.</p>
</li>
<li>
<p>ูุฑ ูพุงุฑุงูุชุฑ ููุน ุฑุง ฺฉู ููุท ุฏุฑ ูพุงุฑุงูุชุฑูุง ุงุณุชูุงุฏู ูโุดูุฏุ ุจู ุนููุงู contravariant (<code>in</code>) ุนูุงูุชโฺฏุฐุงุฑ ฺฉูุฏ.</p>
</li>
</ul>
<p>ุงูุฌุงู ุงู ฺฉุงุฑ ุจู ุชุจุฏูโูุง ุงุฌุงุฒู ูโุฏูุฏ ุชุง ุจู ุทูุฑ ุทุจุน ุจุง ุฑุนุงุช ุฑูุงุจุท ูุฑุงุซุช ุจู ุงููุงุน ฺฉุงุฑ ฺฉููุฏ.</p>
<p>ุฏูฺฏุช ุฒุฑ (ุชุนุฑูโุดุฏู ุฏุฑ ูุถุง ูุงู <strong>System</strong>) ุฏุงุฑุง <code>TResult</code> ุงุฒ ููุน <code>covariant</code> ุงุณุช:</p>
<pre><code class="language-C#">
delegate TResult Func();
</code></pre>
<p>ุงู ุงูุฑ ุงูฺฉุงูโูพุฐุฑ ุงุณุช:</p>
<pre><code>Func x = ...;
Func y = x;
</code></pre>
<p>ุฏูฺฏุช ุฒุฑ (ุชุนุฑูโุดุฏู ุฏุฑ ูุถุง ูุงู <strong>System</strong>) ุฏุงุฑุง <code>T</code> ุงุฒ ููุน <code>contravariant</code> ุงุณุช:</p>
<pre><code class="language-C#">
delegate void Action (T arg);
</code></pre>
<p>ุงู ุงูุฑ ุงูฺฉุงูโูพุฐุฑ ุงุณุช:</p>
<pre><code>Action x = ...;
Action y = x;
</code></pre>
<h3>ุฑูุฏุงุฏูุง (Events)</h3>
<p>ููุช ุงุฒ ุฏูฺฏุชโูุง ุงุณุชูุงุฏู ูโฺฉูุฏุ ูุนูููุงู ุฏู ููุด ุฌุฏุฏ ูพุฏุฏุงุฑ ูโุดูุฏ: ูพุฎุดโฺฉููุฏู (<strong>broadcaster</strong>) ู ูุดุชุฑฺฉ (<strong>subscriber</strong>).</p>
<p>ูพุฎุดโฺฉููุฏู ููุน ุงุณุช ฺฉู ฺฉ ููุฏ ุฏูฺฏุช ุฏุงุฑุฏ. ูพุฎุดโฺฉููุฏู ุจุง ูุฑุงุฎูุงู ุฏูฺฏุชุ ุฒูุงู ูพุฎุด (broadcast) ุฑุง ุชุนู ูโฺฉูุฏ.</p>
<p>ูุดุชุฑฺฉู ฺฏุฑูุฏฺฏุงู ูุชุฏ ูุฏู ูุณุชูุฏ. ฺฉ ูุดุชุฑฺฉ ุจุง ูุฑุงุฎูุงู += ู -= ุฑู ุฏูฺฏุช ูพุฎุดโฺฉููุฏูุ ุชุตูู ูโฺฏุฑุฏ ฺู ุฒูุงู ุจู ฺฏูุด ุฏุงุฏู (<strong>listening</strong>) ุดุฑูุน ุง ูพุงุงู ุฏูุฏ. ฺฉ ูุดุชุฑฺฉ ุงุฒ ูุฌูุฏ ุณุงุฑ ูุดุชุฑฺฉู ุฎุจุฑ ูุฏุงุฑุฏ ู ุฏุฑ ฺฉุงุฑ ุขูโูุง ุฏุฎุงูุช ููโฺฉูุฏ.</p>
<p>ุฑูุฏุงุฏูุง (<strong>Events</strong>) ฺฉ ูฺฺฏ ุฒุจุงู ูุณุชูุฏ ฺฉู ุงู ุงูฺฏู ุฑุง ุฑุณู ูโฺฉููุฏ. ฺฉ ุฑูุฏุงุฏ ุณุงุฎุชุงุฑ ุงุณุช ฺฉู ููุท ุฒุฑูุฌููุนูโุง ุงุฒ ูฺฺฏโูุง ุฏูฺฏุช ุฑุง ฺฉู ุจุฑุง ูุฏู ูพุฎุดโฺฉููุฏู/ูุดุชุฑฺฉ ูุงุฒู ุงุณุชุ ุขุดฺฉุงุฑ ูโฺฉูุฏ. ูุฏู ุงุตู ุฑูุฏุงุฏูุง ุงู ุงุณุช ฺฉู ุงุฒ ุชุฏุงุฎู ูุดุชุฑฺฉู ุจุง ฺฉุฏฺฏุฑ ุฌููฺฏุฑ ฺฉููุฏ.</p>
<p>ุณุงุฏูโุชุฑู ุฑุงู ุจุฑุง ุงุนูุงู ฺฉ ุฑูุฏุงุฏุ ูุฑุงุฑ ุฏุงุฏู ฺฉููู ฺฉูุฏ <code>event</code> ูุจู ุงุฒ ฺฉ ุนุถู ุฏูฺฏุช ุงุณุช:</p>
<pre><code class="language-C#">
// Delegate definition
public delegate void PriceChangedHandler (decimal oldPrice,
                                         decimal newPrice);

public class Broadcaster
{
  // Event declaration
  public event PriceChangedHandler PriceChanged;
}
</code></pre>
<p>ฺฉุฏ ุฏุฑูู ููุน <code>Broadcaster</code> ุฏุณุชุฑุณ ฺฉุงูู ุจู <code>PriceChanged</code> ุฏุงุฑุฏ ู ูโุชูุงูุฏ ุจุง ุขู ุจู ุนููุงู ฺฉ ุฏูฺฏุช ุฑูุชุงุฑ ฺฉูุฏ. ุงูุง ฺฉุฏ ฺฉู ุฏุฑ ุฎุงุฑุฌ ุงุฒ <code>Broadcaster</code> ูุฑุงุฑ ุฏุงุฑุฏุ ุชููุง ูโุชูุงูุฏ ุนููุงุช += ู -= ุฑุง ุฑู ุฑูุฏุงุฏ <code>PriceChanged</code> ุงูุฌุงู ุฏูุฏ.</p>
<div align="center">
<p><img src="../../../assets/image/04/Table-2-1.jpeg" alt="Conventions-UsedThis-Book"></p>
</div>

  </main>

  <footer>
    <p>ุณุงุฎุชู ุดุฏู ุจุง โค๏ธ ุชูุณุท ุจุฑูุงูู ููุณุงู ุจุฑุง ุจุฑูุงูู ููุณุงู</p>
  </footer>
</body>
</html>
