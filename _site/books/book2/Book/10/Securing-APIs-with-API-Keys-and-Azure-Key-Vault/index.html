

<!doctype html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="utf-8">
  <link rel="icon" type="image/png" href="/Gitab/favicon.png">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>ุงููโุณุงุฒ APIูุง ุจุง ฺฉูุฏูุง API ู Azure Key Vault</title>
  <meta name="description" content="ุชุฑุฌููโูุง ูุงุฑุณ ฺฉุชุงุจโูุง ูู โ ุณุฑุนุ ูููุงู ู ูุงุจู ุงุชฺฉุง.">

  <!-- ุงุณุชุงูโูุง -->
  <link rel="stylesheet" href="/Gitab/styles/main.css">
  <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css">

  <style>
  @font-face {
    font-family: 'Vazir';
    src: url('/Gitab/fonts/Vazir-FD-WOL.ttf') format('truetype');
    font-display: swap;
  }
  body {
    font-family: 'Vazir', sans-serif;
  }
  </style>
</head>

<body>
  <!-- ูุฏุฑ ูุดุชุฑฺฉ -->
  <header class="header">
    <div class="container nav-wrap">
      <a href="/Gitab/" class="brand">
        <img src="/Gitab/icone/logo.svg" alt="Gitab logo" width="26" height="26">
        <span>Gitab</span>
      </a>

      <nav class="nav">
        <a href="/Gitab/" aria-current="page">ุฎุงูู</a>
        <a href="/Gitab/books/list-books">ฺฉุชุงุจโูุง</a>
       <a href="/Gitab/translator.html">ูุชุฑุฌูู</a>
        <a href="/Gitab/giter.html">ฺฏุชุฑ</a>
      </nav>

      <div class="nav-actions">
        <button id="themeToggle" class="icon-btn theme-btn" data-icon="moon" aria-label="ุชุบุฑ ุชู">
          <img src="/Gitab/icone/sun.svg" class="icon-sun" alt="ุฑูุดู">
          <img src="/Gitab/icone/moon.svg" class="icon-moon" alt="ุชุงุฑฺฉ">
        </button>

        <a class="icon-btn" href="https://github.com/hheydarian/Gitab" target="_blank" title="GitHub">
          <img src="/Gitab/icone/github.svg" alt="GitHub">
        </a>

        <!-- ุฏฺฉูู ููู ุจุฑุง ููุจุงู -->
        <button class="menu-toggle" aria-label="ููู">
          <img src="/Gitab/icone/menu.svg" alt="menu">
        </button>
      </div>
    </div>
  </header>

  
  <main class="site-main book-page">
    <h1>ูุตู ุฏูู: ๐ ุงููโุณุงุฒ APIูุง ุจุง ฺฉูุฏูุง API ู Azure Key Vault</h1>
<p>ุฏุฑ ุงู ูุตูุ ูโุฎูุงูู ุจุจูู ฺฺฏููู ูโุชูุงูู ุงุณุฑุงุฑ ู ุงุทูุงุนุงุช ุญุณุงุณ ุฑุง ุฏุฑ <strong>Azure Key Vault</strong> ูฺฏูโุฏุงุฑ ฺฉูู. ููฺูู ุจุฑุฑุณ ุฎูุงูู ฺฉุฑุฏ ฺฉู ฺฺฏููู ูโุชูุงูู ุจุง ุงุณุชูุงุฏู ุงุฒ <strong>ฺฉูุฏูุง API</strong>ุ ฺฉูุฏูุง ุฎูุฏ ุฑุง ุจุง <strong>ุงุญุฑุงุฒ ููุช</strong> ู <strong>ูุฌูุฒ ูุจุชู ุจุฑ ููุด (Role-Based Authorization)</strong> ุงูู ฺฉูู. ุจุฑุง ฺฉุณุจ ุชุฌุฑุจู ุนูู ุฏุฑ ุฒููู ุงููุช APIุ ฺฉ <strong>API ฺฉุงูู ู ฺฉุงุฑุจุฑุฏ ุฏุฑ ุญูุฒู FinTech</strong> ุฎูุงูู ุณุงุฎุช.</p>
<p>API ูุง ุฏุงุฏูโูุง API ุดุฎุต ุซุงูุซ ุฑุง ุจุง ุงุณุชูุงุฏู ุงุฒ ฺฉ <strong>ฺฉูุฏ ุฎุตูุต</strong> (ฺฉู ุฏุฑ Azure Key Vault ูุญููุธ ุงุณุช) ุงุณุชุฎุฑุงุฌ ุฎูุงูุฏ ฺฉุฑุฏ. ุณูพุณ API ุฎูุฏ ุฑุง ุจุง ุฏู ฺฉูุฏ API ุงูู ุฎูุงูู ฺฉุฑุฏุ ฺฉ ฺฉูุฏ ุจุฑุง ุงุณุชูุงุฏู ุฏุงุฎู ู ฺฉูุฏ ุฏูู ุจุฑุง ฺฉุงุฑุจุฑุงู ุฎุงุฑุฌ.</p>
<p>ููุถูุนุงุช ฺฉู ุฏุฑ ุงู ูุตู ูพูุดุด ุฏุงุฏู ูโุดููุฏ:</p>
<ol>
<li>ุฏุณุชุฑุณ ุจู <strong>Morningstar API</strong></li>
<li>ุฐุฎุฑู ฺฉูุฏ Morningstar API ุฏุฑ <strong>Azure Key Vault</strong></li>
<li>ุงุฌุงุฏ ุจุฑูุงูู ูุจ <strong>dividend calendar</strong> ุจุง <strong><a href="http://ASP.NET">ASP.NET</a> Core</strong> ุฏุฑ Azure</li>
<li>ุงูุชุดุงุฑ ุจุฑูุงูู ูุจ ุฎูุฏ</li>
<li>ุงุณุชูุงุฏู ุงุฒ ฺฉูุฏ API ุจุฑุง ุงููโุณุงุฒ API ุชููู ุณูุฏ ุณูุงู</li>
<li>ุชุณุช ุงููุช ฺฉูุฏ API</li>
<li>ุงูุฒูุฏู ฺฉุฏูุง ุชููู ุณูุฏ ุณูุงู</li>
<li>ูุญุฏูุฏุณุงุฒ (Throttling) ุงุณุชูุงุฏู ุงุฒ API</li>
</ol>
<hr>
<h3>๐ฏ ุงูุฏุงู ูุตู</h3>
<p>ุจุง ูุทุงูุนู ุงู ูุตูุ ุดูุง ุจุง ุงุตูู ุทุฑุงุญ ุฎูุจ API ุขุดูุง ุฎูุงูุฏ ุดุฏ ู ููุงุฑุชโูุง ูุงุฒู ุจุฑุง ุงุฑุชูุง ุชูุงูุงโูุง ุฎูุฏ ุฏุฑ ฺฉุงุฑ ุจุง API ุฑุง ฺฉุณุจ ุฎูุงูุฏ ฺฉุฑุฏ. ุงู ูุตู ุจู ุดูุง ฺฉูฺฉ ูโฺฉูุฏ ุชุง ููุงุฑุชโูุง ุฒุฑ ุฑุง ุจุงููุฒุฏ:</p>
<ul>
<li>ุงููโุณุงุฒ ฺฉ API ุจุง <strong>ฺฉูุฏ API ูุดุชุฑ (Client API Key)</strong> ๐</li>
<li>ุฐุฎุฑู ู ุจุงุฒุงุจ ุงุณุฑุงุฑ ุจุง ุงุณุชูุงุฏู ุงุฒ <strong>Azure Key Vault</strong></li>
<li>ุงุฌุฑุง ุฏุณุชูุฑุงุช API ุจุง <strong>Postman</strong> ุจุฑุง ุงุฑุณุงู ู ุฏุฑุงูุช ุฏุงุฏู</li>
<li>ุฏุฑุฎูุงุณุช ู ุงุณุชูุงุฏู ุงุฒ APIูุง ุดุฎุต ุซุงูุซ ุฏุฑ <strong><a href="http://RapidAPI.com">RapidAPI.com</a></strong></li>
<li>ูุญุฏูุฏุณุงุฒ ุงุณุชูุงุฏู ุงุฒ API (<strong>API Throttling</strong>)</li>
<li>ููุดุชู <strong>FinTech APIs</strong> ฺฉู ุงุฒ ุฏุงุฏูโูุง ูุงู ุขููุงู ุงุณุชูุงุฏู ูโฺฉููุฏ ๐น</li>
</ul>
<hr>
<h3>โ๏ธ ูพุดโูุงุฒูุง ูู</h3>
<p>ุจุฑุง ุจูุฑูโููุฏ ฺฉุงูู ุงุฒ ุงู ูุตูุ ูุทูุฆู ุดูุฏ ฺฉู ูพุดโูุงุฒูุง ูู ุฒุฑ ุฑุง ุขูุงุฏู ฺฉุฑุฏูโุงุฏ:</p>
<ul>
<li><strong>Visual Studio 2019 Community Edition</strong> ุง ูุณุฎู ุจุงูุงุชุฑ</li>
<li>ฺฉูุฏ ุดุฎุต <strong>Morningstar API</strong> ุงุฒ <a href="https://rapidapi.com/integraatio/api/morningstar1">RapidAPI</a></li>
<li><strong>RestSharp</strong> (<a href="http://restsharp.org/">http://restsharp.org/</a>)</li>
<li><strong>Swashbuckle.AspNetCore 5</strong> ุง ุจุงูุงุชุฑ</li>
<li><strong>Postman</strong> (<a href="https://www.postman.com/">https://www.postman.com/</a>)</li>
<li><strong>Swagger</strong> (<a href="https://swagger.io">https://swagger.io</a>)</li>
</ul>
<hr>
<h3>๐ ุดุฑูุน ูพุฑูฺู API โ ุชููู ุณูุฏ ุณูุงู</h3>
<p>ุจูุชุฑู ุฑูุด ุงุฏฺฏุฑุ <strong>ุงุฏฺฏุฑ ุจุง ุนูู ฺฉุฑุฏู</strong> ุงุณุช. ุจูุงุจุฑุงูุ ูุง ฺฉ API ฺฉุงุฑุจุฑุฏ ูโุณุงุฒู ู ุขู ุฑุง ุงูู ูโฺฉูู. ุงู API ููฺฉู ุงุณุช ฺฉุงูู ูุจุงุดุฏ ู ุฌุง ุจุฑุง ุจูุจูุฏ ุฏุงุดุชู ุจุงุดุฏุ ุงูุง ุดูุง ูโุชูุงูุฏ ุงู ุจูุจูุฏูุง ุฑุง ุฎูุฏุชุงู ูพุงุฏูโุณุงุฒ ฺฉุฑุฏู ู ูพุฑูฺู ุฑุง ุชูุณุนู ุฏูุฏ. ูุฏู ุงุตู ุงู ุงุณุช ฺฉู ฺฉ API ฺฉุงููุงู ุนูู ุฏุงุดุชู ุจุงุดู ฺฉู <strong>ฺฉ ฺฉุงุฑ ุงูุฌุงู ุฏูุฏ:</strong> ุจุงุฒฺฏุฑุฏุงูุฏู ุฏุงุฏูโูุง ูุงู ุดุงูู <strong>ุชูุงู ุณูุฏ ุณูุงู ุดุฑฺฉุชโูุง ุฏุฑ ุณุงู ุฌุงุฑ</strong>.</p>
<p>API ุชููู ุณูุฏ ุณูุงู ูุงุ ฺฉู ุฏุฑ ุงู ูุตู ุฎูุงูู ุณุงุฎุชุ <strong>ุจุง ฺฉูุฏ API ุงุญุฑุงุฒ ููุช</strong> ูโุดูุฏ. ุจุณุชู ุจู ฺฉูุฏ ุงุณุชูุงุฏู ุดุฏูุ <strong>Authorization</strong> ุชุนู ูโฺฉูุฏ ฺฉู ฺฉุงุฑุจุฑ ุฏุงุฎู ุงุณุช ุง ุฎุงุฑุฌ. ฺฉูุชุฑูุฑ ูุชุฏ ููุงุณุจ ุฑุง ุจุง ุชูุฌู ุจู ููุน ฺฉุงุฑุจุฑ ุงุฌุฑุง ูโฺฉูุฏ. ุฏุฑ ุงู ูุตู ุชููุง <strong>ูุชุฏ ฺฉุงุฑุจุฑุงู ุฏุงุฎู</strong> ูพุงุฏูโุณุงุฒ ุฎูุงูุฏ ุดุฏุ ุงูุง ุดูุง ูโุชูุงูุฏ <strong>ูุชุฏ ฺฉุงุฑุจุฑุงู ุฎุงุฑุฌ</strong> ุฑุง ูุฒ ุจู ุนููุงู ุชูุฑู ุฎูุฏุชุงู ุจุณุงุฒุฏ.</p>
<p><strong>ูุชุฏ ุฏุงุฎู</strong> ฺฉ ฺฉูุฏ API ุฑุง ุงุฒ Azure Key Vault ุงุณุชุฎุฑุงุฌ ูโฺฉูุฏ ู <strong>ฺูุฏู ูุฑุงุฎูุงู API ุจู API ุดุฎุต ุซุงูุซ</strong> ุงูุฌุงู ูโุฏูุฏ. ุฏุงุฏูโูุง ุฏุฑ <strong>ูุฑูุช JSON</strong> ุจุงุฒฺฏุฑุฏุงู ุดุฏูุ ุจู ุงุดุงุก ุชุจุฏู (Deserialize) ูโุดููุฏ ู ุณูพุณ ุจุฑุง ุงุณุชุฎุฑุงุฌ <strong>ูพุฑุฏุงุฎุช ุณูุฏ ุณูุงู ุขูุฏู</strong> ูพุฑุฏุงุฒุด ูโุดููุฏ ู ุจู ฺฉ <strong>ูุณุช ุณูุฏ ุณูุงู</strong> ุงุถุงูู ูโุดููุฏ. ุงู ูุณุช ุฏุฑ ููุงุช ุจู <strong>ูุฑูุช JSON</strong> ุจู ูุฑุงุฎูุงููุฏู ุจุงุฒฺฏุฑุฏุงูุฏู ูโุดูุฏ.</p>
<p>ูุชุฌู ููุงุ ฺฉ ูุงู JSON ุงุณุช ฺฉู ุดุงูู <strong>ุชูุงู ูพุฑุฏุงุฎุชโูุง ุจุฑูุงููโุฑุฒโุดุฏู ุณูุฏ ุณูุงู ุจุฑุง ุณุงู ุฌุงุฑ</strong> ุงุณุช. ฺฉุงุฑุจุฑ ููุง ูโุชูุงูุฏ ุงู ุฏุงุฏูโูุง ุฑุง ุจู ูุณุช ุงุฒ ุณูุฏ ุณูุงู ุชุจุฏู ฺฉูุฏ ู ุจุง ุงุณุชูุงุฏู ุงุฒ <strong>LINQ</strong> ุขู ุฑุง ูพุฑุณโูุฌู ฺฉูุฏ.</p>
<hr>
<h3>๐๏ธ ุณุงุฎุชุงุฑ ูพุฑูฺู</h3>
<p>ูพุฑูฺูโุง ฺฉู ุฏุฑ ุงู ูุตู ุฎูุงูู ุณุงุฎุชุ ฺฉ <strong>Web API</strong> ุงุณุช ฺฉู <strong>JSON ูพุฑุฏุงุฒุดโุดุฏู</strong> ุงุฒ APIูุง ูุงู ุดุฎุต ุซุงูุซ ุฑุง ุจุงุฒูโฺฏุฑุฏุงูุฏ. ูพุฑูฺูุ <strong>ูุณุช ุงุฒ ุดุฑฺฉุชโูุง ุงุฒ ฺฉ ุจูุฑุณ ูุดุฎุต</strong> ุฏุฑุงูุช ูโฺฉูุฏ ู ุณูพุณ ุจุฑุง ูุฑ ุดุฑฺฉุชุ ุฏุงุฏูโูุง <strong>ุณูุฏ ุณูุงู</strong> ุฑุง ุฏุฑุงูุช ูโฺฉูุฏ. ุฏุงุฏูโูุง ุณูุฏ ุณูุงู ุจุฑุง ุณุงู ุฌุงุฑ ูพุฑุฏุงุฒุด ูโุดููุฏ ู ุฏุฑ ููุงุช ุจู <strong>ูุฑุงุฎูุงููุฏู API</strong> ุฏุฑ ูุงูุจ <strong>JSON</strong> ุจุงุฒฺฏุฑุฏุงูุฏู ูโุดููุฏ.</p>
<p>ฺฉุงุฑุจุฑ ููุง ูโุชูุงูุฏ ุฏุงุฏูโูุง JSON ุฑุง ุจู <strong>ุงุดุงุก C#</strong> ุชุจุฏู ฺฉูุฏ ู ุฑู ุงู ุงุดุงุก <strong>ูพุฑุณโูุฌููุง LINQ</strong> ุงูุฌุงู ุฏูุฏุ ูุซูุงู ุฏุฑุงูุช ูพุฑุฏุงุฎุชโูุง ุณูุฏ ุณูุงู <strong>ูุงู ุจุนุฏ</strong> ุง <strong>ูพุฑุฏุงุฎุชโูุง ูุงู ุฌุงุฑ</strong>.</p>
<p>APIูุง ฺฉู ุงุณุชูุงุฏู ุฎูุงูู ฺฉุฑุฏุ ุจุฎุด ุงุฒ <strong>Morningstar API</strong> ูุณุชูุฏ ฺฉู ุงุฒ ุทุฑู <strong><a href="http://RapidAPI.com">RapidAPI.com</a></strong> ุฏุฑ ุฏุณุชุฑุณโุงูุฏ. ุดูุง ูโุชูุงูุฏ ุจุฑุง ุฏุฑุงูุช <strong>ฺฉูุฏ API ุฑุงฺฏุงู Morningstar</strong> ุซุจุชโูุงู ฺฉูุฏ. ูุง API ุฎูุฏ ุฑุง ุจุง ฺฉ <strong>ุณุณุชู ูุฑูุฏ (Login)</strong> ุงูู ุฎูุงูู ฺฉุฑุฏุ ุฌุง ฺฉู ฺฉุงุฑุจุฑุงู ุจุง <strong>ุงูู ู ุฑูุฒ ุนุจูุฑ</strong> ูุงุฑุฏ ูโุดููุฏ.</p>
<p>ุจุฑุง ุงุฑุณุงู <strong>ุฏุฑุฎูุงุณุชโูุง POST ู GET</strong> ุจู API ุชููู ุณูุฏ ุณูุงูุ ุจู <strong>Postman</strong> ูุฒ ูุงุฒ ุฎูุงูู ุฏุงุดุช.</p>
<hr>
<h3>๐งฉ ุฌุฒุฆุงุช ูพุฑูฺู</h3>
<p>ุฑุงูโุญู ูุง ุดุงูู ฺฉ ูพุฑูฺู ุฎูุงูุฏ ุจูุฏ: ฺฉ <strong><a href="http://ASP.NET">ASP.NET</a> Core Application</strong> ฺฉู <strong>Target Framework</strong> ุขู <strong>.NET Core 3.1</strong> ุง ุจุงูุงุชุฑ ุงุณุช.</p>
<p>ุฏุฑ ุงุฏุงููุ ูุญูู <strong>ุฏุณุชุฑุณ ุจู Morningstar API</strong> ุฑุง ุจุฑุฑุณ ุฎูุงูู ฺฉุฑุฏ. โ</p>
<h3>๐ ุฏุณุชุฑุณ ุจู Morningstar API</h3>
<p>ุจู ุขุฏุฑุณ <a href="https://rapidapi.com/integraatio/api/morningstar1">https://rapidapi.com/integraatio/api/morningstar1</a> ุจุฑูุฏ ู <strong>ฺฉูุฏ ุฏุณุชุฑุณ API</strong> ุฎูุฏ ุฑุง ุฏุฑุฎูุงุณุช ฺฉูุฏ. ุงู API ฺฉ <strong>Freemium API</strong> ุงุณุชุ ุจู ุงู ูุนูุง ฺฉู ุดูุง ูุฌุงุฒ ูุณุชุฏ ุชุนุฏุงุฏ ูุดุฎุต ูุฑุงุฎูุงู ุฑุง ุจู ุตูุฑุช ุฑุงฺฏุงู ุจุฑุง ูุฏุช ูุญุฏูุฏ ุงูุฌุงู ุฏูุฏ ู ูพุณ ุงุฒ ุขู ูุงุฒ ุจู ูพุฑุฏุงุฎุช ูุฒูู ุฏุงุฑุฏ. ฺฉู ุฒูุงู ุจฺฏุฐุงุฑุฏ ู ูุณุชูุฏุงุช API ุฑุง ูุทุงูุนู ฺฉูุฏ. ุจู <strong>ูพููโูุง ููุช</strong> ุชูุฌู ฺฉูุฏ ู ูพุณ ุงุฒ ุฏุฑุงูุช ฺฉูุฏุ ุขู ุฑุง <strong>ูุญุฑูุงูู ูฺฏู ุฏุงุฑุฏ</strong> ๐.</p>
<p>APIูุง ฺฉู ูุง ุจู ุขูโูุง ุนูุงููโููุฏู ุจู ุดุฑุญ ุฒุฑ ูุณุชูุฏ:</p>
<ul>
<li><strong>GET /companies/list-by-exchange:</strong> ุงู API ูุณุช ุงุฒ ฺฉุดูุฑูุง ุจุฑุง ุจูุฑุณ ูุดุฎุตโุดุฏู ุฑุง ุจุงุฒ ูโฺฏุฑุฏุงูุฏ.</li>
<li><strong>GET /dividends:</strong> ุงู API ุชูุงู ุงุทูุงุนุงุช <strong>ูพุฑุฏุงุฎุช ุณูุฏ ุณูุงู ุชุงุฑุฎ ู ูุนู</strong> ุจุฑุง ุดุฑฺฉุช ูุดุฎุตโุดุฏู ุฑุง ุฏุฑุงูุช ูโฺฉูุฏ.</li>
</ul>
<p>ูุณูุช ุงูู ุฏุฑุฎูุงุณุช APIุ <strong>HTTP verb GET</strong> ุงุณุช ฺฉู ุจุฑุง ุจุงุฒุงุจ ฺฉ ููุจุน ุงุณุชูุงุฏู ูโุดูุฏ.<br>
ูุณูุช ุฏููุ ููุจุน ุงุณุช ฺฉู ูโุฎูุงูู ุฏุฑุงูุช ฺฉูู. ุฏุฑ ุงู ูุซุงูุ ููุจุน <strong>/companies/list-by-exchange</strong> ุงุณุช. ููุงูโุทูุฑ ฺฉู ุฏุฑ ููุฑุฏ ุฏูู ูุณุช ุจุงูุง ูโุจููุ ูุง ููุจุน <strong>/dividends</strong> ุฑุง ุฏุฑุงูุช ูโฺฉูู.</p>
<p>ูโุชูุงูุฏ ูุฑ API ุฑุง ุฏุฑ ูุฑูุฑฺฏุฑ ุงูุชุญุงู ฺฉูุฏ ู ุฏุงุฏู ุจุงุฒฺฏุดุช ุฑุง ูุดุงูุฏู ฺฉูุฏ. ุชูุตู ูโฺฉูู ูุจู ุงุฒ ุงุฏุงููุ ุงู ฺฉุงุฑ ุฑุง ุงูุฌุงู ุฏูุฏ. ุงู ฺฉุงุฑ ุจู ุดูุง ฺฉูฺฉ ูโฺฉูุฏ ุชุง ุจุง ุฑููุฏ ฺฉุงุฑ ฺฉู ุฏุฑ ูพุด ุฏุงุฑูุ ุขุดูุง ุดูุฏ. ุฌุฑุงู ุงุตู ฺฉุงุฑ ูุง ุจู ุงู ุตูุฑุช ุงุณุช:</p>
<ol>
<li>ุฏุฑุงูุช ูุณุช ุดุฑฺฉุชโูุง ฺฉู ุจู ุจูุฑุณ ูุดุฎุต ุชุนูู ุฏุงุฑูุฏ</li>
<li>ุญููู ุฒุฏู ุฑู ูุฑ ุดุฑฺฉุช ุจุฑุง ุฏุฑุงูุช ุฏุงุฏูโูุง ุณูุฏ ุณูุงู</li>
<li>ุงฺฏุฑ ุฏุงุฏู ุณูุฏ ุณูุงู ุฏุงุฑุง ุชุงุฑุฎ ูพุฑุฏุงุฎุช ุขูุฏู ุจุงุดุฏุ ุจู <strong>ุชููู ุณูุฏ ุณูุงู</strong> ุงุถุงูู ูโุดูุฏุ ุฏุฑ ุบุฑ ุงู ุตูุฑุชุ ูุงุฏุฏู ฺฏุฑูุชู ูโุดูุฏ.</li>
</ol>
<p>ููู ูุณุช ฺฉ ุดุฑฺฉุช ฺูุฏ ุฏุงุฏู ุณูุฏ ุณูุงู ุฏุงุฑุฏุ ูุง ุชููุง ุจู <strong>ุงููู ุฑฺฉูุฑุฏ</strong> ฺฉู <strong>ุจูโุฑูุฒุชุฑู</strong> ุงุณุชุ ุนูุงููโููุฏู.</p>
<p>ุญุงูุง ฺฉู ฺฉูุฏ API ุฎูุฏ ุฑุง ุฏุงุฑุฏ (ูุฑุถ ุจุฑ ุงู ุงุณุช ฺฉู ูุฑุงุญู ุฑุง ุฏูุจุงู ฺฉุฑุฏูโุงุฏ)ุ ูโุชูุงูู <strong>ุณุงุฎุช API ุฎูุฏ ุฑุง ุดุฑูุน ฺฉูู</strong> ๐.</p>
<hr>
<h3>๐ ุฐุฎุฑู ฺฉูุฏ Morningstar API ุฏุฑ Azure Key Vault</h3>
<p>ูุง ุงุฒ <strong>Azure Key Vault</strong> ู <strong>Managed Service Identity (MSI)</strong> ุฏุฑ ฺฉ ุจุฑูุงูู ูุจ <strong><a href="http://ASP.NET">ASP.NET</a> Core</strong> ุงุณุชูุงุฏู ุฎูุงูู ฺฉุฑุฏ. ุจูุงุจุฑุงูุ ูุจู ุงุฒ ุงุฏุงููุ ุจู ฺฉ <strong>ุงุดุชุฑุงฺฉ Azure</strong> ูุงุฒ ุฏุงุฑุฏ. ุจุฑุง ูุดุชุฑุงู ุฌุฏุฏุ ฺฉ ูพุดููุงุฏ ุฑุงฺฏุงู ฑฒ ูุงูู ุฏุฑ ุฏุณุชุฑุณ ุงุณุช: <a href="http://azure.microsoft.com/en-us/free">Azure Free</a></p>
<p>ุจู ุนููุงู ุชูุณุนูโุฏููุฏฺฏุงู ูุจุ <strong>ูฺฏูุฏุงุฑ ุงุณุฑุงุฑ ุฏุฑ ฺฉุฏ</strong> ฺฉุงุฑ ููุงุณุจ ูุณุชุ ุฒุฑุง ฺฉุฏ ูโุชูุงูุฏ <strong>ูููุฏุณ ูุนฺฉูุณ</strong> ุดูุฏ. ุงฺฏุฑ ฺฉุฏ ููุจุน ุจุงุฒ ุจุงุดุฏุ ุฎุทุฑ <strong>ุจุงุฑฺฏุฐุงุฑ ฺฉูุฏูุง ุดุฎุต ุง ุณุงุฒูุงู ุฏุฑ ุณุณุชู ฺฉูุชุฑู ูุณุฎู ุนููู</strong> ูุฌูุฏ ุฏุงุฑุฏ.</p>
<p>ุฑุงู ุญู ุงู ูุดฺฉูุ <strong>ุฐุฎุฑู ุงูู ุงุณุฑุงุฑ</strong> ุงุณุชุ ุงูุง ุงู ุฎูุฏ ฺฉ <strong>ฺุงูุด</strong> ุงุฌุงุฏ ูโฺฉูุฏ: ุจุฑุง ุฏุณุชุฑุณ ุจู ฺฉูุฏูุง ูุญุฑูุงููุ ูุงุฒ ุจู <strong>ุงุญุฑุงุฒ ููุช</strong> ุฏุงุฑู. ฺฺฏููู ูโุชูุงูู ุงู ฺุงูุด ุฑุง ุญู ฺฉููุ</p>
<p>ุจุง <strong>ูุนุงูโุณุงุฒ MSI</strong> ุจุฑุง ุณุฑูุณ Azure ุฎูุฏ ูโุชูุงูู ุงู ูุดฺฉู ุฑุง ุญู ฺฉูู. ุฏุฑ ูุชุฌูุ <strong>ฺฉ Service Principal ุชูุณุท Azure</strong> ุชููุฏ ูโุดูุฏ. ุงู Service Principal ุชูุณุท ุจุฑูุงููโูุง ฺฉู ุชูุณุท ฺฉุงุฑุจุฑ ุชูุณุนู ุฏุงุฏู ุดุฏูโุงูุฏุ ุจุฑุง ุฏุณุชุฑุณ ุจู ููุงุจุน Microsoft Azure ุงุณุชูุงุฏู ูโุดูุฏ. ุจุฑุง Service Principal ูโุชูุงู ุงุฒ <strong>ฺฏูุงู ุฏุฌุชุงู (Certificate)</strong> ุง <strong>ูุงู ฺฉุงุฑุจุฑ ู ุฑูุฒ ุนุจูุฑ</strong> ููุฑุงู ุจุง <strong>ูุฑ ููุด ุฏูุฎูุงู</strong> ฺฉู ูุฌููุนู ูุฌูุฒูุง ูุงุฒู ุฑุง ุฏุงุฑุฏุ ุงุณุชูุงุฏู ฺฉุฑุฏ.</p>
<p>ฺฉุณ ฺฉู ฺฉูุชุฑู ุญุณุงุจ Azure ุฑุง ุฏุงุฑุฏุ ูุดุฎุต ูโฺฉูุฏ ูุฑ ุณุฑูุณ ฺู ูุธุงู ุฎุงุต ุฑุง ูโุชูุงูุฏ ุงูุฌุงู ุฏูุฏ. ูุนูููุงู ุจูุชุฑ ุงุณุช ุงุฒ <strong>ูุญุฏูุฏุช ฺฉุงูู</strong> ุดุฑูุน ฺฉูุฏ ู ุชููุง ููุช ูุงุฒ ุจูุฏ ูุงุจูุชโูุง ุฑุง ุงุถุงูู ฺฉูุฏ.</p>
<p><strong>ูููุฏุงุฑ ุฒุฑ</strong> ุฑูุงุจุท ุจู ุจุฑูุงููโูุง ูุจ <a href="http://ASP.NET">ASP.NET</a> Coreุ MSI ู ุณุฑูุณ Azure ูุง ุฑุง ูุดุงู ูโุฏูุฏ:</p>
<div align="center">
<p><img src="../../../assets/image/10/Table%2010-1.jpeg" alt="Conventions-UsedThis-Book"></p>
</div>
<h3>๐ข ุงุณุชูุงุฏู ุงุฒ Azure AD ู MSI ุจุฑุง ุงุญุฑุงุฒ ููุช</h3>
<p><strong>Azure Active Directory (Azure AD)</strong> ุชูุณุท <strong>MSI</strong> ุจุฑุง ุชุฒุฑู <strong>Service Principal</strong> ุจู ููููู ุณุฑูุณ ุงุณุชูุงุฏู ูโุดูุฏ. ฺฉ ููุจุน Azure ุจู ูุงู <strong>Local Metadata Service</strong> ุจุฑุง ุฏุฑุงูุช <strong>Access Token</strong> ุงุณุชูุงุฏู ูโุดูุฏ ู ุจุฑุง ุงุญุฑุงุฒ ููุช ุฏุณุชุฑุณ ุณุฑูุณ ุจู <strong>Azure Key Vault</strong> ฺฉุงุฑุจุฑุฏ ุฏุงุฑุฏ.</p>
<p>ฺฉุฏ ูุง ุณูพุณ ุจุง <strong>Local Metadata Service</strong> ฺฉู ุฑู ููุจุน Azure ุฏุฑ ุฏุณุชุฑุณ ุงุณุชุ ุชูุงุณ ูโฺฏุฑุฏ ุชุง <strong>Access Token</strong> ุฑุง ุฏุฑุงูุช ฺฉูุฏ. ุงู Access Token ฺฉู ุงุฒ <strong>Local MSI Endpoint</strong> ุงุณุชุฎุฑุงุฌ ุดุฏูุ ุชูุณุท ฺฉุฏ ูุง ุจุฑุง <strong>ุงุญุฑุงุฒ ููุช ุฏุฑ ุณุฑูุณ Azure Key Vault</strong> ุงุณุชูุงุฏู ูโุดูุฏ ๐.</p>
<hr>
<h3>๐น ูุฑูุฏ ุจู Azure ู ุงุฌุงุฏ Resource Group</h3>
<p>Azure CLI ุฑุง ุจุงุฒ ฺฉุฑุฏู ู ุฏุณุชูุฑ ุฒุฑ ุฑุง ุจุฑุง ูุฑูุฏ ุจู Azure ุชุงูพ ฺฉูุฏ:</p>
<pre class="hljs"><code>az login
</code></pre>
<p>ูพุณ ุงุฒ ูุฑูุฏ ููููุ ูโุชูุงูู ฺฉ <strong>Resource Group</strong> ุงุฌุงุฏ ฺฉูู. Resource Groupูุง <strong>ฺฉุงูุชูุฑูุง ููุทู</strong> ูุณุชูุฏ ฺฉู ููุงุจุน Azure ุฏุฑ ุขูโูุง ูุณุชูุฑ ู ูุฏุฑุช ูโุดููุฏ.</p>
<p>ุจุฑุง ุงุฌุงุฏ ฺฉ Resource Group ุฏุฑ <strong>East US</strong>ุ ุฏุณุชูุฑ ุฒุฑ ุฑุง ุงุฌุฑุง ฺฉูุฏ:</p>
<pre class="hljs"><code>az group create --name <span class="hljs-string">&quot;&lt;YourResourceGroupName&gt;&quot;</span> --location <span class="hljs-string">&quot;East US&quot;</span>
</code></pre>
<p>ุงู <strong>Resource Group</strong> ุฑุง ุฏุฑ ุทูู ูุตู ุจุฑุง ุชูุงู ูุฑุงุญู ุงุณุชูุงุฏู ุฎูุงูู ฺฉุฑุฏ.</p>
<hr>
<h3>๐ ุงุฌุงุฏ Key Vault</h3>
<p>ุจุฑุง ุงุฌุงุฏ ฺฉ <strong>Key Vault</strong>ุ ุงุทูุงุนุงุช ุฒุฑ ููุฑุฏ ูุงุฒ ุงุณุช:</p>
<ol>
<li><strong>ูุงู Key Vault:</strong> ุฑุดุชูโุง ุจู ณ ุชุง ฒด ฺฉุงุฑุงฺฉุชุฑุ ููุท ุดุงูู ุงุนุฏุงุฏ ฐ-นุ ุญุฑูู ฺฉูฺฺฉ ู ุจุฒุฑฺฏ a-zุ A-Z ู ุฎุท ุชุฑู (-)</li>
<li><strong>ูุงู Resource Group</strong></li>
<li><strong>ูฺฉุงู (Location):</strong> ูุซูุง East US ุง West US</li>
</ol>
<p>ุฏุฑ Azure CLIุ ุฏุณุชูุฑ ุฒุฑ ุฑุง ูุงุฑุฏ ฺฉูุฏ:</p>
<pre class="hljs"><code>az keyvault create --name <span class="hljs-string">&quot;&lt;YourKeyVaultName&gt;&quot;</span> --resource-group <span class="hljs-string">&quot;&lt;YourResourceGroupName&gt;&quot;</span> --location <span class="hljs-string">&quot;East US&quot;</span>
</code></pre>
<p>ุฏุฑ ุงู ูุฑุญููุ ููุท <strong>ุญุณุงุจ Azure ุดูุง</strong> ูุฌุงุฒ ุจู ุงูุฌุงู ุนููุงุช ุฑู Key Vault ุงุณุช. ุฏุฑ ุตูุฑุช ูุงุฒ ูโุชูุงูุฏ ุญุณุงุจโูุง ุฏฺฏุฑ ุฑุง ุงุถุงูู ฺฉูุฏ.</p>
<hr>
<h3>๐น ุงูุฒูุฏู ฺฉูุฏ Morningstar API ุจู Key Vault</h3>
<p>ฺฉูุฏ ฺฉู ุจุงุฏ ุจู ูพุฑูฺู ุงุถุงูู ฺฉููุ <strong>MorningstarApiKey</strong> ุงุณุช. ุจุฑุง ุงูุฒูุฏู ุงู ฺฉูุฏ ุจู Key Vaultุ ุฏุณุชูุฑ ุฒุฑ ุฑุง ุงุฌุฑุง ฺฉูุฏ:</p>
<pre class="hljs"><code>az keyvault secret <span class="hljs-built_in">set</span> --vault-name <span class="hljs-string">&quot;&lt;YourKeyVaultName&gt;&quot;</span> --name <span class="hljs-string">&quot;MorningstarApiKey&quot;</span> --value <span class="hljs-string">&quot;&lt;YourMorningstarApiKey&gt;&quot;</span>
</code></pre>
<p>ุงฺฉููู Key Vault ุดูุงุ <strong>ฺฉูุฏ Morningstar API</strong> ุฑุง ุฐุฎุฑู ฺฉุฑุฏู ุงุณุช. ุจุฑุง ุจุฑุฑุณ ุฏุฑุณุช ุฐุฎุฑู ุดุฏู ููุฏุงุฑุ ุฏุณุชูุฑ ุฒุฑ ุฑุง ุงุฌุฑุง ฺฉูุฏ:</p>
<pre class="hljs"><code>az keyvault secret show --name <span class="hljs-string">&quot;MorningstarApiKey&quot;</span> --vault-name <span class="hljs-string">&quot;&lt;YourKeyVaultName&gt;&quot;</span>
</code></pre>
<p>ุงฺฏุฑ ููู ฺุฒ ุฏุฑุณุช ุจุงุดุฏุ ููุฏุงุฑ ฺฉูุฏ ุฏุฑ <strong>ฺฉูุณูู ููุงุด ุฏุงุฏู ูโุดูุฏ</strong> ู ูุงู ู ููุฏุงุฑ ฺฉูุฏ ุฐุฎุฑูโุดุฏู ุฑุง ุฎูุงูุฏ ุฏุฏ โ.</p>
<hr>
<h3>๐ ุงุฌุงุฏ ุจุฑูุงูู ูุจ <a href="http://ASP.NET">ASP.NET</a> Core โ ุชููู ุณูุฏ ุณูุงู ุฏุฑ Azure</h3>
<p>ุจุฑุง ุชฺฉูู ุงู ูุฑุญูู ุงุฒ ูพุฑูฺูุ ุจู <strong>Visual Studio 2019</strong> ุจุง <strong><a href="http://ASP.NET">ASP.NET</a> ู Web Development Workload</strong> ูุตุจโุดุฏู ูุงุฒ ุฏุงุฑุฏ.</p>
<p>ฑ. ุงุฌุงุฏ ฺฉ <strong><a href="http://ASP.NET">ASP.NET</a> Core Web Application ุฌุฏุฏ</strong>:</p>
<div align="center">
<p><img src="../../../assets/image/10/Table%2010-2.jpeg" alt="Conventions-UsedThis-Book"></p>
</div>
<p>ฒ. ูุทูุฆู ุดูุฏ ฺฉู <strong>API</strong> ุงูุชุฎุงุจ ุดุฏู ู ฺฏุฒูู <strong>No Authentication</strong> ุชูุธู ุดุฏู ุจุงุดุฏ ๐ง</p>
<div align="center">
<p><img src="../../../assets/image/10/Table%2010-3.jpeg" alt="Conventions-UsedThis-Book"></p>
</div>
<p>ณ. ฺฉ <strong>API ููููู ูพุดโุจู ูุถุนุช ููุง</strong> ุชุนุฑู ุดุฏู ุงุณุช ู ุฏุฑ ูุฑูุฑฺฏุฑุ <strong>ฺฉุฏ JSON</strong> ุฒุฑ ุฑุง ููุงุด ูโุฏูุฏ:</p>
<pre class="hljs"><code><span class="hljs-punctuation">[</span>
  <span class="hljs-punctuation">{</span><span class="hljs-attr">&quot;date&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;2020-04-13T20:02:22.8144942+01:00&quot;</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;temperatureC&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-number">0</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;temperatureF&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-number">32</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;summary&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;Balmy&quot;</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-punctuation">{</span><span class="hljs-attr">&quot;date&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;2020-04-14T20:02:22.8234349+01:00&quot;</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;temperatureC&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-number">13</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;temperatureF&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-number">55</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;summary&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;Warm&quot;</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-punctuation">{</span><span class="hljs-attr">&quot;date&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;2020-04-15T20:02:22.8234571+01:00&quot;</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;temperatureC&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-number">3</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;temperatureF&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-number">37</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;summary&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;Scorching&quot;</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-punctuation">{</span><span class="hljs-attr">&quot;date&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;2020-04-16T20:02:22.8234587+01:00&quot;</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;temperatureC&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-number">-2</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;temperatureF&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-number">29</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;summary&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;Sweltering&quot;</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-punctuation">{</span><span class="hljs-attr">&quot;date&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;2020-04-17T20:02:22.8234602+01:00&quot;</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;temperatureC&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-number">-13</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;temperatureF&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-number">9</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;summary&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;Cool&quot;</span><span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">]</span>
</code></pre>
<hr>
<h3>โ๏ธ ุงูุชุดุงุฑ ุจุฑูุงูู ูุจ ูุง ุฏุฑ Azure</h3>
<p>ูุจู ุงุฒ ุงูฺฉู ุจุชูุงูู ุจุฑูุงููโูุง ูุจ ุฎูุฏ ุฑุง ููุชุดุฑ ฺฉููุ ุงุจุชุฏุง ุจุงุฏ ฺฉ <strong>Azure App Service ุฌุฏุฏ</strong> ุงุฌุงุฏ ฺฉูู ุชุง ุจุฑูุงูู ุฑุง ุฑู ุขู ููุชุดุฑ ฺฉูู.<br>
ุจุฑุง ุงู ฺฉุงุฑุ ูุงุฒ ุจู ฺฉ <strong>Resource Group</strong> ุจุฑุง ูฺฏูุฏุงุฑ App Service ุฏุงุฑู ู ููฺูู ุจู ฺฉ <strong>Hosting Plan ุฌุฏุฏ</strong> ฺฉู ุดุงูู <strong>ูฺฉุงูุ ุงูุฏุงุฒู ู ูฺฺฏโูุง ุณุฑูุฑ ูุจ</strong> ุจุงุดุฏุ ูุงุฒ ุฏุงุฑู.</p>
<p>ูุฑุงุญู ููุฑุฏ ูุงุฒ ุจู ุดุฑุญ ุฒุฑ ุงุณุช:</p>
<p>ฑ. ูุทูุฆู ุดูุฏ ฺฉู ุงุฒ <strong>Visual Studio</strong> ุจู <strong>ุญุณุงุจ Azure ุฎูุฏ ูุงุฑุฏ ุดุฏูโุงุฏ</strong>.<br>
ุจุฑุง ุงุฌุงุฏ App Serviceุ ุฑู ูพุฑูฺูโุง ฺฉู ุชุงุฒู ุงุฌุงุฏ ฺฉุฑุฏูโุงุฏ <strong>ุฑุงุณุชโฺฉูฺฉ</strong> ฺฉุฑุฏู ู ฺฏุฒูู <strong>Publish</strong> ุฑุง ุงุฒ ููู ุงูุชุฎุงุจ ฺฉูุฏ.<br>
ุงู ฺฉุงุฑุ ูพูุฌุฑู <strong>Pick a publish target</strong> ุฑุง ููุงุด ูโุฏูุฏุ ููุงูโุทูุฑ ฺฉู ุฏุฑ ุชุตูุฑ ุฒุฑ ูุดุงูุฏู ูโฺฉูุฏ:</p>
<div align="center">
<p><img src="../../../assets/image/10/Table%2010-4.jpeg" alt="Conventions-UsedThis-Book"></p>
</div>
<p>ฒ. ฺฏุฒูู <strong>App Service | Create New</strong> ุฑุง ุงูุชุฎุงุจ ฺฉุฑุฏู ู ุฑู <strong>Create Profile</strong> ฺฉูฺฉ ฺฉูุฏ.<br>
ุณูพุณ ฺฉ <strong>Hosting Plan ุฌุฏุฏ</strong> ุงุฌุงุฏ ฺฉูุฏุ ููุงูโุทูุฑ ฺฉู ุฏุฑ ูุซุงู ุฒุฑ ูุดุงู ุฏุงุฏู ุดุฏู ุงุณุช:</p>
<div align="center">
<p><img src="../../../assets/image/10/Table%2010-5.jpeg" alt="Conventions-UsedThis-Book"></p>
</div>
<p>ณ. <strong>Resource Group</strong> ุฑุง ุงูุชุฎุงุจ ฺฉูุฏ. ููฺูู ุชูุตู ูโุดูุฏ ฺฉู <strong>ุชูุธูุงุช Application Insights</strong> ุฑุง ูุฒ ูพฺฉุฑุจูุฏ ฺฉูุฏ ๐</p>
<div align="center">
<p><img src="../../../assets/image/10/Table%2010-6.jpeg" alt="Conventions-UsedThis-Book"></p>
</div>
<p>ด. ุฑู <strong>Create</strong> ฺฉูฺฉ ฺฉูุฏ ุชุง App Service ุดูุง ุงุฌุงุฏ ุดูุฏ. ูพุณ ุงุฒ ุงุฌุงุฏุ ุตูุญู <strong>Publish</strong> ุดูุง ุจุงุฏ ุจู ุงู ุดฺฉู ุจุงุดุฏ:</p>
<div align="center">
<p><img src="../../../assets/image/10/Table%2010-7.jpeg" alt="Conventions-UsedThis-Book"></p>
</div>
<p>ต. ุฏุฑ ุงู ูุฑุญููุ ูโุชูุงูุฏ ุฑู <strong>Site URL</strong> ฺฉูฺฉ ฺฉูุฏ. ุงู ฺฉุงุฑุ ุขุฏุฑุณ ุณุงุช ุดูุง ุฑุง ุฏุฑ ูุฑูุฑฺฏุฑ ุจุงุฒ ูโฺฉูุฏ.<br>
ุงฺฏุฑ ุณุฑูุณ ุดูุง ุจูโุฏุฑุณุช ูพฺฉุฑุจูุฏ ู ุฏุฑ ุญุงู ุงุฌุฑุง ุจุงุดุฏุ ูุฑูุฑฺฏุฑ ุจุงุฏ ุตูุญู ุฒุฑ ุฑุง ููุงุด ุฏูุฏ:</p>
<div align="center">
<p><img src="../../../assets/image/10/Table%2010-8.jpeg" alt="Conventions-UsedThis-Book"></p>
</div>
<p>ถ. ุจุงุฏ <strong>API ุฎูุฏ ุฑุง ููุชุดุฑ ฺฉูู</strong>. ุฑู ุฏฺฉูู <strong>Publish</strong> ฺฉูฺฉ ฺฉูุฏ. ููุช ูุจโุณุงุช ุงุฌุฑุง ุดุฏุ ุงุจุชุฏุง ฺฉ <strong>ุตูุญู ุฎุทุง</strong> ููุงุด ุฏุงุฏู ูโุดูุฏ.</p>
<p>ุขุฏุฑุณ URL ุฑุง ุจู ุดฺฉู ุฒุฑ ุชุบุฑ ุฏูุฏ:</p>
<pre class="hljs"><code>https://dividend-calendar.azurewebsites.net/weatherforecast
</code></pre>
<p>ุงฺฉููู ุตูุญู ูุจ ุจุงุฏ <strong>ฺฉุฏ JSON API ูพุดโุจู ูุถุนุช ููุง</strong> ุฑุง ููุงุด ุฏูุฏ:</p>
<pre class="hljs"><code><span class="hljs-punctuation">[</span>
  <span class="hljs-punctuation">{</span><span class="hljs-attr">&quot;date&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;2020-04-13T19:36:26.9794202+00:00&quot;</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;temperatureC&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-number">40</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;temperatureF&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-number">103</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;summary&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;Hot&quot;</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-punctuation">{</span><span class="hljs-attr">&quot;date&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;2020-04-14T19:36:26.9797346+00:00&quot;</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;temperatureC&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-number">7</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;temperatureF&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-number">44</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;summary&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;Bracing&quot;</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-punctuation">{</span><span class="hljs-attr">&quot;date&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;2020-04-15T19:36:26.9797374+00:00&quot;</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;temperatureC&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-number">8</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;temperatureF&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-number">46</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;summary&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;Scorching&quot;</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-punctuation">{</span><span class="hljs-attr">&quot;date&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;2020-04-16T19:36:26.9797389+00:00&quot;</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;temperatureC&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-number">11</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;temperatureF&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-number">51</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;summary&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;Freezing&quot;</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-punctuation">{</span><span class="hljs-attr">&quot;date&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;2020-04-17T19:36:26.9797403+00:00&quot;</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;temperatureC&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-number">3</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;temperatureF&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-number">37</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;summary&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;Hot&quot;</span><span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">]</span>
</code></pre>
<p>ุฎุฏูุงุช ูุง ุงฺฉููู <strong>ุฒูุฏู ู ูุนุงู</strong> ุงุณุช โ.<br>
ุงฺฏุฑ ูุงุฑุฏ <strong>Azure Portal</strong> ุดูุฏ ู ุจู <strong>Resource Group</strong> ูุฑุจูุท ุจู <strong>Hosting Plan</strong> ุฎูุฏ ุจุฑูุฏุ ฺูุงุฑ ููุจุน ุฎูุงูุฏ ุฏุฏ:</p>
<ol>
<li><strong>App Service:</strong> dividend-calendar</li>
<li><strong>Application Insights:</strong> dividend-calendar</li>
<li><strong>App Service Plan:</strong> DividendCalendarHostingPlan</li>
<li><strong>Key Vault:</strong> ูุฑ ูุงู ฺฉู ุจุฑุง Key Vault ุฎูุฏ ุงูุชุฎุงุจ ฺฉุฑุฏูโุงุฏ. ุฏุฑ ูุซุงู ููุ ูุงู ุขู <strong>Keys-APIs</strong> ุงุณุชุ ููุงูโุทูุฑ ฺฉู ุฏุฑ ุชุตูุฑ ูุดุงู ุฏุงุฏู ุดุฏู ุงุณุช.</li>
</ol>
<div align="center">
<p><img src="../../../assets/image/10/Table%2010-9.jpeg" alt="Conventions-UsedThis-Book"></p>
</div>
<p>ุงฺฏุฑ ุงุฒ <strong>ุตูุญู ุงุตู Azure Portal</strong> (<a href="https://portal.azure.com/#home">https://portal.azure.com/#home</a>) ุฑู <strong>App Service</strong> ุฎูุฏ ฺฉูฺฉ ฺฉูุฏุ ุฎูุงูุฏ ุฏุฏ ฺฉู ูโุชูุงูุฏ:</p>
<ul>
<li>ุจู ุณุฑูุณ ุฎูุฏ ุฏุณุชุฑุณ ุฏุงุดุชู ุจุงุดุฏ ู ุขู ุฑุง ูุฑูุฑ ฺฉูุฏ ๐</li>
<li>ุณุฑูุณ ุฑุง <strong>ูุชููู (Stop)</strong> ฺฉูุฏ โน๏ธ</li>
<li>ุณุฑูุณ ุฑุง <strong>ุฑุงูโุงูุฏุงุฒ ูุฌุฏุฏ (Restart)</strong> ฺฉูุฏ ๐</li>
<li>ุณุฑูุณ ุฑุง <strong>ุญุฐู (Delete)</strong> ฺฉูุฏ ๐๏ธ</li>
</ul>
<div align="center">
<p><img src="../../../assets/image/10/Table%2010-10.jpeg" alt="Conventions-UsedThis-Book"></p>
</div>
<h3>๐๏ธ ุขูุงุฏูโุณุงุฒ ูพุฑูฺู ู ุดุฑูุน ุณุงุฎุช ุชููู ุณูุฏ ุณูุงู</h3>
<p>ุญุงูุง ฺฉู ูพุฑูฺู ูุง ุจุง <strong>Application Insights</strong> ุขูุงุฏู ุงุณุช ู <strong>ฺฉูุฏ Morningstar API</strong> ุจูโุตูุฑุช ุงูู ุฐุฎุฑู ุดุฏูุ ูโุชูุงูู <strong>ุณุงุฎุช ุชููู ุณูุฏ ุณูุงู</strong> ุฑุง ุขุบุงุฒ ฺฉูู.</p>
<hr>
<h3>๐ ุงุณุชูุงุฏู ุงุฒ ฺฉูุฏ API ุจุฑุง ุงููโุณุงุฒ Dividend Calendar API</h3>
<p>ุจุฑุง ุงููโุณุงุฒ ุฏุณุชุฑุณ ุจู <strong>Dividend Calendar API</strong>ุ ุงุฒ <strong>ฺฉูุฏ API ูุดุชุฑ (Client API Key)</strong> ุงุณุชูุงุฏู ุฎูุงูู ฺฉุฑุฏ. ุฑูุดโูุง ูุฎุชูู ุจุฑุง ุงุดุชุฑุงฺฉโฺฏุฐุงุฑ ฺฉูุฏูุง ูุดุชุฑ ุจุง ฺฉุงุฑุจุฑุงู ูุฌูุฏ ุฏุงุฑุฏุ ุงูุง ูุง ุงูุฌุง ุจู ุขู ููโูพุฑุฏุงุฒูุ ุดูุง ูโุชูุงูุฏ ุงุณุชุฑุงุชฺ ุฎูุฏ ุฑุง ุฏุงุดุชู ุจุงุดุฏ. ุชูุฑฺฉุฒ ูุง ุฑู <strong>ูุนุงูโุณุงุฒ ุฏุณุชุฑุณ ุงุญุฑุงุฒ ููุชโุดุฏู ู ูุฌุงุฒ ุจู API</strong> ุงุณุช.</p>
<p>ุจุฑุง ุณุงุฏูโุชุฑ ฺฉุฑุฏู ฺฉุงุฑุ ุงุฒ <strong>ุงูฺฏู Repository</strong> ุงุณุชูุงุฏู ูโฺฉูู.</p>
<ul>
<li>ุงู ุงูฺฏู ฺฉูฺฉ ูโฺฉูุฏ ุจุฑูุงูู ูุง ุงุฒ <strong>ููุจุน ุฏุงุฏู ุฒุฑู ุฌุฏุง ุดูุฏ</strong>.</li>
<li>ูฺฏูุฏุงุฑ ู ุชุบุฑ ููุจุน ุฏุงุฏู ุจุฏูู ุชุฃุซุฑ ุจุฑ ุจุฑูุงูู ุฑุง ุขุณุงูโุชุฑ ูโฺฉูุฏ.</li>
</ul>
<p>ุฏุฑ ูพุฑูฺู ูุงุ ฺฉูุฏูุง ุฏุฑ ฺฉ ฺฉูุงุณ ุชุนุฑู ุฎูุงููุฏ ุดุฏุ ุงูุง ุฏุฑ ฺฉ ูพุฑูฺู ุชุฌุงุฑุ ุจูุชุฑ ุงุณุช ฺฉูุฏูุง ุฏุฑ <strong>Data Store</strong> ูุงููุฏ <strong>Cosmos DBุ SQL Server ุง Azure Key Vault</strong> ุฐุฎุฑู ุดููุฏ. ุงุณุชูุงุฏู ุงุฒ <strong>Repository Pattern</strong> ุจู ุดูุง ุงู ุงูฺฉุงู ุฑุง ูโุฏูุฏ ฺฉู <strong>ฺฉูุชุฑู ฺฉุงูู ุฑู ููุจุน ุฏุงุฏู ุฏุงุดุชู ุจุงุดุฏ</strong>.</p>
<hr>
<h3>๐๏ธ ุฑุงูโุงูุฏุงุฒ Repository</h3>
<p>ฑ. ฺฉ <strong>ูพูุดู ุฌุฏุฏ ุจุง ูุงู Repository</strong> ุจู ูพุฑูฺู ุงุถุงูู ฺฉูุฏ.<br>
ฒ. ฺฉ <strong>Interface</strong> ุจู ูุงู <code>IRepository</code> ู ฺฉ ฺฉูุงุณ ุจู ูุงู <code>InMemoryRepository</code> ฺฉู ุงู Interface ุฑุง ูพุงุฏูโุณุงุฒ ูโฺฉูุฏุ ุงุถุงูู ฺฉูุฏ.</p>
<p><strong>ฺฉุฏ Interface:</strong></p>
<pre class="hljs"><code><span class="hljs-keyword">using</span> CH09_DividendCalendar.Security.Authentication;
<span class="hljs-keyword">using</span> System.Threading.Tasks;

<span class="hljs-keyword">namespace</span> <span class="hljs-title">CH09_DividendCalendar.Repository</span>
{
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title">IRepository</span>
    {
        <span class="hljs-function">Task&lt;ApiKey&gt; <span class="hljs-title">GetApiKey</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> providedApiKey</span>)</span>;
    }
}
</code></pre>
<ul>
<li>ุงู Interface ฺฉ ูุชุฏ ุจุฑุง <strong>ุฏุฑุงูุช ฺฉูุฏ API</strong> ุชุนุฑู ูโฺฉูุฏ.</li>
<li>ฺฉูุงุณ <code>ApiKey</code> ุจุนุฏุงู ุชุนุฑู ุฎูุงูุฏ ุดุฏ.</li>
</ul>
<hr>
<h3>โ๏ธ ูพุงุฏูโุณุงุฒ InMemoryRepository</h3>
<p><strong>Usingูุง:</strong></p>
<pre class="hljs"><code><span class="hljs-keyword">using</span> CH09_DividendCalendar.Security.Authentication;
<span class="hljs-keyword">using</span> CH09_DividendCalendar.Security.Authorisation;
<span class="hljs-keyword">using</span> System;
<span class="hljs-keyword">using</span> System.Collections.Generic;
<span class="hljs-keyword">using</span> System.Linq;
<span class="hljs-keyword">using</span> System.Threading.Tasks;
</code></pre>
<ul>
<li><strong>Namespaceูุง Security</strong> ุฒูุงู ุงุฌุงุฏ ุฎูุงููุฏ ุดุฏ ฺฉู ฺฉูุงุณโูุง <strong>Authentication ู Authorization</strong> ุงุถุงูู ุดููุฏ.</li>
</ul>
<p><strong>ฺฉูุงุณ Repository:</strong></p>
<pre class="hljs"><code><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">InMemoryRepository</span> : <span class="hljs-title">IRepository</span>
{
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> IDictionary&lt;<span class="hljs-built_in">string</span>, ApiKey&gt; _apiKeys;

    <span class="hljs-function"><span class="hljs-keyword">public</span> Task&lt;ApiKey&gt; <span class="hljs-title">GetApiKey</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> providedApiKey</span>)</span>
    {
        _apiKeys.TryGetValue(providedApiKey, <span class="hljs-keyword">out</span> <span class="hljs-keyword">var</span> key);
        <span class="hljs-keyword">return</span> Task.FromResult(key);
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">InMemoryRepository</span>()</span>
    {
        <span class="hljs-keyword">var</span> existingApiKeys = <span class="hljs-keyword">new</span> List&lt;ApiKey&gt;
        {
            <span class="hljs-keyword">new</span> ApiKey(<span class="hljs-number">1</span>, <span class="hljs-string">&quot;Internal&quot;</span>, <span class="hljs-string">&quot;C5BFF7F0-B4DF-475E-A331F737424F013C&quot;</span>, <span class="hljs-keyword">new</span> DateTime(<span class="hljs-number">2019</span>, <span class="hljs-number">01</span>, <span class="hljs-number">01</span>),
                <span class="hljs-keyword">new</span> List&lt;<span class="hljs-built_in">string</span>&gt; { Roles.Internal }),
            <span class="hljs-keyword">new</span> ApiKey(<span class="hljs-number">2</span>, <span class="hljs-string">&quot;External&quot;</span>, <span class="hljs-string">&quot;9218FACE-3EAC-6574C3F0-08357FEDABE9&quot;</span>, <span class="hljs-keyword">new</span> DateTime(<span class="hljs-number">2020</span>, <span class="hljs-number">4</span>, <span class="hljs-number">15</span>),
                <span class="hljs-keyword">new</span> List&lt;<span class="hljs-built_in">string</span>&gt; { Roles.External })
        };
        _apiKeys = existingApiKeys.ToDictionary(x =&gt; x.Key, x =&gt; x);
    }
}
</code></pre>
<ul>
<li><strong>ฺฉูุงุณ InMemoryRepository</strong> ูุชุฏ <code>GetApiKey()</code> ุฑุง ูพุงุฏูโุณุงุฒ ูโฺฉูุฏ ู ฺฉ <strong>Dictionary ุงุฒ ฺฉูุฏูุง API</strong> ุจุฑูโฺฏุฑุฏุงูุฏ.</li>
<li>ุงู ฺฉูุฏูุง ุฏุฑ ูุชุบุฑ <code>_apiKeys</code> ุฐุฎุฑู ูโุดููุฏ.</li>
<li><strong>Constructor</strong> ฺฉ ฺฉูุฏ ุฏุงุฎู ุจุฑุง ุงุณุชูุงุฏู ุฏุงุฎู ู ฺฉ ฺฉูุฏ ุฎุงุฑุฌ ุจุฑุง ุงุณุชูุงุฏู ุฎุงุฑุฌ ุงุฌุงุฏ ูโฺฉูุฏ ู ุขูโูุง ุฑุง ุจู <strong>Dictionary</strong> ุชุจุฏู ูโฺฉูุฏ.</li>
</ul>
<hr>
<h3>๐ก ุงุณุชูุงุฏู ุงุฒ X-Api-Key</h3>
<p>ูุง ุงุฒ <strong>HTTP Header</strong> ุจู ูุงู <code>X-Api-Key</code> ุงุณุชูุงุฏู ุฎูุงูู ฺฉุฑุฏ ฺฉู <strong>ฺฉูุฏ API ูุดุชุฑ</strong> ุฑุง ูฺฏูโุฏุงุฑ ฺฉุฑุฏู ู ุจุฑุง <strong>ุงุญุฑุงุฒ ููุช ู ูุฌูุฒ</strong> ุจู API ุงุฑุณุงู ูโุดูุฏ.</p>
<p>ฑ. ฺฉ ูพูุดู ุฌุฏุฏ ุจู ูุงู <strong>Shared</strong> ุจุณุงุฒุฏ ู ูุงู ุจู ูุงู <code>ApiKeyConstants</code> ุงุถุงูู ฺฉูุฏ.<br>
ฒ. ฺฉุฏ ุฒุฑ ุฑุง ูุงุฑุฏ ฺฉูุฏ:</p>
<pre class="hljs"><code><span class="hljs-keyword">namespace</span> <span class="hljs-title">CH09_DividendCalendar.Shared</span>
{
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">struct</span> ApiKeyConstants
    {
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">const</span> <span class="hljs-built_in">string</span> HeaderName = <span class="hljs-string">&quot;X-Api-Key&quot;</span>;
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">const</span> <span class="hljs-built_in">string</span> MorningstarApiKeyUrl =
            <span class="hljs-string">&quot;https://&lt;YOUR_KEY_VAULT_NAME&gt;.vault.azure.net/secrets/MorningstarApiKey&quot;</span>;
    }
}
</code></pre>
<ul>
<li>
<p>ุงู ูุงู ุดุงูู ุฏู <strong>ุซุงุจุช (Constant)</strong> ุงุณุช:</p>
<ol>
<li><strong>HeaderName:</strong> ุจุฑุง ุชุนู ููุช ฺฉุงุฑุจุฑ</li>
<li><strong>MorningstarApiKeyUrl:</strong> ุขุฏุฑุณ ฺฉูุฏ Morningstar API ุฏุฑ Azure Key Vault</li>
</ol>
</li>
</ul>
<hr>
<h3>๐ ุชูุธู JSON Naming Policy</h3>
<p>ุงุฒ ุขูุฌุง ฺฉู ุจุง ุฏุงุฏูโูุง JSON ฺฉุงุฑ ูโฺฉููุ ูุงุฒ ุจู <strong>ุชูุธู ุณุงุณุช ูุงูโฺฏุฐุงุฑ JSON</strong> ุฏุงุฑู.</p>
<p>ฑ. ฺฉ ูพูุดู ุจู ูุงู <strong>Json</strong> ุจุณุงุฒุฏ ู ฺฉูุงุณ <code>DefaultJsonSerializerOptions</code> ุฑุง ุงุถุงูู ฺฉูุฏ:</p>
<pre class="hljs"><code><span class="hljs-keyword">using</span> System.Text.Json;

<span class="hljs-keyword">namespace</span> <span class="hljs-title">CH09_DividendCalendar.Json</span>
{
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title">DefaultJsonSerializerOptions</span>
    {
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> JsonSerializerOptions Options =&gt; <span class="hljs-keyword">new</span> JsonSerializerOptions
        {
            PropertyNamingPolicy = JsonNamingPolicy.CamelCase,
            IgnoreNullValues = <span class="hljs-literal">true</span>
        };
    }
}
</code></pre>
<ul>
<li>ุงู ฺฉูุงุณ <strong>ูุงูโฺฏุฐุงุฑ camelCase</strong> ุฑุง ุงุนูุงู ูโฺฉูุฏ ู ููุงุฏุฑ Null ุฑุง ูุงุฏุฏู ูโฺฏุฑุฏ.</li>
</ul>
<hr>
<p>ุงฺฉููู ุขูุงุฏูโุงู ุชุง <strong>ุงุญุฑุงุฒ ููุช ู ูุฌูุฒ</strong> ุฑุง ุจู API ุฎูุฏ ุงุถุงูู ฺฉูู โ.</p>
<h3>๐ ุฑุงูโุงูุฏุงุฒ Authentication ู Authorization</h3>
<p>ุญุงู ุจู ุณุฑุงุบ ุณุงุฎุช <strong>ฺฉูุงุณโูุง ุงููุช ุจุฑุง ุงุญุฑุงุฒ ููุช ู ูุฌูุฒ</strong> ูโุฑูู. ูุจู ุงุฒ ุดุฑูุนุ ุจูุชุฑ ุงุณุช ุชูุงูุช ุจู <strong>Authentication</strong> ู <strong>Authorization</strong> ุฑุง ุฑูุดู ฺฉูู:</p>
<ul>
<li><strong>Authentication (ุงุญุฑุงุฒ ููุช):</strong> ุจุฑุฑุณ ุงูฺฉู ุขุง ฺฉุงุฑุจุฑ ูุฌุงุฒ ุจู ุฏุณุชุฑุณ ุจู API ูุง ูุณุช ุง ูู.</li>
<li><strong>Authorization (ูุฌูุฒ):</strong> ุชุนู ุณุทุญ ุฏุณุชุฑุณ ู ุญููู ฺฉุงุฑุจุฑ ูพุณ ุงุฒ ูุฑูุฏ ุจู API.</li>
</ul>
<hr>
<h3>๐ก๏ธ ุงูุฒูุฏู Authentication</h3>
<p>ฑ. ฺฉ ูพูุดู ุจู ูุงู <strong>Security</strong> ุจู ูพุฑูฺู ุงุถุงูู ฺฉูุฏ.<br>
ฒ. ุฏุฑูู ุงู ูพูุดูุ ุฏู ูพูุดู ุฌุฏุฏ ุจู ูุงูโูุง <strong>Authentication</strong> ู <strong>Authorisation</strong> ุงุฌุงุฏ ฺฉูุฏ.<br>
ณ. ุงุจุชุฏุง ฺฉูุงุณโูุง <strong>Authentication</strong> ุฑุง ุงุถุงูู ูโฺฉูู. ุงููู ฺฉูุงุณ <code>ApiKey</code> ุงุณุช.</p>
<p><strong>ูฺฺฏโูุง ฺฉูุงุณ ApiKey:</strong></p>
<pre class="hljs"><code><span class="hljs-keyword">public</span> <span class="hljs-built_in">int</span> Id { <span class="hljs-keyword">get</span>; }
<span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> Owner { <span class="hljs-keyword">get</span>; }
<span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> Key { <span class="hljs-keyword">get</span>; }
<span class="hljs-keyword">public</span> DateTime Created { <span class="hljs-keyword">get</span>; }
<span class="hljs-keyword">public</span> IReadOnlyCollection&lt;<span class="hljs-built_in">string</span>&gt; Roles { <span class="hljs-keyword">get</span>; }
</code></pre>
<ul>
<li>ุงู ูฺฺฏโูุง ุงุทูุงุนุงุช ูุฑุจูุท ุจู <strong>ฺฉูุฏ API ู ูุงูฺฉ ุขู</strong> ุฑุง ุฐุฎุฑู ูโฺฉููุฏ.</li>
<li>ููุฏุงุฑุฏู ุงุฒ ุทุฑู <strong>Constructor</strong> ุงูุฌุงู ูโุดูุฏ:</li>
</ul>
<pre class="hljs"><code><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">ApiKey</span>(<span class="hljs-params"><span class="hljs-built_in">int</span> id, <span class="hljs-built_in">string</span> owner, <span class="hljs-built_in">string</span> key, DateTime created,
    IReadOnlyCollection&lt;<span class="hljs-built_in">string</span>&gt; roles</span>)</span>
{
    Id = id;
    Owner = owner ?? <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> ArgumentNullException(<span class="hljs-keyword">nameof</span>(owner));
    Key = key ?? <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> ArgumentNullException(<span class="hljs-keyword">nameof</span>(key));
    Created = created;
    Roles = roles ?? <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> ArgumentNullException(<span class="hljs-keyword">nameof</span>(roles));
}
</code></pre>
<hr>
<h3>โ๏ธ ฺฉูุงุณ UnauthorizedProblemDetails</h3>
<p>ุฏุฑ ุตูุฑุช ุนุฏู ููููุช ุฏุฑ ุงุญุฑุงุฒ ููุชุ ฺฉุงุฑุจุฑ ุจุง <strong>Error 403 Unauthorized</strong> ููุงุฌู ูโุดูุฏ.</p>
<pre class="hljs"><code><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">UnauthorizedProblemDetails</span> : <span class="hljs-title">ProblemDetails</span>
{
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">UnauthorizedProblemDetails</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> details = <span class="hljs-literal">null</span></span>)</span>
    {
        Title = <span class="hljs-string">&quot;Forbidden&quot;</span>;
        Detail = details;
        Status = <span class="hljs-number">403</span>;
        Type = <span class="hljs-string">&quot;https://httpstatuses.com/403&quot;</span>;
    }
}
</code></pre>
<ul>
<li>ุงู ฺฉูุงุณ ุงุฒ <code>Microsoft.AspNetCore.Mvc.ProblemDetails</code> ุงุฑุซโุจุฑ ูโฺฉูุฏ ู ุฌุฒุฆุงุช ุฎุทุง ุฑุง ุงุฑุงุฆู ูโุฏูุฏ.</li>
</ul>
<hr>
<h3>๐งฉ ุงูุฒูุฏู AuthenticationBuilderExtensions</h3>
<pre class="hljs"><code><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title">AuthenticationBuilderExtensions</span>
{
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> AuthenticationBuilder <span class="hljs-title">AddApiKeySupport</span>(<span class="hljs-params">
        <span class="hljs-keyword">this</span> AuthenticationBuilder authenticationBuilder,
        Action&lt;ApiKeyAuthenticationOptions&gt; options
    </span>)</span>
    {
        <span class="hljs-keyword">return</span> authenticationBuilder
            .AddScheme&lt;ApiKeyAuthenticationOptions, ApiKeyAuthenticationHandler&gt;(
                ApiKeyAuthenticationOptions.DefaultScheme, options);
    }
}
</code></pre>
<ul>
<li>ุงู ูุชุฏุ <strong>ูพุดุชุจุงู ุงุฒ ฺฉูุฏ API</strong> ุฑุง ุจู ุณุฑูุณ ุงุญุฑุงุฒ ููุช ุงุถุงูู ูโฺฉูุฏ.</li>
<li>ุฏุฑ ูุชุฏ <code>ConfigureServices</code> ฺฉูุงุณ <code>Startup</code> ูุฑุงุฎูุงู ุฎูุงูุฏ ุดุฏ.</li>
</ul>
<hr>
<h3>โ๏ธ ฺฉูุงุณ ApiKeyAuthenticationOptions</h3>
<pre class="hljs"><code><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">ApiKeyAuthenticationOptions</span> : <span class="hljs-title">AuthenticationSchemeOptions</span>
{
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">const</span> <span class="hljs-built_in">string</span> DefaultScheme = <span class="hljs-string">&quot;API Key&quot;</span>;
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> Scheme =&gt; DefaultScheme;
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> AuthenticationType = DefaultScheme;
}
</code></pre>
<ul>
<li>ุงู ฺฉูุงุณ ุงุฒ <code>AuthenticationSchemeOptions</code> ุงุฑุซโุจุฑ ูโฺฉูุฏ ู <strong>Default Scheme</strong> ุฑุง ุฑู <strong>API Key Authentication</strong> ุชูุธู ูโฺฉูุฏ.</li>
</ul>
<hr>
<h3>๐ ฺฉูุงุณ ApiKeyAuthenticationHandler</h3>
<p>ุงู ฺฉูุงุณ <strong>ุงุตู ุจุฑุง ุงุนุชุจุงุฑุณูุฌ ฺฉูุฏ API</strong> ู ุงุทููุงู ุงุฒ ุฏุณุชุฑุณ ูุดุชุฑ ุจู API ุงุณุช:</p>
<pre class="hljs"><code><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">ApiKeyAuthenticationHandler</span> : <span class="hljs-title">AuthenticationHandler</span>&lt;<span class="hljs-title">ApiKeyAuthenticationOptions</span>&gt;
{
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">const</span> <span class="hljs-built_in">string</span> ProblemDetailsContentType = <span class="hljs-string">&quot;application/problem+json&quot;</span>;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> IRepository _repository;
}
</code></pre>
<ul>
<li>ุงุฒ <code>AuthenticationHandler</code> ุงุฑุซโุจุฑ ูโฺฉูุฏ ู ุงุฒ <code>ApiKeyAuthenticationOptions</code> ุงุณุชูุงุฏู ูโฺฉูุฏ.</li>
<li>ููุน ูุญุชูุง ุจุฑุง ุฌุฒุฆุงุช ุฎุทุง <code>application/problem+json</code> ุงุณุช.</li>
<li><code>_repository</code> ุจู ุนููุงู ูุญู ูฺฏูุฏุงุฑ ฺฉูุฏูุง API ุชุนุฑู ุดุฏู ุงุณุช.</li>
</ul>
<hr>
<h3>๐ง Constructor</h3>
<pre class="hljs"><code><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">ApiKeyAuthenticationHandler</span>(<span class="hljs-params">
    IOptionsMonitor&lt;ApiKeyAuthenticationOptions&gt; options,
    ILoggerFactory logger,
    UrlEncoder encoder,
    ISystemClock clock,
    IRepository repository
</span>) : <span class="hljs-title">base</span>(<span class="hljs-params">options, logger, encoder, clock</span>)</span>
{
    _repository = repository ?? <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> ArgumentNullException(<span class="hljs-keyword">nameof</span>(repository));
}
</code></pre>
<ul>
<li>ูพุงุฑุงูุชุฑูุง ุจู ฺฉูุงุณ ูพุงู ุงุฑุณุงู ูโุดููุฏ.</li>
<li>ุงฺฏุฑ repository ุฎุงู ุจุงุดุฏุ ุงุณุชุซูุง NullArgument ูพุฑุชุงุจ ูโุดูุฏ.</li>
</ul>
<hr>
<h3>โก ูุชุฏูุง HandleChallengeAsync ู HandleForbiddenAsync</h3>
<pre class="hljs"><code><span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">async</span> Task <span class="hljs-title">HandleChallengeAsync</span>(<span class="hljs-params">AuthenticationProperties properties</span>)</span>
{
    Response.StatusCode = <span class="hljs-number">401</span>;
    Response.ContentType = ProblemDetailsContentType;
    <span class="hljs-keyword">var</span> problemDetails = <span class="hljs-keyword">new</span> UnauthorizedProblemDetails();
    <span class="hljs-keyword">await</span> Response.WriteAsync(JsonSerializer.Serialize(problemDetails, DefaultJsonSerializerOptions.Options));
}

<span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">async</span> Task <span class="hljs-title">HandleForbiddenAsync</span>(<span class="hljs-params">AuthenticationProperties properties</span>)</span>
{
    Response.StatusCode = <span class="hljs-number">403</span>;
    Response.ContentType = ProblemDetailsContentType;
    <span class="hljs-keyword">var</span> problemDetails = <span class="hljs-keyword">new</span> ForbiddenProblemDetails();
    <span class="hljs-keyword">await</span> Response.WriteAsync(JsonSerializer.Serialize(problemDetails, DefaultJsonSerializerOptions.Options));
}
</code></pre>
<ul>
<li><code>HandleChallengeAsync()</code> ููุช ุงุญุฑุงุฒ ููุช ฺฉุงุฑุจุฑ ูููู ูุจุงุดุฏุ <strong>Error 401 Unauthorized</strong> ุจุฑูโฺฏุฑุฏุงูุฏ.</li>
<li><code>HandleForbiddenAsync()</code> ููุช ุจุฑุฑุณ ูุฌูุฒ ฺฉุงุฑุจุฑ ุดฺฉุณุช ุจุฎูุฑุฏุ <strong>Error 403 Forbidden</strong> ุจุฑูโฺฏุฑุฏุงูุฏ.</li>
</ul>
<hr>
<h3>๐ ูุชุฏ HandleAuthenticateAsync</h3>
<pre class="hljs"><code><span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">async</span> Task&lt;AuthenticateResult&gt; <span class="hljs-title">HandleAuthenticateAsync</span>()</span>
{
    <span class="hljs-keyword">if</span> (!Request.Headers.TryGetValue(ApiKeyConstants.HeaderName, <span class="hljs-keyword">out</span> <span class="hljs-keyword">var</span> apiKeyHeaderValues))
        <span class="hljs-keyword">return</span> AuthenticateResult.NoResult();

    <span class="hljs-keyword">var</span> providedApiKey = apiKeyHeaderValues.FirstOrDefault();
    <span class="hljs-keyword">if</span> (apiKeyHeaderValues.Count == <span class="hljs-number">0</span> || <span class="hljs-built_in">string</span>.IsNullOrWhiteSpace(providedApiKey))
        <span class="hljs-keyword">return</span> AuthenticateResult.NoResult();

    <span class="hljs-keyword">var</span> existingApiKey = <span class="hljs-keyword">await</span> _repository.GetApiKey(providedApiKey);
    <span class="hljs-keyword">if</span> (existingApiKey != <span class="hljs-literal">null</span>) {
        <span class="hljs-keyword">var</span> claims = <span class="hljs-keyword">new</span> List&lt;Claim&gt; { <span class="hljs-keyword">new</span> Claim(ClaimTypes.Name, existingApiKey.Owner) };
        claims.AddRange(existingApiKey.Roles.Select(role =&gt; <span class="hljs-keyword">new</span> Claim(ClaimTypes.Role, role)));
        <span class="hljs-keyword">var</span> identity = <span class="hljs-keyword">new</span> ClaimsIdentity(claims, Options.AuthenticationType);
        <span class="hljs-keyword">var</span> identities = <span class="hljs-keyword">new</span> List&lt;ClaimsIdentity&gt; { identity };
        <span class="hljs-keyword">var</span> principal = <span class="hljs-keyword">new</span> ClaimsPrincipal(identities);
        <span class="hljs-keyword">var</span> ticket = <span class="hljs-keyword">new</span> AuthenticationTicket(principal, Options.Scheme);
        <span class="hljs-keyword">return</span> AuthenticateResult.Success(ticket);
    }
    <span class="hljs-keyword">return</span> AuthenticateResult.Fail(<span class="hljs-string">&quot;Invalid API Key provided.&quot;</span>);
}
</code></pre>
<ul>
<li>ุงุจุชุฏุง ุจุฑุฑุณ ูโฺฉูุฏ ฺฉู <strong>Header ููุฌูุฏ ุงุณุช ุง ูู</strong>.</li>
<li>ุงฺฏุฑ Header ุง ููุฏุงุฑ ุขู ููุฌูุฏ ูุจุงุดุฏุ <code>AuthenticateResult.NoResult()</code> ุจุฑูโฺฏุฑุฏุงูุฏ.</li>
<li>ฺฉูุฏ ุณูุช ุณุฑูุฑ ุงุฒ <strong>Repository</strong> ุฏุฑุงูุช ูโุดูุฏ ู ุงุนุชุจุงุฑุณูุฌ ุงูุฌุงู ูโุดูุฏ.</li>
<li>ุงฺฏุฑ ฺฉูุฏ ูุนุชุจุฑ ุจุงุดุฏุ <strong>Claims</strong> ุจุฑุง ฺฉุงุฑุจุฑ ุชูุธู ู <code>AuthenticateResult.Success()</code> ุจุฑฺฏุฑุฏุงูุฏู ูโุดูุฏ.</li>
<li>ุฏุฑ ุบุฑ ุงู ุตูุฑุชุ <strong>ูพุบุงู ุฎุทุง Invalid API Key</strong> ุจุฑฺฏุฑุฏุงูุฏู ูโุดูุฏ.</li>
</ul>
<hr>
<p>โ ุจุง ุงู ฺฉุงุฑ <strong>ุงุญุฑุงุฒ ููุช (Authentication)</strong> ฺฉุงูู ุดุฏ. ูุฑุญูู ุจุนุฏุ <strong>ูพุงุฏูโุณุงุฒ Authorization</strong> ุงุณุช.</p>
<h3>๐ก๏ธ ุงูุฒูุฏู Authorization</h3>
<p>ฺฉูุงุณโูุง <strong>Authorization</strong> ุฑุง ุฏุฑ ูพูุดู <strong>Authorisation</strong> ุงุถุงูู ูโฺฉูู.</p>
<hr>
<h3>๐ ุชุนุฑู ููุดโูุง (Roles)</h3>
<pre class="hljs"><code><span class="hljs-keyword">public</span> <span class="hljs-keyword">struct</span> Roles
{
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">const</span> <span class="hljs-built_in">string</span> Internal = <span class="hljs-string">&quot;Internal&quot;</span>;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">const</span> <span class="hljs-built_in">string</span> External = <span class="hljs-string">&quot;External&quot;</span>;
}
</code></pre>
<ul>
<li>API ูุง ูู ุจุฑุง <strong>ฺฉุงุฑุจุฑุงู ุฏุงุฎู</strong> ู ูู <strong>ฺฉุงุฑุจุฑุงู ุฎุงุฑุฌ</strong> ุทุฑุงุญ ุดุฏู ุงุณุช.</li>
<li>ุงูุง ุฏุฑ ูุณุฎู ุญุฏุงูู (MVP)ุ ููุท ฺฉุฏ <strong>ฺฉุงุฑุจุฑุงู ุฏุงุฎู</strong> ูพุงุฏูโุณุงุฒ ุฎูุงูุฏ ุดุฏ.</li>
</ul>
<hr>
<h3>๐ ุชุนุฑู ุณุงุณุชโูุง (Policies)</h3>
<pre class="hljs"><code><span class="hljs-keyword">public</span> <span class="hljs-keyword">struct</span> Policies
{
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">const</span> <span class="hljs-built_in">string</span> Internal = <span class="hljs-keyword">nameof</span>(Internal);
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">const</span> <span class="hljs-built_in">string</span> External = <span class="hljs-keyword">nameof</span>(External);
}
</code></pre>
<ul>
<li>ุฏู ุณุงุณุช ุจุฑุง <strong>ฺฉุงุฑุจุฑุงู ุฏุงุฎู ู ุฎุงุฑุฌ</strong> ุชุนุฑู ุดุฏู ุงุณุช.</li>
</ul>
<hr>
<h3>โ๏ธ ฺฉูุงุณ ForbiddenProblemDetails</h3>
<pre class="hljs"><code><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">ForbiddenProblemDetails</span> : <span class="hljs-title">ProblemDetails</span>
{
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">ForbiddenProblemDetails</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> details = <span class="hljs-literal">null</span></span>)</span>
    {
        Title = <span class="hljs-string">&quot;Forbidden&quot;</span>;
        Detail = details;
        Status = <span class="hljs-number">403</span>;
        Type = <span class="hljs-string">&quot;https://httpstatuses.com/403&quot;</span>;
    }
}
</code></pre>
<ul>
<li>ุงู ฺฉูุงุณ <strong>ุฌุฒุฆุงุช ูุดฺฉู Forbidden</strong> ุฑุง ุงุฑุงุฆู ูโุฏูุฏ ุงฺฏุฑ ฺฉุงุฑุจุฑ ุงุญุฑุงุฒ ููุชโุดุฏู <strong>ุฏุณุชุฑุณ ูุงุฒู ุฑุง ูุฏุงุดุชู ุจุงุดุฏ</strong>.</li>
<li>ูโุชูุงูุฏ ฺฉ ุฑุดุชู ุจู Constructor ุงุฑุณุงู ฺฉูุฏ ุชุง ุงุทูุงุนุงุช ุจุดุชุฑ ุงุฑุงุฆู ุดูุฏ.</li>
</ul>
<hr>
<h3>๐งฉ Authorization Handlers</h3>
<h4>ExternalAuthorisationHandler</h4>
<pre class="hljs"><code><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">ExternalAuthorisationHandler</span> : <span class="hljs-title">AuthorizationHandler</span>&lt;<span class="hljs-title">ExternalRequirement</span>&gt;
{
    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">override</span> Task <span class="hljs-title">HandleRequirementAsync</span>(<span class="hljs-params">
        AuthorizationHandlerContext context,
        ExternalRequirement requirement
    </span>)</span>
    {
        <span class="hljs-keyword">if</span> (context.User.IsInRole(Roles.External))
            context.Succeed(requirement);
        <span class="hljs-keyword">return</span> Task.CompletedTask;
    }
}

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">ExternalRequirement</span> : <span class="hljs-title">IAuthorizationRequirement</span>
{
}
</code></pre>
<ul>
<li>ฺฉูุงุณ <code>ExternalRequirement</code> ุฎุงู ุงุณุช ู Interface <code>IAuthorizationRequirement</code> ุฑุง ูพุงุฏูโุณุงุฒ ูโฺฉูุฏ.</li>
<li>Handler ุจุฑุฑุณ ูโฺฉูุฏ ฺฉู ุขุง ฺฉุงุฑุจุฑ ููุด <strong>External</strong> ุฏุงุฑุฏ ุง ุฎุฑ ู ูุฌูุฒ ุฑุง ุงุนูุงู ูโฺฉูุฏ.</li>
</ul>
<hr>
<h4>InternalAuthorisationHandler</h4>
<pre class="hljs"><code><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">InternalAuthorisationHandler</span> : <span class="hljs-title">AuthorizationHandler</span>&lt;<span class="hljs-title">InternalRequirement</span>&gt;
{
    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">override</span> Task <span class="hljs-title">HandleRequirementAsync</span>(<span class="hljs-params">
        AuthorizationHandlerContext context,
        InternalRequirement requirement
    </span>)</span>
    {
        <span class="hljs-keyword">if</span> (context.User.IsInRole(Roles.Internal))
            context.Succeed(requirement);
        <span class="hljs-keyword">return</span> Task.CompletedTask;
    }
}

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">InternalRequirement</span> : <span class="hljs-title">IAuthorizationRequirement</span>
{
}
</code></pre>
<ul>
<li>Handler ุฏุงุฎู ูุฌูุฒ ฺฉุงุฑุจุฑุงู ุฏุงุฎู ุฑุง ุจุฑุฑุณ ูโฺฉูุฏ.</li>
<li>ุงฺฏุฑ ฺฉุงุฑุจุฑ ููุด <strong>Internal</strong> ุฏุงุดุชู ุจุงุดุฏุ ุฏุณุชุฑุณ ุฏุงุฏู ูโุดูุฏุ ุฏุฑ ุบุฑ ุงู ุตูุฑุชุ ุฑุฏ ูโุดูุฏ.</li>
</ul>
<hr>
<h3>โ๏ธ ุจุฑูุฒุฑุณุงู ฺฉูุงุณ Startup</h3>
<h4>ูุชุฏ Configure</h4>
<pre class="hljs"><code><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Configure</span>(<span class="hljs-params">IApplicationBuilder app, IHostEnvironment env</span>)</span>
{
    <span class="hljs-keyword">if</span> (env.IsDevelopment())
    {
        app.UseDeveloperExceptionPage();
    }
    app.UseRouting();
    app.UseAuthentication();
    app.UseAuthorization();
    app.UseEndpoints(endpoints =&gt;
    {
        endpoints.MapControllers();
    });
}
</code></pre>
<ul>
<li>ุงฺฏุฑ ุฏุฑ ุญุงูุช ุชูุณุนู ุจุงุดูุ ุตูุญู ุงุณุชุซูุงูุง ุจู ุตูุญู ุชูุณุนูโุฏููุฏู ุชุบุฑ ูโฺฉูุฏ.</li>
<li>ุงุฒ Routing ุจุฑุง ุชุทุจู <strong>URIs ุจุง Actions ฺฉูุชุฑูุฑูุง</strong> ุงุณุชูุงุฏู ูโุดูุฏ.</li>
<li>ุณูพุณ ุงุญุฑุงุฒ ููุช ู ูุฌูุฒ ูุนุงู ูโุดูุฏ ู ุฏุฑ ููุงุช Endpoints ุงุฒ ฺฉูุชุฑูุฑูุง map ูโุดููุฏ.</li>
</ul>
<hr>
<h4>ูุชุฏ ConfigureServices</h4>
<pre class="hljs"><code>services.AddAuthentication(options =&gt;
{
    options.DefaultAuthenticateScheme = ApiKeyAuthenticationOptions.DefaultScheme;
    options.DefaultChallengeScheme = ApiKeyAuthenticationOptions.DefaultScheme;
})
.AddApiKeySupport(options =&gt; { });

services.AddAuthorization(options =&gt;
{
    options.AddPolicy(Policies.Internal, policy =&gt;
        policy.Requirements.Add(<span class="hljs-keyword">new</span> InternalRequirement()));
    options.AddPolicy(Policies.External, policy =&gt;
        policy.Requirements.Add(<span class="hljs-keyword">new</span> ExternalRequirement()));
});
</code></pre>
<ul>
<li><strong>Default Scheme</strong> ุฑู <strong>API Key Authentication</strong> ุชูุธู ุดุฏู ุงุณุช.</li>
<li><code>AddApiKeySupport()</code> ุงุฒ <strong>Extension Method</strong> ุงุถุงูู ุดุฏู ุฏุฑ <code>AuthenticationBuilderExtensions</code> ุงุณุชูุงุฏู ูโฺฉูุฏ.</li>
<li>ุณูพุณ <strong>ุณุงุณุชโูุง ุฏุงุฎู ู ุฎุงุฑุฌ</strong> ุงุถุงูู ุดุฏู ู ุจุง <code>InternalRequirement</code> ู <code>ExternalRequirement</code> ูพููุฏ ุฏุงุฏู ูโุดููุฏ.</li>
</ul>
<hr>
<p>โ ุญุงูุง ุชูุงู ฺฉูุงุณโูุง <strong>ุงููุช API Key</strong> ุงุถุงูู ุดุฏูุฏ ู ูโุชูุงูู ุจุง <strong>Postman</strong> ุตุญุช ุนููฺฉุฑุฏ <strong>Authentication ู Authorization</strong> ุฑุง ุชุณุช ฺฉูู.</p>
<h3>๐งช ุชุณุช ุงููุช API Key</h3>
<p>ุฏุฑ ุงู ุจุฎุดุ ูุตุฏ ุฏุงุฑู <strong>ุงุญุฑุงุฒ ููุช ู ูุฌูุฒ API Key</strong> ุฎูุฏ ุฑุง ุจุง <strong>Postman</strong> ุชุณุช ฺฉูู.</p>
<hr>
<h3>ฑ๏ธโฃ ุงุฌุงุฏ ฺฉูุชุฑูุฑ DividendCalendar</h3>
<p>ุจู ูพูุดู <strong>Controllers</strong> ฺฉ ฺฉูุงุณ ุจู ูุงู <code>DividendCalendar</code> ุงุถุงูู ฺฉูุฏ ู ุขู ุฑุง ุจู ุดฺฉู ุฒุฑ ุจุฑูุฒุฑุณุงู ฺฉูุฏ:</p>
<pre class="hljs"><code>[<span class="hljs-meta">ApiController</span>]
[<span class="hljs-meta">Route(<span class="hljs-string">&quot;api/[controller]&quot;</span>)</span>]
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">DividendCalendar</span> : <span class="hljs-title">ControllerBase</span>
{
    [<span class="hljs-meta">Authorize(Policy = Policies.Internal)</span>]
    [<span class="hljs-meta">HttpGet(<span class="hljs-string">&quot;internal&quot;</span>)</span>]
    <span class="hljs-function"><span class="hljs-keyword">public</span> IActionResult <span class="hljs-title">GetDividendCalendar</span>()</span>
    {
        <span class="hljs-keyword">var</span> message = <span class="hljs-string">$&quot;Hello from <span class="hljs-subst">{<span class="hljs-keyword">nameof</span>(GetDividendCalendar)}</span>.&quot;</span>;
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> ObjectResult(message);
    }

    [<span class="hljs-meta">Authorize(Policy = Policies.External)</span>]
    [<span class="hljs-meta">HttpGet(<span class="hljs-string">&quot;external&quot;</span>)</span>]
    <span class="hljs-function"><span class="hljs-keyword">public</span> IActionResult <span class="hljs-title">External</span>()</span>
    {
        <span class="hljs-keyword">var</span> message = <span class="hljs-string">&quot;External access is currently unavailable.&quot;</span>;
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> ObjectResult(message);
    }
}
</code></pre>
<ul>
<li>ุงู ฺฉูุงุณ <strong>ุชูุงู ุนููฺฉุฑุฏูุง API Dividend Calendar</strong> ุฑุง ุดุงูู ูโุดูุฏ.</li>
<li>ุญุช ุงฺฏุฑ ุฏุฑ ูุณุฎู ุงููู (MVP) <strong>ฺฉุงุฑุจุฑุงู ุฎุงุฑุฌ ูุนุงู ูุจุงุดูุฏ</strong>ุ ููฺูุงู ูโุชูุงูู ุงุญุฑุงุฒ ููุช ู ูุฌูุฒูุง ุฏุงุฎู ู ุฎุงุฑุฌ ุฑุง ุชุณุช ฺฉูู.</li>
</ul>
<hr>
<h3>ฒ๏ธโฃ ุชุณุช ุจุง Postman</h3>
<p>ฑ. <strong>Postman</strong> ุฑุง ุจุงุฒ ฺฉูุฏ ู ฺฉ ุฏุฑุฎูุงุณุช ุฌุฏุฏ <strong>GET</strong> ุจุณุงุฒุฏ.<br>
2. URL ุฒุฑ ุฑุง ูุงุฑุฏ ฺฉูุฏ:</p>
<pre class="hljs"><code>https://localhost:44325/api/dividendcalendar/internal
</code></pre>
<p>ณ. ุฑู <strong>Send</strong> ฺฉูฺฉ ฺฉูุฏ.</p>
<ul>
<li>ุงู ุฏุฑุฎูุงุณุชุ <strong>ุงุญุฑุงุฒ ููุช ู ูุฌูุฒ ุฏุงุฎู</strong> ุฑุง ุชุณุช ูโฺฉูุฏ.</li>
<li>ุงฺฏุฑ ฺฉูุฏ API ูุนุชุจุฑ ุจุงุดุฏุ ูพุงู ุฒุฑ ุจุฑฺฏุฑุฏุงูุฏู ูโุดูุฏ:</li>
</ul>
<pre class="hljs"><code>Hello from GetDividendCalendar.
</code></pre>
<ul>
<li>ุฏุฑ ุบุฑ ุงู ุตูุฑุชุ ูพุงู ุฎุทุง 401 ุง 403 ููุงุด ุฏุงุฏู ูโุดูุฏ.</li>
</ul>
<hr>
<p>ุจุง ุงู ฺฉุงุฑุ <strong>ุงููุช API Key</strong> ูุง ุฏุฑ ูุญุท ุชูุณุนู ุชุณุช ุดุฏู ู ุขูุงุฏู ูุฑุญูู ุจุนุฏ ูโุจุงุดุฏ.</p>
<div align="center">
<p><img src="../../../assets/image/10/Table%2010-11.jpeg" alt="Conventions-UsedThis-Book"></p>
</div>
<h3>๐ ุชุณุช ุงููุช API ุจุฏูู ฺฉูุฏ</h3>
<p>ููุงูโุทูุฑ ฺฉู ูุดุงูุฏู ูโฺฉูุฏุ <strong>ุจุฏูู ูุฑุงุฑ ุฏุงุฏู API Key</strong> ุฏุฑ ุฏุฑุฎูุงุณุช APIุ ูพุงุณุฎ <strong>401 Unauthorized</strong> ุฏุฑุงูุช ูโุดูุฏ ู JSON ุฎุทุง ูุทุงุจู ุจุง ฺฉูุงุณ <strong>ForbiddenProblemDetails</strong> ููุงุด ุฏุงุฏู ูโุดูุฏ.</p>
<hr>
<h3>ฑ๏ธโฃ ุงูุฒูุฏู ูุฏุฑ X-Api-Key</h3>
<ul>
<li>ุฏุฑ Postman ุจู ุจุฎุด <strong>Headers</strong> ุจุฑูุฏ ู ูุฏุฑ ุฒุฑ ุฑุง ุงุถุงูู ฺฉูุฏ:</li>
</ul>
<pre class="hljs"><code>Key: X-Api-Key
Value: C5BFF7F0-B4DF-475E-A331-F737424F013C
</code></pre>
<hr>
<h3>ฒ๏ธโฃ ุงุฑุณุงู ุฏุฑุฎูุงุณุช</h3>
<ul>
<li>ูพุณ ุงุฒ ุงูุฒูุฏู ูุฏุฑุ ุฑู <strong>Send</strong> ฺฉูฺฉ ฺฉูุฏ.</li>
<li>ุงู ุจุงุฑุ ุจุง ูุฌูุฏ <strong>API Key ูุนุชุจุฑ</strong>ุ ูพุงุณุฎ ููููุชโุขูุฒ ุฏุงุฎู ุฏุฑุงูุช ูโฺฉูุฏ:</li>
</ul>
<pre class="hljs"><code>Hello from GetDividendCalendar.
</code></pre>
<p>โ ุจุฏู ุชุฑุชุจุ <strong>ุงุญุฑุงุฒ ููุช ู ูุฌูุฒ ฺฉุงุฑุจุฑุงู ุฏุงุฎู</strong> ุจุง ููููุช ุชุณุช ุดุฏ.</p>
<div align="center">
<p><img src="../../../assets/image/10/Table%2010-12.jpeg" alt="Conventions-UsedThis-Book"></p>
</div>
<h3>โ ุฏุฑุงูุช ูุถุนุช 200 OK</h3>
<ul>
<li>ุญุงูุง ูุถุนุช ูพุงุณุฎ <strong>200 OK</strong> ุฎูุงูุฏ ุฏุงุดุช.</li>
<li>ุงู ุนู <strong>ุฏุฑุฎูุงุณุช API ุจุง ููููุช ุงูุฌุงู ุดุฏู ุงุณุช</strong>.</li>
<li>ูุชุฌู ุฏุฑุฎูุงุณุช ุฑุง ูโุชูุงูุฏ ุฏุฑ <strong>Body</strong> ูุดุงูุฏู ฺฉูุฏ.</li>
<li><strong>ฺฉุงุฑุจุฑุงู ุฏุงุฎู</strong> ูพุงู ุฒุฑ ุฑุง ุฎูุงููุฏ ุฏุฏ:</li>
</ul>
<pre class="hljs"><code>Hello from GetDividendCalendar.
</code></pre>
<hr>
<h3>๐ ุชุณุช ูุณุฑ ุฎุงุฑุฌ</h3>
<ul>
<li>ุฏุฑุฎูุงุณุช ุฑุง ุฏูุจุงุฑู ุงุฌุฑุง ฺฉูุฏุ ุงูุง ุงู ุจุงุฑ <strong>URL ุฑุง ุงุฒ internal ุจู external ุชุบุฑ ุฏูุฏ</strong>.</li>
<li>URL ุฌุฏุฏ ุจุงุฏ ุจู ุดฺฉู ุฒุฑ ุจุงุดุฏ:</li>
</ul>
<pre class="hljs"><code>https://localhost:44325/api/dividendcalendar/external
</code></pre>
<ul>
<li>ุงู ฺฉุงุฑ ุงูฺฉุงู ุจุฑุฑุณ <strong>ุฏุณุชุฑุณ ู ูุฌูุฒ ฺฉุงุฑุจุฑุงู ุฎุงุฑุฌ</strong> ุฑุง ูุฑุงูู ูโฺฉูุฏ.</li>
</ul>
<div align="center">
<p><img src="../../../assets/image/10/Table%2010-13.jpeg" alt="Conventions-UsedThis-Book"></p>
</div>
<h3>โ ุฏุฑุงูุช ูุถุนุช 403 Forbidden</h3>
<ul>
<li>ุงฺฉููู ุจุงุฏ ูุถุนุช ูพุงุณุฎ <strong>403 Forbidden</strong> ุฑุง ุฏุฑุงูุช ฺฉูุฏ ู <strong>JSON ุฎุทุง</strong> ูุทุงุจู ุจุง ForbiddenProblemDetails ููุงุด ุฏุงุฏู ุดูุฏ.</li>
<li>ุฏูู ุงู ุงูุฑ ุงู ุงุณุช ฺฉู <strong>API Key ูุนุชุจุฑ ุงุณุช</strong>ุ ุงูุง ูุณุฑ ูุฑุจูุท ุจู <strong>ฺฉุงุฑุจุฑุงู ุฎุงุฑุฌ</strong> ุงุณุช ู <strong>ฺฉุงุฑุจุฑ ุฎุงุฑุฌ ุฏุณุชุฑุณ ุจู API ุฏุงุฎู ูุฏุงุฑุฏ</strong>.</li>
</ul>
<hr>
<h3>ฑ๏ธโฃ ุชุบุฑ ููุฏุงุฑ ูุฏุฑ X-Api-Key</h3>
<ul>
<li>ููุฏุงุฑ ูุฏุฑ <strong>X-Api-Key</strong> ุฑุง ุจู ุดฺฉู ุฒุฑ ุชุบุฑ ุฏูุฏ:</li>
</ul>
<pre class="hljs"><code>Value: 9218FACE-3EAC-6574-C3F0-08357FEDABE9
</code></pre>
<hr>
<h3>ฒ๏ธโฃ ุงุฑุณุงู ูุฌุฏุฏ ุฏุฑุฎูุงุณุช</h3>
<ul>
<li>ูพุณ ุงุฒ ุชุบุฑ ููุฏุงุฑ ูุฏุฑุ ุฑู <strong>Send</strong> ฺฉูฺฉ ฺฉูุฏ.</li>
<li>ุญุงูุง ุฏุฑุฎูุงุณุช ุจุง <strong>API Key ุฎุงุฑุฌ ูุนุชุจุฑ</strong> ุงุฑุณุงู ุดุฏู ู ุจุงุฏ ุจุชูุงูุฏ <strong>ุฏุณุชุฑุณ ุฎุงุฑุฌ ุฑุง ุจุง ููููุช ุจุฑุฑุณ ฺฉูุฏ</strong>.</li>
</ul>
<div align="center">
<p><img src="../../../assets/image/10/Table%2010-14.jpeg" alt="Conventions-UsedThis-Book"></p>
</div>
<h3>โ ูุดุงูุฏู ูุถุนุช 200 OK</h3>
<ul>
<li>ุงฺฉููู ูุถุนุช ูพุงุณุฎ <strong>200 OK</strong> ุฑุง ูุดุงูุฏู ุฎูุงูุฏ ฺฉุฑุฏ ู ุฏุฑ ุจุฎุด body ูพุงู ุฒุฑ ููุงุด ุฏุงุฏู ูโุดูุฏ:</li>
</ul>
<pre class="hljs"><code>External access is currently unavailable
</code></pre>
<ul>
<li>ุฎุจุฑ ุฎูุจ! ุณุณุชู <strong>ุงููุช ูุจุชู ุจุฑ ููุด</strong> ูุง ุจุง ุงุณุชูุงุฏู ุงุฒ <strong>API key authentication ู authorization</strong> ุชุณุช ุดุฏู ู ฺฉุงุฑ ูโฺฉูุฏ.</li>
<li>ูุจู ุงุฒ ุงูฺฉู ุญุช <strong>FinTech API</strong> ูุงูุน ุฎูุฏ ุฑุง ุงุถุงูู ฺฉููุ <strong>API Key ุงููุช</strong> ุฑุง ูพุงุฏูโุณุงุฒ ู ุขุฒูุงุด ฺฉุฑุฏูโุงู. ุจูุงุจุฑุงู ุงููุช API ุฑุง <strong>ูุจู ุงุฒ ููุดุชู ุญุช ฺฉ ุฎุท ฺฉุฏ ุงุฒ API ูุงูุน</strong> ุฑุนุงุช ฺฉุฑุฏูโุงู.</li>
<li>ุงฺฉููู ูโุชูุงูู ุจุง ุงุทููุงู ุดุฑูุน ฺฉูู ุจู ุณุงุฎุช <strong>Dividend Calendar API</strong>ุ ุฒุฑุง ูโุฏุงูู ุงููุช ุขู ุจุฑูุฑุงุฑ ุงุณุช. ๐ก๏ธ</li>
</ul>
<hr>
<h2>๐ ุงูุฒูุฏู ฺฉุฏ Dividend Calendar</h2>
<ul>
<li>API ุฏุงุฎู ูุง ุชููุง ฺฉ ูุฏู ุฏุงุฑุฏ: ุณุงุฎุช ฺฉ <strong>ุขุฑุงู ุงุฒ dividend ูุง</strong> ฺฉู ูุฑุงุฑ ุงุณุช ุฏุฑ ุณุงู ุฌุงุฑ ูพุฑุฏุงุฎุช ุดููุฏ.</li>
<li>ุดูุง ูโุชูุงูุฏ ูพุฑูฺู ุฑุง ุชูุณุนู ุฏูุฏ ุชุง <strong>JSON ุฑุง ุฏุฑ ฺฉ ูุงู ุง ูพุงฺฏุงู ุฏุงุฏู ุฐุฎุฑู ฺฉูุฏ</strong> ู ุจู ุงู ุชุฑุชุจ ุชููุง <strong>ฺฉ ุจุงุฑ ุฏุฑ ูุงู ุจู API ุฏุงุฎู ูุฑุงุฎูุงู ุจุฒูุฏ</strong> ุชุง ูุฒููโูุง ฺฉุงูุด ุงุจุฏ.</li>
<li>ููุด ุฎุงุฑุฌ ูโุชูุงูุฏ ุจู ุฏุงุฏูโูุง ุงุฒ <strong>ูุงู ุง ูพุงฺฏุงู ุฏุงุฏู</strong> ูุฑ ุฒูุงู ฺฉู ูุงุฒ ุงุณุช ุฏุณุชุฑุณ ูพุฏุง ฺฉูุฏ.</li>
</ul>
<hr>
<h3>ฑ๏ธโฃ ุงุฌุงุฏ ูุฏู Dividend</h3>
<ul>
<li>ูุฏู ุฏุงุฎู ูุง ูุจูุงู ฺฉูุชุฑูุฑ ุฏุงุฑุฏ ู ุงููุช ุขู ุงุฒ ุฏุณุชุฑุณ ุบุฑูุฌุงุฒ ุฌููฺฏุฑ ูโฺฉูุฏ.</li>
<li>ุงฺฉููู ุจุงุฏ <strong>JSON dividend calendar</strong> ุฑุง ุชููุฏ ฺฉูู ุชุง ูุชุฏ ูุง ุจุงุฒฺฏุฑุฏุงูุฏ.</li>
</ul>
<pre class="hljs"><code><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Dividend</span>
{
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> Mic { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> Ticker { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> CompanyName { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">float</span> DividendYield { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">float</span> Amount { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
    <span class="hljs-keyword">public</span> DateTime? ExDividendDate { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
    <span class="hljs-keyword">public</span> DateTime? DeclarationDate { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
    <span class="hljs-keyword">public</span> DateTime? RecordDate { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
    <span class="hljs-keyword">public</span> DateTime? PaymentDate { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> DividendType { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> CurrencyCode { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
}
</code></pre>
<ul>
<li>
<p>ุงู ููุฏูุง ุดุงูู ููุงุฑุฏ ุฒุฑ ูุณุชูุฏ:</p>
<ul>
<li><strong>Mic:</strong> ฺฉุฏ ุดูุงุณุง ุจุงุฒุงุฑ (ISO 10383 Market Identification Code)</li>
<li><strong>Ticker:</strong> ููุงุฏ ุณูุงู</li>
<li><strong>CompanyName:</strong> ูุงู ุดุฑฺฉุช</li>
<li><strong>DividendYield:</strong> ูุณุจุช ุณูุฏ ุณุงูุงูู ุดุฑฺฉุช ุจู ููุช ุณูู</li>
<li><strong>Amount:</strong> ูุจูุบ ูพุฑุฏุงุฎุช ุจู ุงุฒุง ูุฑ ุณูู</li>
<li><strong>ExDividendDate:</strong> ุขุฎุฑู ุชุงุฑุฎ ุฎุฑุฏ ุณูู ุจุฑุง ุฏุฑุงูุช ุณูุฏ ุจุนุฏ</li>
<li><strong>DeclarationDate:</strong> ุชุงุฑุฎ ุงุนูุงู ูพุฑุฏุงุฎุช ุณูุฏ ุชูุณุท ุดุฑฺฉุช</li>
<li><strong>RecordDate:</strong> ุชุงุฑุฎ ฺฉู ุดุฑฺฉุช ุจุฑุฑุณ ูโฺฉูุฏ ฺู ฺฉุณุงู ุญู ุฏุฑุงูุช ุณูุฏ ุฏุงุฑูุฏ</li>
<li><strong>PaymentDate:</strong> ุชุงุฑุฎ ุฏุฑุงูุช ุณูุฏ ุชูุณุท ุณูุงูุฏุงุฑุงู</li>
<li><strong>DividendType:</strong> ููุน ุณูุฏ (ูุซูุงู Cash, Stock, Property ูโฆ)</li>
<li><strong>CurrencyCode:</strong> ูุงุญุฏ ูพูู ูพุฑุฏุงุฎุช</li>
</ul>
</li>
</ul>
<hr>
<h3>ฒ๏ธโฃ ุงุฌุงุฏ ูุฏู Company</h3>
<pre class="hljs"><code><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Company</span>
{
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> MIC { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> Currency { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> Ticker { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> SecurityId { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> CompanyName { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
}
</code></pre>
<ul>
<li>ุชูุงูุช ุจู <strong>CurrencyCode</strong> ุฏุฑ Dividend ู <strong>Currency</strong> ุฏุฑ Company ุจู ุฏูู ูุฑุขูุฏ <strong>Object Mapping JSON</strong> ุงุณุช ุชุง ุงุฒ ุจุฑูุฒ ุงุณุชุซูุงูุง ูุงูุจโุจูุฏ ุฌููฺฏุฑ ุดูุฏ.</li>
</ul>
<hr>
<h3>ณ๏ธโฃ ุงุฌุงุฏ ูุฏู Companies</h3>
<pre class="hljs"><code><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Companies</span>
{
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">int</span> Total { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">int</span> Offset { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
    <span class="hljs-keyword">public</span> List&lt;Company&gt; Results { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> ResponseStatus { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
}
</code></pre>
<ul>
<li>
<p>ุชูุถุญ ููุฏูุง:</p>
<ul>
<li><strong>Total:</strong> ุชุนุฏุงุฏ ฺฉู ุฑฺฉูุฑุฏูุง ุจุงุฒฺฏุดุช ุงุฒ API</li>
<li><strong>Offset:</strong> ุฌุงุจุฌุง ุฑฺฉูุฑุฏ</li>
<li><strong>Results:</strong> ูุณุช ุดุฑฺฉุชโูุง</li>
<li><strong>ResponseStatus:</strong> ุงุทูุงุนุงุช ูุถุนุช ูพุงุณุฎุ ูุฎุตูุตุงู ุฏุฑ ุตูุฑุช ุจุฑูุฒ ุฎุทุง</li>
</ul>
</li>
</ul>
<hr>
<h3>ด๏ธโฃ ุงุฌุงุฏ ูุฏู Dividends</h3>
<pre class="hljs"><code><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Dividends</span>
{
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">int</span> Total { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">int</span> Offset { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
    <span class="hljs-keyword">public</span> List&lt;Dictionary&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">string</span>&gt;&gt; Results { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
    <span class="hljs-keyword">public</span> ResponseStatus ResponseStatus { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
}
</code></pre>
<ul>
<li>ููุฏูุง ูุดุงุจู ฺฉูุงุณ ูุจู ูุณุชูุฏุ ุจู ุฌุฒ <strong>Results</strong> ฺฉู ุดุงูู ูุณุช ูพุฑุฏุงุฎุชโูุง dividend ุจุฑุง ูุฑ ุดุฑฺฉุช ูุดุฎุต ุงุณุช.</li>
</ul>
<hr>
<h3>ต๏ธโฃ ุงุฌุงุฏ ูุฏู ResponseStatus</h3>
<pre class="hljs"><code><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">ResponseStatus</span>
{
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> ErrorCode { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> Message { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> StackTrace { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
    <span class="hljs-keyword">public</span> List&lt;Dictionary&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">string</span>&gt;&gt; Errors { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
    <span class="hljs-keyword">public</span> List&lt;Dictionary&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">string</span>&gt;&gt; Meta { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
}
</code></pre>
<ul>
<li>
<p>ุชูุถุญ ููุฏูุง:</p>
<ul>
<li><strong>ErrorCode:</strong> ุดูุงุฑู ุฎุทุง</li>
<li><strong>Message:</strong> ูพุงู ุฎุทุง</li>
<li><strong>StackTrace:</strong> ุงุทูุงุนุงุช ุฏุจุงฺฏ ุฎุทุง</li>
<li><strong>Errors:</strong> ูุณุช ุฎุทุงูุง</li>
<li><strong>Meta:</strong> ูุณุช ูุชุงุฏุชุง ุฎุทุง</li>
</ul>
</li>
</ul>
<hr>
<p>โ ุชุง ุงู ูุฑุญููุ ุชูุงู ูุฏูโูุง ูุงุฒู ุจุฑุง <strong>API Dividend Calendar</strong> ุขูุงุฏู ุดุฏูโุงูุฏ ู ูโุชูุงูู ุจู ููุดุชู ููุทู ูพุฑุฏุงุฒุด ุฏุงุฏูโูุง ู ุจุงุฒฺฏุฑุฏุงูุฏู JSON ุงุฏุงูู ุฏูู.</p>
<h3>๐๏ธ ูพุงุฏูโุณุงุฒ ูุฑุงุฎูุงูโูุง API ุจุฑุง ุณุงุฎุช Dividend Calendar</h3>
<p>ุญุงู ฺฉู ุชูุงู <strong>ูุฏูโูุง ูุงุฒู</strong> ุขูุงุฏู ุดุฏูโุงูุฏุ ูโุชูุงูู ุดุฑูุน ฺฉูู ุจู <strong>ูุฑุงุฎูุงูโูุง API</strong> ุจุฑุง ุณุงุฎุช <strong>ุชููู ูพุฑุฏุงุฎุช dividend</strong>.</p>
<hr>
<h3>ฑ๏ธโฃ ูุชุฏ FormatStringDate()</h3>
<pre class="hljs"><code><span class="hljs-keyword">private</span> DateTime? FormatStringDate(<span class="hljs-built_in">string</span> date)
{
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">string</span>.IsNullOrEmpty(date) ? (DateTime?)<span class="hljs-literal">null</span> : DateTime.Parse(date);
}
</code></pre>
<ul>
<li>ุงู ูุชุฏ ฺฉ <strong>ุฑุดุชู ุชุงุฑุฎ</strong> ูโฺฏุฑุฏ.</li>
<li>ุงฺฏุฑ ุฑุดุชู <strong>null ุง ุฎุงู</strong> ุจุงุดุฏุ ููุฏุงุฑ null ุจุงุฒ ูโฺฏุฑุฏุงูุฏ.</li>
<li>ุฏุฑ ุบุฑ ุงู ุตูุฑุชุ ุฑุดุชู ุฑุง ุจู <strong>DateTime nullable</strong> ุชุจุฏู ฺฉุฑุฏู ู ุจุงุฒ ูโฺฏุฑุฏุงูุฏ. ๐๏ธ</li>
</ul>
<hr>
<h3>ฒ๏ธโฃ ูุชุฏ GetMorningstarApiKey()</h3>
<pre class="hljs"><code><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">async</span> Task&lt;<span class="hljs-built_in">string</span>&gt; <span class="hljs-title">GetMorningstarApiKey</span>()</span>
{
    <span class="hljs-keyword">try</span>
    {
        AzureServiceTokenProvider azureServiceTokenProvider = <span class="hljs-keyword">new</span> AzureServiceTokenProvider();
        KeyVaultClient keyVaultClient = <span class="hljs-keyword">new</span> KeyVaultClient(
            <span class="hljs-keyword">new</span> KeyVaultClient.AuthenticationCallback(
                azureServiceTokenProvider.KeyVaultTokenCallback
            )
        );

        <span class="hljs-keyword">var</span> secret = <span class="hljs-keyword">await</span> keyVaultClient.GetSecretAsync(ApiKeyConstants.MorningstarApiKeyUrl)
                                         .ConfigureAwait(<span class="hljs-literal">false</span>);
        <span class="hljs-keyword">return</span> secret.Value;
    }
    <span class="hljs-keyword">catch</span> (KeyVaultErrorException keyVaultException)
    {
        <span class="hljs-keyword">return</span> keyVaultException.Message;
    }
}
</code></pre>
<ul>
<li>ุงู ูุชุฏ <strong>AzureServiceTokenProvider</strong> ุฑุง ุงุฌุงุฏ ูโฺฉูุฏ.</li>
<li>ุณูพุณ ฺฉ <strong>KeyVaultClient</strong> ูโุณุงุฒุฏ ฺฉู ุนููุงุช ุฑูุฒูฺฏุงุฑ ุงูุฌุงู ูโุฏูุฏ.</li>
<li>ุจุง ูุฑุงุฎูุงู <strong>GetSecretAsync</strong>ุ API Key ูุฑุจูุท ุจู Morningstar ุงุฒ <strong>Azure Key Vault</strong> ุฏุฑุงูุช ูโุดูุฏ.</li>
<li>ุฏุฑ ุตูุฑุช ุจุฑูุฒ ุฎุทุงุ ูพุงู ุฎุทุง ุจุงุฒฺฏุฑุฏุงูุฏู ูโุดูุฏ. ๐</li>
</ul>
<hr>
<h3>ณ๏ธโฃ ูุชุฏ GetCompanies()</h3>
<pre class="hljs"><code><span class="hljs-function"><span class="hljs-keyword">private</span> Companies <span class="hljs-title">GetCompanies</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> mic</span>)</span>
{
    <span class="hljs-keyword">var</span> client = <span class="hljs-keyword">new</span> RestClient(<span class="hljs-string">$&quot;https://morningstar1.p.rapidapi.com/companies/list-by-exchange?Mic=<span class="hljs-subst">{mic}</span>&quot;</span>);
    <span class="hljs-keyword">var</span> request = <span class="hljs-keyword">new</span> RestRequest(Method.GET);
    request.AddHeader(<span class="hljs-string">&quot;x-rapidapi-host&quot;</span>, <span class="hljs-string">&quot;morningstar1.p.rapidapi.com&quot;</span>);
    request.AddHeader(<span class="hljs-string">&quot;x-rapidapi-key&quot;</span>, GetMorningstarApiKey().Result);
    request.AddHeader(<span class="hljs-string">&quot;accept&quot;</span>, <span class="hljs-string">&quot;string&quot;</span>);
    IRestResponse response = client.Execute(request);
    <span class="hljs-keyword">return</span> JsonConvert.DeserializeObject&lt;Companies&gt;(response.Content);
}
</code></pre>
<ul>
<li>ุงู ูุชุฏ ฺฉ <strong>REST client</strong> ูโุณุงุฒุฏ ฺฉู ูุณุช ุดุฑฺฉุชโูุง ููุฌูุฏ ุฏุฑ ุจูุฑุณ ูุดุฎุต ุดุฏู ุฑุง ุจุงุฒ ูโฺฏุฑุฏุงูุฏ.</li>
<li>ููุน ุฏุฑุฎูุงุณุช <strong>GET</strong> ุงุณุช ู ูุฏุฑูุง <strong>x-rapidapi-hostุ x-rapidapi-key ู accept</strong> ุงุถุงูู ูโุดููุฏ.</li>
<li>ุณูพุณ JSON ุจุงุฒฺฏุดุช ุจู ูุฏู <strong>Companies</strong> ุฏุณุฑุงูุงุฒ ูโุดูุฏ. ๐ข</li>
</ul>
<hr>
<h3>ด๏ธโฃ ูุชุฏ GetDividends()</h3>
<pre class="hljs"><code><span class="hljs-function"><span class="hljs-keyword">private</span> Dividends <span class="hljs-title">GetDividends</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> mic, <span class="hljs-built_in">string</span> ticker</span>)</span>
{
    <span class="hljs-keyword">var</span> client = <span class="hljs-keyword">new</span> RestClient(<span class="hljs-string">$&quot;https://morningstar1.p.rapidapi.com/dividends?Ticker=<span class="hljs-subst">{ticker}</span>&amp;Mic=<span class="hljs-subst">{mic}</span>&quot;</span>);
    <span class="hljs-keyword">var</span> request = <span class="hljs-keyword">new</span> RestRequest(Method.GET);
    request.AddHeader(<span class="hljs-string">&quot;x-rapidapi-host&quot;</span>, <span class="hljs-string">&quot;morningstar1.p.rapidapi.com&quot;</span>);
    request.AddHeader(<span class="hljs-string">&quot;x-rapidapi-key&quot;</span>, GetMorningstarApiKey().Result);
    request.AddHeader(<span class="hljs-string">&quot;accept&quot;</span>, <span class="hljs-string">&quot;string&quot;</span>);
    IRestResponse response = client.Execute(request);
    <span class="hljs-keyword">return</span> JsonConvert.DeserializeObject&lt;Dividends&gt;(response.Content);
}
</code></pre>
<ul>
<li>ูุดุงุจู <strong>GetCompanies()</strong> ุงุณุชุ ุงูุง ุงู ุจุงุฑ <strong>dividends</strong> ูุฑ ุดุฑฺฉุช ูุดุฎุต ุฑุง ุจุงุฒ ูโฺฏุฑุฏุงูุฏ. ๐ฐ</li>
</ul>
<hr>
<h3>ต๏ธโฃ ูุชุฏ BuildDividendCalendar()</h3>
<pre class="hljs"><code><span class="hljs-function"><span class="hljs-keyword">private</span> List&lt;Dividend&gt; <span class="hljs-title">BuildDividendCalendar</span>()</span>
{
    <span class="hljs-keyword">const</span> <span class="hljs-built_in">string</span> MIC = <span class="hljs-string">&quot;XLON&quot;</span>;
    <span class="hljs-keyword">var</span> thisYearsDividends = <span class="hljs-keyword">new</span> List&lt;Dividend&gt;();
    <span class="hljs-keyword">var</span> companies = GetCompanies(MIC);

    <span class="hljs-keyword">foreach</span> (<span class="hljs-keyword">var</span> company <span class="hljs-keyword">in</span> companies.Results) {
        <span class="hljs-keyword">var</span> dividends = GetDividends(MIC, company.Ticker);
        <span class="hljs-keyword">if</span> (dividends.Results == <span class="hljs-literal">null</span>)
            <span class="hljs-keyword">continue</span>;

        <span class="hljs-keyword">var</span> currentDividend = dividends.Results.FirstOrDefault();
        <span class="hljs-keyword">if</span> (currentDividend == <span class="hljs-literal">null</span> || currentDividend[<span class="hljs-string">&quot;payableDt&quot;</span>] == <span class="hljs-literal">null</span>)
            <span class="hljs-keyword">continue</span>;

        <span class="hljs-keyword">var</span> dateDiff = DateTime.Compare(
            DateTime.Parse(currentDividend[<span class="hljs-string">&quot;payableDt&quot;</span>]),
            <span class="hljs-keyword">new</span> DateTime(DateTime.Now.Year - <span class="hljs-number">1</span>, <span class="hljs-number">12</span>, <span class="hljs-number">31</span>)
        );

        <span class="hljs-keyword">if</span> (dateDiff &gt; <span class="hljs-number">0</span>) {
            <span class="hljs-keyword">var</span> payableDate = DateTime.Parse(currentDividend[<span class="hljs-string">&quot;payableDt&quot;</span>]);
            <span class="hljs-keyword">var</span> dividend = <span class="hljs-keyword">new</span> Dividend() {
                Mic = MIC,
                Ticker = company.Ticker,
                CompanyName = company.CompanyName,
                ExDividendDate = FormatStringDate(currentDividend[<span class="hljs-string">&quot;exDividendDt&quot;</span>]),
                DeclarationDate = FormatStringDate(currentDividend[<span class="hljs-string">&quot;declarationDt&quot;</span>]),
                RecordDate = FormatStringDate(currentDividend[<span class="hljs-string">&quot;recordDt&quot;</span>]),
                PaymentDate = FormatStringDate(currentDividend[<span class="hljs-string">&quot;payableDt&quot;</span>]),
                Amount = <span class="hljs-built_in">float</span>.Parse(currentDividend[<span class="hljs-string">&quot;amount&quot;</span>])
            };
            thisYearsDividends.Add(dividend);
        }
    }

    <span class="hljs-keyword">return</span> thisYearsDividends;
}
</code></pre>
<ul>
<li>ุฏุฑ ุงู ูุณุฎูุ MIC <strong>ุณุฎุชโฺฉุฏ ุดุฏู ุจู &quot;XLON&quot;</strong> (ุจูุฑุณ ููุฏู) ุงุณุช.</li>
<li>ุฏุฑ ุขูุฏู ูโุชูุงูู ุงู ูุชุฏ ู <strong>endpoint</strong> ุนููู ุฑุง ุจุฑุง ุฏุฑุงูุช MIC ุจู ุนููุงู ูพุงุฑุงูุชุฑ ุจูโุฑูุฒุฑุณุงู ฺฉูู.</li>
<li>ุงุจุชุฏุง ูุณุช <strong>ุดุฑฺฉุชโูุง</strong> ุงุฒ Morningstar API ุฏุฑุงูุช ูโุดูุฏ.</li>
<li>ุณูพุณ ุจุฑุง ูุฑ ุดุฑฺฉุชุ <strong>dividendูุง ุขู ุดุฑฺฉุช</strong> ฺฏุฑูุชู ูโุดูุฏ ู ุจุฑุฑุณ ูโฺฉูู ฺฉู ุชุงุฑุฎ ูพุฑุฏุงุฎุช ุจุนุฏ ุงุฒ <strong>31 ุฏุณุงูุจุฑ ุณุงู ูุจู</strong> ุจุงุดุฏ.</li>
<li>ุฏุฑ ููุงุชุ ูุณุช <strong>dividendูุง ุงูุณุงู</strong> ุณุงุฎุชู ูโุดูุฏ ู ุจุงุฒฺฏุฑุฏุงูุฏู ูโุดูุฏ. ๐</li>
</ul>
<hr>
<h3>ถ๏ธโฃ ุจูโุฑูุฒุฑุณุงู GetDividendCalendar()</h3>
<pre class="hljs"><code>[<span class="hljs-meta">Authorize(Policy = Policies.Internal)</span>]
[<span class="hljs-meta">HttpGet(<span class="hljs-string">&quot;internal&quot;</span>)</span>]
<span class="hljs-function"><span class="hljs-keyword">public</span> IActionResult <span class="hljs-title">GetDividendCalendar</span>()</span>
{
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> ObjectResult(JsonConvert.SerializeObject(BuildDividendCalendar()));
}
</code></pre>
<ul>
<li>ุงู ูุชุฏ <strong>ูุณุช dividendูุง ุงูุณุงู</strong> ุฑุง ุจู ุตูุฑุช JSON ุณุฑุงูุงุฒ ุดุฏู ุจุงุฒ ูโฺฏุฑุฏุงูุฏ.</li>
<li>ุงฺฏุฑ ูพุฑูฺู ุฑุง ุฏุฑ <strong>Postman</strong> ุจุง <strong>internal x-api-key</strong> ุงุฌุฑุง ฺฉูุฏุ ูพุณ ุงุฒ ุญุฏูุฏ <strong>20 ุฏููู</strong> JSON ุฒุฑ ุจุฑฺฏุฑุฏุงูุฏู ูโุดูุฏ:</li>
</ul>
<pre class="hljs"><code><span class="hljs-punctuation">[</span><span class="hljs-punctuation">{</span><span class="hljs-attr">&quot;Mic&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;XLON&quot;</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;Ticker&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;ABDP&quot;</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;CompanyName&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;AB Dynamics PLC&quot;</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;DividendYield&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-number">0.0</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;Amount&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-number">0.0279</span><span class="hljs-punctuation">,</span>...<span class="hljs-punctuation">}</span><span class="hljs-punctuation">]</span>
</code></pre>
<ul>
<li>โ๏ธ ุงู ฺฉูุฆุฑ <strong>ุฒูุงู ุฒุงุฏ</strong> ูโุจุฑุฏ (~20 ุฏููู) ู ูุชุงุฌ <strong>ุฏุฑ ุทูู ุณุงู ุชุบุฑ ูโฺฉูุฏ</strong>.</li>
<li>ูพุดููุงุฏ: ูโุชูุงู API ุฑุง <strong>ูุงูุงูู ุงุฌุฑุง</strong> ฺฉุฑุฏ ู JSON ุฑุง ุฏุฑ <strong>ูุงู ุง ูพุงฺฏุงู ุฏุงุฏู</strong> ุฐุฎุฑู ูููุฏ. ุณูพุณ endpoint ุฎุงุฑุฌ ุงุฒ ุงู ุฏุงุฏู ุฐุฎุฑู ุดุฏู ุงุณุชูุงุฏู ฺฉูุฏ. ๐๏ธ</li>
</ul>
<h3>โฑ๏ธ ูุญุฏูุฏุณุงุฒ (Throttle) API</h3>
<p>ููฺฏุงู ฺฉู APIูุง ุฑุง ุฏุฑ ุฏุณุชุฑุณ ูุฑุงุฑ ูโุฏูุฏุ <strong>ุจุงุฏ ุขูโูุง ุฑุง ูุญุฏูุฏ ฺฉูุฏ (Throttle)</strong>.<br>
ุฑูุดโูุง ูุฎุชูู ุจุฑุง ุงู ฺฉุงุฑ ูุฌูุฏ ุฏุงุฑุฏุ ูุซู <strong>ูุญุฏูุฏ ฺฉุฑุฏู ุชุนุฏุงุฏ ฺฉุงุฑุจุฑุงู ููุฒูุงู</strong> ุง <strong>ุชุนุฏุงุฏ ูุฑุงุฎูุงูโูุง ุฏุฑ ฺฉ ุจุงุฒู ุฒูุงู ูุดุฎุต</strong>.</p>
<p>ุฏุฑ ุงู ุจุฎุดุ ูุง ูโุฎูุงูู API ุฎูุฏ ุฑุง ุทูุฑ ูุญุฏูุฏ ฺฉูู ฺฉู <strong>ููุท ฺฉ ุจุงุฑ ุฏุฑ ูุงูุ ุฑูุฒ 25 ุงุฌุฑุง ุดูุฏ</strong>.</p>
<hr>
<h3>ฑ๏ธโฃ ุงุถุงูู ฺฉุฑุฏู ฺฉูุฏ ุจู appsettings.json</h3>
<p>ุฏุฑ ูุงู <strong>appsettings.json</strong>ุ ุฎุท ุฒุฑ ุฑุง ุงุถุงูู ฺฉูุฏ:</p>
<pre class="hljs"><code><span class="hljs-attr">&quot;MorningstarNextRunDate&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span>
</code></pre>
<ul>
<li>ุงู ููุฏุงุฑุ <strong>ุชุงุฑุฎ ุงุฌุฑุง ุจุนุฏ API</strong> ุฑุง ุฐุฎุฑู ุฎูุงูุฏ ฺฉุฑุฏ. ๐</li>
</ul>
<hr>
<h3>ฒ๏ธโฃ ฺฉูุงุณ AppSettings</h3>
<p>ุฏุฑ ุฑุดู ูพุฑูฺูุ ฺฉูุงุณ ุฒุฑ ุฑุง ุงุถุงูู ฺฉูุฏ:</p>
<pre class="hljs"><code><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">AppSettings</span>
{
    <span class="hljs-keyword">public</span> DateTime? MorningstarNextRunDate { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
}
</code></pre>
<ul>
<li>ุงู <strong>property</strong>ุ ููุฏุงุฑ ูุฑุจูุท ุจู ฺฉูุฏ <strong>MorningstarNextRunDate</strong> ุฑุง ูฺฏู ูโุฏุงุฑุฏ.</li>
</ul>
<hr>
<h3>ณ๏ธโฃ ูุชุฏ AddOrUpdateAppSetting()</h3>
<pre class="hljs"><code><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">AddOrUpdateAppSetting</span>&lt;<span class="hljs-title">T</span>&gt;(<span class="hljs-params"><span class="hljs-built_in">string</span> sectionPathKey, T <span class="hljs-keyword">value</span></span>)</span>
{
    <span class="hljs-keyword">try</span>
    {
        <span class="hljs-keyword">var</span> filePath = Path.Combine(AppContext.BaseDirectory, <span class="hljs-string">&quot;appsettings.json&quot;</span>);
        <span class="hljs-built_in">string</span> json = File.ReadAllText(filePath);
        <span class="hljs-built_in">dynamic</span> jsonObj = Newtonsoft.Json.JsonConvert.DeserializeObject(json);
        SetValueRecursively(sectionPathKey, jsonObj, <span class="hljs-keyword">value</span>);
        <span class="hljs-built_in">string</span> output = Newtonsoft.Json.JsonConvert.SerializeObject(jsonObj, Newtonsoft.Json.Formatting.Indented);
        File.WriteAllText(filePath, output);
    }
    <span class="hljs-keyword">catch</span> (Exception ex)
    {
        Console.WriteLine(<span class="hljs-string">&quot;Error writing app settings | {0}&quot;</span>, ex.Message);
    }
}
</code></pre>
<ul>
<li>ุงู ูุชุฏ <strong>appsettings.json</strong> ุฑุง ูโุฎูุงูุฏุ JSON ุฑุง ุฏุณุฑุงูุงุฒ ูโฺฉูุฏุ ููุฏุงุฑ ููุฑุฏ ูุธุฑ ุฑุง ุชูุธู ูโฺฉูุฏ ู ุฏูุจุงุฑู JSON ุฑุง ุฏุฑ ูุงู ุฐุฎุฑู ูโฺฉูุฏ. ๐</li>
</ul>
<hr>
<h3>ด๏ธโฃ ูุชุฏ SetValueRecursively()</h3>
<pre class="hljs"><code><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">SetValueRecursively</span>&lt;<span class="hljs-title">T</span>&gt;(<span class="hljs-params"><span class="hljs-built_in">string</span> sectionPathKey, <span class="hljs-built_in">dynamic</span> jsonObj, T <span class="hljs-keyword">value</span></span>)</span>
{
    <span class="hljs-keyword">var</span> remainingSections = sectionPathKey.Split(<span class="hljs-string">&quot;:&quot;</span>, <span class="hljs-number">2</span>);
    <span class="hljs-keyword">var</span> currentSection = remainingSections[<span class="hljs-number">0</span>];
    <span class="hljs-keyword">if</span> (remainingSections.Length &gt; <span class="hljs-number">1</span>)
    {
        <span class="hljs-keyword">var</span> nextSection = remainingSections[<span class="hljs-number">1</span>];
        SetValueRecursively(nextSection, jsonObj[currentSection], <span class="hljs-keyword">value</span>);
    }
    <span class="hljs-keyword">else</span>
    {
        jsonObj[currentSection] = <span class="hljs-keyword">value</span>;
    }
}
</code></pre>
<ul>
<li>ุงู ูุชุฏุ ูุณุฑ ฺฉูุฏ ุฑุง ุจู ุตูุฑุช <strong>ุจุงุฒฺฏุดุช</strong> ุฏูุจุงู ูโฺฉูุฏ ู ุฏุฑ ููุงุช ููุฏุงุฑ ููุฑุฏ ูุธุฑ ุฑุง ุชูุธู ูโฺฉูุฏ. ๐</li>
</ul>
<hr>
<h3>ต๏ธโฃ ุชุนุฑู ThrottleMonthDay</h3>
<pre class="hljs"><code><span class="hljs-keyword">public</span> <span class="hljs-keyword">const</span> <span class="hljs-built_in">int</span> ThrottleMonthDay = <span class="hljs-number">25</span>;
</code></pre>
<ul>
<li>ุงู ููุฏุงุฑ ุจุฑุง ุจุฑุฑุณ <strong>ุฑูุฒ ุงุฌุฑุง ูุงูุงูู API</strong> ุงุณุชูุงุฏู ูโุดูุฏ.</li>
</ul>
<hr>
<h3>ถ๏ธโฃ ูุชุฏ ThrottleMessage()</h3>
<pre class="hljs"><code><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-built_in">string</span> <span class="hljs-title">ThrottleMessage</span>()</span>
{
    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;This API call can only be made once on the 25th of each month.&quot;</span>;
}
</code></pre>
<ul>
<li>ุงู ูุชุฏ ูพุงู ูุดุฏุงุฑ ูุญุฏูุฏุช ุฑุง ุจุฑูโฺฏุฑุฏุงูุฏ. ๐ซ</li>
</ul>
<hr>
<h3>ท๏ธโฃ ุฏุณุชุฑุณ ุจู AppSettings ุฏุฑ Controller</h3>
<pre class="hljs"><code><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">DividendCalendarController</span>(<span class="hljs-params">IOptions&lt;AppSettings&gt; appSettings</span>)</span>
{
    _appSettings = appSettings.Value;
}
</code></pre>
<ul>
<li>ุงู <strong>constructor</strong>ุ ุงูฺฉุงู ุฏุณุชุฑุณ ุจู ููุงุฏุฑ <strong>appsettings.json</strong> ุฑุง ูุฑุงูู ูโฺฉูุฏ.</li>
</ul>
<hr>
<h3>ธ๏ธโฃ ูพฺฉุฑุจูุฏ ุฏุฑ Startup</h3>
<pre class="hljs"><code><span class="hljs-keyword">var</span> appSettingsSection = Configuration.GetSection(<span class="hljs-string">&quot;AppSettings&quot;</span>);
services.Configure&lt;AppSettings&gt;(appSettingsSection);
</code></pre>
<ul>
<li>ุงู ุฎุทูุท ุงุฌุงุฒู ูโุฏููุฏ <strong>AppSettings</strong> ุจู ุตูุฑุช <strong>Dependency Injection</strong> ุฏุฑ controller ุฏุฑ ุฏุณุชุฑุณ ุจุงุดุฏ.</li>
</ul>
<hr>
<h3>น๏ธโฃ ูุชุฏ SetMorningstarNextRunDate()</h3>
<pre class="hljs"><code><span class="hljs-keyword">private</span> DateTime? SetMorningstarNextRunDate()
{
    <span class="hljs-built_in">int</span> month;
    <span class="hljs-keyword">if</span> (DateTime.Now.Day &lt; <span class="hljs-number">25</span>)
        month = DateTime.Now.Month;
    <span class="hljs-keyword">else</span>
        month = DateTime.Now.AddMonths(<span class="hljs-number">1</span>).Month;

    <span class="hljs-keyword">var</span> date = <span class="hljs-keyword">new</span> DateTime(DateTime.Now.Year, month, ApiKeyConstants.ThrottleMonthDay);

    AppSettings.AddOrUpdateAppSetting&lt;DateTime?&gt;(<span class="hljs-string">&quot;MorningstarNextRunDate&quot;</span>, date);

    <span class="hljs-keyword">return</span> date;
}
</code></pre>
<ul>
<li>ุจุฑุฑุณ ูโฺฉูุฏ ฺฉู ุฑูุฒ <strong>ูุนู ฺฉูุชุฑ ุงุฒ 25</strong> ุจุงุดุฏ ุง ูู.</li>
<li>ุณูพุณ <strong>ุชุงุฑุฎ ุงุฌุฑุง ุจุนุฏ</strong> ุฑุง ูุญุงุณุจู ู ุฏุฑ <strong>appsettings.json</strong> ุฐุฎุฑู ูโฺฉูุฏ.</li>
</ul>
<hr>
<h3>๐ ูุชุฏ CanExecuteApiRequest()</h3>
<pre class="hljs"><code><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-built_in">bool</span> <span class="hljs-title">CanExecuteApiRequest</span>()</span>
{
    DateTime? nextRunDate = _appSettings.MorningstarNextRunDate;
    <span class="hljs-keyword">if</span> (!nextRunDate.HasValue)
        nextRunDate = SetMorningstarNextRunDate();

    <span class="hljs-keyword">if</span> (DateTime.Now.Day == ApiKeyConstants.ThrottleMonthDay)
    {
        <span class="hljs-keyword">if</span> (nextRunDate.Value.Month == DateTime.Now.Month)
        {
            SetMorningstarNextRunDate();
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        }
        <span class="hljs-keyword">else</span>
        {
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }
    }
    <span class="hljs-keyword">else</span>
    {
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }
}
</code></pre>
<ul>
<li>ุจุฑุฑุณ ูโฺฉูุฏ ฺฉู ุขุง <strong>API ุฏุฑ ุฑูุฒ 25 ูุงู ุฌุงุฑ</strong> ูุงุจู ุงุฌุฑุง ุงุณุช ุง ุฎุฑ.</li>
<li>ุงฺฏุฑ ุดุฑุทโูุง ุจุฑูุฑุงุฑ ุจุงุดูุฏุ <strong>true</strong> ุจุฑูโฺฏุฑุฏุฏุ ุฏุฑ ุบุฑ ุงู ุตูุฑุช <strong>false</strong>. โ</li>
</ul>
<hr>
<h3>ฑฑ๏ธโฃ ุจูโุฑูุฒุฑุณุงู GetDividendCalendar()</h3>
<pre class="hljs"><code>[<span class="hljs-meta">Authorize(Policy = Policies.Internal)</span>]
[<span class="hljs-meta">HttpGet(<span class="hljs-string">&quot;internal&quot;</span>)</span>]
<span class="hljs-function"><span class="hljs-keyword">public</span> IActionResult <span class="hljs-title">GetDividendCalendar</span>()</span>
{
    <span class="hljs-keyword">if</span> (CanExecuteApiRequest())
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> ObjectResult(JsonConvert.SerializeObject(BuildDividendCalendar()));
    <span class="hljs-keyword">else</span>
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> ObjectResult(ThrottleMessage());
}
</code></pre>
<ul>
<li>ุงฺฉููู ููุช ฺฉุงุฑุจุฑ ุฏุงุฎู API ุฑุง ูุฑุงุฎูุงู ูโฺฉูุฏุ <strong>ุงุนุชุจุงุฑุณูุฌ ูุญุฏูุฏุช</strong> ุงูุฌุงู ูโุดูุฏ.</li>
<li>ุงฺฏุฑ ุดุฑุงุท ุงุฌุฑุง ูุฑุงูู ุจุงุดุฏุ JSON ุชููู dividend ุจุงุฒฺฏุฑุฏุงูุฏู ูโุดูุฏุ ุฏุฑ ุบุฑ ุงู ุตูุฑุช <strong>ูพุงู ูุญุฏูุฏุช</strong> ููุงุด ุฏุงุฏู ูโุดูุฏ. โณ</li>
</ul>
<hr>
<h3>โ ุฌูุนโุจูุฏ</h3>
<ul>
<li>ูพุฑูฺู ฺฉุงูู ุดุฏุ ุงูุง <strong>ุฌุง ุจุฑุง ุจูุจูุฏ ู ุชูุณุนู</strong> ูุฌูุฏ ุฏุงุฑุฏ.</li>
<li>ูุฑุญูู ุจุนุฏ: <strong>ูุณุชูุฏุณุงุฒ API</strong> ู <strong>ุงุณุชูุฑุงุฑ ุขู</strong> ููุฑุงู ุจุง <strong>ูุงฺฏโฺฏุฑ ู ูุงูุชูุฑูฺฏ</strong>.</li>
<li><strong>Logging</strong> ุจุฑุง ุฐุฎุฑู ุฌุฒุฆุงุช ุงุณุชุซูุงูุง ู ูพฺฏุฑ ุงุณุชูุงุฏู ุงุฒ API ููุฏ ุงุณุช.</li>
<li><strong>Monitoring</strong> ุจุฑุง ุจุฑุฑุณ ุณูุงูุช API ู ุฏุฑุงูุช ูุดุฏุงุฑ ุฏุฑ ุตูุฑุช ุจุฑูุฒ ูุดฺฉู ฺฉุงุฑุจุฑุฏ ุฏุงุฑุฏ.</li>
</ul>
<p>ุงู ุชูุฑู ูโุชูุงูุฏ ุชุฌุฑุจู ุจุณุงุฑ ุฎูุจ ุจุฑุง ุชูุณุนู ู ุจูุจูุฏ ููุงุฑุชโูุง ุดูุง ุจุงุดุฏ. ๐</p>
<h3>๐ ุฎูุงุตู ูุตู ฑฐ โ ุงููุช API ุจุง API Key ู Azure Key Vault</h3>
<p>ุฏุฑ ุงู ูุตูุ ุดูุง ุจุง ฺฉ <strong>API ุดุฎุต ุซุงูุซ</strong> ุซุจุชโูุงู ฺฉุฑุฏุฏ ู <strong>ฺฉูุฏ API ูุฎุตูุต ุฎูุฏุชุงู</strong> ุฑุง ุฏุฑุงูุช ฺฉุฑุฏุฏ. ุงู ฺฉูุฏ ุฏุฑ <strong>Azure Key Vault</strong> ุฐุฎุฑู ุดุฏ ุชุง ุงุฒ ุฏุณุชุฑุณ ฺฉุงุฑุจุฑุงู ุบุฑูุฌุงุฒ ูุญุงูุธุช ุดูุฏ. ๐</p>
<p>ุณูพุณ ฺฉ ุจุฑูุงูู <strong><a href="http://ASP.NET">ASP.NET</a> Core</strong> ุงุฌุงุฏ ฺฉุฑุฏู ู ุขู ุฑุง ุฏุฑ <strong>Azure</strong> ููุชุดุฑ ฺฉุฑุฏุฏ. ุจุนุฏ ุงุฒ ุขูุ ุจู <strong>ุงููโุณุงุฒ ุจุฑูุงูู ูุจ</strong> ุจุง ุงุณุชูุงุฏู ุงุฒ <strong>ุงุญุฑุงุฒ ููุช (Authentication)</strong> ู <strong>ูุฌูุฒุฏู ูุจุชู ุจุฑ ููุด (Role-based Authorization)</strong> ูพุฑุฏุงุฎุชุฏ.</p>
<hr>
<h3>๐ ุงููุช ู ูุฌูุฒุฏู</h3>
<ul>
<li>
<p><strong>Authorization</strong> ฺฉู ุชูุธู ุดุฏุ ุจุง ุงุณุชูุงุฏู ุงุฒ <strong>API Key</strong> ุงูุฌุงู ูโุดูุฏ.</p>
</li>
<li>
<p>ุฏุฑ ุงู ูพุฑูฺูุ ุงุฒ ุฏู <strong>API Key</strong> ุงุณุชูุงุฏู ุดุฏ:</p>
<ol>
<li>ฺฉ ุจุฑุง <strong>ฺฉุงุฑุจุฑุงู ุฏุงุฎู</strong></li>
<li>ฺฉ ุจุฑุง <strong>ฺฉุงุฑุจุฑุงู ุฎุงุฑุฌ</strong></li>
</ol>
</li>
<li>
<p><strong>ุชุณุช ุงููุช API ู API Key</strong> ุจุง <strong>Postman</strong> ุงูุฌุงู ุดุฏ.</p>
<ul>
<li>Postman ฺฉ ุงุจุฒุงุฑ ุจุณุงุฑ ฺฉุงุฑุจุฑุฏ ุจุฑุง <strong>ุชุณุช ุฏุฑุฎูุงุณุชโูุง ู ูพุงุณุฎโูุง HTTP</strong> ุงุณุช. ๐๏ธ</li>
</ul>
</li>
</ul>
<hr>
<h3>๐ API Dividend Calendar</h3>
<ul>
<li>ุณูพุณ ฺฉุฏ <strong>Dividend Calendar API</strong> ุงุถุงูู ุดุฏ ู <strong>ุฏุณุชุฑุณ ุฏุงุฎู ู ุฎุงุฑุฌ</strong> ุจุฑ ุงุณุงุณ <strong>API Key</strong> ูุนุงู ุดุฏ.</li>
<li>ูพุฑูฺู ฺูุฏู <strong>ูุฑุงุฎูุงู API</strong> ุงูุฌุงู ุฏุงุฏ ุชุง <strong>ูุณุช ุงุฒ ุดุฑฺฉุชโูุง ฺฉู ูุตุฏ ูพุฑุฏุงุฎุช ุณูุฏ ุณูุงู ุฏุงุฑูุฏ</strong> ุงุฌุงุฏ ุดูุฏ.</li>
<li>ุฏุฑ ููุงุชุ ุฏุงุฏูโูุง ุจู <strong>JSON</strong> ุณุฑุงูุงุฒ ุดุฏู ู ุจู ฺฉุงุฑุจุฑ ุจุงุฒฺฏุฑุฏุงูุฏู ุดุฏูุฏ.</li>
<li>ูพุฑูฺู ุทูุฑ ูุญุฏูุฏ ุดุฏ ฺฉู <strong>ููุท ฺฉ ุจุงุฑ ุฏุฑ ูุงู ุงุฌุฑุง ุดูุฏ</strong>.</li>
</ul>
<hr>
<h3>๐ก ูุชุฌู</h3>
<p>ุจุง ุท ฺฉุฑุฏู ุงู ูุตู:</p>
<ul>
<li>ุดูุง ฺฉ <strong>FinTech API</strong> ุงุฌุงุฏ ฺฉุฑุฏูโุงุฏ ฺฉู <strong>ูุฑ ูุงู ฺฉ ุจุงุฑ ุงุฌุฑุง ูโุดูุฏ</strong>.</li>
<li>ุงู API <strong>ุงุทูุงุนุงุช ูพุฑุฏุงุฎุช ุณูุฏ ุณูุงู ุณุงู ุฌุงุฑ</strong> ุฑุง ุงุฑุงุฆู ูโุฏูุฏ.</li>
<li>ฺฉุงุฑุจุฑุงู ูโุชูุงููุฏ ุงู ุฏุงุฏูโูุง ุฑุง <strong>ุฏุณุฑุงูุงุฒ ฺฉุฑุฏู</strong> ู ุจุง <strong>LINQ</strong>ุ ุฏุงุฏูโูุง ููุฑุฏ ูุธุฑ ุฎูุฏ ุฑุง ุงุณุชุฎุฑุงุฌ ฺฉููุฏ.</li>
</ul>
<hr>
<h3>๐ง ูุตู ุจุนุฏ</h3>
<p>ุฏุฑ ูุตู ุจุนุฏุ ุงุฒ <strong>PostSharp</strong> ุจุฑุง ูพุงุฏูโุณุงุฒ <strong>ุจุฑูุงููโููุณ ูุจุชู ุจุฑ Aspect (AOP)</strong> ุงุณุชูุงุฏู ูโฺฉูู.<br>
ุจุง ุงู ูุฑููุฑฺฉ AOPุ ุงุฏ ูโฺฏุฑู ฺฉู ฺฺฏููู <strong>ุนููฺฉุฑุฏูุง ูุดุชุฑฺฉ</strong> ูุซู <strong>ูุฏุฑุช ุงุณุชุซูุงุ ูุงฺฏโฺฏุฑุ ุงููุช ู ุชุฑุงฺฉูุดโูุง</strong> ุฑุง ุฏุฑ ุจุฑูุงููโูุงูุงู ูุฏุฑุช ฺฉูู.</p>
<hr>
<h3>โ ุณูุงูุงุช ุชูุฑู</h3>
<ol>
<li>ฺู URLูุง ููุงุจุน ุฎูุจ ุจุฑุง <strong>ูุฒุจุงู API ุฎูุฏ</strong> ู <strong>ุฏุณุชุฑุณ ุจู API ุดุฎุต ุซุงูุซ</strong> ูุณุชูุฏุ</li>
<li>ุฏู ุจุฎุด ูุงุฒู ุจุฑุง <strong>ุงููโุณุงุฒ API</strong> ฺุณุชุ</li>
<li><strong>Claims</strong> ฺุณุช ู ฺุฑุง ุจุงุฏ ุงุฒ ุขูโูุง ุงุณุชูุงุฏู ฺฉูุฏุ</li>
<li>ุงุฒ <strong>Postman</strong> ุจุฑุง ฺู ฺฉุงุฑ ุงุณุชูุงุฏู ูโฺฉูุฏุ</li>
<li>ฺุฑุง ุจุงุฏ ุงุฒ <strong>Repository Pattern</strong> ุจุฑุง ุฐุฎุฑู ุฏุงุฏูโูุง ุงุณุชูุงุฏู ฺฉูุฏุ</li>
</ol>
<hr>
<h3>๐ ูุทุงูุนู ุจุดุชุฑ</h3>
<ul>
<li><a href="https://docs.microsoft.com/en-us/aspnet/web-api/overview/security/individual-accounts-in-web-api">Microsoft: Web API Security Guide</a> โ ุฑุงูููุง ุฌุงูุน ุงููุช ูุจ API</li>
<li><a href="https://docs.microsoft.com/en-us/aspnet/web-forms/overview/older-versions-security/membership/creating-the-membership-schema-in-sqlserver-vb">ASP.NET Membership Database</a> โ ุงุฌุงุฏ ูพุงฺฏุงู ุฏุงุฏู ุนุถูุช</li>
<li><a href="https://www.iso20022.org/10383/iso-10383-market-identifier-codes">ISO 10383 MIC</a> โ ุฏุฑุจุงุฑู ISO 10383 MIC</li>
<li><a href="https://docs.microsoft.com/en-gb/azure/key-vault/vs-key-vault-addconnected-service">Adding Key Vault via Visual Studio</a></li>
<li><a href="https://aka.ms/installazurecliwindows">Azure CLI MSI Installer</a></li>
<li><a href="https://docs.microsoft.com/en-us/azure/key-vault/service-to-service-authentication">Azure Service-to-Service Authentication</a></li>
<li><a href="https://azure.microsoft.com/en-gb/free/?WT.mc_id=A261C142F">Azure Free Subscription</a></li>
<li><a href="https://docs.microsoft.com/en-us/azure/key-vault/basic-concepts">Azure Key Vault Basics</a></li>
<li><a href="https://docs.microsoft.com/en-us/azure/app-service/app-service-webget-started-dotnet">Creating a .NET Core App in Azure</a></li>
<li><a href="https://docs.microsoft.com/en-gb/azure/app-service/overview-hostingplans">Azure App Service Plans Overview</a></li>
<li><a href="https://docs.microsoft.com/en-us/azure/key-vault/tutorial-net-createvault-azure-web-app">Tutorial: Using Azure Key Vault with Web App</a></li>
</ul>

  </main>

  <!-- ููุชุฑ ูุดุชุฑฺฉ -->
  <footer class="footer">
    <div class="container">
      <p>
        <img src="/Gitab/icone/copyright.svg" alt="ฺฉูพโุฑุงุช" width="14" height="14"
             style="vertical-align:middle;margin-inline:4px">
        <span id="y"></span> Gitab โ ุจุฑุง ุชูุณุนูโุฏููุฏฺฏุงู
      </p>
    </div>
  </footer>

  <!-- ุณุงู ู ุงุณฺฉุฑูพุช ุชุบุฑ ุชู -->
  <script>
  (() => {
    const root = document.documentElement;
    const btn = document.getElementById('themeToggle');
    const KEY = 'gitab-theme';
    const media = window.matchMedia('(prefers-color-scheme: dark)');
    const getEffective = s => (s === 'auto' ? (media.matches ? 'dark' : 'light') : s);

    function updateTheme(s) {
      root.setAttribute('data-theme', s);
      const mode = getEffective(s);
      root.dataset.colorMode = mode;
      btn.dataset.icon = mode === 'dark' ? 'moon' : 'sun';
    }

    let saved = localStorage.getItem(KEY) || 'auto';
    updateTheme(saved);

    btn.addEventListener('click', () => {
      const current = localStorage.getItem(KEY) || 'auto';
      const next = current === 'auto' ? 'dark' : current === 'dark' ? 'light' : 'auto';
      localStorage.setItem(KEY, next);
      updateTheme(next);
    });

    media.addEventListener('change', () => {
      if ((localStorage.getItem(KEY) || 'auto') === 'auto') updateTheme('auto');
    });

    document.addEventListener('DOMContentLoaded', () => {
      updateTheme(localStorage.getItem(KEY) || 'auto');
    });
  })();
  </script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
  <script>hljs.highlightAll();</script>

  <script>
  document.querySelectorAll('pre code').forEach(block => {
    const btn = document.createElement('button');
    btn.className = 'copy-btn';

    const icon = document.createElement('img');
    icon.src = "/Gitab/icone/copy.svg";
    icon.alt = 'Copy';
    btn.appendChild(icon);

    block.parentNode.insertBefore(btn, block);

    btn.addEventListener('click', async () => {
      await navigator.clipboard.writeText(block.textContent);
      btn.classList.add('copied');
      setTimeout(() => btn.classList.remove('copied'), 1500);
    });
  });
  </script>

  <script>
  document.body.dataset.page = window.location.pathname;

  const menuBtn = document.querySelector(".menu-toggle");
  const nav = document.querySelector(".nav");

  if (menuBtn && nav) {
    menuBtn.addEventListener("click", (e) => {
      e.stopPropagation();
      nav.classList.toggle("show");
    });

    document.addEventListener("click", (e) => {
      const clickedInsideNav = nav.contains(e.target);
      const clickedMenuButton = menuBtn.contains(e.target);
      if (!clickedInsideNav && !clickedMenuButton) {
        nav.classList.remove("show");
      }
    });
  }
  </script>

  <script>
    document.getElementById('y').textContent = new Date().getFullYear();
  </script>
</body>
</html>
