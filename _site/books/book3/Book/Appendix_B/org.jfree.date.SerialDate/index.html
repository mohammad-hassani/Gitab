

<!doctype html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="utf-8">
  <link rel="icon" type="image/png" href="/Gitab/favicon.png">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Ÿæ€åŸàÿ≥ÿ™ B</title>
  <meta name="description" content="ÿ™ÿ±ÿ¨ŸÖŸá‚ÄåŸáÿß€å ŸÅÿßÿ±ÿ≥€å ⁄©ÿ™ÿßÿ®‚ÄåŸáÿß€å ŸÅŸÜ€å ‚Äî ÿ≥ÿ±€åÿπÿå ŸÖ€åŸÜ€åŸÖÿßŸÑ Ÿà ŸÇÿßÿ®ŸÑ ÿßÿ™⁄©ÿß.">

  <!-- ÿßÿ≥ÿ™ÿß€åŸÑ‚ÄåŸáÿß -->
  <link rel="stylesheet" href="/Gitab/styles/main.css">
  <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css">

  <style>
  @font-face {
    font-family: 'Vazir';
    src: url('/Gitab/fonts/Vazir-FD-WOL.ttf') format('truetype');
    font-display: swap;
  }
  body {
    font-family: 'Vazir', sans-serif;
  }
  </style>
</head>

<body>
  <!-- ŸáÿØÿ± ŸÖÿ¥ÿ™ÿ±⁄© -->
  <header class="header">
    <div class="container nav-wrap">
      <a href="/Gitab/" class="brand">
        <img src="/Gitab/icone/logo.svg" alt="Gitab logo" width="26" height="26">
        <span>Gitab</span>
      </a>

       <nav class="nav">
         <a href="/Gitab/" >ÿÆÿßŸÜŸá</a>
         <a href="/Gitab/books/list-books" >⁄©ÿ™ÿßÿ®‚ÄåŸáÿß</a>
        <a href="/Gitab/translator.html" >ŸÖÿ™ÿ±ÿ¨ŸÖ€åŸÜ</a>
         <a href="/Gitab/giter.html" >⁄Ø€åÿ™ÿ±</a>
       </nav>

      <div class="nav-actions">
        <button id="themeToggle" class="icon-btn theme-btn" data-icon="moon" aria-label="ÿ™ÿ∫€å€åÿ± ÿ™ŸÖ">
          <img src="/Gitab/icone/sun.svg" class="icon-sun" alt="ÿ±Ÿàÿ¥ŸÜ">
          <img src="/Gitab/icone/moon.svg" class="icon-moon" alt="ÿ™ÿßÿ±€å⁄©">
        </button>

        <a class="icon-btn" href="https://github.com/hheydarian/Gitab" target="_blank" title="GitHub">
          <img src="/Gitab/icone/github.svg" alt="GitHub">
        </a>

        <!-- ÿØ⁄©ŸÖŸá ŸÖŸÜŸà ÿ®ÿ±ÿß€å ŸÖŸàÿ®ÿß€åŸÑ -->
        <button class="menu-toggle" aria-label="ŸÖŸÜŸà">
          <img src="/Gitab/icone/menu.svg" alt="menu">
        </button>
      </div>
    </div>
  </header>

  
  <main class="site-main book-page">
    <h1>üìé Ÿæ€åŸàÿ≥ÿ™ B ‚Äî ⁄©ŸÑÿßÿ≥ org.jfree.date.SerialDate</h1>
<h3>üìù ŸÅŸáÿ±ÿ≥ÿ™ B-1 ‚Äî ŸÅÿß€åŸÑ SerialDate.java</h3>
<pre class="hljs"><code>
 <span class="hljs-number">1</span> <span class="hljs-comment">/* ========================================================================
   2  * JCommon : a free general purpose class library for the Java(tm) platform
   3  * ========================================================================
   4  *
   5  * (C) Copyright 2000-2005, by Object Refinery Limited and Contributors.
   6  * 
   7  * Project Info:  http://www.jfree.org/jcommon/index.html
   8  *
   9  * This library is free software; you can redistribute it and/or modify it 
  10  * under the terms of the GNU Lesser General Public License as published by 
  11  * the Free Software Foundation; either version 2.1 of the License, or 
  12  * (at your option) any later version.
  13  *
  14  * This library is distributed in the hope that it will be useful, but 
  15  * WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY 
  16  * or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Lesser General Public 
  17  * License for more details.
  18  *
  19  * You should have received a copy of the GNU Lesser General Public
  20  * License along with this library; if not, write to the Free Software
  21  * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, 
  22  * USA.
  23  *
  24  * [Java is a trademark or registered trademark of Sun Microsystems, Inc. 
  25  * in the United States and other countries.]
  26  *
  27  * --------------
  28  * SerialDate.java
  29  * --------------
  30  * (C) Copyright 2001-2005, by Object Refinery Limited.
  31  *
  32  * Original Author:  David Gilbert (for Object Refinery Limited);
  33  * Contributor(s):   -;
  34  *
  35  * $Id: SerialDate.java,v 1.7 2005/11/03 09:25:17 mungady Exp $
  36  *
  37  * Changes (from 11-Oct-2001)
 349
350
 Appendix B: org.jfree.date.SerialDate
 Listing B-1 (continued)
 SerialDate.Java
  38  * -------------------------
  39  * 11-Oct-2001 : Re-organised the class and moved it to new package 
  40  *               com.jrefinery.date (DG);
  41  * 05-Nov-2001 : Added a getDescription() method, and eliminated NotableDate 
  42  *               class (DG);
  43  * 12-Nov-2001 : IBD requires setDescription() method, now that NotableDate 
  44  *               class is gone (DG);  Changed getPreviousDayOfWeek(), 
  45  *               getFollowingDayOfWeek() and getNearestDayOfWeek() to correct 
  46  *               bugs (DG);
  47  * 05-Dec-2001 : Fixed bug in SpreadsheetDate class (DG);
  48  * 29-May-2002 : Moved the month constants into a separate interface 
  49  *               (MonthConstants) (DG);
  50  * 27-Aug-2002 : Fixed bug in addMonths() method, thanks to N???levka Petr (DG);
  51  * 03-Oct-2002 : Fixed errors reported by Checkstyle (DG);
  52  * 13-Mar-2003 : Implemented Serializable (DG);
  53  * 29-May-2003 : Fixed bug in addMonths method (DG);
  54  * 04-Sep-2003 : Implemented Comparable.  Updated the isInRange javadocs (DG);
  55  * 05-Jan-2005 : Fixed bug in addYears() method (1096282) (DG);
  56  * 
  57  */</span>
  <span class="hljs-number">58</span> 
  <span class="hljs-number">59</span> <span class="hljs-keyword">package</span> org.jfree.date;
  <span class="hljs-number">60</span> 
  <span class="hljs-number">61</span> <span class="hljs-keyword">import</span> java.io.Serializable;
  <span class="hljs-number">62</span> <span class="hljs-keyword">import</span> java.text.DateFormatSymbols;
  <span class="hljs-number">63</span> <span class="hljs-keyword">import</span> java.text.SimpleDateFormat;
  <span class="hljs-number">64</span> <span class="hljs-keyword">import</span> java.util.Calendar;
  <span class="hljs-number">65</span> <span class="hljs-keyword">import</span> java.util.GregorianCalendar;
  <span class="hljs-number">66</span> 
  <span class="hljs-number">67</span> <span class="hljs-comment">/**
  68  *  An abstract class that defines our requirements for manipulating dates,
  69  *  without tying down a particular implementation.
  70  *  &lt;P&gt;
  71  *  Requirement 1 : match at least what Excel does for dates;
  72  *  Requirement 2 : class is immutable;
  73  *  &lt;P&gt;
  74  *  Why not just use java.util.Date?  We will, when it makes sense.  At times,
  75  *  java.util.Date can be *too* precise - it represents an instant in time,
  76  *  accurate to 1/1000th of a second (with the date itself depending on the
  77  *  time-zone).  Sometimes we just want to represent a particular day (e.g. 21
  78  *  January 2015) without concerning ourselves about the time of day, or the
  79  *  time-zone, or anything else.  That&#x27;s what we&#x27;ve defined SerialDate for.
  80  *  &lt;P&gt;
  81  *  You can call getInstance() to get a concrete subclass of SerialDate,
  82  *  without worrying about the exact implementation.
  83  *
  84  * <span class="hljs-doctag">@author</span> David Gilbert
  85  */</span>
  <span class="hljs-number">86</span> <span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SerialDate</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Comparable</span>, 
  <span class="hljs-number">87</span>                                             Serializable, 
  <span class="hljs-number">88</span>                                             MonthConstants {
  <span class="hljs-number">89</span> 
  <span class="hljs-number">90</span>     <span class="hljs-comment">/** For serialization. */</span>
  <span class="hljs-number">91</span>     <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">long</span> <span class="hljs-variable">serialVersionUID</span> <span class="hljs-operator">=</span> -<span class="hljs-number">293716040467423637L</span>;
  <span class="hljs-number">92</span>
  <span class="hljs-number">93</span>     <span class="hljs-comment">/** Date format symbols. */</span>
  <span class="hljs-number">94</span>     <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> DateFormatSymbols
  <span class="hljs-number">95</span>         DATE_FORMAT_SYMBOLS = <span class="hljs-keyword">new</span> <span class="hljs-title class_">SimpleDateFormat</span>().getDateFormatSymbols();
  <span class="hljs-number">96</span> 
  <span class="hljs-number">97</span>     <span class="hljs-comment">/** The serial number for 1 January 1900. */</span>
  <span class="hljs-number">98</span>     <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">SERIAL_LOWER_BOUND</span> <span class="hljs-operator">=</span> <span class="hljs-number">2</span>;
  <span class="hljs-number">99</span> 
 <span class="hljs-number">100</span>     <span class="hljs-comment">/** The serial number for 31 December 9999. */</span>
 <span class="hljs-number">101</span>     <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">SERIAL_UPPER_BOUND</span> <span class="hljs-operator">=</span> <span class="hljs-number">2958465</span>;
 <span class="hljs-number">102</span> 
Appendix B: org.jfree.date.SerialDate
 <span class="hljs-number">351</span>
 Listing B-<span class="hljs-number">1</span> (continued)
 SerialDate.Java
 <span class="hljs-number">103</span>     <span class="hljs-comment">/** The lowest year value supported by this date format. */</span>
 <span class="hljs-number">104</span>     <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">MINIMUM_YEAR_SUPPORTED</span> <span class="hljs-operator">=</span> <span class="hljs-number">1900</span>;
 <span class="hljs-number">105</span> 
 <span class="hljs-number">106</span>     <span class="hljs-comment">/** The highest year value supported by this date format. */</span>
 <span class="hljs-number">107</span>     <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">MAXIMUM_YEAR_SUPPORTED</span> <span class="hljs-operator">=</span> <span class="hljs-number">9999</span>;
 <span class="hljs-number">108</span> 
 <span class="hljs-number">109</span>     <span class="hljs-comment">/** Useful constant for Monday. Equivalent to java.util.Calendar.MONDAY. */</span>
 <span class="hljs-number">110</span>     <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">MONDAY</span> <span class="hljs-operator">=</span> Calendar.MONDAY;
 <span class="hljs-number">111</span> 
 <span class="hljs-number">112</span>     <span class="hljs-comment">/** 
 113      * Useful constant for Tuesday. Equivalent to java.util.Calendar.TUESDAY. 
 114      */</span>
 <span class="hljs-number">115</span>     <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">TUESDAY</span> <span class="hljs-operator">=</span> Calendar.TUESDAY;
 <span class="hljs-number">116</span> 
 <span class="hljs-number">117</span>     <span class="hljs-comment">/** 
 118      * Useful constant for Wednesday. Equivalent to 
 119      * java.util.Calendar.WEDNESDAY. 
 120      */</span>
 <span class="hljs-number">121</span>     <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">WEDNESDAY</span> <span class="hljs-operator">=</span> Calendar.WEDNESDAY;
 <span class="hljs-number">122</span> 
 <span class="hljs-number">123</span>     <span class="hljs-comment">/** 
 124      * Useful constant for Thrusday. Equivalent to java.util.Calendar.THURSDAY. 
 125      */</span>
 <span class="hljs-number">126</span>     <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">THURSDAY</span> <span class="hljs-operator">=</span> Calendar.THURSDAY;
 <span class="hljs-number">127</span> 
 <span class="hljs-number">128</span>     <span class="hljs-comment">/** Useful constant for Friday. Equivalent to java.util.Calendar.FRIDAY. */</span>
 <span class="hljs-number">129</span>     <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">FRIDAY</span> <span class="hljs-operator">=</span> Calendar.FRIDAY;
 <span class="hljs-number">130</span> 
 <span class="hljs-number">131</span>     <span class="hljs-comment">/** 
 132      * Useful constant for Saturday. Equivalent to java.util.Calendar.SATURDAY.
 133      */</span>
 <span class="hljs-number">134</span>     <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">SATURDAY</span> <span class="hljs-operator">=</span> Calendar.SATURDAY;
 <span class="hljs-number">135</span> 
 <span class="hljs-number">136</span>     <span class="hljs-comment">/** Useful constant for Sunday. Equivalent to java.util.Calendar.SUNDAY. */</span>
 <span class="hljs-number">137</span>     <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">SUNDAY</span> <span class="hljs-operator">=</span> Calendar.SUNDAY;
 <span class="hljs-number">138</span> 
 <span class="hljs-number">139</span>     <span class="hljs-comment">/** The number of days in each month in non leap years. */</span>
 <span class="hljs-number">140</span>     <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span>[] LAST_DAY_OF_MONTH =
 <span class="hljs-number">141</span>         {<span class="hljs-number">0</span>, <span class="hljs-number">31</span>, <span class="hljs-number">28</span>, <span class="hljs-number">31</span>, <span class="hljs-number">30</span>, <span class="hljs-number">31</span>, <span class="hljs-number">30</span>, <span class="hljs-number">31</span>, <span class="hljs-number">31</span>, <span class="hljs-number">30</span>, <span class="hljs-number">31</span>, <span class="hljs-number">30</span>, <span class="hljs-number">31</span>};
 <span class="hljs-number">142</span> 
 <span class="hljs-number">143</span>     <span class="hljs-comment">/** The number of days in a (non-leap) year up to the end of each month. */</span>
 <span class="hljs-number">144</span>     <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span>[] AGGREGATE_DAYS_TO_END_OF_MONTH =
 <span class="hljs-number">145</span>         {<span class="hljs-number">0</span>, <span class="hljs-number">31</span>, <span class="hljs-number">59</span>, <span class="hljs-number">90</span>, <span class="hljs-number">120</span>, <span class="hljs-number">151</span>, <span class="hljs-number">181</span>, <span class="hljs-number">212</span>, <span class="hljs-number">243</span>, <span class="hljs-number">273</span>, <span class="hljs-number">304</span>, <span class="hljs-number">334</span>, <span class="hljs-number">365</span>};
 <span class="hljs-number">146</span> 
 <span class="hljs-number">147</span>     <span class="hljs-comment">/** The number of days in a year up to the end of the preceding month. */</span>
 <span class="hljs-number">148</span>     <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span>[] AGGREGATE_DAYS_TO_END_OF_PRECEDING_MONTH =
 <span class="hljs-number">149</span>         {<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">31</span>, <span class="hljs-number">59</span>, <span class="hljs-number">90</span>, <span class="hljs-number">120</span>, <span class="hljs-number">151</span>, <span class="hljs-number">181</span>, <span class="hljs-number">212</span>, <span class="hljs-number">243</span>, <span class="hljs-number">273</span>, <span class="hljs-number">304</span>, <span class="hljs-number">334</span>, <span class="hljs-number">365</span>};
 <span class="hljs-number">150</span> 
 <span class="hljs-number">151</span>     <span class="hljs-comment">/** The number of days in a leap year up to the end of each month. */</span>
 <span class="hljs-number">152</span>     <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span>[] LEAP_YEAR_AGGREGATE_DAYS_TO_END_OF_MONTH =
 <span class="hljs-number">153</span>         {<span class="hljs-number">0</span>, <span class="hljs-number">31</span>, <span class="hljs-number">60</span>, <span class="hljs-number">91</span>, <span class="hljs-number">121</span>, <span class="hljs-number">152</span>, <span class="hljs-number">182</span>, <span class="hljs-number">213</span>, <span class="hljs-number">244</span>, <span class="hljs-number">274</span>, <span class="hljs-number">305</span>, <span class="hljs-number">335</span>, <span class="hljs-number">366</span>};
 <span class="hljs-number">154</span> 
 <span class="hljs-number">155</span>     <span class="hljs-comment">/** 
 156      * The number of days in a leap year up to the end of the preceding month. 
 157      */</span>
 <span class="hljs-number">158</span>     <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span>[] 
 <span class="hljs-number">159</span>         LEAP_YEAR_AGGREGATE_DAYS_TO_END_OF_PRECEDING_MONTH =
 <span class="hljs-number">160</span>             {<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">31</span>, <span class="hljs-number">60</span>, <span class="hljs-number">91</span>, <span class="hljs-number">121</span>, <span class="hljs-number">152</span>, <span class="hljs-number">182</span>, <span class="hljs-number">213</span>, <span class="hljs-number">244</span>, <span class="hljs-number">274</span>, <span class="hljs-number">305</span>, <span class="hljs-number">335</span>, <span class="hljs-number">366</span>};
 <span class="hljs-number">161</span> 
 <span class="hljs-number">162</span>     <span class="hljs-comment">/** A useful constant for referring to the first week in a month. */</span>
 <span class="hljs-number">163</span>     <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">FIRST_WEEK_IN_MONTH</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;
 <span class="hljs-number">164</span> 
<span class="hljs-number">352</span>
 Appendix B: org.jfree.date.SerialDate
 Listing B-<span class="hljs-number">1</span> (continued)
 SerialDate.Java
 <span class="hljs-number">165</span>     <span class="hljs-comment">/** A useful constant for referring to the second week in a month. */</span>
 <span class="hljs-number">166</span>     <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">SECOND_WEEK_IN_MONTH</span> <span class="hljs-operator">=</span> <span class="hljs-number">2</span>;
 <span class="hljs-number">167</span> 
 <span class="hljs-number">168</span>     <span class="hljs-comment">/** A useful constant for referring to the third week in a month. */</span>
 <span class="hljs-number">169</span>     <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">THIRD_WEEK_IN_MONTH</span> <span class="hljs-operator">=</span> <span class="hljs-number">3</span>;
 <span class="hljs-number">170</span> 
 <span class="hljs-number">171</span>     <span class="hljs-comment">/** A useful constant for referring to the fourth week in a month. */</span>
 <span class="hljs-number">172</span>     <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">FOURTH_WEEK_IN_MONTH</span> <span class="hljs-operator">=</span> <span class="hljs-number">4</span>;
 <span class="hljs-number">173</span> 
 <span class="hljs-number">174</span>     <span class="hljs-comment">/** A useful constant for referring to the last week in a month. */</span>
 <span class="hljs-number">175</span>     <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">LAST_WEEK_IN_MONTH</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
 <span class="hljs-number">176</span> 
 <span class="hljs-number">177</span>     <span class="hljs-comment">/** Useful range constant. */</span>
 <span class="hljs-number">178</span>     <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">INCLUDE_NONE</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
 <span class="hljs-number">179</span> 
 <span class="hljs-number">180</span>     <span class="hljs-comment">/** Useful range constant. */</span>
 <span class="hljs-number">181</span>     <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">INCLUDE_FIRST</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;
 <span class="hljs-number">182</span> 
 <span class="hljs-number">183</span>     <span class="hljs-comment">/** Useful range constant. */</span>
 <span class="hljs-number">184</span>     <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">INCLUDE_SECOND</span> <span class="hljs-operator">=</span> <span class="hljs-number">2</span>;
 <span class="hljs-number">185</span> 
 <span class="hljs-number">186</span>     <span class="hljs-comment">/** Useful range constant. */</span>
 <span class="hljs-number">187</span>     <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">INCLUDE_BOTH</span> <span class="hljs-operator">=</span> <span class="hljs-number">3</span>;
 <span class="hljs-number">188</span> 
 <span class="hljs-number">189</span>     <span class="hljs-comment">/** 
 190      * Useful constant for specifying a day of the week relative to a fixed 
 191      * date. 
 192      */</span>
 <span class="hljs-number">193</span>     <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">PRECEDING</span> <span class="hljs-operator">=</span> -<span class="hljs-number">1</span>;
 <span class="hljs-number">194</span> 
 <span class="hljs-number">195</span>     <span class="hljs-comment">/** 
 196      * Useful constant for specifying a day of the week relative to a fixed 
 197      * date. 
 198      */</span>
 <span class="hljs-number">199</span>     <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">NEAREST</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
 <span class="hljs-number">200</span> 
 <span class="hljs-number">201</span>     <span class="hljs-comment">/** 
 202      * Useful constant for specifying a day of the week relative to a fixed 
 203      * date. 
 204      */</span>
 <span class="hljs-number">205</span>     <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">FOLLOWING</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;
 <span class="hljs-number">206</span> 
 <span class="hljs-number">207</span>     <span class="hljs-comment">/** A description for the date. */</span>
 <span class="hljs-number">208</span>     <span class="hljs-keyword">private</span> String description;
 <span class="hljs-number">209</span> 
 <span class="hljs-number">210</span>     <span class="hljs-comment">/**
 211      * Default constructor.
 212      */</span>
 <span class="hljs-number">213</span>     <span class="hljs-keyword">protected</span> <span class="hljs-title function_">SerialDate</span><span class="hljs-params">()</span> {
 <span class="hljs-number">214</span>     }
 <span class="hljs-number">215</span> 
 <span class="hljs-number">216</span>     <span class="hljs-comment">/**
 217      * Returns &lt;code&gt;true&lt;/code&gt; if the supplied integer code represents a 
 218      * valid day-of-the-week, and &lt;code&gt;false&lt;/code&gt; otherwise.
 219      *
 220      * <span class="hljs-doctag">@param</span> code  the code being checked for validity.
 221      *
 222      * <span class="hljs-doctag">@return</span> &lt;code&gt;true&lt;/code&gt; if the supplied integer code represents a 
 223      *         valid day-of-the-week, and &lt;code&gt;false&lt;/code&gt; otherwise.
 224      */</span>
 <span class="hljs-number">225</span>     <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isValidWeekdayCode</span><span class="hljs-params">(<span class="hljs-keyword">final</span> <span class="hljs-type">int</span> code)</span> {
 <span class="hljs-number">226</span> 
Appendix B: org.jfree.date.SerialDate
 <span class="hljs-number">353</span>
 Listing B-<span class="hljs-number">1</span> (continued)
 SerialDate.Java
 <span class="hljs-number">227</span>         <span class="hljs-keyword">switch</span>(code) {
 <span class="hljs-number">228</span>             <span class="hljs-keyword">case</span> SUNDAY: 
 <span class="hljs-number">229</span>             <span class="hljs-keyword">case</span> MONDAY: 
 <span class="hljs-number">230</span>             <span class="hljs-keyword">case</span> TUESDAY: 
 <span class="hljs-number">231</span>             <span class="hljs-keyword">case</span> WEDNESDAY: 
 <span class="hljs-number">232</span>             <span class="hljs-keyword">case</span> THURSDAY: 
 <span class="hljs-number">233</span>             <span class="hljs-keyword">case</span> FRIDAY: 
 <span class="hljs-number">234</span>             <span class="hljs-keyword">case</span> SATURDAY: 
 <span class="hljs-number">235</span>                 <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
 <span class="hljs-number">236</span>             <span class="hljs-keyword">default</span>: 
 <span class="hljs-number">237</span>                 <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
 <span class="hljs-number">238</span>         }
 <span class="hljs-number">239</span> 
 <span class="hljs-number">240</span>     }
 <span class="hljs-number">241</span> 
 <span class="hljs-number">242</span>     <span class="hljs-comment">/**
 243      * Converts the supplied string to a day of the week.
 244      *
 245      * <span class="hljs-doctag">@param</span> s  a string representing the day of the week.
 246      *
 247      * <span class="hljs-doctag">@return</span> &lt;code&gt;-1&lt;/code&gt; if the string is not convertable, the day of 
 248      *         the week otherwise.
 249      */</span>
 <span class="hljs-number">250</span>     <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-title function_">stringToWeekdayCode</span><span class="hljs-params">(String s)</span> {
 <span class="hljs-number">251</span> 
 <span class="hljs-number">252</span>         <span class="hljs-keyword">final</span> String[] shortWeekdayNames 
 <span class="hljs-number">253</span>             = DATE_FORMAT_SYMBOLS.getShortWeekdays();
 <span class="hljs-number">254</span>         <span class="hljs-keyword">final</span> String[] weekDayNames = DATE_FORMAT_SYMBOLS.getWeekdays();
 <span class="hljs-number">255</span> 
 <span class="hljs-number">256</span>         <span class="hljs-type">int</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> -<span class="hljs-number">1</span>;
 <span class="hljs-number">257</span>         s = s.trim();
 <span class="hljs-number">258</span>         <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; weekDayNames.length; i++) {
 <span class="hljs-number">259</span>             <span class="hljs-keyword">if</span> (s.equals(shortWeekdayNames[i])) {
 <span class="hljs-number">260</span>                 result = i;
 <span class="hljs-number">261</span>                 <span class="hljs-keyword">break</span>;
 <span class="hljs-number">262</span>             }
 <span class="hljs-number">263</span>             <span class="hljs-keyword">if</span> (s.equals(weekDayNames[i])) {
 <span class="hljs-number">264</span>                 result = i;
 <span class="hljs-number">265</span>                 <span class="hljs-keyword">break</span>;
 <span class="hljs-number">266</span>             }
 <span class="hljs-number">267</span>         }
 <span class="hljs-number">268</span>         <span class="hljs-keyword">return</span> result;
 <span class="hljs-number">269</span> 
 <span class="hljs-number">270</span>     }
 <span class="hljs-number">271</span> 
 <span class="hljs-number">272</span>     <span class="hljs-comment">/**
 273      * Returns a string representing the supplied day-of-the-week.
 274      * &lt;P&gt;
 275      * Need to find a better approach.
 276      *
 277      * <span class="hljs-doctag">@param</span> weekday  the day of the week.
 278      *
 279      * <span class="hljs-doctag">@return</span> a string representing the supplied day-of-the-week.
 280      */</span>
 <span class="hljs-number">281</span>     <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title function_">weekdayCodeToString</span><span class="hljs-params">(<span class="hljs-keyword">final</span> <span class="hljs-type">int</span> weekday)</span> {
 <span class="hljs-number">282</span> 
 <span class="hljs-number">283</span>         <span class="hljs-keyword">final</span> String[] weekdays = DATE_FORMAT_SYMBOLS.getWeekdays();
 <span class="hljs-number">284</span>         <span class="hljs-keyword">return</span> weekdays[weekday];
 <span class="hljs-number">285</span> 
 <span class="hljs-number">286</span>     }
 <span class="hljs-number">287</span> 
 <span class="hljs-number">288</span>     <span class="hljs-comment">/**
354
 Appendix B: org.jfree.date.SerialDate
 Listing B-1 (continued)
 SerialDate.Java
 289      * Returns an array of month names.
 290      *
 291      * <span class="hljs-doctag">@return</span> an array of month names.
 292      */</span>
 <span class="hljs-number">293</span>     <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String[] getMonths() {
 <span class="hljs-number">294</span> 
 <span class="hljs-number">295</span>         <span class="hljs-keyword">return</span> getMonths(<span class="hljs-literal">false</span>);
 <span class="hljs-number">296</span> 
 <span class="hljs-number">297</span>     }
 <span class="hljs-number">298</span> 
 <span class="hljs-number">299</span>     <span class="hljs-comment">/**
 300      * Returns an array of month names.
 301      *
 302      * <span class="hljs-doctag">@param</span> shortened  a flag indicating that shortened month names should 
 303      *                   be returned.
 304      *
 305      * <span class="hljs-doctag">@return</span> an array of month names.
 306      */</span>
 <span class="hljs-number">307</span>     <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String[] getMonths(<span class="hljs-keyword">final</span> <span class="hljs-type">boolean</span> shortened) {
 <span class="hljs-number">308</span> 
 <span class="hljs-number">309</span>         <span class="hljs-keyword">if</span> (shortened) {
 <span class="hljs-number">310</span>             <span class="hljs-keyword">return</span> DATE_FORMAT_SYMBOLS.getShortMonths();
 <span class="hljs-number">311</span>         }
 <span class="hljs-number">312</span>         <span class="hljs-keyword">else</span> {
 <span class="hljs-number">313</span>             <span class="hljs-keyword">return</span> DATE_FORMAT_SYMBOLS.getMonths();
 <span class="hljs-number">314</span>         }
 <span class="hljs-number">315</span> 
 <span class="hljs-number">316</span>     }
 <span class="hljs-number">317</span> 
 <span class="hljs-number">318</span>     <span class="hljs-comment">/**
 319      * Returns true if the supplied integer code represents a valid month.
 320      *
 321      * <span class="hljs-doctag">@param</span> code  the code being checked for validity.
 322      *
 323      * <span class="hljs-doctag">@return</span> &lt;code&gt;true&lt;/code&gt; if the supplied integer code represents a 
 324      *         valid month.
 325      */</span>
 <span class="hljs-number">326</span>     <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isValidMonthCode</span><span class="hljs-params">(<span class="hljs-keyword">final</span> <span class="hljs-type">int</span> code)</span> {
 <span class="hljs-number">327</span> 
 <span class="hljs-number">328</span>         <span class="hljs-keyword">switch</span>(code) {
 <span class="hljs-number">329</span>             <span class="hljs-keyword">case</span> JANUARY: 
 <span class="hljs-number">330</span>             <span class="hljs-keyword">case</span> FEBRUARY: 
 <span class="hljs-number">331</span>             <span class="hljs-keyword">case</span> MARCH: 
 <span class="hljs-number">332</span>             <span class="hljs-keyword">case</span> APRIL: 
 <span class="hljs-number">333</span>             <span class="hljs-keyword">case</span> MAY: 
 <span class="hljs-number">334</span>             <span class="hljs-keyword">case</span> JUNE: 
 <span class="hljs-number">335</span>             <span class="hljs-keyword">case</span> JULY: 
 <span class="hljs-number">336</span>             <span class="hljs-keyword">case</span> AUGUST: 
 <span class="hljs-number">337</span>             <span class="hljs-keyword">case</span> SEPTEMBER: 
 <span class="hljs-number">338</span>             <span class="hljs-keyword">case</span> OCTOBER: 
 <span class="hljs-number">339</span>             <span class="hljs-keyword">case</span> NOVEMBER: 
 <span class="hljs-number">340</span>             <span class="hljs-keyword">case</span> DECEMBER: 
 <span class="hljs-number">341</span>                 <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
 <span class="hljs-number">342</span>             <span class="hljs-keyword">default</span>: 
 <span class="hljs-number">343</span>                 <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
 <span class="hljs-number">344</span>         }
 <span class="hljs-number">345</span> 
 <span class="hljs-number">346</span>     }
 <span class="hljs-number">347</span> 
 <span class="hljs-number">348</span>     <span class="hljs-comment">/**
 349      * Returns the quarter for the specified month.
 350      *
Appendix B: org.jfree.date.SerialDate
 355
 Listing B-1 (continued)
 SerialDate.Java
 351      * <span class="hljs-doctag">@param</span> code  the month code (1-12).
 352      *
 353      * <span class="hljs-doctag">@return</span> the quarter that the month belongs to.
 354      * <span class="hljs-doctag">@throws</span> java.lang.IllegalArgumentException
 355      */</span>
 <span class="hljs-number">356</span>     <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-title function_">monthCodeToQuarter</span><span class="hljs-params">(<span class="hljs-keyword">final</span> <span class="hljs-type">int</span> code)</span> {
 <span class="hljs-number">357</span> 
 <span class="hljs-number">358</span>         <span class="hljs-keyword">switch</span>(code) {
 <span class="hljs-number">359</span>             <span class="hljs-keyword">case</span> JANUARY: 
 <span class="hljs-number">360</span>             <span class="hljs-keyword">case</span> FEBRUARY: 
 <span class="hljs-number">361</span>             <span class="hljs-keyword">case</span> MARCH: <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;
 <span class="hljs-number">362</span>             <span class="hljs-keyword">case</span> APRIL: 
 <span class="hljs-number">363</span>             <span class="hljs-keyword">case</span> MAY: 
 <span class="hljs-number">364</span>             <span class="hljs-keyword">case</span> JUNE: <span class="hljs-keyword">return</span> <span class="hljs-number">2</span>;
 <span class="hljs-number">365</span>             <span class="hljs-keyword">case</span> JULY: 
 <span class="hljs-number">366</span>             <span class="hljs-keyword">case</span> AUGUST: 
 <span class="hljs-number">367</span>             <span class="hljs-keyword">case</span> SEPTEMBER: <span class="hljs-keyword">return</span> <span class="hljs-number">3</span>;
 <span class="hljs-number">368</span>             <span class="hljs-keyword">case</span> OCTOBER: 
 <span class="hljs-number">369</span>             <span class="hljs-keyword">case</span> NOVEMBER: 
 <span class="hljs-number">370</span>             <span class="hljs-keyword">case</span> DECEMBER: <span class="hljs-keyword">return</span> <span class="hljs-number">4</span>;
 <span class="hljs-number">371</span>             <span class="hljs-keyword">default</span>: <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(
 <span class="hljs-number">372</span>                 <span class="hljs-string">&quot;SerialDate.monthCodeToQuarter: invalid month code.&quot;</span>);
 <span class="hljs-number">373</span>         }
 <span class="hljs-number">374</span> 
 <span class="hljs-number">375</span>     }
 <span class="hljs-number">376</span> 
 <span class="hljs-number">377</span>     <span class="hljs-comment">/**
 378      * Returns a string representing the supplied month.
 379      * &lt;P&gt;
 380      * The string returned is the long form of the month name taken from the 
 381      * default locale.
 382      *
 383      * <span class="hljs-doctag">@param</span> month  the month.
 384      *
 385      * <span class="hljs-doctag">@return</span> a string representing the supplied month.
 386      */</span>
 <span class="hljs-number">387</span>     <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title function_">monthCodeToString</span><span class="hljs-params">(<span class="hljs-keyword">final</span> <span class="hljs-type">int</span> month)</span> {
 <span class="hljs-number">388</span> 
 <span class="hljs-number">389</span>         <span class="hljs-keyword">return</span> monthCodeToString(month, <span class="hljs-literal">false</span>);
 <span class="hljs-number">390</span> 
 <span class="hljs-number">391</span>     }
 <span class="hljs-number">392</span> 
 <span class="hljs-number">393</span>     <span class="hljs-comment">/**
 394      * Returns a string representing the supplied month.
 395      * &lt;P&gt;
 396      * The string returned is the long or short form of the month name taken 
 397      * from the default locale.
 398      *
 399      * <span class="hljs-doctag">@param</span> month  the month.
 400      * <span class="hljs-doctag">@param</span> shortened  if &lt;code&gt;true&lt;/code&gt; return the abbreviation of the 
 401      *                   month.
 402      *
 403      * <span class="hljs-doctag">@return</span> a string representing the supplied month.
 404      * <span class="hljs-doctag">@throws</span> java.lang.IllegalArgumentException
 405      */</span>
 <span class="hljs-number">406</span>     <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title function_">monthCodeToString</span><span class="hljs-params">(<span class="hljs-keyword">final</span> <span class="hljs-type">int</span> month, 
 <span class="hljs-number">407</span>                                            <span class="hljs-keyword">final</span> <span class="hljs-type">boolean</span> shortened)</span> {
 <span class="hljs-number">408</span> 
 <span class="hljs-number">409</span>         <span class="hljs-comment">// check arguments...</span>
 <span class="hljs-number">410</span>         <span class="hljs-keyword">if</span> (!isValidMonthCode(month)) {
 <span class="hljs-number">411</span>             <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(
 <span class="hljs-number">412</span>                 <span class="hljs-string">&quot;SerialDate.monthCodeToString: month outside valid range.&quot;</span>);
<span class="hljs-number">356</span>
 Appendix B: org.jfree.date.SerialDate
 Listing B-<span class="hljs-number">1</span> (continued)
 SerialDate.Java
 <span class="hljs-number">413</span>         }
 <span class="hljs-number">414</span> 
 <span class="hljs-number">415</span>         <span class="hljs-keyword">final</span> String[] months;
 <span class="hljs-number">416</span> 
 <span class="hljs-number">417</span>         <span class="hljs-keyword">if</span> (shortened) {
 <span class="hljs-number">418</span>             months = DATE_FORMAT_SYMBOLS.getShortMonths();
 <span class="hljs-number">419</span>         }
 <span class="hljs-number">420</span>         <span class="hljs-keyword">else</span> {
 <span class="hljs-number">421</span>             months = DATE_FORMAT_SYMBOLS.getMonths();
 <span class="hljs-number">422</span>         }
 <span class="hljs-number">423</span> 
 <span class="hljs-number">424</span>         <span class="hljs-keyword">return</span> months[month - <span class="hljs-number">1</span>];
 <span class="hljs-number">425</span> 
 <span class="hljs-number">426</span>     }
 <span class="hljs-number">427</span> 
 <span class="hljs-number">428</span>     <span class="hljs-comment">/**
 429      * Converts a string to a month code.
 430      * &lt;P&gt;
 431      * This method will return one of the constants JANUARY, FEBRUARY, ..., 
 432      * DECEMBER that corresponds to the string.  If the string is not 
 433      * recognised, this method returns -1.
 434      *
 435      * <span class="hljs-doctag">@param</span> s  the string to parse.
 436      *
 437      * <span class="hljs-doctag">@return</span> &lt;code&gt;-1&lt;/code&gt; if the string is not parseable, the month of the
 438      *         year otherwise.
 439      */</span>
 <span class="hljs-number">440</span>     <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-title function_">stringToMonthCode</span><span class="hljs-params">(String s)</span> {
 <span class="hljs-number">441</span> 
 <span class="hljs-number">442</span>         <span class="hljs-keyword">final</span> String[] shortMonthNames = DATE_FORMAT_SYMBOLS.getShortMonths();
 <span class="hljs-number">443</span>         <span class="hljs-keyword">final</span> String[] monthNames = DATE_FORMAT_SYMBOLS.getMonths();
 <span class="hljs-number">444</span> 
 <span class="hljs-number">445</span>         <span class="hljs-type">int</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> -<span class="hljs-number">1</span>;
 <span class="hljs-number">446</span>         s = s.trim();
 <span class="hljs-number">447</span> 
 <span class="hljs-number">448</span>         <span class="hljs-comment">// first try parsing the string as an integer (1-12)...</span>
 <span class="hljs-number">449</span>         <span class="hljs-keyword">try</span> {
 <span class="hljs-number">450</span>             result = Integer.parseInt(s);
 <span class="hljs-number">451</span>         }
 <span class="hljs-number">452</span>         <span class="hljs-keyword">catch</span> (NumberFormatException e) {
 <span class="hljs-number">453</span>             <span class="hljs-comment">// suppress</span>
 <span class="hljs-number">454</span>         }
 <span class="hljs-number">455</span> 
 <span class="hljs-number">456</span>         <span class="hljs-comment">// now search through the month names...</span>
 <span class="hljs-number">457</span>         <span class="hljs-keyword">if</span> ((result &lt; <span class="hljs-number">1</span>) || (result &gt; <span class="hljs-number">12</span>)) {
 <span class="hljs-number">458</span>             <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; monthNames.length; i++) {
 <span class="hljs-number">459</span>                 <span class="hljs-keyword">if</span> (s.equals(shortMonthNames[i])) {
 <span class="hljs-number">460</span>                     result = i + <span class="hljs-number">1</span>;
 <span class="hljs-number">461</span>                     <span class="hljs-keyword">break</span>;
 <span class="hljs-number">462</span>                 }
 <span class="hljs-number">463</span>                 <span class="hljs-keyword">if</span> (s.equals(monthNames[i])) {
 <span class="hljs-number">464</span>                     result = i + <span class="hljs-number">1</span>;
 <span class="hljs-number">465</span>                     <span class="hljs-keyword">break</span>;
 <span class="hljs-number">466</span>                 }
 <span class="hljs-number">467</span>             }
 <span class="hljs-number">468</span>         }
 <span class="hljs-number">469</span> 
 <span class="hljs-number">470</span>         <span class="hljs-keyword">return</span> result;
 <span class="hljs-number">471</span> 
 <span class="hljs-number">472</span>     }
 <span class="hljs-number">473</span> 
 <span class="hljs-number">474</span>     <span class="hljs-comment">/**
Appendix B: org.jfree.date.SerialDate
 357
 Listing B-1 (continued)
 SerialDate.Java
 475      * Returns true if the supplied integer code represents a valid 
 476      * week-in-the-month, and false otherwise.
 477      *
 478      * <span class="hljs-doctag">@param</span> code  the code being checked for validity.
 479      * <span class="hljs-doctag">@return</span> &lt;code&gt;true&lt;/code&gt; if the supplied integer code represents a 
 480      *         valid week-in-the-month.
 481      */</span>
 <span class="hljs-number">482</span>     <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isValidWeekInMonthCode</span><span class="hljs-params">(<span class="hljs-keyword">final</span> <span class="hljs-type">int</span> code)</span> {
 <span class="hljs-number">483</span> 
 <span class="hljs-number">484</span>         <span class="hljs-keyword">switch</span>(code) {
 <span class="hljs-number">485</span>             <span class="hljs-keyword">case</span> FIRST_WEEK_IN_MONTH: 
 <span class="hljs-number">486</span>             <span class="hljs-keyword">case</span> SECOND_WEEK_IN_MONTH: 
 <span class="hljs-number">487</span>             <span class="hljs-keyword">case</span> THIRD_WEEK_IN_MONTH: 
 <span class="hljs-number">488</span>             <span class="hljs-keyword">case</span> FOURTH_WEEK_IN_MONTH: 
 <span class="hljs-number">489</span>             <span class="hljs-keyword">case</span> LAST_WEEK_IN_MONTH: <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
 <span class="hljs-number">490</span>             <span class="hljs-keyword">default</span>: <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
 <span class="hljs-number">491</span>         }
 <span class="hljs-number">492</span> 
 <span class="hljs-number">493</span>     }
 <span class="hljs-number">494</span> 
 <span class="hljs-number">495</span>     <span class="hljs-comment">/**
 496      * Determines whether or not the specified year is a leap year.
 497      *
 498      * <span class="hljs-doctag">@param</span> yyyy  the year (in the range 1900 to 9999).
 499      *
 500      * <span class="hljs-doctag">@return</span> &lt;code&gt;true&lt;/code&gt; if the specified year is a leap year.
 501      */</span>
 <span class="hljs-number">502</span>     <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isLeapYear</span><span class="hljs-params">(<span class="hljs-keyword">final</span> <span class="hljs-type">int</span> yyyy)</span> {
 <span class="hljs-number">503</span> 
 <span class="hljs-number">504</span>         <span class="hljs-keyword">if</span> ((yyyy % <span class="hljs-number">4</span>) != <span class="hljs-number">0</span>) {
 <span class="hljs-number">505</span>             <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
 <span class="hljs-number">506</span>         }
 <span class="hljs-number">507</span>         <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ((yyyy % <span class="hljs-number">400</span>) == <span class="hljs-number">0</span>) {
 <span class="hljs-number">508</span>             <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
 <span class="hljs-number">509</span>         }
 <span class="hljs-number">510</span>         <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ((yyyy % <span class="hljs-number">100</span>) == <span class="hljs-number">0</span>) {
 <span class="hljs-number">511</span>             <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
 <span class="hljs-number">512</span>         }
 <span class="hljs-number">513</span>         <span class="hljs-keyword">else</span> {
 <span class="hljs-number">514</span>             <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
 <span class="hljs-number">515</span>         }
 <span class="hljs-number">516</span> 
 <span class="hljs-number">517</span>     }
 <span class="hljs-number">518</span> 
 <span class="hljs-number">519</span>     <span class="hljs-comment">/**
 520      * Returns the number of leap years from 1900 to the specified year 
 521      * INCLUSIVE.
 522      * &lt;P&gt;
 523      * Note that 1900 is not a leap year.
 524      *
 525      * <span class="hljs-doctag">@param</span> yyyy  the year (in the range 1900 to 9999).
 526      *
 527      * <span class="hljs-doctag">@return</span> the number of leap years from 1900 to the specified year.
 528      */</span>
 <span class="hljs-number">529</span>     <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-title function_">leapYearCount</span><span class="hljs-params">(<span class="hljs-keyword">final</span> <span class="hljs-type">int</span> yyyy)</span> {
 <span class="hljs-number">530</span> 
 <span class="hljs-number">531</span>         <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">leap4</span> <span class="hljs-operator">=</span> (yyyy - <span class="hljs-number">1896</span>) / <span class="hljs-number">4</span>;
 <span class="hljs-number">532</span>         <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">leap100</span> <span class="hljs-operator">=</span> (yyyy - <span class="hljs-number">1800</span>) / <span class="hljs-number">100</span>;
 <span class="hljs-number">533</span>         <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">leap400</span> <span class="hljs-operator">=</span> (yyyy - <span class="hljs-number">1600</span>) / <span class="hljs-number">400</span>;
 <span class="hljs-number">534</span>         <span class="hljs-keyword">return</span> leap4 - leap100 + leap400;
 <span class="hljs-number">535</span> 
 <span class="hljs-number">536</span>     }
<span class="hljs-number">358</span>
 Appendix B: org.jfree.date.SerialDate
 Listing B-<span class="hljs-number">1</span> (continued)
 SerialDate.Java
 <span class="hljs-number">537</span> 
 <span class="hljs-number">538</span>     <span class="hljs-comment">/**
 539      * Returns the number of the last day of the month, taking into account 
 540      * leap years.
 541      *
 542      * <span class="hljs-doctag">@param</span> month  the month.
 543      * <span class="hljs-doctag">@param</span> yyyy  the year (in the range 1900 to 9999).
 544      *
 545      * <span class="hljs-doctag">@return</span> the number of the last day of the month.
 546      */</span>
 <span class="hljs-number">547</span>     <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-title function_">lastDayOfMonth</span><span class="hljs-params">(<span class="hljs-keyword">final</span> <span class="hljs-type">int</span> month, <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> yyyy)</span> {
 <span class="hljs-number">548</span> 
 <span class="hljs-number">549</span>         <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> LAST_DAY_OF_MONTH[month];
 <span class="hljs-number">550</span>         <span class="hljs-keyword">if</span> (month != FEBRUARY) {
 <span class="hljs-number">551</span>             <span class="hljs-keyword">return</span> result;
 <span class="hljs-number">552</span>         }
 <span class="hljs-number">553</span>         <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (isLeapYear(yyyy)) {
 <span class="hljs-number">554</span>             <span class="hljs-keyword">return</span> result + <span class="hljs-number">1</span>;
 <span class="hljs-number">555</span>         }
 <span class="hljs-number">556</span>         <span class="hljs-keyword">else</span> {
 <span class="hljs-number">557</span>             <span class="hljs-keyword">return</span> result;
 <span class="hljs-number">558</span>         }
 <span class="hljs-number">559</span> 
 <span class="hljs-number">560</span>     }
 <span class="hljs-number">561</span> 
 <span class="hljs-number">562</span>     <span class="hljs-comment">/**
 563      * Creates a new date by adding the specified number of days to the base 
 564      * date.
 565      *
 566      * <span class="hljs-doctag">@param</span> days  the number of days to add (can be negative).
 567      * <span class="hljs-doctag">@param</span> base  the base date.
 568      *
 569      * <span class="hljs-doctag">@return</span> a new date.
 570      */</span>
 <span class="hljs-number">571</span>     <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> SerialDate <span class="hljs-title function_">addDays</span><span class="hljs-params">(<span class="hljs-keyword">final</span> <span class="hljs-type">int</span> days, <span class="hljs-keyword">final</span> SerialDate base)</span> {
 <span class="hljs-number">572</span> 
 <span class="hljs-number">573</span>         <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">serialDayNumber</span> <span class="hljs-operator">=</span> base.toSerial() + days;
 <span class="hljs-number">574</span>         <span class="hljs-keyword">return</span> SerialDate.createInstance(serialDayNumber);
 <span class="hljs-number">575</span> 
 <span class="hljs-number">576</span>     }
 <span class="hljs-number">577</span> 
 <span class="hljs-number">578</span>     <span class="hljs-comment">/**
 579      * Creates a new date by adding the specified number of months to the base 
 580      * date.
 581      * &lt;P&gt;
 582      * If the base date is close to the end of the month, the day on the result
 583      * may be adjusted slightly:  31 May + 1 month = 30 June.
 584      *
 585      * <span class="hljs-doctag">@param</span> months  the number of months to add (can be negative).
 586      * <span class="hljs-doctag">@param</span> base  the base date.
 587      *
 588      * <span class="hljs-doctag">@return</span> a new date.
 589      */</span>
 <span class="hljs-number">590</span>     <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> SerialDate <span class="hljs-title function_">addMonths</span><span class="hljs-params">(<span class="hljs-keyword">final</span> <span class="hljs-type">int</span> months, 
 <span class="hljs-number">591</span>                                        <span class="hljs-keyword">final</span> SerialDate base)</span> {
 <span class="hljs-number">592</span> 
 <span class="hljs-number">593</span>         <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">yy</span> <span class="hljs-operator">=</span> (<span class="hljs-number">12</span> * base.getYYYY() + base.getMonth() + months - <span class="hljs-number">1</span>) 
 <span class="hljs-number">594</span>                        / <span class="hljs-number">12</span>;
 <span class="hljs-number">595</span>         <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">mm</span> <span class="hljs-operator">=</span> (<span class="hljs-number">12</span> * base.getYYYY() + base.getMonth() + months - <span class="hljs-number">1</span>) 
 <span class="hljs-number">596</span>                        % <span class="hljs-number">12</span> + <span class="hljs-number">1</span>;
 <span class="hljs-number">597</span>         <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">dd</span> <span class="hljs-operator">=</span> Math.min(
 <span class="hljs-number">598</span>             base.getDayOfMonth(), SerialDate.lastDayOfMonth(mm, yy)
Appendix B: org.jfree.date.SerialDate
 <span class="hljs-number">359</span>
 Listing B-<span class="hljs-number">1</span> (continued)
 SerialDate.Java
 <span class="hljs-number">599</span>         );
 <span class="hljs-number">600</span>         <span class="hljs-keyword">return</span> SerialDate.createInstance(dd, mm, yy);
 <span class="hljs-number">601</span> 
 <span class="hljs-number">602</span>     }
 <span class="hljs-number">603</span> 
 <span class="hljs-number">604</span>     <span class="hljs-comment">/**
 605      * Creates a new date by adding the specified number of years to the base 
 606      * date.
 607      *
 608      * <span class="hljs-doctag">@param</span> years  the number of years to add (can be negative).
 609      * <span class="hljs-doctag">@param</span> base  the base date.
 610      *
 611      * <span class="hljs-doctag">@return</span> A new date.
 612      */</span>
 <span class="hljs-number">613</span>     <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> SerialDate <span class="hljs-title function_">addYears</span><span class="hljs-params">(<span class="hljs-keyword">final</span> <span class="hljs-type">int</span> years, <span class="hljs-keyword">final</span> SerialDate base)</span> {
 <span class="hljs-number">614</span> 
 <span class="hljs-number">615</span>         <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">baseY</span> <span class="hljs-operator">=</span> base.getYYYY();
 <span class="hljs-number">616</span>         <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">baseM</span> <span class="hljs-operator">=</span> base.getMonth();
 <span class="hljs-number">617</span>         <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">baseD</span> <span class="hljs-operator">=</span> base.getDayOfMonth();
 <span class="hljs-number">618</span> 
 <span class="hljs-number">619</span>         <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">targetY</span> <span class="hljs-operator">=</span> baseY + years;
 <span class="hljs-number">620</span>         <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">targetD</span> <span class="hljs-operator">=</span> Math.min(
 <span class="hljs-number">621</span>             baseD, SerialDate.lastDayOfMonth(baseM, targetY)
 <span class="hljs-number">622</span>         );
 <span class="hljs-number">623</span> 
 <span class="hljs-number">624</span>         <span class="hljs-keyword">return</span> SerialDate.createInstance(targetD, baseM, targetY);
 <span class="hljs-number">625</span> 
 <span class="hljs-number">626</span>     }
 <span class="hljs-number">627</span> 
 <span class="hljs-number">628</span>     <span class="hljs-comment">/**
 629      * Returns the latest date that falls on the specified day-of-the-week and 
 630      * is BEFORE the base date.
 631      *
 632      * <span class="hljs-doctag">@param</span> targetWeekday  a code for the target day-of-the-week.
 633      * <span class="hljs-doctag">@param</span> base  the base date.
 634      *
 635      * <span class="hljs-doctag">@return</span> the latest date that falls on the specified day-of-the-week and 
 636      *         is BEFORE the base date.
 637      */</span>
 <span class="hljs-number">638</span>     <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> SerialDate <span class="hljs-title function_">getPreviousDayOfWeek</span><span class="hljs-params">(<span class="hljs-keyword">final</span> <span class="hljs-type">int</span> targetWeekday, 
 <span class="hljs-number">639</span>                                                   <span class="hljs-keyword">final</span> SerialDate base)</span> {
 <span class="hljs-number">640</span> 
 <span class="hljs-number">641</span>         <span class="hljs-comment">// check arguments...</span>
 <span class="hljs-number">642</span>         <span class="hljs-keyword">if</span> (!SerialDate.isValidWeekdayCode(targetWeekday)) {
 <span class="hljs-number">643</span>             <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(
 <span class="hljs-number">644</span>                 <span class="hljs-string">&quot;Invalid day-of-the-week code.&quot;</span>
 <span class="hljs-number">645</span>             );
 <span class="hljs-number">646</span>         }
 <span class="hljs-number">647</span> 
 <span class="hljs-number">648</span>         <span class="hljs-comment">// find the date...</span>
 <span class="hljs-number">649</span>         <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> adjust;
 <span class="hljs-number">650</span>         <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">baseDOW</span> <span class="hljs-operator">=</span> base.getDayOfWeek();
 <span class="hljs-number">651</span>         <span class="hljs-keyword">if</span> (baseDOW &gt; targetWeekday) {
 <span class="hljs-number">652</span>             adjust = Math.min(<span class="hljs-number">0</span>, targetWeekday - baseDOW);
 <span class="hljs-number">653</span>         }
 <span class="hljs-number">654</span>         <span class="hljs-keyword">else</span> {
 <span class="hljs-number">655</span>             adjust = -<span class="hljs-number">7</span> + Math.max(<span class="hljs-number">0</span>, targetWeekday - baseDOW);
 <span class="hljs-number">656</span>         }
 <span class="hljs-number">657</span> 
 <span class="hljs-number">658</span>         <span class="hljs-keyword">return</span> SerialDate.addDays(adjust, base);
 <span class="hljs-number">659</span> 
 <span class="hljs-number">660</span>     }
<span class="hljs-number">360</span>
 Appendix B: org.jfree.date.SerialDate
 Listing B-<span class="hljs-number">1</span> (continued)
 SerialDate.Java
 <span class="hljs-number">661</span> 
 <span class="hljs-number">662</span>     <span class="hljs-comment">/**
 663      * Returns the earliest date that falls on the specified day-of-the-week
 664      * and is AFTER the base date.
 665      *
 666      * <span class="hljs-doctag">@param</span> targetWeekday  a code for the target day-of-the-week.
 667      * <span class="hljs-doctag">@param</span> base  the base date.
 668      *
 669      * <span class="hljs-doctag">@return</span> the earliest date that falls on the specified day-of-the-week 
 670      *         and is AFTER the base date.
 671      */</span>
 <span class="hljs-number">672</span>     <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> SerialDate <span class="hljs-title function_">getFollowingDayOfWeek</span><span class="hljs-params">(<span class="hljs-keyword">final</span> <span class="hljs-type">int</span> targetWeekday, 
 <span class="hljs-number">673</span>                                                    <span class="hljs-keyword">final</span> SerialDate base)</span> {
 <span class="hljs-number">674</span> 
 <span class="hljs-number">675</span>         <span class="hljs-comment">// check arguments...</span>
 <span class="hljs-number">676</span>         <span class="hljs-keyword">if</span> (!SerialDate.isValidWeekdayCode(targetWeekday)) {
 <span class="hljs-number">677</span>             <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(
 <span class="hljs-number">678</span>                 <span class="hljs-string">&quot;Invalid day-of-the-week code.&quot;</span>
 <span class="hljs-number">679</span>             );
 <span class="hljs-number">680</span>         }
 <span class="hljs-number">681</span> 
 <span class="hljs-number">682</span>         <span class="hljs-comment">// find the date...</span>
 <span class="hljs-number">683</span>         <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> adjust;
 <span class="hljs-number">684</span>         <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">baseDOW</span> <span class="hljs-operator">=</span> base.getDayOfWeek();
 <span class="hljs-number">685</span>         <span class="hljs-keyword">if</span> (baseDOW &gt; targetWeekday) {
 <span class="hljs-number">686</span>             adjust = <span class="hljs-number">7</span> + Math.min(<span class="hljs-number">0</span>, targetWeekday - baseDOW);
 <span class="hljs-number">687</span>         }
 <span class="hljs-number">688</span>         <span class="hljs-keyword">else</span> {
 <span class="hljs-number">689</span>             adjust = Math.max(<span class="hljs-number">0</span>, targetWeekday - baseDOW);
 <span class="hljs-number">690</span>         }
 <span class="hljs-number">691</span> 
 <span class="hljs-number">692</span>         <span class="hljs-keyword">return</span> SerialDate.addDays(adjust, base);
 <span class="hljs-number">693</span>     }
 <span class="hljs-number">694</span> 
 <span class="hljs-number">695</span>     <span class="hljs-comment">/**
 696      * Returns the date that falls on the specified day-of-the-week and is
 697      * CLOSEST to the base date.
 698      *
 699      * <span class="hljs-doctag">@param</span> targetDOW  a code for the target day-of-the-week.
 700      * <span class="hljs-doctag">@param</span> base  the base date.
 701      *
 702      * <span class="hljs-doctag">@return</span> the date that falls on the specified day-of-the-week and is 
 703      *         CLOSEST to the base date.
 704      */</span>
 <span class="hljs-number">705</span>     <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> SerialDate <span class="hljs-title function_">getNearestDayOfWeek</span><span class="hljs-params">(<span class="hljs-keyword">final</span> <span class="hljs-type">int</span> targetDOW,
 <span class="hljs-number">706</span>                                                  <span class="hljs-keyword">final</span> SerialDate base)</span> {
 <span class="hljs-number">707</span> 
 <span class="hljs-number">708</span>         <span class="hljs-comment">// check arguments...</span>
 <span class="hljs-number">709</span>         <span class="hljs-keyword">if</span> (!SerialDate.isValidWeekdayCode(targetDOW)) {
 <span class="hljs-number">710</span>             <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(
 <span class="hljs-number">711</span>                 <span class="hljs-string">&quot;Invalid day-of-the-week code.&quot;</span>
 <span class="hljs-number">712</span>             );
 <span class="hljs-number">713</span>         }
 <span class="hljs-number">714</span> 
 <span class="hljs-number">715</span>         <span class="hljs-comment">// find the date...</span>
 <span class="hljs-number">716</span>         <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">baseDOW</span> <span class="hljs-operator">=</span> base.getDayOfWeek();
 <span class="hljs-number">717</span>         <span class="hljs-type">int</span> <span class="hljs-variable">adjust</span> <span class="hljs-operator">=</span> -Math.abs(targetDOW - baseDOW);
 <span class="hljs-number">718</span>         <span class="hljs-keyword">if</span> (adjust &gt;= <span class="hljs-number">4</span>) {
 <span class="hljs-number">719</span>             adjust = <span class="hljs-number">7</span> - adjust;
 <span class="hljs-number">720</span>         }
 <span class="hljs-number">721</span>         <span class="hljs-keyword">if</span> (adjust &lt;= -<span class="hljs-number">4</span>) {
 <span class="hljs-number">722</span>             adjust = <span class="hljs-number">7</span> + adjust;
Appendix B: org.jfree.date.SerialDate
 <span class="hljs-number">361</span>
 Listing B-<span class="hljs-number">1</span> (continued)
 SerialDate.Java
 <span class="hljs-number">723</span>         }
 <span class="hljs-number">724</span>         <span class="hljs-keyword">return</span> SerialDate.addDays(adjust, base);
 <span class="hljs-number">725</span> 
 <span class="hljs-number">726</span>     }
 <span class="hljs-number">727</span> 
 <span class="hljs-number">728</span>     <span class="hljs-comment">/**
 729      * Rolls the date forward to the last day of the month.
 730      *
 731      * <span class="hljs-doctag">@param</span> base  the base date.
 732      *
 733      * <span class="hljs-doctag">@return</span> a new serial date.
 734      */</span>
 <span class="hljs-number">735</span>     <span class="hljs-keyword">public</span> SerialDate <span class="hljs-title function_">getEndOfCurrentMonth</span><span class="hljs-params">(<span class="hljs-keyword">final</span> SerialDate base)</span> {
 <span class="hljs-number">736</span>         <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">last</span> <span class="hljs-operator">=</span> SerialDate.lastDayOfMonth(
 <span class="hljs-number">737</span>             base.getMonth(), base.getYYYY()
 <span class="hljs-number">738</span>         );
 <span class="hljs-number">739</span>         <span class="hljs-keyword">return</span> SerialDate.createInstance(last, base.getMonth(), base.getYYYY());
 <span class="hljs-number">740</span>     }
 <span class="hljs-number">741</span> 
 <span class="hljs-number">742</span>     <span class="hljs-comment">/**
 743      * Returns a string corresponding to the week-in-the-month code.
 744      * &lt;P&gt;
 745      * Need to find a better approach.
 746      *
 747      * <span class="hljs-doctag">@param</span> count  an integer code representing the week-in-the-month.
 748      *
 749      * <span class="hljs-doctag">@return</span> a string corresponding to the week-in-the-month code.
 750      */</span>
 <span class="hljs-number">751</span>     <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title function_">weekInMonthToString</span><span class="hljs-params">(<span class="hljs-keyword">final</span> <span class="hljs-type">int</span> count)</span> {
 <span class="hljs-number">752</span> 
 <span class="hljs-number">753</span>         <span class="hljs-keyword">switch</span> (count) {
 <span class="hljs-number">754</span>             <span class="hljs-keyword">case</span> SerialDate.FIRST_WEEK_IN_MONTH : <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;First&quot;</span>;
 <span class="hljs-number">755</span>             <span class="hljs-keyword">case</span> SerialDate.SECOND_WEEK_IN_MONTH : <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;Second&quot;</span>;
 <span class="hljs-number">756</span>             <span class="hljs-keyword">case</span> SerialDate.THIRD_WEEK_IN_MONTH : <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;Third&quot;</span>;
 <span class="hljs-number">757</span>             <span class="hljs-keyword">case</span> SerialDate.FOURTH_WEEK_IN_MONTH : <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;Fourth&quot;</span>;
 <span class="hljs-number">758</span>             <span class="hljs-keyword">case</span> SerialDate.LAST_WEEK_IN_MONTH : <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;Last&quot;</span>;
 <span class="hljs-number">759</span>             <span class="hljs-keyword">default</span> :
 <span class="hljs-number">760</span>                 <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;SerialDate.weekInMonthToString(): invalid code.&quot;</span>;
 <span class="hljs-number">761</span>         }
 <span class="hljs-number">762</span> 
 <span class="hljs-number">763</span>     }
 <span class="hljs-number">764</span> 
 <span class="hljs-number">765</span>     <span class="hljs-comment">/**
 766      * Returns a string representing the supplied &#x27;relative&#x27;.
 767      * &lt;P&gt;
 768      * Need to find a better approach.
 769      *
 770      * <span class="hljs-doctag">@param</span> relative  a constant representing the &#x27;relative&#x27;.
 771      *
 772      * <span class="hljs-doctag">@return</span> a string representing the supplied &#x27;relative&#x27;.
 773      */</span>
 <span class="hljs-number">774</span>     <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title function_">relativeToString</span><span class="hljs-params">(<span class="hljs-keyword">final</span> <span class="hljs-type">int</span> relative)</span> {
 <span class="hljs-number">775</span> 
 <span class="hljs-number">776</span>         <span class="hljs-keyword">switch</span> (relative) {
 <span class="hljs-number">777</span>             <span class="hljs-keyword">case</span> SerialDate.PRECEDING : <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;Preceding&quot;</span>;
 <span class="hljs-number">778</span>             <span class="hljs-keyword">case</span> SerialDate.NEAREST : <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;Nearest&quot;</span>;
 <span class="hljs-number">779</span>             <span class="hljs-keyword">case</span> SerialDate.FOLLOWING : <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;Following&quot;</span>;
 <span class="hljs-number">780</span>             <span class="hljs-keyword">default</span> : <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;ERROR : Relative To String&quot;</span>;
 <span class="hljs-number">781</span>         }
 <span class="hljs-number">782</span> 
 <span class="hljs-number">783</span>     }
 <span class="hljs-number">784</span> 
<span class="hljs-number">362</span>
 Appendix B: org.jfree.date.SerialDate
 Listing B-<span class="hljs-number">1</span> (continued)
 SerialDate.Java
 <span class="hljs-number">785</span>     <span class="hljs-comment">/**
 786      * Factory method that returns an instance of some concrete subclass of 
 787      * {<span class="hljs-doctag">@link</span> SerialDate}.
 788      *
 789      * <span class="hljs-doctag">@param</span> day  the day (1-31).
 790      * <span class="hljs-doctag">@param</span> month  the month (1-12).
 791      * <span class="hljs-doctag">@param</span> yyyy  the year (in the range 1900 to 9999).
 792      *
 793      * <span class="hljs-doctag">@return</span> An instance of {<span class="hljs-doctag">@link</span> SerialDate}.
 794      */</span>
 <span class="hljs-number">795</span>     <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> SerialDate <span class="hljs-title function_">createInstance</span><span class="hljs-params">(<span class="hljs-keyword">final</span> <span class="hljs-type">int</span> day, <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> month, 
 <span class="hljs-number">796</span>                                             <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> yyyy)</span> {
 <span class="hljs-number">797</span>         <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SpreadsheetDate</span>(day, month, yyyy);
 <span class="hljs-number">798</span>     }
 <span class="hljs-number">799</span> 
 <span class="hljs-number">800</span>     <span class="hljs-comment">/**
 801      * Factory method that returns an instance of some concrete subclass of 
 802      * {<span class="hljs-doctag">@link</span> SerialDate}.
 803      *
 804      * <span class="hljs-doctag">@param</span> serial  the serial number for the day (1 January 1900 = 2).
 805      *
 806      * <span class="hljs-doctag">@return</span> a instance of SerialDate.
 807      */</span>
 <span class="hljs-number">808</span>     <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> SerialDate <span class="hljs-title function_">createInstance</span><span class="hljs-params">(<span class="hljs-keyword">final</span> <span class="hljs-type">int</span> serial)</span> {
 <span class="hljs-number">809</span>         <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SpreadsheetDate</span>(serial);
 <span class="hljs-number">810</span>     }
 <span class="hljs-number">811</span> 
 <span class="hljs-number">812</span>     <span class="hljs-comment">/**
 813      * Factory method that returns an instance of a subclass of SerialDate.
 814      *
 815      * <span class="hljs-doctag">@param</span> date  A Java date object.
 816      *
 817      * <span class="hljs-doctag">@return</span> a instance of SerialDate.
 818      */</span>
 <span class="hljs-number">819</span>     <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> SerialDate <span class="hljs-title function_">createInstance</span><span class="hljs-params">(<span class="hljs-keyword">final</span> java.util.Date date)</span> {
 <span class="hljs-number">820</span> 
 <span class="hljs-number">821</span>         <span class="hljs-keyword">final</span> <span class="hljs-type">GregorianCalendar</span> <span class="hljs-variable">calendar</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">GregorianCalendar</span>();
 <span class="hljs-number">822</span>         calendar.setTime(date);
 <span class="hljs-number">823</span>         <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SpreadsheetDate</span>(calendar.get(Calendar.DATE),
 <span class="hljs-number">824</span>                                    calendar.get(Calendar.MONTH) + <span class="hljs-number">1</span>,
 <span class="hljs-number">825</span>                                    calendar.get(Calendar.YEAR));
 <span class="hljs-number">826</span> 
 <span class="hljs-number">827</span>     }
 <span class="hljs-number">828</span> 
 <span class="hljs-number">829</span>     <span class="hljs-comment">/**
 830      * Returns the serial number for the date, where 1 January 1900 = 2 (this
 831      * corresponds, almost, to the numbering system used in Microsoft Excel for
 832      * Windows and Lotus 1-2-3).
 833      *
 834      * <span class="hljs-doctag">@return</span> the serial number for the date.
 835      */</span>
 <span class="hljs-number">836</span>     <span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-type">int</span> <span class="hljs-title function_">toSerial</span><span class="hljs-params">()</span>;
 <span class="hljs-number">837</span> 
 <span class="hljs-number">838</span>     <span class="hljs-comment">/**
 839      * Returns a java.util.Date.  Since java.util.Date has more precision than
 840      * SerialDate, we need to define a convention for the &#x27;time of day&#x27;.
 841      *
 842      * <span class="hljs-doctag">@return</span> this as &lt;code&gt;java.util.Date&lt;/code&gt;.
 843      */</span>
 <span class="hljs-number">844</span>     <span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> java.util.Date <span class="hljs-title function_">toDate</span><span class="hljs-params">()</span>;
 <span class="hljs-number">845</span> 
 <span class="hljs-number">846</span>     <span class="hljs-comment">/**
Appendix B: org.jfree.date.SerialDate
 363
 Listing B-1 (continued)
 SerialDate.Java
 847      * Returns a description of the date.
 848      *
 849      * <span class="hljs-doctag">@return</span> a description of the date.
 850      */</span>
 <span class="hljs-number">851</span>     <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getDescription</span><span class="hljs-params">()</span> {
 <span class="hljs-number">852</span>         <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.description;
 <span class="hljs-number">853</span>     }
 <span class="hljs-number">854</span> 
 <span class="hljs-number">855</span>     <span class="hljs-comment">/**
 856      * Sets the description for the date.
 857      *
 858      * <span class="hljs-doctag">@param</span> description  the new description for the date.
 859      */</span>
 <span class="hljs-number">860</span>     <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setDescription</span><span class="hljs-params">(<span class="hljs-keyword">final</span> String description)</span> {
 <span class="hljs-number">861</span>         <span class="hljs-built_in">this</span>.description = description;
 <span class="hljs-number">862</span>     }
 <span class="hljs-number">863</span> 
 <span class="hljs-number">864</span>     <span class="hljs-comment">/**
 865      * Converts the date to a string.
 866      *
 867      * <span class="hljs-doctag">@return</span>  a string representation of the date.
 868      */</span>
 <span class="hljs-number">869</span>     <span class="hljs-keyword">public</span> String <span class="hljs-title function_">toString</span><span class="hljs-params">()</span> {
 <span class="hljs-number">870</span>         <span class="hljs-keyword">return</span> getDayOfMonth() + <span class="hljs-string">&quot;-&quot;</span> + SerialDate.monthCodeToString(getMonth())
 <span class="hljs-number">871</span>                                + <span class="hljs-string">&quot;-&quot;</span> + getYYYY();
 <span class="hljs-number">872</span>     }
 <span class="hljs-number">873</span> 
 <span class="hljs-number">874</span>     <span class="hljs-comment">/**
 875      * Returns the year (assume a valid range of 1900 to 9999).
 876      *
 877      * <span class="hljs-doctag">@return</span> the year.
 878      */</span>
 <span class="hljs-number">879</span>     <span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getYYYY</span><span class="hljs-params">()</span>;
 <span class="hljs-number">880</span> 
 <span class="hljs-number">881</span>     <span class="hljs-comment">/**
 882      * Returns the month (January = 1, February = 2, March = 3).
 883      *
 884      * <span class="hljs-doctag">@return</span> the month of the year.
 885      */</span>
 <span class="hljs-number">886</span>     <span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getMonth</span><span class="hljs-params">()</span>;
 <span class="hljs-number">887</span> 
 <span class="hljs-number">888</span>     <span class="hljs-comment">/**
 889      * Returns the day of the month.
 890      *
 891      * <span class="hljs-doctag">@return</span> the day of the month.
 892      */</span>
 <span class="hljs-number">893</span>     <span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getDayOfMonth</span><span class="hljs-params">()</span>;
 <span class="hljs-number">894</span> 
 <span class="hljs-number">895</span>     <span class="hljs-comment">/**
 896      * Returns the day of the week.
 897      *
 898      * <span class="hljs-doctag">@return</span> the day of the week.
 899      */</span>
 <span class="hljs-number">900</span>     <span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getDayOfWeek</span><span class="hljs-params">()</span>;
 <span class="hljs-number">901</span> 
 <span class="hljs-number">902</span>     <span class="hljs-comment">/**
 903      * Returns the difference (in days) between this date and the specified 
 904      * &#x27;other&#x27; date.
 905      * &lt;P&gt;
 906      * The result is positive if this date is after the &#x27;other&#x27; date and
 907      * negative if it is before the &#x27;other&#x27; date.
 908      *
364
 Appendix B: org.jfree.date.SerialDate
 Listing B-1 (continued)
 SerialDate.Java
 909      * <span class="hljs-doctag">@param</span> other  the date being compared to.
 910      *
 911      * <span class="hljs-doctag">@return</span> the difference between this and the other date.
 912      */</span>
 <span class="hljs-number">913</span>     <span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-type">int</span> <span class="hljs-title function_">compare</span><span class="hljs-params">(SerialDate other)</span>;
 <span class="hljs-number">914</span> 
 <span class="hljs-number">915</span>     <span class="hljs-comment">/**
 916      * Returns true if this SerialDate represents the same date as the 
 917      * specified SerialDate.
 918      *
 919      * <span class="hljs-doctag">@param</span> other  the date being compared to.
 920      *
 921      * <span class="hljs-doctag">@return</span> &lt;code&gt;true&lt;/code&gt; if this SerialDate represents the same date as 
 922      *         the specified SerialDate.
 923      */</span>
 <span class="hljs-number">924</span>     <span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isOn</span><span class="hljs-params">(SerialDate other)</span>;
 <span class="hljs-number">925</span> 
 <span class="hljs-number">926</span>     <span class="hljs-comment">/**
 927      * Returns true if this SerialDate represents an earlier date compared to
 928      * the specified SerialDate.
 929      *
 930      * <span class="hljs-doctag">@param</span> other  The date being compared to.
 931      *
 932      * <span class="hljs-doctag">@return</span> &lt;code&gt;true&lt;/code&gt; if this SerialDate represents an earlier date 
 933      *         compared to the specified SerialDate.
 934      */</span>
 <span class="hljs-number">935</span>     <span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isBefore</span><span class="hljs-params">(SerialDate other)</span>;
 <span class="hljs-number">936</span> 
 <span class="hljs-number">937</span>     <span class="hljs-comment">/**
 938      * Returns true if this SerialDate represents the same date as the 
 939      * specified SerialDate.
 940      *
 941      * <span class="hljs-doctag">@param</span> other  the date being compared to.
 942      *
 943      * <span class="hljs-doctag">@return</span> &lt;code&gt;true&lt;code&gt; if this SerialDate represents the same date
 944      *         as the specified SerialDate.
 945      */</span>
 <span class="hljs-number">946</span>     <span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isOnOrBefore</span><span class="hljs-params">(SerialDate other)</span>;
 <span class="hljs-number">947</span> 
 <span class="hljs-number">948</span>     <span class="hljs-comment">/**
 949      * Returns true if this SerialDate represents the same date as the 
 950      * specified SerialDate.
 951      *
 952      * <span class="hljs-doctag">@param</span> other  the date being compared to.
 953      *
 954      * <span class="hljs-doctag">@return</span> &lt;code&gt;true&lt;/code&gt; if this SerialDate represents the same date
 955      *         as the specified SerialDate.
 956      */</span>
 <span class="hljs-number">957</span>     <span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isAfter</span><span class="hljs-params">(SerialDate other)</span>;
 <span class="hljs-number">958</span> 
 <span class="hljs-number">959</span>     <span class="hljs-comment">/**
 960      * Returns true if this SerialDate represents the same date as the 
 961      * specified SerialDate.
 962      *
 963      * <span class="hljs-doctag">@param</span> other  the date being compared to.
 964      *
 965      * <span class="hljs-doctag">@return</span> &lt;code&gt;true&lt;/code&gt; if this SerialDate represents the same date
 966      *         as the specified SerialDate.
 967      */</span>
 <span class="hljs-number">968</span>     <span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isOnOrAfter</span><span class="hljs-params">(SerialDate other)</span>;
 <span class="hljs-number">969</span> 
 <span class="hljs-number">970</span>     <span class="hljs-comment">/**
 971      * Returns &lt;code&gt;true&lt;/code&gt; if this {<span class="hljs-doctag">@link</span> SerialDate} is within the 
Appendix B: org.jfree.date.SerialDate
 365
 Listing B-1 (continued)
 SerialDate.Java
 972      * specified range (INCLUSIVE).  The date order of d1 and d2 is not 
 973      * important.
 974      *
 975      * <span class="hljs-doctag">@param</span> d1  a boundary date for the range.
 976      * <span class="hljs-doctag">@param</span> d2  the other boundary date for the range.
 977      *
 978      * <span class="hljs-doctag">@return</span> A boolean.
 979      */</span>
 <span class="hljs-number">980</span>     <span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isInRange</span><span class="hljs-params">(SerialDate d1, SerialDate d2)</span>;
 <span class="hljs-number">981</span> 
 <span class="hljs-number">982</span>     <span class="hljs-comment">/**
 983      * Returns &lt;code&gt;true&lt;/code&gt; if this {<span class="hljs-doctag">@link</span> SerialDate} is within the 
 984      * specified range (caller specifies whether or not the end-points are 
 985      * included).  The date order of d1 and d2 is not important.
 986      *
 987      * <span class="hljs-doctag">@param</span> d1  a boundary date for the range.
 988      * <span class="hljs-doctag">@param</span> d2  the other boundary date for the range.
 989      * <span class="hljs-doctag">@param</span> include  a code that controls whether or not the start and end 
 990      *                 dates are included in the range.
 991      *
 992      * <span class="hljs-doctag">@return</span> A boolean.
 993      */</span>
 <span class="hljs-number">994</span>     <span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isInRange</span><span class="hljs-params">(SerialDate d1, SerialDate d2, 
 <span class="hljs-number">995</span>                                       <span class="hljs-type">int</span> include)</span>;
 <span class="hljs-number">996</span> 
 <span class="hljs-number">997</span>     <span class="hljs-comment">/**
 998      * Returns the latest date that falls on the specified day-of-the-week and
 999      * is BEFORE this date.
 1000      *
 1001      * <span class="hljs-doctag">@param</span> targetDOW  a code for the target day-of-the-week.
 1002      *
 1003      * <span class="hljs-doctag">@return</span> the latest date that falls on the specified day-of-the-week and
 1004      *         is BEFORE this date.
 1005      */</span>
 <span class="hljs-number">1006</span>     <span class="hljs-keyword">public</span> SerialDate <span class="hljs-title function_">getPreviousDayOfWeek</span><span class="hljs-params">(<span class="hljs-keyword">final</span> <span class="hljs-type">int</span> targetDOW)</span> {
 <span class="hljs-number">1007</span>         <span class="hljs-keyword">return</span> getPreviousDayOfWeek(targetDOW, <span class="hljs-built_in">this</span>);
 <span class="hljs-number">1008</span>     }
 <span class="hljs-number">1009</span>
 <span class="hljs-number">1010</span>     <span class="hljs-comment">/**
 1011      * Returns the earliest date that falls on the specified day-of-the-week
 1012      * and is AFTER this date.
 1013      *
 1014      * <span class="hljs-doctag">@param</span> targetDOW  a code for the target day-of-the-week.
 1015      *
 1016      * <span class="hljs-doctag">@return</span> the earliest date that falls on the specified day-of-the-week
 1017      *         and is AFTER this date.
 1018      */</span>
 <span class="hljs-number">1019</span>     <span class="hljs-keyword">public</span> SerialDate <span class="hljs-title function_">getFollowingDayOfWeek</span><span class="hljs-params">(<span class="hljs-keyword">final</span> <span class="hljs-type">int</span> targetDOW)</span> {
 <span class="hljs-number">1020</span>         <span class="hljs-keyword">return</span> getFollowingDayOfWeek(targetDOW, <span class="hljs-built_in">this</span>);
 <span class="hljs-number">1021</span>     }
 <span class="hljs-number">1022</span>
 <span class="hljs-number">1023</span>     <span class="hljs-comment">/**
 1024      * Returns the nearest date that falls on the specified day-of-the-week.
 1025      *
 1026      * <span class="hljs-doctag">@param</span> targetDOW  a code for the target day-of-the-week.
 1027      *
 1028      * <span class="hljs-doctag">@return</span> the nearest date that falls on the specified day-of-the-week.
 1029      */</span>
 <span class="hljs-number">1030</span>     <span class="hljs-keyword">public</span> SerialDate <span class="hljs-title function_">getNearestDayOfWeek</span><span class="hljs-params">(<span class="hljs-keyword">final</span> <span class="hljs-type">int</span> targetDOW)</span> {
 <span class="hljs-number">1031</span>         <span class="hljs-keyword">return</span> getNearestDayOfWeek(targetDOW, <span class="hljs-built_in">this</span>);
 <span class="hljs-number">1032</span>     }
 <span class="hljs-number">1033</span>
 <span class="hljs-number">1034</span> }



</code></pre>
<h3>üìù ŸÅŸáÿ±ÿ≥ÿ™ B-2 ‚Äî ŸÅÿß€åŸÑ SerialDateTest.java</h3>
<pre class="hljs"><code>
 <span class="hljs-number">1</span> <span class="hljs-comment">/* ========================================================================
   2  * JCommon : a free general purpose class library for the Java(tm) platform
   3  * ========================================================================
   4  *
   5  * (C) Copyright 2000-2005, by Object Refinery Limited and Contributors.
   6  * 
   7  * Project Info:  http://www.jfree.org/jcommon/index.html
   8  *
   9  * This library is free software; you can redistribute it and/or modify it 
  10  * under the terms of the GNU Lesser General Public License as published by 
  11  * the Free Software Foundation; either version 2.1 of the License, or 
  12  * (at your option) any later version.
  13  *
  14  * This library is distributed in the hope that it will be useful, but 
  15  * WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY 
  16  * or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Lesser General Public 
  17  * License for more details.
  18  *
  19  * You should have received a copy of the GNU Lesser General Public
  20  * License along with this library; if not, write to the Free Software
  21  * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, 
  22  * USA.
  23  *
  24  * [Java is a trademark or registered trademark of Sun Microsystems, Inc. 
  25  * in the United States and other countries.]
  26  *
  27  * -------------------
  28  * SerialDateTests.java
  29  * -------------------
  30  * (C) Copyright 2001-2005, by Object Refinery Limited.
  31  *
  32  * Original Author:  David Gilbert (for Object Refinery Limited);
  33  * Contributor(s):   -;
  34  *
  35  * $Id: SerialDateTests.java,v 1.6 2005/11/16 15:58:40 taqua Exp $
  36  *
  37  * Changes
  38  * ------
  39  * 15-Nov-2001 : Version 1 (DG);
  40  * 25-Jun-2002 : Removed unnecessary import (DG);
  41  * 24-Oct-2002 : Fixed errors reported by Checkstyle (DG);
  42  * 13-Mar-2003 : Added serialization test (DG);
  43  * 05-Jan-2005 : Added test for bug report 1096282 (DG);
  44  *
  45  */</span>
  <span class="hljs-number">46</span> 
  <span class="hljs-number">47</span> <span class="hljs-keyword">package</span> org.jfree.date.junit;
  <span class="hljs-number">48</span> 
  <span class="hljs-number">49</span> <span class="hljs-keyword">import</span> java.io.ByteArrayInputStream;
  <span class="hljs-number">50</span> <span class="hljs-keyword">import</span> java.io.ByteArrayOutputStream;
  <span class="hljs-number">51</span> <span class="hljs-keyword">import</span> java.io.ObjectInput;
  <span class="hljs-number">52</span> <span class="hljs-keyword">import</span> java.io.ObjectInputStream;
  <span class="hljs-number">53</span> <span class="hljs-keyword">import</span> java.io.ObjectOutput;
  <span class="hljs-number">54</span> <span class="hljs-keyword">import</span> java.io.ObjectOutputStream;
  <span class="hljs-number">55</span> 
  <span class="hljs-number">56</span> <span class="hljs-keyword">import</span> junit.framework.Test;
  <span class="hljs-number">57</span> <span class="hljs-keyword">import</span> junit.framework.TestCase;
  <span class="hljs-number">58</span> <span class="hljs-keyword">import</span> junit.framework.TestSuite;
  <span class="hljs-number">59</span> 
  <span class="hljs-number">60</span> <span class="hljs-keyword">import</span> org.jfree.date.MonthConstants;
  <span class="hljs-number">61</span> <span class="hljs-keyword">import</span> org.jfree.date.SerialDate;
  <span class="hljs-number">62</span> 
Appendix B: org.jfree.date.SerialDate
 <span class="hljs-number">367</span>
 Listing B-<span class="hljs-number">2</span> (continued)
 SerialDateTest.java
  <span class="hljs-number">63</span> <span class="hljs-comment">/**
  64  * Some JUnit tests for the {<span class="hljs-doctag">@link</span> SerialDate} class.
  65  */</span>
  <span class="hljs-number">66</span> <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SerialDateTests</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">TestCase</span> {
  <span class="hljs-number">67</span> 
  <span class="hljs-number">68</span>     <span class="hljs-comment">/** Date representing November 9. */</span>
  <span class="hljs-number">69</span>     <span class="hljs-keyword">private</span> SerialDate nov9Y2001;
  <span class="hljs-number">70</span> 
  <span class="hljs-number">71</span>     <span class="hljs-comment">/**
  72      * Creates a new test case.
  73      *
  74      * <span class="hljs-doctag">@param</span> name  the name.
  75      */</span>
  <span class="hljs-number">76</span>     <span class="hljs-keyword">public</span> <span class="hljs-title function_">SerialDateTests</span><span class="hljs-params">(<span class="hljs-keyword">final</span> String name)</span> {
  <span class="hljs-number">77</span>         <span class="hljs-built_in">super</span>(name);
  <span class="hljs-number">78</span>     }
  <span class="hljs-number">79</span> 
  <span class="hljs-number">80</span>     <span class="hljs-comment">/**
  81      * Returns a test suite for the JUnit test runner.
  82      *
  83      * <span class="hljs-doctag">@return</span> The test suite.
  84      */</span>
  <span class="hljs-number">85</span>     <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Test <span class="hljs-title function_">suite</span><span class="hljs-params">()</span> {
  <span class="hljs-number">86</span>         <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">TestSuite</span>(SerialDateTests.class);
  <span class="hljs-number">87</span>     }
  <span class="hljs-number">88</span> 
  <span class="hljs-number">89</span>     <span class="hljs-comment">/**
  90      * Problem set up.
  91      */</span>
  <span class="hljs-number">92</span>     <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setUp</span><span class="hljs-params">()</span> {
  <span class="hljs-number">93</span>         <span class="hljs-built_in">this</span>.nov9Y2001 = SerialDate.createInstance(<span class="hljs-number">9</span>, MonthConstants.NOVEMBER, <span class="hljs-number">2001</span>);
  <span class="hljs-number">94</span>     }
  <span class="hljs-number">95</span> 
  <span class="hljs-number">96</span>     <span class="hljs-comment">/**
  97      * 9 Nov 2001 plus two months should be 9 Jan 2002.
  98      */</span>
  <span class="hljs-number">99</span>     <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testAddMonthsTo9Nov2001</span><span class="hljs-params">()</span> {
 <span class="hljs-number">100</span>         <span class="hljs-keyword">final</span> <span class="hljs-type">SerialDate</span> <span class="hljs-variable">jan9Y2002</span> <span class="hljs-operator">=</span> SerialDate.addMonths(<span class="hljs-number">2</span>, <span class="hljs-built_in">this</span>.nov9Y2001);
 <span class="hljs-number">101</span>         <span class="hljs-keyword">final</span> <span class="hljs-type">SerialDate</span> <span class="hljs-variable">answer</span> <span class="hljs-operator">=</span> SerialDate.createInstance(<span class="hljs-number">9</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2002</span>);
 <span class="hljs-number">102</span>         assertEquals(answer, jan9Y2002);
 <span class="hljs-number">103</span>     }
 <span class="hljs-number">104</span> 
 <span class="hljs-number">105</span>     <span class="hljs-comment">/**
 106      * A test case for a reported bug, now fixed.
 107      */</span>
 <span class="hljs-number">108</span>     <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testAddMonthsTo5Oct2003</span><span class="hljs-params">()</span> {
 <span class="hljs-number">109</span>         <span class="hljs-keyword">final</span> <span class="hljs-type">SerialDate</span> <span class="hljs-variable">d1</span> <span class="hljs-operator">=</span> SerialDate.createInstance(<span class="hljs-number">5</span>, MonthConstants.OCTOBER, <span class="hljs-number">2003</span>);
 <span class="hljs-number">110</span>         <span class="hljs-keyword">final</span> <span class="hljs-type">SerialDate</span> <span class="hljs-variable">d2</span> <span class="hljs-operator">=</span> SerialDate.addMonths(<span class="hljs-number">2</span>, d1);
 <span class="hljs-number">111</span>         assertEquals(d2, SerialDate.createInstance(<span class="hljs-number">5</span>, MonthConstants.DECEMBER, <span class="hljs-number">2003</span>));
 <span class="hljs-number">112</span>     }
 <span class="hljs-number">113</span> 
 <span class="hljs-number">114</span>     <span class="hljs-comment">/**
 115      * A test case for a reported bug, now fixed.
 116      */</span>
 <span class="hljs-number">117</span>     <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testAddMonthsTo1Jan2003</span><span class="hljs-params">()</span> {
 <span class="hljs-number">118</span>         <span class="hljs-keyword">final</span> <span class="hljs-type">SerialDate</span> <span class="hljs-variable">d1</span> <span class="hljs-operator">=</span> SerialDate.createInstance(<span class="hljs-number">1</span>, MonthConstants.JANUARY, <span class="hljs-number">2003</span>);
 <span class="hljs-number">119</span>         <span class="hljs-keyword">final</span> <span class="hljs-type">SerialDate</span> <span class="hljs-variable">d2</span> <span class="hljs-operator">=</span> SerialDate.addMonths(<span class="hljs-number">0</span>, d1);
 <span class="hljs-number">120</span>         assertEquals(d2, d1);
 <span class="hljs-number">121</span>     }
 <span class="hljs-number">122</span> 
 <span class="hljs-number">123</span>     <span class="hljs-comment">/**
 124      * Monday preceding Friday 9 November 2001 should be 5 November.
368
 Appendix B: org.jfree.date.SerialDate
 Listing B-2 (continued)
 SerialDateTest.java
 125      */</span>
 <span class="hljs-number">126</span>     <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testMondayPrecedingFriday9Nov2001</span><span class="hljs-params">()</span> {
 <span class="hljs-number">127</span>         <span class="hljs-type">SerialDate</span> <span class="hljs-variable">mondayBefore</span> <span class="hljs-operator">=</span> SerialDate.getPreviousDayOfWeek(
 <span class="hljs-number">128</span>             SerialDate.MONDAY, <span class="hljs-built_in">this</span>.nov9Y2001
 <span class="hljs-number">129</span>         );
 <span class="hljs-number">130</span>         assertEquals(<span class="hljs-number">5</span>, mondayBefore.getDayOfMonth());
 <span class="hljs-number">131</span>     }
 <span class="hljs-number">132</span> 
 <span class="hljs-number">133</span>     <span class="hljs-comment">/**
 134      * Monday following Friday 9 November 2001 should be 12 November.
 135      */</span>
 <span class="hljs-number">136</span>     <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testMondayFollowingFriday9Nov2001</span><span class="hljs-params">()</span> {
 <span class="hljs-number">137</span>         <span class="hljs-type">SerialDate</span> <span class="hljs-variable">mondayAfter</span> <span class="hljs-operator">=</span> SerialDate.getFollowingDayOfWeek(
 <span class="hljs-number">138</span>             SerialDate.MONDAY, <span class="hljs-built_in">this</span>.nov9Y2001
 <span class="hljs-number">139</span>         );
 <span class="hljs-number">140</span>         assertEquals(<span class="hljs-number">12</span>, mondayAfter.getDayOfMonth());
 <span class="hljs-number">141</span>     }
 <span class="hljs-number">142</span> 
 <span class="hljs-number">143</span>     <span class="hljs-comment">/**
 144      * Monday nearest Friday 9 November 2001 should be 12 November.
 145      */</span>
 <span class="hljs-number">146</span>     <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testMondayNearestFriday9Nov2001</span><span class="hljs-params">()</span> {
 <span class="hljs-number">147</span>         <span class="hljs-type">SerialDate</span> <span class="hljs-variable">mondayNearest</span> <span class="hljs-operator">=</span> SerialDate.getNearestDayOfWeek(
 <span class="hljs-number">148</span>             SerialDate.MONDAY, <span class="hljs-built_in">this</span>.nov9Y2001
 <span class="hljs-number">149</span>         );
 <span class="hljs-number">150</span>         assertEquals(<span class="hljs-number">12</span>, mondayNearest.getDayOfMonth());
 <span class="hljs-number">151</span>     }
 <span class="hljs-number">152</span> 
 <span class="hljs-number">153</span>     <span class="hljs-comment">/**
 154      * The Monday nearest to 22nd January 1970 falls on the 19th.
 155      */</span>
 <span class="hljs-number">156</span>     <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testMondayNearest22Jan1970</span><span class="hljs-params">()</span> {
 <span class="hljs-number">157</span>         <span class="hljs-type">SerialDate</span> <span class="hljs-variable">jan22Y1970</span> <span class="hljs-operator">=</span> SerialDate.createInstance(<span class="hljs-number">22</span>, MonthConstants.JANUARY, <span class="hljs-number">1970</span>);
 <span class="hljs-number">158</span>         SerialDate mondayNearest=SerialDate.getNearestDayOfWeek(SerialDate.MONDAY, jan22Y1970);
 <span class="hljs-number">159</span>         assertEquals(<span class="hljs-number">19</span>, mondayNearest.getDayOfMonth());
 <span class="hljs-number">160</span>     }
 <span class="hljs-number">161</span> 
 <span class="hljs-number">162</span>     <span class="hljs-comment">/**
 163      * Problem that the conversion of days to strings returns the right result.  Actually, this 
 164      * result depends on the Locale so this test needs to be modified.
 165      */</span>
 <span class="hljs-number">166</span>     <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testWeekdayCodeToString</span><span class="hljs-params">()</span> {
 <span class="hljs-number">167</span> 
 <span class="hljs-number">168</span>         <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">test</span> <span class="hljs-operator">=</span> SerialDate.weekdayCodeToString(SerialDate.SATURDAY);
 <span class="hljs-number">169</span>         assertEquals(<span class="hljs-string">&quot;Saturday&quot;</span>, test);
 <span class="hljs-number">170</span> 
 <span class="hljs-number">171</span>     }
 <span class="hljs-number">172</span> 
 <span class="hljs-number">173</span>     <span class="hljs-comment">/**
 174      * Test the conversion of a string to a weekday.  Note that this test will fail if the 
 175      * default locale doesn&#x27;t use English weekday names...devise a better test!
 176      */</span>
 <span class="hljs-number">177</span>     <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testStringToWeekday</span><span class="hljs-params">()</span> {
 <span class="hljs-number">178</span> 
 <span class="hljs-number">179</span>         <span class="hljs-type">int</span> <span class="hljs-variable">weekday</span> <span class="hljs-operator">=</span> SerialDate.stringToWeekdayCode(<span class="hljs-string">&quot;Wednesday&quot;</span>);
 <span class="hljs-number">180</span>         assertEquals(SerialDate.WEDNESDAY, weekday);
 <span class="hljs-number">181</span> 
 <span class="hljs-number">182</span>         weekday = SerialDate.stringToWeekdayCode(<span class="hljs-string">&quot; Wednesday &quot;</span>);
 <span class="hljs-number">183</span>         assertEquals(SerialDate.WEDNESDAY, weekday);
 <span class="hljs-number">184</span> 
Appendix B: org.jfree.date.SerialDate
 <span class="hljs-number">369</span>
 Listing B-<span class="hljs-number">2</span> (continued)
 SerialDateTest.java
 <span class="hljs-number">185</span>         weekday = SerialDate.stringToWeekdayCode(<span class="hljs-string">&quot;Wed&quot;</span>);
 <span class="hljs-number">186</span>         assertEquals(SerialDate.WEDNESDAY, weekday);
 <span class="hljs-number">187</span> 
 <span class="hljs-number">188</span>     }
 <span class="hljs-number">189</span> 
 <span class="hljs-number">190</span>     <span class="hljs-comment">/**
 191      * Test the conversion of a string to a month.  Note that this test will fail if the
 192      * default locale doesn&#x27;t use English month names...devise a better test!
 193      */</span>
 <span class="hljs-number">194</span>     <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testStringToMonthCode</span><span class="hljs-params">()</span> {
 <span class="hljs-number">195</span> 
 <span class="hljs-number">196</span>         <span class="hljs-type">int</span> <span class="hljs-variable">m</span> <span class="hljs-operator">=</span> SerialDate.stringToMonthCode(<span class="hljs-string">&quot;January&quot;</span>);
 <span class="hljs-number">197</span>         assertEquals(MonthConstants.JANUARY, m);
 <span class="hljs-number">198</span> 
 <span class="hljs-number">199</span>         m = SerialDate.stringToMonthCode(<span class="hljs-string">&quot; January &quot;</span>);
 <span class="hljs-number">200</span>         assertEquals(MonthConstants.JANUARY, m);
 <span class="hljs-number">201</span> 
 <span class="hljs-number">202</span>         m = SerialDate.stringToMonthCode(<span class="hljs-string">&quot;Jan&quot;</span>);
 <span class="hljs-number">203</span>         assertEquals(MonthConstants.JANUARY, m);
 <span class="hljs-number">204</span> 
 <span class="hljs-number">205</span>     }
 <span class="hljs-number">206</span> 
 <span class="hljs-number">207</span>     <span class="hljs-comment">/**
 208      * Tests the conversion of a month code to a string.
 209      */</span>
 <span class="hljs-number">210</span>     <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testMonthCodeToStringCode</span><span class="hljs-params">()</span> {
 <span class="hljs-number">211</span> 
 <span class="hljs-number">212</span>         <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">test</span> <span class="hljs-operator">=</span> SerialDate.monthCodeToString(MonthConstants.DECEMBER);
 <span class="hljs-number">213</span>         assertEquals(<span class="hljs-string">&quot;December&quot;</span>, test);
 <span class="hljs-number">214</span> 
 <span class="hljs-number">215</span>     }
 <span class="hljs-number">216</span> 
 <span class="hljs-number">217</span>     <span class="hljs-comment">/**
 218      * 1900 is not a leap year.
 219      */</span>
 <span class="hljs-number">220</span>     <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testIsNotLeapYear1900</span><span class="hljs-params">()</span> {
 <span class="hljs-number">221</span>         assertTrue(!SerialDate.isLeapYear(<span class="hljs-number">1900</span>));
 <span class="hljs-number">222</span>     }
 <span class="hljs-number">223</span> 
 <span class="hljs-number">224</span>     <span class="hljs-comment">/**
 225      * 2000 is a leap year.
 226      */</span>
 <span class="hljs-number">227</span>     <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testIsLeapYear2000</span><span class="hljs-params">()</span> {
 <span class="hljs-number">228</span>         assertTrue(SerialDate.isLeapYear(<span class="hljs-number">2000</span>));
 <span class="hljs-number">229</span>     }
 <span class="hljs-number">230</span> 
 <span class="hljs-number">231</span>     <span class="hljs-comment">/**
 232      * The number of leap years from 1900 up-to-and-including 1899 is 0.
 233      */</span>
 <span class="hljs-number">234</span>     <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testLeapYearCount1899</span><span class="hljs-params">()</span> {
 <span class="hljs-number">235</span>         assertEquals(SerialDate.leapYearCount(<span class="hljs-number">1899</span>), <span class="hljs-number">0</span>);
 <span class="hljs-number">236</span>     }
 <span class="hljs-number">237</span> 
 <span class="hljs-number">238</span>     <span class="hljs-comment">/**
 239      * The number of leap years from 1900 up-to-and-including 1903 is 0.
 240      */</span>
 <span class="hljs-number">241</span>     <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testLeapYearCount1903</span><span class="hljs-params">()</span> {
 <span class="hljs-number">242</span>         assertEquals(SerialDate.leapYearCount(<span class="hljs-number">1903</span>), <span class="hljs-number">0</span>);
 <span class="hljs-number">243</span>     }
 <span class="hljs-number">244</span> 
 <span class="hljs-number">245</span>     <span class="hljs-comment">/**
 246      * The number of leap years from 1900 up-to-and-including 1904 is 1.
 247      */</span>
<span class="hljs-number">370</span>
 Appendix B: org.jfree.date.SerialDate
 Listing B-<span class="hljs-number">2</span> (continued)
 SerialDateTest.java
 <span class="hljs-number">248</span>     <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testLeapYearCount1904</span><span class="hljs-params">()</span> {
 <span class="hljs-number">249</span>         assertEquals(SerialDate.leapYearCount(<span class="hljs-number">1904</span>), <span class="hljs-number">1</span>);
 <span class="hljs-number">250</span>     }
 <span class="hljs-number">251</span> 
 <span class="hljs-number">252</span>     <span class="hljs-comment">/**
 253      * The number of leap years from 1900 up-to-and-including 1999 is 24.
 254      */</span>
 <span class="hljs-number">255</span>     <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testLeapYearCount1999</span><span class="hljs-params">()</span> {
 <span class="hljs-number">256</span>         assertEquals(SerialDate.leapYearCount(<span class="hljs-number">1999</span>), <span class="hljs-number">24</span>);
 <span class="hljs-number">257</span>     }
 <span class="hljs-number">258</span> 
 <span class="hljs-number">259</span>     <span class="hljs-comment">/**
 260      * The number of leap years from 1900 up-to-and-including 2000 is 25.
 261      */</span>
 <span class="hljs-number">262</span>     <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testLeapYearCount2000</span><span class="hljs-params">()</span> {
 <span class="hljs-number">263</span>         assertEquals(SerialDate.leapYearCount(<span class="hljs-number">2000</span>), <span class="hljs-number">25</span>);
 <span class="hljs-number">264</span>     }
 <span class="hljs-number">265</span> 
 <span class="hljs-number">266</span>     <span class="hljs-comment">/**
 267      * Serialize an instance, restore it, and check for equality.
 268      */</span>
 <span class="hljs-number">269</span>     <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testSerialization</span><span class="hljs-params">()</span> {
 <span class="hljs-number">270</span> 
 <span class="hljs-number">271</span>         <span class="hljs-type">SerialDate</span> <span class="hljs-variable">d1</span> <span class="hljs-operator">=</span> SerialDate.createInstance(<span class="hljs-number">15</span>, <span class="hljs-number">4</span>, <span class="hljs-number">2000</span>);
 <span class="hljs-number">272</span>         <span class="hljs-type">SerialDate</span> <span class="hljs-variable">d2</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;
 <span class="hljs-number">273</span> 
 <span class="hljs-number">274</span>         <span class="hljs-keyword">try</span> {
 <span class="hljs-number">275</span>             <span class="hljs-type">ByteArrayOutputStream</span> <span class="hljs-variable">buffer</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ByteArrayOutputStream</span>();
 <span class="hljs-number">276</span>             <span class="hljs-type">ObjectOutput</span> <span class="hljs-variable">out</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ObjectOutputStream</span>(buffer);
 <span class="hljs-number">277</span>             out.writeObject(d1);
 <span class="hljs-number">278</span>             out.close();
 <span class="hljs-number">279</span> 
 <span class="hljs-number">280</span>             <span class="hljs-type">ObjectInput</span> <span class="hljs-variable">in</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ObjectInputStream</span>(
                   <span class="hljs-keyword">new</span> <span class="hljs-title class_">ByteArrayInputStream</span>(buffer.toByteArray()));
 <span class="hljs-number">281</span>             d2 = (SerialDate) in.readObject();
 <span class="hljs-number">282</span>             in.close();
 <span class="hljs-number">283</span>         }
 <span class="hljs-number">284</span>         <span class="hljs-keyword">catch</span> (Exception e) {
 <span class="hljs-number">285</span>             System.out.println(e.toString());
 <span class="hljs-number">286</span>         }
 <span class="hljs-number">287</span>         assertEquals(d1, d2);
 <span class="hljs-number">288</span> 
 <span class="hljs-number">289</span>     }
 <span class="hljs-number">290</span>
 <span class="hljs-number">291</span>     <span class="hljs-comment">/**
 292      * A test for bug report 1096282 (now fixed).
 293      */</span>
 <span class="hljs-number">294</span>     <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test1096282</span><span class="hljs-params">()</span> {
 <span class="hljs-number">295</span>         <span class="hljs-type">SerialDate</span> <span class="hljs-variable">d</span> <span class="hljs-operator">=</span> SerialDate.createInstance(<span class="hljs-number">29</span>, <span class="hljs-number">2</span>, <span class="hljs-number">2004</span>);
 <span class="hljs-number">296</span>         d = SerialDate.addYears(<span class="hljs-number">1</span>, d);
 <span class="hljs-number">297</span>         <span class="hljs-type">SerialDate</span> <span class="hljs-variable">expected</span> <span class="hljs-operator">=</span> SerialDate.createInstance(<span class="hljs-number">28</span>, <span class="hljs-number">2</span>, <span class="hljs-number">2005</span>);
 <span class="hljs-number">298</span>         assertTrue(d.isOn(expected));
 <span class="hljs-number">299</span>     }
 <span class="hljs-number">300</span> 
 <span class="hljs-number">301</span>     <span class="hljs-comment">/**
 302      * Miscellaneous tests for the addMonths() method.
 303      */</span>
 <span class="hljs-number">304</span>     <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testAddMonths</span><span class="hljs-params">()</span> {
 <span class="hljs-number">305</span>         <span class="hljs-type">SerialDate</span> <span class="hljs-variable">d1</span> <span class="hljs-operator">=</span> SerialDate.createInstance(<span class="hljs-number">31</span>, <span class="hljs-number">5</span>, <span class="hljs-number">2004</span>);
 <span class="hljs-number">306</span>
Appendix B: org.jfree.date.SerialDate
 <span class="hljs-number">371</span>
 Listing B-<span class="hljs-number">2</span> (continued)
 SerialDateTest.java
 <span class="hljs-number">307</span>         <span class="hljs-type">SerialDate</span> <span class="hljs-variable">d2</span> <span class="hljs-operator">=</span> SerialDate.addMonths(<span class="hljs-number">1</span>, d1);
 <span class="hljs-number">308</span>         assertEquals(<span class="hljs-number">30</span>, d2.getDayOfMonth());
 <span class="hljs-number">309</span>         assertEquals(<span class="hljs-number">6</span>, d2.getMonth());
 <span class="hljs-number">310</span>         assertEquals(<span class="hljs-number">2004</span>, d2.getYYYY());
 <span class="hljs-number">311</span>
 <span class="hljs-number">312</span>         <span class="hljs-type">SerialDate</span> <span class="hljs-variable">d3</span> <span class="hljs-operator">=</span> SerialDate.addMonths(<span class="hljs-number">2</span>, d1);
 <span class="hljs-number">313</span>         assertEquals(<span class="hljs-number">31</span>, d3.getDayOfMonth());
 <span class="hljs-number">314</span>         assertEquals(<span class="hljs-number">7</span>, d3.getMonth());
 <span class="hljs-number">315</span>         assertEquals(<span class="hljs-number">2004</span>, d3.getYYYY());
 <span class="hljs-number">316</span>
 <span class="hljs-number">317</span>         <span class="hljs-type">SerialDate</span> <span class="hljs-variable">d4</span> <span class="hljs-operator">=</span> SerialDate.addMonths(<span class="hljs-number">1</span>, SerialDate.addMonths(<span class="hljs-number">1</span>, d1));
 <span class="hljs-number">318</span>         assertEquals(<span class="hljs-number">30</span>, d4.getDayOfMonth());
 <span class="hljs-number">319</span>         assertEquals(<span class="hljs-number">7</span>, d4.getMonth());
 <span class="hljs-number">320</span>         assertEquals(<span class="hljs-number">2004</span>, d4.getYYYY());
 <span class="hljs-number">321</span>     }
 <span class="hljs-number">322</span> }


</code></pre>
<h3>üìù ŸÅŸáÿ±ÿ≥ÿ™ B-3 ‚Äî ŸÅÿß€åŸÑ MonthConstants.java</h3>
<pre class="hljs"><code><span class="hljs-number">1</span> <span class="hljs-comment">/* ========================================================================
   2  * JCommon : a free general purpose class library for the Java(tm) platform
   3  * ========================================================================
   4  *
   5  * (C) Copyright 2000-2005, by Object Refinery Limited and Contributors.
   6  * 
   7  * Project Info:  http://www.jfree.org/jcommon/index.html
   8  *
   9  * This library is free software; you can redistribute it and/or modify it 
  10  * under the terms of the GNU Lesser General Public License as published by 
  11  * the Free Software Foundation; either version 2.1 of the License, or 
  12  * (at your option) any later version.
  13  *
  14  * This library is distributed in the hope that it will be useful, but 
  15  * WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY 
  16  * or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Lesser General Public 
  17  * License for more details.
  18  *
  19  * You should have received a copy of the GNU Lesser General Public
  20  * License along with this library; if not, write to the Free Software
  21  * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, 
  22  * USA.
  23  *
  24  * [Java is a trademark or registered trademark of Sun Microsystems, Inc. 
  25  * in the United States and other countries.]
  26  *
  27  * ------------------
  28  * MonthConstants.java
  29  * ------------------
  30  * (C) Copyright 2002, 2003, by Object Refinery Limited.
  31  *
  32  * Original Author:  David Gilbert (for Object Refinery Limited);
  33  * Contributor(s):   -;
  34  *
  35  * $Id: MonthConstants.java,v 1.4 2005/11/16 15:58:40 taqua Exp $
  36  *
  37  * Changes
  38  * ------
  39  * 29-May-2002 : Version 1 (code moved from SerialDate class) (DG);
  40  *
  41  */</span>
  <span class="hljs-number">42</span> 
  <span class="hljs-number">43</span> <span class="hljs-keyword">package</span> org.jfree.date;
  <span class="hljs-number">44</span> 
  <span class="hljs-number">45</span> <span class="hljs-comment">/**
  46  * Useful constants for months.  Note that these are NOT equivalent to the
  47  * constants defined by java.util.Calendar (where JANUARY=0 and DECEMBER=11).
  48  * &lt;P&gt;
  49  * Used by the SerialDate and RegularTimePeriod classes.
  50  *
  51  * <span class="hljs-doctag">@author</span> David Gilbert
  52  */</span>
  <span class="hljs-number">53</span> <span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">MonthConstants</span> {
  <span class="hljs-number">54</span> 
  <span class="hljs-number">55</span>     <span class="hljs-comment">/** Constant for January. */</span>
  <span class="hljs-number">56</span>     <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">JANUARY</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;
  <span class="hljs-number">57</span> 
  <span class="hljs-number">58</span>     <span class="hljs-comment">/** Constant for February. */</span>
  <span class="hljs-number">59</span>     <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">FEBRUARY</span> <span class="hljs-operator">=</span> <span class="hljs-number">2</span>;
  <span class="hljs-number">60</span> 
Appendix B: org.jfree.date.SerialDate
 <span class="hljs-number">373</span>
 Listing B-<span class="hljs-number">3</span> (continued)
 MonthConstants.java
  <span class="hljs-number">61</span>     <span class="hljs-comment">/** Constant for March. */</span>
  <span class="hljs-number">62</span>     <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">MARCH</span> <span class="hljs-operator">=</span> <span class="hljs-number">3</span>;
  <span class="hljs-number">63</span> 
  <span class="hljs-number">64</span>     <span class="hljs-comment">/** Constant for April. */</span>
  <span class="hljs-number">65</span>     <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">APRIL</span> <span class="hljs-operator">=</span> <span class="hljs-number">4</span>;
  <span class="hljs-number">66</span> 
  <span class="hljs-number">67</span>     <span class="hljs-comment">/** Constant for May. */</span>
  <span class="hljs-number">68</span>     <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">MAY</span> <span class="hljs-operator">=</span> <span class="hljs-number">5</span>;
  <span class="hljs-number">69</span> 
  <span class="hljs-number">70</span>     <span class="hljs-comment">/** Constant for June. */</span>
  <span class="hljs-number">71</span>     <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">JUNE</span> <span class="hljs-operator">=</span> <span class="hljs-number">6</span>;
  <span class="hljs-number">72</span> 
  <span class="hljs-number">73</span>     <span class="hljs-comment">/** Constant for July. */</span>
  <span class="hljs-number">74</span>     <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">JULY</span> <span class="hljs-operator">=</span> <span class="hljs-number">7</span>;
  <span class="hljs-number">75</span> 
  <span class="hljs-number">76</span>     <span class="hljs-comment">/** Constant for August. */</span>
  <span class="hljs-number">77</span>     <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">AUGUST</span> <span class="hljs-operator">=</span> <span class="hljs-number">8</span>;
  <span class="hljs-number">78</span> 
  <span class="hljs-number">79</span>     <span class="hljs-comment">/** Constant for September. */</span>
  <span class="hljs-number">80</span>     <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">SEPTEMBER</span> <span class="hljs-operator">=</span> <span class="hljs-number">9</span>;
  <span class="hljs-number">81</span> 
  <span class="hljs-number">82</span>     <span class="hljs-comment">/** Constant for October. */</span>
  <span class="hljs-number">83</span>     <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">OCTOBER</span> <span class="hljs-operator">=</span> <span class="hljs-number">10</span>;
  <span class="hljs-number">84</span> 
  <span class="hljs-number">85</span>     <span class="hljs-comment">/** Constant for November. */</span>
  <span class="hljs-number">86</span>     <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">NOVEMBER</span> <span class="hljs-operator">=</span> <span class="hljs-number">11</span>;
  <span class="hljs-number">87</span> 
  <span class="hljs-number">88</span>     <span class="hljs-comment">/** Constant for December. */</span>
  <span class="hljs-number">89</span>     <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">DECEMBER</span> <span class="hljs-operator">=</span> <span class="hljs-number">12</span>;
  <span class="hljs-number">90</span> 
  <span class="hljs-number">91</span> }


</code></pre>
<h3>üìù ŸÅŸáÿ±ÿ≥ÿ™ B-4 ‚Äî ŸÅÿß€åŸÑ BobsSerialDateTest.java</h3>
<pre class="hljs"><code> <span class="hljs-number">1</span> <span class="hljs-keyword">package</span> org.jfree.date.junit;
   <span class="hljs-number">2</span> 
   <span class="hljs-number">3</span> <span class="hljs-keyword">import</span> junit.framework.TestCase;
   <span class="hljs-number">4</span> <span class="hljs-keyword">import</span> org.jfree.date.*;
   <span class="hljs-number">5</span> <span class="hljs-keyword">import</span> <span class="hljs-keyword">static</span> org.jfree.date.SerialDate.*;
   <span class="hljs-number">6</span> 
   <span class="hljs-number">7</span> <span class="hljs-keyword">import</span> java.util.*;
   <span class="hljs-number">8</span> 
   <span class="hljs-number">9</span> <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BobsSerialDateTest</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">TestCase</span> {
  <span class="hljs-number">10</span> 
  <span class="hljs-number">11</span>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testIsValidWeekdayCode</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception {
  <span class="hljs-number">12</span>     <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">day</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; day &lt;= <span class="hljs-number">7</span>; day++)
  <span class="hljs-number">13</span>       assertTrue(isValidWeekdayCode(day));
  <span class="hljs-number">14</span>     assertFalse(isValidWeekdayCode(<span class="hljs-number">0</span>));
  <span class="hljs-number">15</span>     assertFalse(isValidWeekdayCode(<span class="hljs-number">8</span>));
  <span class="hljs-number">16</span>   }
  <span class="hljs-number">17</span> 
  <span class="hljs-number">18</span>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testStringToWeekdayCode</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception {
  <span class="hljs-number">19</span> 
  <span class="hljs-number">20</span>     assertEquals(-<span class="hljs-number">1</span>, stringToWeekdayCode(<span class="hljs-string">&quot;Hello&quot;</span>));
  <span class="hljs-number">21</span>     assertEquals(MONDAY, stringToWeekdayCode(<span class="hljs-string">&quot;Monday&quot;</span>));
  <span class="hljs-number">22</span>     assertEquals(MONDAY, stringToWeekdayCode(<span class="hljs-string">&quot;Mon&quot;</span>));
  <span class="hljs-number">23</span> <span class="hljs-comment">//todo    assertEquals(MONDAY,stringToWeekdayCode(&quot;monday&quot;));</span>
  <span class="hljs-number">24</span> <span class="hljs-comment">//    assertEquals(MONDAY,stringToWeekdayCode(&quot;MONDAY&quot;));</span>
  <span class="hljs-number">25</span> <span class="hljs-comment">//    assertEquals(MONDAY, stringToWeekdayCode(&quot;mon&quot;));</span>
  <span class="hljs-number">26</span> 
  <span class="hljs-number">27</span>     assertEquals(TUESDAY, stringToWeekdayCode(<span class="hljs-string">&quot;Tuesday&quot;</span>));
  <span class="hljs-number">28</span>     assertEquals(TUESDAY, stringToWeekdayCode(<span class="hljs-string">&quot;Tue&quot;</span>));
  <span class="hljs-number">29</span> <span class="hljs-comment">//    assertEquals(TUESDAY,stringToWeekdayCode(&quot;tuesday&quot;));</span>
  <span class="hljs-number">30</span> <span class="hljs-comment">//    assertEquals(TUESDAY,stringToWeekdayCode(&quot;TUESDAY&quot;));</span>
  <span class="hljs-number">31</span> <span class="hljs-comment">//    assertEquals(TUESDAY, stringToWeekdayCode(&quot;tue&quot;));</span>
  <span class="hljs-number">32</span> <span class="hljs-comment">//    assertEquals(TUESDAY, stringToWeekdayCode(&quot;tues&quot;));</span>
  <span class="hljs-number">33</span> 
  <span class="hljs-number">34</span>     assertEquals(WEDNESDAY, stringToWeekdayCode(<span class="hljs-string">&quot;Wednesday&quot;</span>));
  <span class="hljs-number">35</span>     assertEquals(WEDNESDAY, stringToWeekdayCode(<span class="hljs-string">&quot;Wed&quot;</span>));
  <span class="hljs-number">36</span> <span class="hljs-comment">//    assertEquals(WEDNESDAY,stringToWeekdayCode(&quot;wednesday&quot;));</span>
  <span class="hljs-number">37</span> <span class="hljs-comment">//    assertEquals(WEDNESDAY,stringToWeekdayCode(&quot;WEDNESDAY&quot;));</span>
  <span class="hljs-number">38</span> <span class="hljs-comment">//    assertEquals(WEDNESDAY, stringToWeekdayCode(&quot;wed&quot;));</span>
  <span class="hljs-number">39</span> 
  <span class="hljs-number">40</span>     assertEquals(THURSDAY, stringToWeekdayCode(<span class="hljs-string">&quot;Thursday&quot;</span>));
  <span class="hljs-number">41</span>     assertEquals(THURSDAY, stringToWeekdayCode(<span class="hljs-string">&quot;Thu&quot;</span>));
  <span class="hljs-number">42</span> <span class="hljs-comment">//    assertEquals(THURSDAY,stringToWeekdayCode(&quot;thursday&quot;));</span>
  <span class="hljs-number">43</span> <span class="hljs-comment">//    assertEquals(THURSDAY,stringToWeekdayCode(&quot;THURSDAY&quot;));</span>
  <span class="hljs-number">44</span> <span class="hljs-comment">//    assertEquals(THURSDAY, stringToWeekdayCode(&quot;thu&quot;));</span>
  <span class="hljs-number">45</span> <span class="hljs-comment">//    assertEquals(THURSDAY, stringToWeekdayCode(&quot;thurs&quot;));</span>
  <span class="hljs-number">46</span> 
  <span class="hljs-number">47</span>     assertEquals(FRIDAY, stringToWeekdayCode(<span class="hljs-string">&quot;Friday&quot;</span>));
  <span class="hljs-number">48</span>     assertEquals(FRIDAY, stringToWeekdayCode(<span class="hljs-string">&quot;Fri&quot;</span>));
  <span class="hljs-number">49</span> <span class="hljs-comment">//    assertEquals(FRIDAY,stringToWeekdayCode(&quot;friday&quot;));</span>
  <span class="hljs-number">50</span> <span class="hljs-comment">//    assertEquals(FRIDAY,stringToWeekdayCode(&quot;FRIDAY&quot;));</span>
  <span class="hljs-number">51</span> <span class="hljs-comment">//    assertEquals(FRIDAY, stringToWeekdayCode(&quot;fri&quot;));</span>
  <span class="hljs-number">52</span> 
  <span class="hljs-number">53</span>     assertEquals(SATURDAY, stringToWeekdayCode(<span class="hljs-string">&quot;Saturday&quot;</span>));
  <span class="hljs-number">54</span>     assertEquals(SATURDAY, stringToWeekdayCode(<span class="hljs-string">&quot;Sat&quot;</span>));
  <span class="hljs-number">55</span> <span class="hljs-comment">//    assertEquals(SATURDAY,stringToWeekdayCode(&quot;saturday&quot;));</span>
  <span class="hljs-number">56</span> <span class="hljs-comment">//    assertEquals(SATURDAY,stringToWeekdayCode(&quot;SATURDAY&quot;));</span>
  <span class="hljs-number">57</span> <span class="hljs-comment">//    assertEquals(SATURDAY, stringToWeekdayCode(&quot;sat&quot;));</span>
  <span class="hljs-number">58</span> 
  <span class="hljs-number">59</span>     assertEquals(SUNDAY, stringToWeekdayCode(<span class="hljs-string">&quot;Sunday&quot;</span>));
  <span class="hljs-number">60</span>     assertEquals(SUNDAY, stringToWeekdayCode(<span class="hljs-string">&quot;Sun&quot;</span>));
  <span class="hljs-number">61</span> <span class="hljs-comment">//    assertEquals(SUNDAY,stringToWeekdayCode(&quot;sunday&quot;));</span>
  <span class="hljs-number">62</span> <span class="hljs-comment">//    assertEquals(SUNDAY,stringToWeekdayCode(&quot;SUNDAY&quot;));</span>
  <span class="hljs-number">63</span> <span class="hljs-comment">//    assertEquals(SUNDAY, stringToWeekdayCode(&quot;sun&quot;));</span>
  <span class="hljs-number">64</span>   }
  <span class="hljs-number">65</span> 
Appendix B: org.jfree.date.SerialDate
 <span class="hljs-number">375</span>
 Listing B-<span class="hljs-number">4</span> (continued)
 BobsSerialDateTest.java
  <span class="hljs-number">66</span>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testWeekdayCodeToString</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception {
  <span class="hljs-number">67</span>     assertEquals(<span class="hljs-string">&quot;Sunday&quot;</span>, weekdayCodeToString(SUNDAY));
  <span class="hljs-number">68</span>     assertEquals(<span class="hljs-string">&quot;Monday&quot;</span>, weekdayCodeToString(MONDAY));
  <span class="hljs-number">69</span>     assertEquals(<span class="hljs-string">&quot;Tuesday&quot;</span>, weekdayCodeToString(TUESDAY));
  <span class="hljs-number">70</span>     assertEquals(<span class="hljs-string">&quot;Wednesday&quot;</span>, weekdayCodeToString(WEDNESDAY));
  <span class="hljs-number">71</span>     assertEquals(<span class="hljs-string">&quot;Thursday&quot;</span>, weekdayCodeToString(THURSDAY));
  <span class="hljs-number">72</span>     assertEquals(<span class="hljs-string">&quot;Friday&quot;</span>, weekdayCodeToString(FRIDAY));
  <span class="hljs-number">73</span>     assertEquals(<span class="hljs-string">&quot;Saturday&quot;</span>, weekdayCodeToString(SATURDAY));
  <span class="hljs-number">74</span>   }
  <span class="hljs-number">75</span> 
  <span class="hljs-number">76</span>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testIsValidMonthCode</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception {
  <span class="hljs-number">77</span>     <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt;= <span class="hljs-number">12</span>; i++)
  <span class="hljs-number">78</span>       assertTrue(isValidMonthCode(i));
  <span class="hljs-number">79</span>     assertFalse(isValidMonthCode(<span class="hljs-number">0</span>));
  <span class="hljs-number">80</span>     assertFalse(isValidMonthCode(<span class="hljs-number">13</span>));
  <span class="hljs-number">81</span>   }
  <span class="hljs-number">82</span> 
  <span class="hljs-number">83</span>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testMonthToQuarter</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception {
  <span class="hljs-number">84</span>     assertEquals(<span class="hljs-number">1</span>, monthCodeToQuarter(JANUARY));
  <span class="hljs-number">85</span>     assertEquals(<span class="hljs-number">1</span>, monthCodeToQuarter(FEBRUARY));
  <span class="hljs-number">86</span>     assertEquals(<span class="hljs-number">1</span>, monthCodeToQuarter(MARCH));
  <span class="hljs-number">87</span>     assertEquals(<span class="hljs-number">2</span>, monthCodeToQuarter(APRIL));
  <span class="hljs-number">88</span>     assertEquals(<span class="hljs-number">2</span>, monthCodeToQuarter(MAY));
  <span class="hljs-number">89</span>     assertEquals(<span class="hljs-number">2</span>, monthCodeToQuarter(JUNE));
  <span class="hljs-number">90</span>     assertEquals(<span class="hljs-number">3</span>, monthCodeToQuarter(JULY));
  <span class="hljs-number">91</span>     assertEquals(<span class="hljs-number">3</span>, monthCodeToQuarter(AUGUST));
  <span class="hljs-number">92</span>     assertEquals(<span class="hljs-number">3</span>, monthCodeToQuarter(SEPTEMBER));
  <span class="hljs-number">93</span>     assertEquals(<span class="hljs-number">4</span>, monthCodeToQuarter(OCTOBER));
  <span class="hljs-number">94</span>     assertEquals(<span class="hljs-number">4</span>, monthCodeToQuarter(NOVEMBER));
  <span class="hljs-number">95</span>     assertEquals(<span class="hljs-number">4</span>, monthCodeToQuarter(DECEMBER));
  <span class="hljs-number">96</span> 
  <span class="hljs-number">97</span>     <span class="hljs-keyword">try</span> {
  <span class="hljs-number">98</span>       monthCodeToQuarter(-<span class="hljs-number">1</span>);
  <span class="hljs-number">99</span>       fail(<span class="hljs-string">&quot;Invalid Month Code should throw exception&quot;</span>);
 <span class="hljs-number">100</span>     } <span class="hljs-keyword">catch</span> (IllegalArgumentException e) {
 <span class="hljs-number">101</span>     }
 <span class="hljs-number">102</span>   }
 <span class="hljs-number">103</span> 
 <span class="hljs-number">104</span>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testMonthCodeToString</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception {
 <span class="hljs-number">105</span>     assertEquals(<span class="hljs-string">&quot;January&quot;</span>, monthCodeToString(JANUARY));
 <span class="hljs-number">106</span>     assertEquals(<span class="hljs-string">&quot;February&quot;</span>, monthCodeToString(FEBRUARY));
 <span class="hljs-number">107</span>     assertEquals(<span class="hljs-string">&quot;March&quot;</span>, monthCodeToString(MARCH));
 <span class="hljs-number">108</span>     assertEquals(<span class="hljs-string">&quot;April&quot;</span>, monthCodeToString(APRIL));
 <span class="hljs-number">109</span>     assertEquals(<span class="hljs-string">&quot;May&quot;</span>, monthCodeToString(MAY));
 <span class="hljs-number">110</span>     assertEquals(<span class="hljs-string">&quot;June&quot;</span>, monthCodeToString(JUNE));
 <span class="hljs-number">111</span>     assertEquals(<span class="hljs-string">&quot;July&quot;</span>, monthCodeToString(JULY));
 <span class="hljs-number">112</span>     assertEquals(<span class="hljs-string">&quot;August&quot;</span>, monthCodeToString(AUGUST));
 <span class="hljs-number">113</span>     assertEquals(<span class="hljs-string">&quot;September&quot;</span>, monthCodeToString(SEPTEMBER));
 <span class="hljs-number">114</span>     assertEquals(<span class="hljs-string">&quot;October&quot;</span>, monthCodeToString(OCTOBER));
 <span class="hljs-number">115</span>     assertEquals(<span class="hljs-string">&quot;November&quot;</span>, monthCodeToString(NOVEMBER));
 <span class="hljs-number">116</span>     assertEquals(<span class="hljs-string">&quot;December&quot;</span>, monthCodeToString(DECEMBER));
 <span class="hljs-number">117</span> 
 <span class="hljs-number">118</span>     assertEquals(<span class="hljs-string">&quot;Jan&quot;</span>, monthCodeToString(JANUARY, <span class="hljs-literal">true</span>));
 <span class="hljs-number">119</span>     assertEquals(<span class="hljs-string">&quot;Feb&quot;</span>, monthCodeToString(FEBRUARY, <span class="hljs-literal">true</span>));
 <span class="hljs-number">120</span>     assertEquals(<span class="hljs-string">&quot;Mar&quot;</span>, monthCodeToString(MARCH, <span class="hljs-literal">true</span>));
 <span class="hljs-number">121</span>     assertEquals(<span class="hljs-string">&quot;Apr&quot;</span>, monthCodeToString(APRIL, <span class="hljs-literal">true</span>));
 <span class="hljs-number">122</span>     assertEquals(<span class="hljs-string">&quot;May&quot;</span>, monthCodeToString(MAY, <span class="hljs-literal">true</span>));
 <span class="hljs-number">123</span>     assertEquals(<span class="hljs-string">&quot;Jun&quot;</span>, monthCodeToString(JUNE, <span class="hljs-literal">true</span>));
 <span class="hljs-number">124</span>     assertEquals(<span class="hljs-string">&quot;Jul&quot;</span>, monthCodeToString(JULY, <span class="hljs-literal">true</span>));
 <span class="hljs-number">125</span>     assertEquals(<span class="hljs-string">&quot;Aug&quot;</span>, monthCodeToString(AUGUST, <span class="hljs-literal">true</span>));
 <span class="hljs-number">126</span>     assertEquals(<span class="hljs-string">&quot;Sep&quot;</span>, monthCodeToString(SEPTEMBER, <span class="hljs-literal">true</span>));
 <span class="hljs-number">127</span>     assertEquals(<span class="hljs-string">&quot;Oct&quot;</span>, monthCodeToString(OCTOBER, <span class="hljs-literal">true</span>));
<span class="hljs-number">376</span>
 Appendix B: org.jfree.date.SerialDate
 Listing B-<span class="hljs-number">4</span> (continued)
 BobsSerialDateTest.java
 <span class="hljs-number">128</span>     assertEquals(<span class="hljs-string">&quot;Nov&quot;</span>, monthCodeToString(NOVEMBER, <span class="hljs-literal">true</span>));
 <span class="hljs-number">129</span>     assertEquals(<span class="hljs-string">&quot;Dec&quot;</span>, monthCodeToString(DECEMBER, <span class="hljs-literal">true</span>));
 <span class="hljs-number">130</span> 
 <span class="hljs-number">131</span>     <span class="hljs-keyword">try</span> {
 <span class="hljs-number">132</span>       monthCodeToString(-<span class="hljs-number">1</span>);
 <span class="hljs-number">133</span>       fail(<span class="hljs-string">&quot;Invalid month code should throw exception&quot;</span>);
 <span class="hljs-number">134</span>     } <span class="hljs-keyword">catch</span> (IllegalArgumentException e) {
 <span class="hljs-number">135</span>     }
 <span class="hljs-number">136</span> 
 <span class="hljs-number">137</span>   }
 <span class="hljs-number">138</span> 
 <span class="hljs-number">139</span>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testStringToMonthCode</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception {
 <span class="hljs-number">140</span>     assertEquals(JANUARY,stringToMonthCode(<span class="hljs-string">&quot;1&quot;</span>));
 <span class="hljs-number">141</span>     assertEquals(FEBRUARY,stringToMonthCode(<span class="hljs-string">&quot;2&quot;</span>));
 <span class="hljs-number">142</span>     assertEquals(MARCH,stringToMonthCode(<span class="hljs-string">&quot;3&quot;</span>));
 <span class="hljs-number">143</span>     assertEquals(APRIL,stringToMonthCode(<span class="hljs-string">&quot;4&quot;</span>));
 <span class="hljs-number">144</span>     assertEquals(MAY,stringToMonthCode(<span class="hljs-string">&quot;5&quot;</span>));
 <span class="hljs-number">145</span>     assertEquals(JUNE,stringToMonthCode(<span class="hljs-string">&quot;6&quot;</span>));
 <span class="hljs-number">146</span>     assertEquals(JULY,stringToMonthCode(<span class="hljs-string">&quot;7&quot;</span>));
 <span class="hljs-number">147</span>     assertEquals(AUGUST,stringToMonthCode(<span class="hljs-string">&quot;8&quot;</span>));
 <span class="hljs-number">148</span>     assertEquals(SEPTEMBER,stringToMonthCode(<span class="hljs-string">&quot;9&quot;</span>));
 <span class="hljs-number">149</span>     assertEquals(OCTOBER,stringToMonthCode(<span class="hljs-string">&quot;10&quot;</span>));
 <span class="hljs-number">150</span>     assertEquals(NOVEMBER, stringToMonthCode(<span class="hljs-string">&quot;11&quot;</span>));
 <span class="hljs-number">151</span>     assertEquals(DECEMBER,stringToMonthCode(<span class="hljs-string">&quot;12&quot;</span>));
 <span class="hljs-number">152</span> 
 <span class="hljs-number">153</span> <span class="hljs-comment">//todo    assertEquals(-1, stringToMonthCode(&quot;0&quot;));</span>
 <span class="hljs-number">154</span> <span class="hljs-comment">//    assertEquals(-1, stringToMonthCode(&quot;13&quot;));</span>
 <span class="hljs-number">155</span> 
 <span class="hljs-number">156</span>     assertEquals(-<span class="hljs-number">1</span>,stringToMonthCode(<span class="hljs-string">&quot;Hello&quot;</span>));
 <span class="hljs-number">157</span> 
 <span class="hljs-number">158</span>     <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">m</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; m &lt;= <span class="hljs-number">12</span>; m++) {
 <span class="hljs-number">159</span>       assertEquals(m, stringToMonthCode(monthCodeToString(m, <span class="hljs-literal">false</span>)));
 <span class="hljs-number">160</span>       assertEquals(m, stringToMonthCode(monthCodeToString(m, <span class="hljs-literal">true</span>)));
 <span class="hljs-number">161</span>     }
 <span class="hljs-number">162</span> 
 <span class="hljs-number">163</span> <span class="hljs-comment">//    assertEquals(1,stringToMonthCode(&quot;jan&quot;));</span>
 <span class="hljs-number">164</span> <span class="hljs-comment">//    assertEquals(2,stringToMonthCode(&quot;feb&quot;));</span>
 <span class="hljs-number">165</span> <span class="hljs-comment">//    assertEquals(3,stringToMonthCode(&quot;mar&quot;));</span>
 <span class="hljs-number">166</span> <span class="hljs-comment">//    assertEquals(4,stringToMonthCode(&quot;apr&quot;));</span>
 <span class="hljs-number">167</span> <span class="hljs-comment">//    assertEquals(5,stringToMonthCode(&quot;may&quot;));</span>
 <span class="hljs-number">168</span> <span class="hljs-comment">//    assertEquals(6,stringToMonthCode(&quot;jun&quot;));</span>
 <span class="hljs-number">169</span> <span class="hljs-comment">//    assertEquals(7,stringToMonthCode(&quot;jul&quot;));</span>
 <span class="hljs-number">170</span> <span class="hljs-comment">//    assertEquals(8,stringToMonthCode(&quot;aug&quot;));</span>
 <span class="hljs-number">171</span> <span class="hljs-comment">//    assertEquals(9,stringToMonthCode(&quot;sep&quot;));</span>
 <span class="hljs-number">172</span> <span class="hljs-comment">//    assertEquals(10,stringToMonthCode(&quot;oct&quot;));</span>
 <span class="hljs-number">173</span> <span class="hljs-comment">//    assertEquals(11,stringToMonthCode(&quot;nov&quot;));</span>
 <span class="hljs-number">174</span> <span class="hljs-comment">//    assertEquals(12,stringToMonthCode(&quot;dec&quot;));</span>
 <span class="hljs-number">175</span> 
 <span class="hljs-number">176</span> <span class="hljs-comment">//    assertEquals(1,stringToMonthCode(&quot;JAN&quot;));</span>
 <span class="hljs-number">177</span> <span class="hljs-comment">//    assertEquals(2,stringToMonthCode(&quot;FEB&quot;));</span>
 <span class="hljs-number">178</span> <span class="hljs-comment">//    assertEquals(3,stringToMonthCode(&quot;MAR&quot;));</span>
 <span class="hljs-number">179</span> <span class="hljs-comment">//    assertEquals(4,stringToMonthCode(&quot;APR&quot;));</span>
 <span class="hljs-number">180</span> <span class="hljs-comment">//    assertEquals(5,stringToMonthCode(&quot;MAY&quot;));</span>
 <span class="hljs-number">181</span> <span class="hljs-comment">//    assertEquals(6,stringToMonthCode(&quot;JUN&quot;));</span>
 <span class="hljs-number">182</span> <span class="hljs-comment">//    assertEquals(7,stringToMonthCode(&quot;JUL&quot;));</span>
 <span class="hljs-number">183</span> <span class="hljs-comment">//    assertEquals(8,stringToMonthCode(&quot;AUG&quot;));</span>
 <span class="hljs-number">184</span> <span class="hljs-comment">//    assertEquals(9,stringToMonthCode(&quot;SEP&quot;));</span>
 <span class="hljs-number">185</span> <span class="hljs-comment">//    assertEquals(10,stringToMonthCode(&quot;OCT&quot;));</span>
 <span class="hljs-number">186</span> <span class="hljs-comment">//    assertEquals(11,stringToMonthCode(&quot;NOV&quot;));</span>
 <span class="hljs-number">187</span> <span class="hljs-comment">//    assertEquals(12,stringToMonthCode(&quot;DEC&quot;));</span>
 <span class="hljs-number">188</span> 
 <span class="hljs-number">189</span> <span class="hljs-comment">//    assertEquals(1,stringToMonthCode(&quot;january&quot;));</span>
 <span class="hljs-number">190</span> <span class="hljs-comment">//    assertEquals(2,stringToMonthCode(&quot;february&quot;));</span>
Appendix B: org.jfree.date.SerialDate
 <span class="hljs-number">377</span>
 Listing B-<span class="hljs-number">4</span> (continued)
 BobsSerialDateTest.java
 <span class="hljs-number">191</span> <span class="hljs-comment">//    assertEquals(3,stringToMonthCode(&quot;march&quot;));</span>
 <span class="hljs-number">192</span> <span class="hljs-comment">//    assertEquals(4,stringToMonthCode(&quot;april&quot;));</span>
 <span class="hljs-number">193</span> <span class="hljs-comment">//    assertEquals(5,stringToMonthCode(&quot;may&quot;));</span>
 <span class="hljs-number">194</span> <span class="hljs-comment">//    assertEquals(6,stringToMonthCode(&quot;june&quot;));</span>
 <span class="hljs-number">195</span> <span class="hljs-comment">//    assertEquals(7,stringToMonthCode(&quot;july&quot;));</span>
 <span class="hljs-number">196</span> <span class="hljs-comment">//    assertEquals(8,stringToMonthCode(&quot;august&quot;));</span>
 <span class="hljs-number">197</span> <span class="hljs-comment">//    assertEquals(9,stringToMonthCode(&quot;september&quot;));</span>
 <span class="hljs-number">198</span> <span class="hljs-comment">//    assertEquals(10,stringToMonthCode(&quot;october&quot;));</span>
 <span class="hljs-number">199</span> <span class="hljs-comment">//    assertEquals(11,stringToMonthCode(&quot;november&quot;));</span>
 <span class="hljs-number">200</span> <span class="hljs-comment">//    assertEquals(12,stringToMonthCode(&quot;december&quot;));</span>
 <span class="hljs-number">201</span> 
 <span class="hljs-number">202</span> <span class="hljs-comment">//    assertEquals(1,stringToMonthCode(&quot;JANUARY&quot;));</span>
 <span class="hljs-number">203</span> <span class="hljs-comment">//    assertEquals(2,stringToMonthCode(&quot;FEBRUARY&quot;));</span>
 <span class="hljs-number">204</span> <span class="hljs-comment">//    assertEquals(3,stringToMonthCode(&quot;MAR&quot;));</span>
 <span class="hljs-number">205</span> <span class="hljs-comment">//    assertEquals(4,stringToMonthCode(&quot;APRIL&quot;));</span>
 <span class="hljs-number">206</span> <span class="hljs-comment">//    assertEquals(5,stringToMonthCode(&quot;MAY&quot;));</span>
 <span class="hljs-number">207</span> <span class="hljs-comment">//    assertEquals(6,stringToMonthCode(&quot;JUNE&quot;));</span>
 <span class="hljs-number">208</span> <span class="hljs-comment">//    assertEquals(7,stringToMonthCode(&quot;JULY&quot;));</span>
 <span class="hljs-number">209</span> <span class="hljs-comment">//    assertEquals(8,stringToMonthCode(&quot;AUGUST&quot;));</span>
 <span class="hljs-number">210</span> <span class="hljs-comment">//    assertEquals(9,stringToMonthCode(&quot;SEPTEMBER&quot;));</span>
 <span class="hljs-number">211</span> <span class="hljs-comment">//    assertEquals(10,stringToMonthCode(&quot;OCTOBER&quot;));</span>
 <span class="hljs-number">212</span> <span class="hljs-comment">//    assertEquals(11,stringToMonthCode(&quot;NOVEMBER&quot;));</span>
 <span class="hljs-number">213</span> <span class="hljs-comment">//    assertEquals(12,stringToMonthCode(&quot;DECEMBER&quot;));</span>
 <span class="hljs-number">214</span>   }
 <span class="hljs-number">215</span> 
 <span class="hljs-number">216</span>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testIsValidWeekInMonthCode</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception {
 <span class="hljs-number">217</span>     <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">w</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; w &lt;= <span class="hljs-number">4</span>; w++) {
 <span class="hljs-number">218</span>       assertTrue(isValidWeekInMonthCode(w));
 <span class="hljs-number">219</span>     }
 <span class="hljs-number">220</span>     assertFalse(isValidWeekInMonthCode(<span class="hljs-number">5</span>));
 <span class="hljs-number">221</span>   }
 <span class="hljs-number">222</span> 
 <span class="hljs-number">223</span>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testIsLeapYear</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception {
 <span class="hljs-number">224</span>     assertFalse(isLeapYear(<span class="hljs-number">1900</span>));
 <span class="hljs-number">225</span>     assertFalse(isLeapYear(<span class="hljs-number">1901</span>));
 <span class="hljs-number">226</span>     assertFalse(isLeapYear(<span class="hljs-number">1902</span>));
 <span class="hljs-number">227</span>     assertFalse(isLeapYear(<span class="hljs-number">1903</span>));
 <span class="hljs-number">228</span>     assertTrue(isLeapYear(<span class="hljs-number">1904</span>));
 <span class="hljs-number">229</span>     assertTrue(isLeapYear(<span class="hljs-number">1908</span>));
 <span class="hljs-number">230</span>     assertFalse(isLeapYear(<span class="hljs-number">1955</span>));
 <span class="hljs-number">231</span>     assertTrue(isLeapYear(<span class="hljs-number">1964</span>));
 <span class="hljs-number">232</span>     assertTrue(isLeapYear(<span class="hljs-number">1980</span>));
 <span class="hljs-number">233</span>     assertTrue(isLeapYear(<span class="hljs-number">2000</span>));
 <span class="hljs-number">234</span>     assertFalse(isLeapYear(<span class="hljs-number">2001</span>));
 <span class="hljs-number">235</span>     assertFalse(isLeapYear(<span class="hljs-number">2100</span>));
 <span class="hljs-number">236</span>   }
 <span class="hljs-number">237</span> 
 <span class="hljs-number">238</span>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testLeapYearCount</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception {
 <span class="hljs-number">239</span>     assertEquals(<span class="hljs-number">0</span>, leapYearCount(<span class="hljs-number">1900</span>));
 <span class="hljs-number">240</span>     assertEquals(<span class="hljs-number">0</span>, leapYearCount(<span class="hljs-number">1901</span>));
 <span class="hljs-number">241</span>     assertEquals(<span class="hljs-number">0</span>, leapYearCount(<span class="hljs-number">1902</span>));
 <span class="hljs-number">242</span>     assertEquals(<span class="hljs-number">0</span>, leapYearCount(<span class="hljs-number">1903</span>));
 <span class="hljs-number">243</span>     assertEquals(<span class="hljs-number">1</span>, leapYearCount(<span class="hljs-number">1904</span>));
 <span class="hljs-number">244</span>     assertEquals(<span class="hljs-number">1</span>, leapYearCount(<span class="hljs-number">1905</span>));
 <span class="hljs-number">245</span>     assertEquals(<span class="hljs-number">1</span>, leapYearCount(<span class="hljs-number">1906</span>));
 <span class="hljs-number">246</span>     assertEquals(<span class="hljs-number">1</span>, leapYearCount(<span class="hljs-number">1907</span>));
 <span class="hljs-number">247</span>     assertEquals(<span class="hljs-number">2</span>, leapYearCount(<span class="hljs-number">1908</span>));
 <span class="hljs-number">248</span>     assertEquals(<span class="hljs-number">24</span>, leapYearCount(<span class="hljs-number">1999</span>));
 <span class="hljs-number">249</span>     assertEquals(<span class="hljs-number">25</span>, leapYearCount(<span class="hljs-number">2001</span>));
 <span class="hljs-number">250</span>     assertEquals(<span class="hljs-number">49</span>, leapYearCount(<span class="hljs-number">2101</span>));
 <span class="hljs-number">251</span>     assertEquals(<span class="hljs-number">73</span>, leapYearCount(<span class="hljs-number">2201</span>));
<span class="hljs-number">378</span>
 Appendix B: org.jfree.date.SerialDate
 Listing B-<span class="hljs-number">4</span> (continued)
 BobsSerialDateTest.java
 <span class="hljs-number">252</span>     assertEquals(<span class="hljs-number">97</span>, leapYearCount(<span class="hljs-number">2301</span>));
 <span class="hljs-number">253</span>     assertEquals(<span class="hljs-number">122</span>, leapYearCount(<span class="hljs-number">2401</span>));
 <span class="hljs-number">254</span>   }
 <span class="hljs-number">255</span> 
 <span class="hljs-number">256</span>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testLastDayOfMonth</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception {
 <span class="hljs-number">257</span>     assertEquals(<span class="hljs-number">31</span>, lastDayOfMonth(JANUARY, <span class="hljs-number">1901</span>));
 <span class="hljs-number">258</span>     assertEquals(<span class="hljs-number">28</span>, lastDayOfMonth(FEBRUARY, <span class="hljs-number">1901</span>));
 <span class="hljs-number">259</span>     assertEquals(<span class="hljs-number">31</span>, lastDayOfMonth(MARCH, <span class="hljs-number">1901</span>));
 <span class="hljs-number">260</span>     assertEquals(<span class="hljs-number">30</span>, lastDayOfMonth(APRIL, <span class="hljs-number">1901</span>));
 <span class="hljs-number">261</span>     assertEquals(<span class="hljs-number">31</span>, lastDayOfMonth(MAY, <span class="hljs-number">1901</span>));
 <span class="hljs-number">262</span>     assertEquals(<span class="hljs-number">30</span>, lastDayOfMonth(JUNE, <span class="hljs-number">1901</span>));
 <span class="hljs-number">263</span>     assertEquals(<span class="hljs-number">31</span>, lastDayOfMonth(JULY, <span class="hljs-number">1901</span>));
 <span class="hljs-number">264</span>     assertEquals(<span class="hljs-number">31</span>, lastDayOfMonth(AUGUST, <span class="hljs-number">1901</span>));
 <span class="hljs-number">265</span>     assertEquals(<span class="hljs-number">30</span>, lastDayOfMonth(SEPTEMBER, <span class="hljs-number">1901</span>));
 <span class="hljs-number">266</span>     assertEquals(<span class="hljs-number">31</span>, lastDayOfMonth(OCTOBER, <span class="hljs-number">1901</span>));
 <span class="hljs-number">267</span>     assertEquals(<span class="hljs-number">30</span>, lastDayOfMonth(NOVEMBER, <span class="hljs-number">1901</span>));
 <span class="hljs-number">268</span>     assertEquals(<span class="hljs-number">31</span>, lastDayOfMonth(DECEMBER, <span class="hljs-number">1901</span>));
 <span class="hljs-number">269</span>     assertEquals(<span class="hljs-number">29</span>, lastDayOfMonth(FEBRUARY, <span class="hljs-number">1904</span>));
 <span class="hljs-number">270</span>   }
 <span class="hljs-number">271</span> 
 <span class="hljs-number">272</span>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testAddDays</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception {
 <span class="hljs-number">273</span>     <span class="hljs-type">SerialDate</span> <span class="hljs-variable">newYears</span> <span class="hljs-operator">=</span> d(<span class="hljs-number">1</span>, JANUARY, <span class="hljs-number">1900</span>);
 <span class="hljs-number">274</span>     assertEquals(d(<span class="hljs-number">2</span>, JANUARY, <span class="hljs-number">1900</span>), addDays(<span class="hljs-number">1</span>, newYears));
 <span class="hljs-number">275</span>     assertEquals(d(<span class="hljs-number">1</span>, FEBRUARY, <span class="hljs-number">1900</span>), addDays(<span class="hljs-number">31</span>, newYears));
 <span class="hljs-number">276</span>     assertEquals(d(<span class="hljs-number">1</span>, JANUARY, <span class="hljs-number">1901</span>), addDays(<span class="hljs-number">365</span>, newYears));
 <span class="hljs-number">277</span>     assertEquals(d(<span class="hljs-number">31</span>, DECEMBER, <span class="hljs-number">1904</span>), addDays(<span class="hljs-number">5</span> * <span class="hljs-number">365</span>, newYears));
 <span class="hljs-number">278</span>   }
 <span class="hljs-number">279</span> 
 <span class="hljs-number">280</span>   <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> SpreadsheetDate <span class="hljs-title function_">d</span><span class="hljs-params">(<span class="hljs-type">int</span> day, <span class="hljs-type">int</span> month, <span class="hljs-type">int</span> year)</span> {<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> 
<span class="hljs-title class_">SpreadsheetDate</span>(day, month, year);}
 <span class="hljs-number">281</span> 
 <span class="hljs-number">282</span>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testAddMonths</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception {
 <span class="hljs-number">283</span>     assertEquals(d(<span class="hljs-number">1</span>, FEBRUARY, <span class="hljs-number">1900</span>), addMonths(<span class="hljs-number">1</span>, d(<span class="hljs-number">1</span>, JANUARY, <span class="hljs-number">1900</span>)));
 <span class="hljs-number">284</span>     assertEquals(d(<span class="hljs-number">28</span>, FEBRUARY, <span class="hljs-number">1900</span>), addMonths(<span class="hljs-number">1</span>, d(<span class="hljs-number">31</span>, JANUARY, <span class="hljs-number">1900</span>)));
 <span class="hljs-number">285</span>     assertEquals(d(<span class="hljs-number">28</span>, FEBRUARY, <span class="hljs-number">1900</span>), addMonths(<span class="hljs-number">1</span>, d(<span class="hljs-number">30</span>, JANUARY, <span class="hljs-number">1900</span>)));
 <span class="hljs-number">286</span>     assertEquals(d(<span class="hljs-number">28</span>, FEBRUARY, <span class="hljs-number">1900</span>), addMonths(<span class="hljs-number">1</span>, d(<span class="hljs-number">29</span>, JANUARY, <span class="hljs-number">1900</span>)));
 <span class="hljs-number">287</span>     assertEquals(d(<span class="hljs-number">28</span>, FEBRUARY, <span class="hljs-number">1900</span>), addMonths(<span class="hljs-number">1</span>, d(<span class="hljs-number">28</span>, JANUARY, <span class="hljs-number">1900</span>)));
 <span class="hljs-number">288</span>     assertEquals(d(<span class="hljs-number">27</span>, FEBRUARY, <span class="hljs-number">1900</span>), addMonths(<span class="hljs-number">1</span>, d(<span class="hljs-number">27</span>, JANUARY, <span class="hljs-number">1900</span>)));
 <span class="hljs-number">289</span> 
 <span class="hljs-number">290</span>     assertEquals(d(<span class="hljs-number">30</span>, JUNE, <span class="hljs-number">1900</span>), addMonths(<span class="hljs-number">5</span>, d(<span class="hljs-number">31</span>, JANUARY, <span class="hljs-number">1900</span>)));
 <span class="hljs-number">291</span>     assertEquals(d(<span class="hljs-number">30</span>, JUNE, <span class="hljs-number">1901</span>), addMonths(<span class="hljs-number">17</span>, d(<span class="hljs-number">31</span>, JANUARY, <span class="hljs-number">1900</span>)));
 <span class="hljs-number">292</span> 
 <span class="hljs-number">293</span>     assertEquals(d(<span class="hljs-number">29</span>, FEBRUARY, <span class="hljs-number">1904</span>), addMonths(<span class="hljs-number">49</span>, d(<span class="hljs-number">31</span>, JANUARY, <span class="hljs-number">1900</span>)));
 <span class="hljs-number">294</span> 
 <span class="hljs-number">295</span>   }
 <span class="hljs-number">296</span> 
 <span class="hljs-number">297</span>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testAddYears</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception {
 <span class="hljs-number">298</span>     assertEquals(d(<span class="hljs-number">1</span>, JANUARY, <span class="hljs-number">1901</span>), addYears(<span class="hljs-number">1</span>, d(<span class="hljs-number">1</span>, JANUARY, <span class="hljs-number">1900</span>)));
 <span class="hljs-number">299</span>     assertEquals(d(<span class="hljs-number">28</span>, FEBRUARY, <span class="hljs-number">1905</span>), addYears(<span class="hljs-number">1</span>, d(<span class="hljs-number">29</span>, FEBRUARY, <span class="hljs-number">1904</span>)));
 <span class="hljs-number">300</span>     assertEquals(d(<span class="hljs-number">28</span>, FEBRUARY, <span class="hljs-number">1905</span>), addYears(<span class="hljs-number">1</span>, d(<span class="hljs-number">28</span>, FEBRUARY, <span class="hljs-number">1904</span>)));
 <span class="hljs-number">301</span>     assertEquals(d(<span class="hljs-number">28</span>, FEBRUARY, <span class="hljs-number">1904</span>), addYears(<span class="hljs-number">1</span>, d(<span class="hljs-number">28</span>, FEBRUARY, <span class="hljs-number">1903</span>)));
 <span class="hljs-number">302</span>   }
 <span class="hljs-number">303</span> 
 <span class="hljs-number">304</span>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testGetPreviousDayOfWeek</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception {
 <span class="hljs-number">305</span>     assertEquals(d(<span class="hljs-number">24</span>, FEBRUARY, <span class="hljs-number">2006</span>), getPreviousDayOfWeek(FRIDAY, d(<span class="hljs-number">1</span>, MARCH, <span class="hljs-number">2006</span>)));
 <span class="hljs-number">306</span>     assertEquals(d(<span class="hljs-number">22</span>, FEBRUARY, <span class="hljs-number">2006</span>), getPreviousDayOfWeek(WEDNESDAY, d(<span class="hljs-number">1</span>, MARCH, <span class="hljs-number">2006</span>)));
 <span class="hljs-number">307</span>     assertEquals(d(<span class="hljs-number">29</span>, FEBRUARY, <span class="hljs-number">2004</span>), getPreviousDayOfWeek(SUNDAY, d(<span class="hljs-number">3</span>, MARCH, <span class="hljs-number">2004</span>)));
 <span class="hljs-number">308</span>     assertEquals(d(<span class="hljs-number">29</span>, DECEMBER, <span class="hljs-number">2004</span>), getPreviousDayOfWeek(WEDNESDAY, d(<span class="hljs-number">5</span>, JANUARY, <span class="hljs-number">2005</span>)));
 <span class="hljs-number">309</span> 
 <span class="hljs-number">310</span>     <span class="hljs-keyword">try</span> {
 <span class="hljs-number">311</span>       getPreviousDayOfWeek(-<span class="hljs-number">1</span>, d(<span class="hljs-number">1</span>, JANUARY, <span class="hljs-number">2006</span>));
 <span class="hljs-number">312</span>       fail(<span class="hljs-string">&quot;Invalid day of week code should throw exception&quot;</span>);
Appendix B: org.jfree.date.SerialDate
 <span class="hljs-number">379</span>
 Listing B-<span class="hljs-number">4</span> (continued)
 BobsSerialDateTest.java
 <span class="hljs-number">313</span>     } <span class="hljs-keyword">catch</span> (IllegalArgumentException e) {
 <span class="hljs-number">314</span>     }
 <span class="hljs-number">315</span>   }
 <span class="hljs-number">316</span> 
 <span class="hljs-number">317</span>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testGetFollowingDayOfWeek</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception {
 <span class="hljs-number">318</span> <span class="hljs-comment">// </span>
   assertEquals(d(<span class="hljs-number">1</span>, JANUARY, <span class="hljs-number">2005</span>),getFollowingDayOfWeek(SATURDAY, d(<span class="hljs-number">25</span>, DECEMBER, <span class="hljs-number">2004</span>)));
 <span class="hljs-number">319</span>     assertEquals(d(<span class="hljs-number">1</span>, JANUARY, <span class="hljs-number">2005</span>), getFollowingDayOfWeek(SATURDAY, d(<span class="hljs-number">26</span>, DECEMBER, <span class="hljs-number">2004</span>)));
 <span class="hljs-number">320</span>     assertEquals(d(<span class="hljs-number">3</span>, MARCH, <span class="hljs-number">2004</span>), getFollowingDayOfWeek(WEDNESDAY, d(<span class="hljs-number">28</span>, FEBRUARY, <span class="hljs-number">2004</span>)));
 <span class="hljs-number">321</span> 
 <span class="hljs-number">322</span>     <span class="hljs-keyword">try</span> {
 <span class="hljs-number">323</span>       getFollowingDayOfWeek(-<span class="hljs-number">1</span>, d(<span class="hljs-number">1</span>, JANUARY, <span class="hljs-number">2006</span>));
 <span class="hljs-number">324</span>       fail(<span class="hljs-string">&quot;Invalid day of week code should throw exception&quot;</span>);
 <span class="hljs-number">325</span>     } <span class="hljs-keyword">catch</span> (IllegalArgumentException e) {
 <span class="hljs-number">326</span>     }
 <span class="hljs-number">327</span>   }
 <span class="hljs-number">328</span> 
 <span class="hljs-number">329</span>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testGetNearestDayOfWeek</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception {
 <span class="hljs-number">330</span>     assertEquals(d(<span class="hljs-number">16</span>, APRIL, <span class="hljs-number">2006</span>), getNearestDayOfWeek(SUNDAY, d(<span class="hljs-number">16</span>, APRIL, <span class="hljs-number">2006</span>)));
 <span class="hljs-number">331</span>     assertEquals(d(<span class="hljs-number">16</span>, APRIL, <span class="hljs-number">2006</span>), getNearestDayOfWeek(SUNDAY, d(<span class="hljs-number">17</span>, APRIL, <span class="hljs-number">2006</span>)));
 <span class="hljs-number">332</span>     assertEquals(d(<span class="hljs-number">16</span>, APRIL, <span class="hljs-number">2006</span>), getNearestDayOfWeek(SUNDAY, d(<span class="hljs-number">18</span>, APRIL, <span class="hljs-number">2006</span>)));
 <span class="hljs-number">333</span>     assertEquals(d(<span class="hljs-number">16</span>, APRIL, <span class="hljs-number">2006</span>), getNearestDayOfWeek(SUNDAY, d(<span class="hljs-number">19</span>, APRIL, <span class="hljs-number">2006</span>)));
 <span class="hljs-number">334</span>     assertEquals(d(<span class="hljs-number">23</span>, APRIL, <span class="hljs-number">2006</span>), getNearestDayOfWeek(SUNDAY, d(<span class="hljs-number">20</span>, APRIL, <span class="hljs-number">2006</span>)));
 <span class="hljs-number">335</span>     assertEquals(d(<span class="hljs-number">23</span>, APRIL, <span class="hljs-number">2006</span>), getNearestDayOfWeek(SUNDAY, d(<span class="hljs-number">21</span>, APRIL, <span class="hljs-number">2006</span>)));
 <span class="hljs-number">336</span>     assertEquals(d(<span class="hljs-number">23</span>, APRIL, <span class="hljs-number">2006</span>), getNearestDayOfWeek(SUNDAY, d(<span class="hljs-number">22</span>, APRIL, <span class="hljs-number">2006</span>)));
 <span class="hljs-number">337</span> 
 <span class="hljs-number">338</span> <span class="hljs-comment">//todo    assertEquals(d(17, APRIL, 2006), getNearestDayOfWeek(MONDAY, d(16, APRIL, 2006)));</span>
 <span class="hljs-number">339</span>     assertEquals(d(<span class="hljs-number">17</span>, APRIL, <span class="hljs-number">2006</span>), getNearestDayOfWeek(MONDAY, d(<span class="hljs-number">17</span>, APRIL, <span class="hljs-number">2006</span>)));
 <span class="hljs-number">340</span>     assertEquals(d(<span class="hljs-number">17</span>, APRIL, <span class="hljs-number">2006</span>), getNearestDayOfWeek(MONDAY, d(<span class="hljs-number">18</span>, APRIL, <span class="hljs-number">2006</span>)));
 <span class="hljs-number">341</span>     assertEquals(d(<span class="hljs-number">17</span>, APRIL, <span class="hljs-number">2006</span>), getNearestDayOfWeek(MONDAY, d(<span class="hljs-number">19</span>, APRIL, <span class="hljs-number">2006</span>)));
 <span class="hljs-number">342</span>     assertEquals(d(<span class="hljs-number">17</span>, APRIL, <span class="hljs-number">2006</span>), getNearestDayOfWeek(MONDAY, d(<span class="hljs-number">20</span>, APRIL, <span class="hljs-number">2006</span>)));
 <span class="hljs-number">343</span>     assertEquals(d(<span class="hljs-number">24</span>, APRIL, <span class="hljs-number">2006</span>), getNearestDayOfWeek(MONDAY, d(<span class="hljs-number">21</span>, APRIL, <span class="hljs-number">2006</span>)));
 <span class="hljs-number">344</span>     assertEquals(d(<span class="hljs-number">24</span>, APRIL, <span class="hljs-number">2006</span>), getNearestDayOfWeek(MONDAY, d(<span class="hljs-number">22</span>, APRIL, <span class="hljs-number">2006</span>)));
 <span class="hljs-number">345</span> 
 <span class="hljs-number">346</span> <span class="hljs-comment">//    assertEquals(d(18, APRIL, 2006), getNearestDayOfWeek(TUESDAY, d(16, APRIL, 2006)));</span>
 <span class="hljs-number">347</span> <span class="hljs-comment">//    assertEquals(d(18, APRIL, 2006), getNearestDayOfWeek(TUESDAY, d(17, APRIL, 2006)));</span>
 <span class="hljs-number">348</span>     assertEquals(d(<span class="hljs-number">18</span>, APRIL, <span class="hljs-number">2006</span>), getNearestDayOfWeek(TUESDAY, d(<span class="hljs-number">18</span>, APRIL, <span class="hljs-number">2006</span>)));
 <span class="hljs-number">349</span>     assertEquals(d(<span class="hljs-number">18</span>, APRIL, <span class="hljs-number">2006</span>), getNearestDayOfWeek(TUESDAY, d(<span class="hljs-number">19</span>, APRIL, <span class="hljs-number">2006</span>)));
 <span class="hljs-number">350</span>     assertEquals(d(<span class="hljs-number">18</span>, APRIL, <span class="hljs-number">2006</span>), getNearestDayOfWeek(TUESDAY, d(<span class="hljs-number">20</span>, APRIL, <span class="hljs-number">2006</span>)));
 <span class="hljs-number">351</span>     assertEquals(d(<span class="hljs-number">18</span>, APRIL, <span class="hljs-number">2006</span>), getNearestDayOfWeek(TUESDAY, d(<span class="hljs-number">21</span>, APRIL, <span class="hljs-number">2006</span>)));
 <span class="hljs-number">352</span>     assertEquals(d(<span class="hljs-number">25</span>, APRIL, <span class="hljs-number">2006</span>), getNearestDayOfWeek(TUESDAY, d(<span class="hljs-number">22</span>, APRIL, <span class="hljs-number">2006</span>)));
 <span class="hljs-number">353</span> 
 <span class="hljs-number">354</span> <span class="hljs-comment">//    assertEquals(d(19, APRIL, 2006), getNearestDayOfWeek(WEDNESDAY, d(16, APRIL, 2006)));</span>
 <span class="hljs-number">355</span> <span class="hljs-comment">//    assertEquals(d(19, APRIL, 2006), getNearestDayOfWeek(WEDNESDAY, d(17, APRIL, 2006)));</span>
 <span class="hljs-number">356</span> <span class="hljs-comment">//    assertEquals(d(19, APRIL, 2006), getNearestDayOfWeek(WEDNESDAY, d(18, APRIL, 2006)));</span>
 <span class="hljs-number">357</span>     assertEquals(d(<span class="hljs-number">19</span>, APRIL, <span class="hljs-number">2006</span>), getNearestDayOfWeek(WEDNESDAY, d(<span class="hljs-number">19</span>, APRIL, <span class="hljs-number">2006</span>)));
 <span class="hljs-number">358</span>     assertEquals(d(<span class="hljs-number">19</span>, APRIL, <span class="hljs-number">2006</span>), getNearestDayOfWeek(WEDNESDAY, d(<span class="hljs-number">20</span>, APRIL, <span class="hljs-number">2006</span>)));
 <span class="hljs-number">359</span>     assertEquals(d(<span class="hljs-number">19</span>, APRIL, <span class="hljs-number">2006</span>), getNearestDayOfWeek(WEDNESDAY, d(<span class="hljs-number">21</span>, APRIL, <span class="hljs-number">2006</span>)));
 <span class="hljs-number">360</span>     assertEquals(d(<span class="hljs-number">19</span>, APRIL, <span class="hljs-number">2006</span>), getNearestDayOfWeek(WEDNESDAY, d(<span class="hljs-number">22</span>, APRIL, <span class="hljs-number">2006</span>)));
 <span class="hljs-number">361</span> 
 <span class="hljs-number">362</span> <span class="hljs-comment">//    assertEquals(d(13, APRIL, 2006), getNearestDayOfWeek(THURSDAY, d(16, APRIL, 2006)));</span>
 <span class="hljs-number">363</span> <span class="hljs-comment">//    assertEquals(d(20, APRIL, 2006), getNearestDayOfWeek(THURSDAY, d(17, APRIL, 2006)));</span>
 <span class="hljs-number">364</span> <span class="hljs-comment">//    assertEquals(d(20, APRIL, 2006), getNearestDayOfWeek(THURSDAY, d(18, APRIL, 2006)));</span>
 <span class="hljs-number">365</span> <span class="hljs-comment">//    assertEquals(d(20, APRIL, 2006), getNearestDayOfWeek(THURSDAY, d(19, APRIL, 2006)));</span>
 <span class="hljs-number">366</span>     assertEquals(d(<span class="hljs-number">20</span>, APRIL, <span class="hljs-number">2006</span>), getNearestDayOfWeek(THURSDAY, d(<span class="hljs-number">20</span>, APRIL, <span class="hljs-number">2006</span>)));
 <span class="hljs-number">367</span>     assertEquals(d(<span class="hljs-number">20</span>, APRIL, <span class="hljs-number">2006</span>), getNearestDayOfWeek(THURSDAY, d(<span class="hljs-number">21</span>, APRIL, <span class="hljs-number">2006</span>)));
 <span class="hljs-number">368</span>     assertEquals(d(<span class="hljs-number">20</span>, APRIL, <span class="hljs-number">2006</span>), getNearestDayOfWeek(THURSDAY, d(<span class="hljs-number">22</span>, APRIL, <span class="hljs-number">2006</span>)));
 <span class="hljs-number">369</span> 
 <span class="hljs-number">370</span> <span class="hljs-comment">//    assertEquals(d(14, APRIL, 2006), getNearestDayOfWeek(FRIDAY, d(16, APRIL, 2006)));</span>
 <span class="hljs-number">371</span> <span class="hljs-comment">//    assertEquals(d(14, APRIL, 2006), getNearestDayOfWeek(FRIDAY, d(17, APRIL, 2006)));</span>
 <span class="hljs-number">372</span> <span class="hljs-comment">//    assertEquals(d(21, APRIL, 2006), getNearestDayOfWeek(FRIDAY, d(18, APRIL, 2006)));</span>
 <span class="hljs-number">373</span> <span class="hljs-comment">//    assertEquals(d(21, APRIL, 2006), getNearestDayOfWeek(FRIDAY, d(19, APRIL, 2006)));</span>
 <span class="hljs-number">374</span> <span class="hljs-comment">//    assertEquals(d(21, APRIL, 2006), getNearestDayOfWeek(FRIDAY, d(20, APRIL, 2006)));</span>
<span class="hljs-number">380</span>
 Appendix B: org.jfree.date.SerialDate
 Listing B-<span class="hljs-number">4</span> (continued)
 BobsSerialDateTest.java
 <span class="hljs-number">375</span>     assertEquals(d(<span class="hljs-number">21</span>, APRIL, <span class="hljs-number">2006</span>), getNearestDayOfWeek(FRIDAY, d(<span class="hljs-number">21</span>, APRIL, <span class="hljs-number">2006</span>)));
 <span class="hljs-number">376</span>     assertEquals(d(<span class="hljs-number">21</span>, APRIL, <span class="hljs-number">2006</span>), getNearestDayOfWeek(FRIDAY, d(<span class="hljs-number">22</span>, APRIL, <span class="hljs-number">2006</span>)));
 <span class="hljs-number">377</span> 
 <span class="hljs-number">378</span> <span class="hljs-comment">//    assertEquals(d(15, APRIL, 2006), getNearestDayOfWeek(SATURDAY, d(16, APRIL, 2006)));</span>
 <span class="hljs-number">379</span> <span class="hljs-comment">//    assertEquals(d(15, APRIL, 2006), getNearestDayOfWeek(SATURDAY, d(17, APRIL, 2006)));</span>
 <span class="hljs-number">380</span> <span class="hljs-comment">//    assertEquals(d(15, APRIL, 2006), getNearestDayOfWeek(SATURDAY, d(18, APRIL, 2006)));</span>
 <span class="hljs-number">381</span> <span class="hljs-comment">//    assertEquals(d(22, APRIL, 2006), getNearestDayOfWeek(SATURDAY, d(19, APRIL, 2006)));</span>
 <span class="hljs-number">382</span> <span class="hljs-comment">//    assertEquals(d(22, APRIL, 2006), getNearestDayOfWeek(SATURDAY, d(20, APRIL, 2006)));</span>
 <span class="hljs-number">383</span> <span class="hljs-comment">//    assertEquals(d(22, APRIL, 2006), getNearestDayOfWeek(SATURDAY, d(21, APRIL, 2006)));</span>
 <span class="hljs-number">384</span>     assertEquals(d(<span class="hljs-number">22</span>, APRIL, <span class="hljs-number">2006</span>), getNearestDayOfWeek(SATURDAY, d(<span class="hljs-number">22</span>, APRIL, <span class="hljs-number">2006</span>)));
 <span class="hljs-number">385</span> 
 <span class="hljs-number">386</span>     <span class="hljs-keyword">try</span> {
 <span class="hljs-number">387</span>       getNearestDayOfWeek(-<span class="hljs-number">1</span>, d(<span class="hljs-number">1</span>, JANUARY, <span class="hljs-number">2006</span>));
 <span class="hljs-number">388</span>       fail(<span class="hljs-string">&quot;Invalid day of week code should throw exception&quot;</span>);
 <span class="hljs-number">389</span>     } <span class="hljs-keyword">catch</span> (IllegalArgumentException e) {
 <span class="hljs-number">390</span>     }
 <span class="hljs-number">391</span>   }
 <span class="hljs-number">392</span> 
 <span class="hljs-number">393</span>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testEndOfCurrentMonth</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception {
 <span class="hljs-number">394</span>     <span class="hljs-type">SerialDate</span> <span class="hljs-variable">d</span> <span class="hljs-operator">=</span> SerialDate.createInstance(<span class="hljs-number">2</span>);
 <span class="hljs-number">395</span>     assertEquals(d(<span class="hljs-number">31</span>, JANUARY, <span class="hljs-number">2006</span>), d.getEndOfCurrentMonth(d(<span class="hljs-number">1</span>, JANUARY, <span class="hljs-number">2006</span>)));
 <span class="hljs-number">396</span>     assertEquals(d(<span class="hljs-number">28</span>, FEBRUARY, <span class="hljs-number">2006</span>), d.getEndOfCurrentMonth(d(<span class="hljs-number">1</span>, FEBRUARY, <span class="hljs-number">2006</span>)));
 <span class="hljs-number">397</span>     assertEquals(d(<span class="hljs-number">31</span>, MARCH, <span class="hljs-number">2006</span>), d.getEndOfCurrentMonth(d(<span class="hljs-number">1</span>, MARCH, <span class="hljs-number">2006</span>)));
 <span class="hljs-number">398</span>     assertEquals(d(<span class="hljs-number">30</span>, APRIL, <span class="hljs-number">2006</span>), d.getEndOfCurrentMonth(d(<span class="hljs-number">1</span>, APRIL, <span class="hljs-number">2006</span>)));
 <span class="hljs-number">399</span>     assertEquals(d(<span class="hljs-number">31</span>, MAY, <span class="hljs-number">2006</span>), d.getEndOfCurrentMonth(d(<span class="hljs-number">1</span>, MAY, <span class="hljs-number">2006</span>)));
 <span class="hljs-number">400</span>     assertEquals(d(<span class="hljs-number">30</span>, JUNE, <span class="hljs-number">2006</span>), d.getEndOfCurrentMonth(d(<span class="hljs-number">1</span>, JUNE, <span class="hljs-number">2006</span>)));
 <span class="hljs-number">401</span>     assertEquals(d(<span class="hljs-number">31</span>, JULY, <span class="hljs-number">2006</span>), d.getEndOfCurrentMonth(d(<span class="hljs-number">1</span>, JULY, <span class="hljs-number">2006</span>)));
 <span class="hljs-number">402</span>     assertEquals(d(<span class="hljs-number">31</span>, AUGUST, <span class="hljs-number">2006</span>), d.getEndOfCurrentMonth(d(<span class="hljs-number">1</span>, AUGUST, <span class="hljs-number">2006</span>)));
 <span class="hljs-number">403</span>     assertEquals(d(<span class="hljs-number">30</span>, SEPTEMBER, <span class="hljs-number">2006</span>), d.getEndOfCurrentMonth(d(<span class="hljs-number">1</span>, SEPTEMBER, <span class="hljs-number">2006</span>)));
 <span class="hljs-number">404</span>     assertEquals(d(<span class="hljs-number">31</span>, OCTOBER, <span class="hljs-number">2006</span>), d.getEndOfCurrentMonth(d(<span class="hljs-number">1</span>, OCTOBER, <span class="hljs-number">2006</span>)));
 <span class="hljs-number">405</span>     assertEquals(d(<span class="hljs-number">30</span>, NOVEMBER, <span class="hljs-number">2006</span>), d.getEndOfCurrentMonth(d(<span class="hljs-number">1</span>, NOVEMBER, <span class="hljs-number">2006</span>)));
 <span class="hljs-number">406</span>     assertEquals(d(<span class="hljs-number">31</span>, DECEMBER, <span class="hljs-number">2006</span>), d.getEndOfCurrentMonth(d(<span class="hljs-number">1</span>, DECEMBER, <span class="hljs-number">2006</span>)));
 <span class="hljs-number">407</span>     assertEquals(d(<span class="hljs-number">29</span>, FEBRUARY, <span class="hljs-number">2008</span>), d.getEndOfCurrentMonth(d(<span class="hljs-number">1</span>, FEBRUARY, <span class="hljs-number">2008</span>)));
 <span class="hljs-number">408</span>   }
 <span class="hljs-number">409</span> 
 <span class="hljs-number">410</span>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testWeekInMonthToString</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception {
 <span class="hljs-number">411</span>     assertEquals(<span class="hljs-string">&quot;First&quot;</span>,weekInMonthToString(FIRST_WEEK_IN_MONTH));
 <span class="hljs-number">412</span>     assertEquals(<span class="hljs-string">&quot;Second&quot;</span>,weekInMonthToString(SECOND_WEEK_IN_MONTH));
 <span class="hljs-number">413</span>     assertEquals(<span class="hljs-string">&quot;Third&quot;</span>,weekInMonthToString(THIRD_WEEK_IN_MONTH));
 <span class="hljs-number">414</span>     assertEquals(<span class="hljs-string">&quot;Fourth&quot;</span>,weekInMonthToString(FOURTH_WEEK_IN_MONTH));
 <span class="hljs-number">415</span>     assertEquals(<span class="hljs-string">&quot;Last&quot;</span>,weekInMonthToString(LAST_WEEK_IN_MONTH));
 <span class="hljs-number">416</span> 
 <span class="hljs-number">417</span> <span class="hljs-comment">//todo    try {</span>
 <span class="hljs-number">418</span> <span class="hljs-comment">//      weekInMonthToString(-1);</span>
 <span class="hljs-number">419</span> <span class="hljs-comment">//      fail(&quot;Invalid week code should throw exception&quot;);</span>
 <span class="hljs-number">420</span> <span class="hljs-comment">//    } catch (IllegalArgumentException e) {</span>
 <span class="hljs-number">421</span> <span class="hljs-comment">//    }</span>
 <span class="hljs-number">422</span>   }
 <span class="hljs-number">423</span> 
 <span class="hljs-number">424</span>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testRelativeToString</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception {
 <span class="hljs-number">425</span>     assertEquals(<span class="hljs-string">&quot;Preceding&quot;</span>,relativeToString(PRECEDING));
 <span class="hljs-number">426</span>     assertEquals(<span class="hljs-string">&quot;Nearest&quot;</span>,relativeToString(NEAREST));
 <span class="hljs-number">427</span>     assertEquals(<span class="hljs-string">&quot;Following&quot;</span>,relativeToString(FOLLOWING));
 <span class="hljs-number">428</span> 
 <span class="hljs-number">429</span> <span class="hljs-comment">//todo    try {</span>
 <span class="hljs-number">430</span> <span class="hljs-comment">//      relativeToString(-1000);</span>
 <span class="hljs-number">431</span> <span class="hljs-comment">//      fail(&quot;Invalid relative code should throw exception&quot;);</span>
 <span class="hljs-number">432</span> <span class="hljs-comment">//    } catch (IllegalArgumentException e) {</span>
 <span class="hljs-number">433</span> <span class="hljs-comment">//    }</span>
 <span class="hljs-number">434</span>   }
 <span class="hljs-number">435</span> 
Appendix B: org.jfree.date.SerialDate
 <span class="hljs-number">381</span>
 Listing B-<span class="hljs-number">4</span> (continued)
 BobsSerialDateTest.java
 <span class="hljs-number">436</span>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testCreateInstanceFromDDMMYYY</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception {
 <span class="hljs-number">437</span>     <span class="hljs-type">SerialDate</span> <span class="hljs-variable">date</span> <span class="hljs-operator">=</span> createInstance(<span class="hljs-number">1</span>, JANUARY, <span class="hljs-number">1900</span>);
 <span class="hljs-number">438</span>     assertEquals(<span class="hljs-number">1</span>,date.getDayOfMonth());
 <span class="hljs-number">439</span>     assertEquals(JANUARY,date.getMonth());
 <span class="hljs-number">440</span>     assertEquals(<span class="hljs-number">1900</span>,date.getYYYY());
 <span class="hljs-number">441</span>     assertEquals(<span class="hljs-number">2</span>,date.toSerial());
 <span class="hljs-number">442</span>   }
 <span class="hljs-number">443</span> 
 <span class="hljs-number">444</span>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testCreateInstanceFromSerial</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception {
 <span class="hljs-number">445</span>     assertEquals(d(<span class="hljs-number">1</span>, JANUARY, <span class="hljs-number">1900</span>),createInstance(<span class="hljs-number">2</span>));
 <span class="hljs-number">446</span>     assertEquals(d(<span class="hljs-number">1</span>, JANUARY, <span class="hljs-number">1901</span>), createInstance(<span class="hljs-number">367</span>));
 <span class="hljs-number">447</span>   }
 <span class="hljs-number">448</span> 
 <span class="hljs-number">449</span>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testCreateInstanceFromJavaDate</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception {
 <span class="hljs-number">450</span>     assertEquals(d(<span class="hljs-number">1</span>, JANUARY, <span class="hljs-number">1900</span>), 
                      createInstance(<span class="hljs-keyword">new</span> <span class="hljs-title class_">GregorianCalendar</span>(<span class="hljs-number">1900</span>,<span class="hljs-number">0</span>,<span class="hljs-number">1</span>).getTime()));
 <span class="hljs-number">451</span>     assertEquals(d(<span class="hljs-number">1</span>, JANUARY, <span class="hljs-number">2006</span>), 
                      createInstance(<span class="hljs-keyword">new</span> <span class="hljs-title class_">GregorianCalendar</span>(<span class="hljs-number">2006</span>,<span class="hljs-number">0</span>,<span class="hljs-number">1</span>).getTime()));
 <span class="hljs-number">452</span>   }
 <span class="hljs-number">453</span> 
 <span class="hljs-number">454</span>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
 <span class="hljs-number">455</span>     junit.textui.TestRunner.run(BobsSerialDateTest.class);
 <span class="hljs-number">456</span>   }
 <span class="hljs-number">457</span> }


</code></pre>
<h3>üìù ŸÅŸáÿ±ÿ≥ÿ™ B-5 ‚Äî ŸÅÿß€åŸÑ SpreadsheetDate.java</h3>
<pre class="hljs"><code> <span class="hljs-number">1</span> <span class="hljs-comment">/* ========================================================================
   2  * JCommon : a free general purpose class library for the Java(tm) platform
   3  * ========================================================================
   4  *
   5  * (C) Copyright 2000-2005, by Object Refinery Limited and Contributors.
   6  *
   7  * Project Info:  http://www.jfree.org/jcommon/index.html
   8  *
   9  * This library is free software; you can redistribute it and/or modify it
  10  * under the terms of the GNU Lesser General Public License as published by
  11  * the Free Software Foundation; either version 2.1 of the License, or
  12  * (at your option) any later version.
  13  *
  14  * This library is distributed in the hope that it will be useful, but
  15  * WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY
  16  * or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Lesser General Public
  17  * License for more details.
  18  *
  19  * You should have received a copy of the GNU Lesser General Public
  20  * License along with this library; if not, write to the Free Software
  21  * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301,
  22  * USA.
  23  *
  24  * [Java is a trademark or registered trademark of Sun Microsystems, Inc.
  25  * in the United States and other countries.]
  26  *
  27  * -------------------
  28  * SpreadsheetDate.java
  29  * -------------------
  30  * (C) Copyright 2000-2005, by Object Refinery Limited and Contributors.
  31  *
  32  * Original Author:  David Gilbert (for Object Refinery Limited);
  33  * Contributor(s):   -;
  34  *
  35  * $Id: SpreadsheetDate.java,v 1.8 2005/11/03 09:25:39 mungady Exp $
  36  *
  37  * Changes
  38  * ------
  39  * 11-Oct-2001 : Version 1 (DG);
  40  * 05-Nov-2001 : Added getDescription() and setDescription() methods (DG);
  41  * 12-Nov-2001 : Changed name from ExcelDate.java to SpreadsheetDate.java (DG);
  42  *               Fixed a bug in calculating day, month and year from serial
  43  *               number (DG);
  44  * 24-Jan-2002 : Fixed a bug in calculating the serial number from the day,
  45  *               month and year.  Thanks to Trevor Hills for the report (DG);
  46  * 29-May-2002 : Added equals(Object) method (SourceForge ID 558850) (DG);
  47  * 03-Oct-2002 : Fixed errors reported by Checkstyle (DG);
  48  * 13-Mar-2003 : Implemented Serializable (DG);
  49  * 04-Sep-2003 : Completed isInRange() methods (DG);
  50  * 05-Sep-2003 : Implemented Comparable (DG);
  51  * 21-Oct-2003 : Added hashCode() method (DG);
  52  *
  53  */</span>
  <span class="hljs-number">54</span> 
  <span class="hljs-number">55</span> <span class="hljs-keyword">package</span> org.jfree.date;
  <span class="hljs-number">56</span> 
  <span class="hljs-number">57</span> <span class="hljs-keyword">import</span> java.util.Calendar;
  <span class="hljs-number">58</span> <span class="hljs-keyword">import</span> java.util.Date;
  <span class="hljs-number">59</span> 
  <span class="hljs-number">60</span> <span class="hljs-comment">/**
  61  * Represents a date using an integer, in a similar fashion to the
  62  * implementation in Microsoft Excel.  The range of dates supported is
Appendix B: org.jfree.date.SerialDate
 383
 Listing B-5 (continued)
 SpreadsheetDate.java
  63  * 1-Jan-1900 to 31-Dec-9999.
  64  * &lt;P&gt;
  65  * Be aware that there is a deliberate bug in Excel that recognises the year
  66  * 1900 as a leap year when in fact it is not a leap year. You can find more
  67  * information on the Microsoft website in article Q181370:
  68  * &lt;P&gt;
  69  * http://support.microsoft.com/support/kb/articles/Q181/3/70.asp
  70  * &lt;P&gt;
  71  * Excel uses the convention that 1-Jan-1900 = 1.  This class uses the
  72  * convention 1-Jan-1900 = 2.
  73  * The result is that the day number in this class will be different to the
  74  * Excel figure for January and February 1900...but then Excel adds in an extra
  75  * day (29-Feb-1900 which does not actually exist!) and from that point forward
  76  * the day numbers will match.
  77  *
  78  * <span class="hljs-doctag">@author</span> David Gilbert
  79  */</span>
  <span class="hljs-number">80</span> <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SpreadsheetDate</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">SerialDate</span> {
  <span class="hljs-number">81</span> 
  <span class="hljs-number">82</span>     <span class="hljs-comment">/** For serialization. */</span>
  <span class="hljs-number">83</span>     <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">long</span> <span class="hljs-variable">serialVersionUID</span> <span class="hljs-operator">=</span> -<span class="hljs-number">2039586705374454461L</span>;
  <span class="hljs-number">84</span> 
  <span class="hljs-number">85</span>     <span class="hljs-comment">/**
  86      * The day number (1-Jan-1900 = 2, 2-Jan-1900 = 3, ..., 31-Dec-9999 =
  87      * 2958465).
  88      */</span>
  <span class="hljs-number">89</span>     <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> serial;
  <span class="hljs-number">90</span> 
  <span class="hljs-number">91</span>     <span class="hljs-comment">/** The day of the month (1 to 28, 29, 30 or 31 depending on the month). */</span>
  <span class="hljs-number">92</span>     <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> day;
  <span class="hljs-number">93</span> 
  <span class="hljs-number">94</span>     <span class="hljs-comment">/** The month of the year (1 to 12). */</span>
  <span class="hljs-number">95</span>     <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> month;
  <span class="hljs-number">96</span> 
  <span class="hljs-number">97</span>     <span class="hljs-comment">/** The year (1900 to 9999). */</span>
  <span class="hljs-number">98</span>     <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> year;
  <span class="hljs-number">99</span> 
 <span class="hljs-number">100</span>     <span class="hljs-comment">/** An optional description for the date. */</span>
 <span class="hljs-number">101</span>     <span class="hljs-keyword">private</span> String description;
 <span class="hljs-number">102</span> 
 <span class="hljs-number">103</span>     <span class="hljs-comment">/**
 104      * Creates a new date instance.
 105      *
 106      * <span class="hljs-doctag">@param</span> day  the day (in the range 1 to 28/29/30/31).
 107      * <span class="hljs-doctag">@param</span> month  the month (in the range 1 to 12).
 108      * <span class="hljs-doctag">@param</span> year  the year (in the range 1900 to 9999).
 109      */</span>
 <span class="hljs-number">110</span>     <span class="hljs-keyword">public</span> <span class="hljs-title function_">SpreadsheetDate</span><span class="hljs-params">(<span class="hljs-keyword">final</span> <span class="hljs-type">int</span> day, <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> month, <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> year)</span> {
 <span class="hljs-number">111</span> 
 <span class="hljs-number">112</span>         <span class="hljs-keyword">if</span> ((year &gt;= <span class="hljs-number">1900</span>) &amp;&amp; (year &lt;= <span class="hljs-number">9999</span>)) {
 <span class="hljs-number">113</span>             <span class="hljs-built_in">this</span>.year = year;
 <span class="hljs-number">114</span>         }
 <span class="hljs-number">115</span>         <span class="hljs-keyword">else</span> {
 <span class="hljs-number">116</span>             <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(
 <span class="hljs-number">117</span>                 <span class="hljs-string">&quot;The &#x27;year&#x27; argument must be in range 1900 to 9999.&quot;</span>
 <span class="hljs-number">118</span>             );
 <span class="hljs-number">119</span>         }
 <span class="hljs-number">120</span> 
 <span class="hljs-number">121</span>         <span class="hljs-keyword">if</span> ((month &gt;= MonthConstants.JANUARY)
 <span class="hljs-number">122</span>                 &amp;&amp; (month &lt;= MonthConstants.DECEMBER)) {
 <span class="hljs-number">123</span>             <span class="hljs-built_in">this</span>.month = month;
 <span class="hljs-number">124</span>         }
<span class="hljs-number">384</span>
 Appendix B: org.jfree.date.SerialDate
 Listing B-<span class="hljs-number">5</span> (continued)
 SpreadsheetDate.java
 <span class="hljs-number">125</span>         <span class="hljs-keyword">else</span> {
 <span class="hljs-number">126</span>             <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(
 <span class="hljs-number">127</span>                 <span class="hljs-string">&quot;The &#x27;month&#x27; argument must be in the range 1 to 12.&quot;</span>
 <span class="hljs-number">128</span>             );
 <span class="hljs-number">129</span>         }
 <span class="hljs-number">130</span> 
 <span class="hljs-number">131</span>         <span class="hljs-keyword">if</span> ((day &gt;= <span class="hljs-number">1</span>) &amp;&amp; (day &lt;= SerialDate.lastDayOfMonth(month, year))) {
 <span class="hljs-number">132</span>             <span class="hljs-built_in">this</span>.day = day;
 <span class="hljs-number">133</span>         }
 <span class="hljs-number">134</span>         <span class="hljs-keyword">else</span> {
 <span class="hljs-number">135</span>             <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(<span class="hljs-string">&quot;Invalid &#x27;day&#x27; argument.&quot;</span>);
 <span class="hljs-number">136</span>         }
 <span class="hljs-number">137</span> 
 <span class="hljs-number">138</span>         <span class="hljs-comment">// the serial number needs to be synchronised with the day-month-year...</span>
 <span class="hljs-number">139</span>         <span class="hljs-built_in">this</span>.serial = calcSerial(day, month, year);
 <span class="hljs-number">140</span> 
 <span class="hljs-number">141</span>         <span class="hljs-built_in">this</span>.description = <span class="hljs-literal">null</span>;
 <span class="hljs-number">142</span> 
 <span class="hljs-number">143</span>     }
 <span class="hljs-number">144</span> 
 <span class="hljs-number">145</span>     <span class="hljs-comment">/**
 146      * Standard constructor - creates a new date object representing the
 147      * specified day number (which should be in the range 2 to 2958465.
 148      *
 149      * <span class="hljs-doctag">@param</span> serial  the serial number for the day (range: 2 to 2958465).
 150      */</span>
 <span class="hljs-number">151</span>     <span class="hljs-keyword">public</span> <span class="hljs-title function_">SpreadsheetDate</span><span class="hljs-params">(<span class="hljs-keyword">final</span> <span class="hljs-type">int</span> serial)</span> {
 <span class="hljs-number">152</span> 
 <span class="hljs-number">153</span>         <span class="hljs-keyword">if</span> ((serial &gt;= SERIAL_LOWER_BOUND) &amp;&amp; (serial &lt;= SERIAL_UPPER_BOUND)) {
 <span class="hljs-number">154</span>             <span class="hljs-built_in">this</span>.serial = serial;
 <span class="hljs-number">155</span>         }
 <span class="hljs-number">156</span>         <span class="hljs-keyword">else</span> {
 <span class="hljs-number">157</span>             <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(
 <span class="hljs-number">158</span>                 <span class="hljs-string">&quot;SpreadsheetDate: Serial must be in range 2 to 2958465.&quot;</span>);
 <span class="hljs-number">159</span>         }
 <span class="hljs-number">160</span> 
 <span class="hljs-number">161</span>         <span class="hljs-comment">// the day-month-year needs to be synchronised with the serial number...</span>
 <span class="hljs-number">162</span>         calcDayMonthYear();
 <span class="hljs-number">163</span> 
 <span class="hljs-number">164</span>     }
 <span class="hljs-number">165</span> 
 <span class="hljs-number">166</span>     <span class="hljs-comment">/**
 167      * Returns the description that is attached to the date.  It is not
 168      * required that a date have a description, but for some applications it
 169      * is useful.
 170      *
 171      * <span class="hljs-doctag">@return</span> The description that is attached to the date.
 172      */</span>
 <span class="hljs-number">173</span>     <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getDescription</span><span class="hljs-params">()</span> {
 <span class="hljs-number">174</span>         <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.description;
 <span class="hljs-number">175</span>     }
 <span class="hljs-number">176</span> 
 <span class="hljs-number">177</span>     <span class="hljs-comment">/**
 178      * Sets the description for the date.
 179      *
 180      * <span class="hljs-doctag">@param</span> description  the description for this date (&lt;code&gt;null&lt;/code&gt;
 181      *                     permitted).
 182      */</span>
 <span class="hljs-number">183</span>     <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setDescription</span><span class="hljs-params">(<span class="hljs-keyword">final</span> String description)</span> {
 <span class="hljs-number">184</span>         <span class="hljs-built_in">this</span>.description = description;
 <span class="hljs-number">185</span>     }
 <span class="hljs-number">186</span> 
Appendix B: org.jfree.date.SerialDate
 <span class="hljs-number">385</span>
 Listing B-<span class="hljs-number">5</span> (continued)
 SpreadsheetDate.java
 <span class="hljs-number">187</span>     <span class="hljs-comment">/**
 188      * Returns the serial number for the date, where 1 January 1900 = 2
 189      * (this corresponds, almost, to the numbering system used in Microsoft
 190      * Excel for Windows and Lotus 1-2-3).
 191      *
 192      * <span class="hljs-doctag">@return</span> The serial number of this date.
 193      */</span>
 <span class="hljs-number">194</span>     <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">toSerial</span><span class="hljs-params">()</span> {
 <span class="hljs-number">195</span>         <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.serial;
 <span class="hljs-number">196</span>     }
 <span class="hljs-number">197</span> 
 <span class="hljs-number">198</span>     <span class="hljs-comment">/**
 199      * Returns a &lt;code&gt;java.util.Date&lt;/code&gt; equivalent to this date.
 200      *
 201      * <span class="hljs-doctag">@return</span> The date.
 202      */</span>
 <span class="hljs-number">203</span>     <span class="hljs-keyword">public</span> Date <span class="hljs-title function_">toDate</span><span class="hljs-params">()</span> {
 <span class="hljs-number">204</span>         <span class="hljs-keyword">final</span> <span class="hljs-type">Calendar</span> <span class="hljs-variable">calendar</span> <span class="hljs-operator">=</span> Calendar.getInstance();
 <span class="hljs-number">205</span>         calendar.set(getYYYY(), getMonth() - <span class="hljs-number">1</span>, getDayOfMonth(), <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);
 <span class="hljs-number">206</span>         <span class="hljs-keyword">return</span> calendar.getTime();
 <span class="hljs-number">207</span>     }
 <span class="hljs-number">208</span> 
 <span class="hljs-number">209</span>     <span class="hljs-comment">/**
 210      * Returns the year (assume a valid range of 1900 to 9999).
 211      *
 212      * <span class="hljs-doctag">@return</span> The year.
 213      */</span>
 <span class="hljs-number">214</span>     <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getYYYY</span><span class="hljs-params">()</span> {
 <span class="hljs-number">215</span>         <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.year;
 <span class="hljs-number">216</span>     }
 <span class="hljs-number">217</span> 
 <span class="hljs-number">218</span>     <span class="hljs-comment">/**
 219      * Returns the month (January = 1, February = 2, March = 3).
 220      *
 221      * <span class="hljs-doctag">@return</span> The month of the year.
 222      */</span>
 <span class="hljs-number">223</span>     <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getMonth</span><span class="hljs-params">()</span> {
 <span class="hljs-number">224</span>         <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.month;
 <span class="hljs-number">225</span>     }
 <span class="hljs-number">226</span> 
 <span class="hljs-number">227</span>     <span class="hljs-comment">/**
 228      * Returns the day of the month.
 229      *
 230      * <span class="hljs-doctag">@return</span> The day of the month.
 231      */</span>
 <span class="hljs-number">232</span>     <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getDayOfMonth</span><span class="hljs-params">()</span> {
 <span class="hljs-number">233</span>         <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.day;
 <span class="hljs-number">234</span>     }
 <span class="hljs-number">235</span> 
 <span class="hljs-number">236</span>     <span class="hljs-comment">/**
 237      * Returns a code representing the day of the week.
 238      * &lt;P&gt;
 239      * The codes are defined in the {<span class="hljs-doctag">@link</span> SerialDate} class as:
 240      * &lt;code&gt;SUNDAY&lt;/code&gt;, &lt;code&gt;MONDAY&lt;/code&gt;, &lt;code&gt;TUESDAY&lt;/code&gt;,
 241      * &lt;code&gt;WEDNESDAY&lt;/code&gt;, &lt;code&gt;THURSDAY&lt;/code&gt;, &lt;code&gt;FRIDAY&lt;/code&gt;, and
 242      * &lt;code&gt;SATURDAY&lt;/code&gt;.
 243      *
 244      * <span class="hljs-doctag">@return</span> A code representing the day of the week.
 245      */</span>
 <span class="hljs-number">246</span>     <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getDayOfWeek</span><span class="hljs-params">()</span> {
 <span class="hljs-number">247</span>         <span class="hljs-keyword">return</span> (<span class="hljs-built_in">this</span>.serial + <span class="hljs-number">6</span>) % <span class="hljs-number">7</span> + <span class="hljs-number">1</span>;
 <span class="hljs-number">248</span>     }
<span class="hljs-number">386</span>
 Appendix B: org.jfree.date.SerialDate
 Listing B-<span class="hljs-number">5</span> (continued)
 SpreadsheetDate.java
 <span class="hljs-number">249</span> 
 <span class="hljs-number">250</span>     <span class="hljs-comment">/**
 251      * Tests the equality of this date with an arbitrary object.
 252      * &lt;P&gt;
 253      * This method will return true ONLY if the object is an instance of the
 254      * {<span class="hljs-doctag">@link</span> SerialDate} base class, and it represents the same day as this
 255      * {<span class="hljs-doctag">@link</span> SpreadsheetDate}.
 256      *
 257      * <span class="hljs-doctag">@param</span> object  the object to compare (&lt;code&gt;null&lt;/code&gt; permitted).
 258      *
 259      * <span class="hljs-doctag">@return</span> A boolean.
 260      */</span>
 <span class="hljs-number">261</span>     <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">equals</span><span class="hljs-params">(<span class="hljs-keyword">final</span> Object object)</span> {
 <span class="hljs-number">262</span> 
 <span class="hljs-number">263</span>         <span class="hljs-keyword">if</span> (object <span class="hljs-keyword">instanceof</span> SerialDate) {
 <span class="hljs-number">264</span>             <span class="hljs-keyword">final</span> <span class="hljs-type">SerialDate</span> <span class="hljs-variable">s</span> <span class="hljs-operator">=</span> (SerialDate) object;
 <span class="hljs-number">265</span>             <span class="hljs-keyword">return</span> (s.toSerial() == <span class="hljs-built_in">this</span>.toSerial());
 <span class="hljs-number">266</span>         }
 <span class="hljs-number">267</span>         <span class="hljs-keyword">else</span> {
 <span class="hljs-number">268</span>             <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
 <span class="hljs-number">269</span>         }
 <span class="hljs-number">270</span> 
 <span class="hljs-number">271</span>     }
 <span class="hljs-number">272</span> 
 <span class="hljs-number">273</span>     <span class="hljs-comment">/**
 274      * Returns a hash code for this object instance.
 275      *
 276      * <span class="hljs-doctag">@return</span> A hash code.
 277      */</span>
 <span class="hljs-number">278</span>     <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">hashCode</span><span class="hljs-params">()</span> {
 <span class="hljs-number">279</span>         <span class="hljs-keyword">return</span> toSerial();
 <span class="hljs-number">280</span>     }
 <span class="hljs-number">281</span> 
 <span class="hljs-number">282</span>     <span class="hljs-comment">/**
 283      * Returns the difference (in days) between this date and the specified
 284      * &#x27;other&#x27; date.
 285      *
 286      * <span class="hljs-doctag">@param</span> other  the date being compared to.
 287      *
 288      * <span class="hljs-doctag">@return</span> The difference (in days) between this date and the specified
 289      *         &#x27;other&#x27; date.
 290      */</span>
 <span class="hljs-number">291</span>     <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">compare</span><span class="hljs-params">(<span class="hljs-keyword">final</span> SerialDate other)</span> {
 <span class="hljs-number">292</span>         <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.serial - other.toSerial();
 <span class="hljs-number">293</span>     }
 <span class="hljs-number">294</span> 
 <span class="hljs-number">295</span>     <span class="hljs-comment">/**
 296      * Implements the method required by the Comparable interface.
 297      *
 298      * <span class="hljs-doctag">@param</span> other  the other object (usually another SerialDate).
 299      *
 300      * <span class="hljs-doctag">@return</span> A negative integer, zero, or a positive integer as this object
 301      *         is less than, equal to, or greater than the specified object.
 302      */</span>
 <span class="hljs-number">303</span>     <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">compareTo</span><span class="hljs-params">(<span class="hljs-keyword">final</span> Object other)</span> {
 <span class="hljs-number">304</span>         <span class="hljs-keyword">return</span> compare((SerialDate) other);
 <span class="hljs-number">305</span>     }
 <span class="hljs-number">306</span> 
 <span class="hljs-number">307</span>     <span class="hljs-comment">/**
 308      * Returns true if this SerialDate represents the same date as the
 309      * specified SerialDate.
 310      *
Appendix B: org.jfree.date.SerialDate
 387
 Listing B-5 (continued)
 SpreadsheetDate.java
 311      * <span class="hljs-doctag">@param</span> other  the date being compared to.
 312      *
 313      * <span class="hljs-doctag">@return</span> &lt;code&gt;true&lt;/code&gt; if this SerialDate represents the same date as
 314      *         the specified SerialDate.
 315      */</span>
 <span class="hljs-number">316</span>     <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isOn</span><span class="hljs-params">(<span class="hljs-keyword">final</span> SerialDate other)</span> {
 <span class="hljs-number">317</span>         <span class="hljs-keyword">return</span> (<span class="hljs-built_in">this</span>.serial == other.toSerial());
 <span class="hljs-number">318</span>     }
 <span class="hljs-number">319</span> 
 <span class="hljs-number">320</span>     <span class="hljs-comment">/**
 321      * Returns true if this SerialDate represents an earlier date compared to
 322      * the specified SerialDate.
 323      *
 324      * <span class="hljs-doctag">@param</span> other  the date being compared to.
 325      *
 326      * <span class="hljs-doctag">@return</span> &lt;code&gt;true&lt;/code&gt; if this SerialDate represents an earlier date
 327      *         compared to the specified SerialDate.
 328      */</span>
 <span class="hljs-number">329</span>     <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isBefore</span><span class="hljs-params">(<span class="hljs-keyword">final</span> SerialDate other)</span> {
 <span class="hljs-number">330</span>         <span class="hljs-keyword">return</span> (<span class="hljs-built_in">this</span>.serial &lt; other.toSerial());
 <span class="hljs-number">331</span>     }
 <span class="hljs-number">332</span> 
 <span class="hljs-number">333</span>     <span class="hljs-comment">/**
 334      * Returns true if this SerialDate represents the same date as the
 335      * specified SerialDate.
 336      *
 337      * <span class="hljs-doctag">@param</span> other  the date being compared to.
 338      *
 339      * <span class="hljs-doctag">@return</span> &lt;code&gt;true&lt;/code&gt; if this SerialDate represents the same date
 340      *         as the specified SerialDate.
 341      */</span>
 <span class="hljs-number">342</span>     <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isOnOrBefore</span><span class="hljs-params">(<span class="hljs-keyword">final</span> SerialDate other)</span> {
 <span class="hljs-number">343</span>         <span class="hljs-keyword">return</span> (<span class="hljs-built_in">this</span>.serial &lt;= other.toSerial());
 <span class="hljs-number">344</span>     }
 <span class="hljs-number">345</span> 
 <span class="hljs-number">346</span>     <span class="hljs-comment">/**
 347      * Returns true if this SerialDate represents the same date as the
 348      * specified SerialDate.
 349      *
 350      * <span class="hljs-doctag">@param</span> other  the date being compared to.
 351      *
 352      * <span class="hljs-doctag">@return</span> &lt;code&gt;true&lt;/code&gt; if this SerialDate represents the same date
 353      *         as the specified SerialDate.
 354      */</span>
 <span class="hljs-number">355</span>     <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isAfter</span><span class="hljs-params">(<span class="hljs-keyword">final</span> SerialDate other)</span> {
 <span class="hljs-number">356</span>         <span class="hljs-keyword">return</span> (<span class="hljs-built_in">this</span>.serial &gt; other.toSerial());
 <span class="hljs-number">357</span>     }
 <span class="hljs-number">358</span> 
 <span class="hljs-number">359</span>     <span class="hljs-comment">/**
 360      * Returns true if this SerialDate represents the same date as the
 361      * specified SerialDate.
 362      *
 363      * <span class="hljs-doctag">@param</span> other  the date being compared to.
 364      *
 365      * <span class="hljs-doctag">@return</span> &lt;code&gt;true&lt;/code&gt; if this SerialDate represents the same date as
 366      *         the specified SerialDate.
 367      */</span>
 <span class="hljs-number">368</span>     <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isOnOrAfter</span><span class="hljs-params">(<span class="hljs-keyword">final</span> SerialDate other)</span> {
 <span class="hljs-number">369</span>         <span class="hljs-keyword">return</span> (<span class="hljs-built_in">this</span>.serial &gt;= other.toSerial());
 <span class="hljs-number">370</span>     }
 <span class="hljs-number">371</span> 
 <span class="hljs-number">372</span>     <span class="hljs-comment">/**
 373      * Returns &lt;code&gt;true&lt;/code&gt; if this {<span class="hljs-doctag">@link</span> SerialDate} is within the
388
 Appendix B: org.jfree.date.SerialDate
 Listing B-5 (continued)
 SpreadsheetDate.java
 374      * specified range (INCLUSIVE).  The date order of d1 and d2 is not
 375      * important.
 376      *
 377      * <span class="hljs-doctag">@param</span> d1  a boundary date for the range.
 378      * <span class="hljs-doctag">@param</span> d2  the other boundary date for the range.
 379      *
 380      * <span class="hljs-doctag">@return</span> A boolean.
 381      */</span>
 <span class="hljs-number">382</span>     <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isInRange</span><span class="hljs-params">(<span class="hljs-keyword">final</span> SerialDate d1, <span class="hljs-keyword">final</span> SerialDate d2)</span> {
 <span class="hljs-number">383</span>         <span class="hljs-keyword">return</span> isInRange(d1, d2, SerialDate.INCLUDE_BOTH);
 <span class="hljs-number">384</span>     }
 <span class="hljs-number">385</span> 
 <span class="hljs-number">386</span>     <span class="hljs-comment">/**
 387      * Returns true if this SerialDate is within the specified range (caller
 388      * specifies whether or not the end-points are included).  The order of d1
 389      * and d2 is not important.
 390      *
 391      * <span class="hljs-doctag">@param</span> d1  one boundary date for the range.
 392      * <span class="hljs-doctag">@param</span> d2  a second boundary date for the range.
 393      * <span class="hljs-doctag">@param</span> include  a code that controls whether or not the start and end
 394      *                 dates are included in the range.
 395      *
 396      * <span class="hljs-doctag">@return</span> &lt;code&gt;true&lt;/code&gt; if this SerialDate is within the specified
 397      *         range.
 398      */</span>
 <span class="hljs-number">399</span>     <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isInRange</span><span class="hljs-params">(<span class="hljs-keyword">final</span> SerialDate d1, <span class="hljs-keyword">final</span> SerialDate d2,
 <span class="hljs-number">400</span>                              <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> include)</span> {
 <span class="hljs-number">401</span>         <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">s1</span> <span class="hljs-operator">=</span> d1.toSerial();
 <span class="hljs-number">402</span>         <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">s2</span> <span class="hljs-operator">=</span> d2.toSerial();
 <span class="hljs-number">403</span>         <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">start</span> <span class="hljs-operator">=</span> Math.min(s1, s2);
 <span class="hljs-number">404</span>         <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">end</span> <span class="hljs-operator">=</span> Math.max(s1, s2);
 <span class="hljs-number">405</span> 
 <span class="hljs-number">406</span>         <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">s</span> <span class="hljs-operator">=</span> toSerial();
 <span class="hljs-number">407</span>         <span class="hljs-keyword">if</span> (include == SerialDate.INCLUDE_BOTH) {
 <span class="hljs-number">408</span>             <span class="hljs-keyword">return</span> (s &gt;= start &amp;&amp; s &lt;= end);
 <span class="hljs-number">409</span>         }
 <span class="hljs-number">410</span>         <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (include == SerialDate.INCLUDE_FIRST) {
 <span class="hljs-number">411</span>             <span class="hljs-keyword">return</span> (s &gt;= start &amp;&amp; s &lt; end);
 <span class="hljs-number">412</span>         }
 <span class="hljs-number">413</span>         <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (include == SerialDate.INCLUDE_SECOND) {
 <span class="hljs-number">414</span>             <span class="hljs-keyword">return</span> (s &gt; start &amp;&amp; s &lt;= end);
 <span class="hljs-number">415</span>         }
 <span class="hljs-number">416</span>         <span class="hljs-keyword">else</span> {
 <span class="hljs-number">417</span>             <span class="hljs-keyword">return</span> (s &gt; start &amp;&amp; s &lt; end);
 <span class="hljs-number">418</span>         }
 <span class="hljs-number">419</span>     }
 <span class="hljs-number">420</span> 
 <span class="hljs-number">421</span>     <span class="hljs-comment">/**
 422      * Calculate the serial number from the day, month and year.
 423      * &lt;P&gt;
 424      * 1-Jan-1900 = 2.
 425      *
 426      * <span class="hljs-doctag">@param</span> d  the day.
 427      * <span class="hljs-doctag">@param</span> m  the month.
 428      * <span class="hljs-doctag">@param</span> y  the year.
 429      *
 430      * <span class="hljs-doctag">@return</span> the serial number from the day, month and year.
 431      */</span>
 <span class="hljs-number">432</span>     <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-title function_">calcSerial</span><span class="hljs-params">(<span class="hljs-keyword">final</span> <span class="hljs-type">int</span> d, <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> m, <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> y)</span> {
 <span class="hljs-number">433</span>         <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">yy</span> <span class="hljs-operator">=</span> ((y - <span class="hljs-number">1900</span>) * <span class="hljs-number">365</span>) + SerialDate.leapYearCount(y - <span class="hljs-number">1</span>);
 <span class="hljs-number">434</span>         <span class="hljs-type">int</span> <span class="hljs-variable">mm</span> <span class="hljs-operator">=</span> SerialDate.AGGREGATE_DAYS_TO_END_OF_PRECEDING_MONTH[m];
 <span class="hljs-number">435</span>         <span class="hljs-keyword">if</span> (m &gt; MonthConstants.FEBRUARY) {
Appendix B: org.jfree.date.SerialDate
 <span class="hljs-number">389</span>
 Listing B-<span class="hljs-number">5</span> (continued)
 SpreadsheetDate.java
 <span class="hljs-number">436</span>             <span class="hljs-keyword">if</span> (SerialDate.isLeapYear(y)) {
 <span class="hljs-number">437</span>                 mm = mm + <span class="hljs-number">1</span>;
 <span class="hljs-number">438</span>             }
 <span class="hljs-number">439</span>         }
 <span class="hljs-number">440</span>         <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">dd</span> <span class="hljs-operator">=</span> d;
 <span class="hljs-number">441</span>         <span class="hljs-keyword">return</span> yy + mm + dd + <span class="hljs-number">1</span>;
 <span class="hljs-number">442</span>     }
 <span class="hljs-number">443</span> 
 <span class="hljs-number">444</span>     <span class="hljs-comment">/**
 445      * Calculate the day, month and year from the serial number.
 446      */</span>
 <span class="hljs-number">447</span>     <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">calcDayMonthYear</span><span class="hljs-params">()</span> {
 <span class="hljs-number">448</span> 
 <span class="hljs-number">449</span>         <span class="hljs-comment">// get the year from the serial date</span>
 <span class="hljs-number">450</span>         <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">days</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">this</span>.serial - SERIAL_LOWER_BOUND;
 <span class="hljs-number">451</span>         <span class="hljs-comment">// overestimated because we ignored leap days</span>
 <span class="hljs-number">452</span>         <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">overestimatedYYYY</span> <span class="hljs-operator">=</span> <span class="hljs-number">1900</span> + (days / <span class="hljs-number">365</span>);
 <span class="hljs-number">453</span>         <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">leaps</span> <span class="hljs-operator">=</span> SerialDate.leapYearCount(overestimatedYYYY);
 <span class="hljs-number">454</span>         <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">nonleapdays</span> <span class="hljs-operator">=</span> days - leaps;
 <span class="hljs-number">455</span>         <span class="hljs-comment">// underestimated because we overestimated years</span>
 <span class="hljs-number">456</span>         <span class="hljs-type">int</span> <span class="hljs-variable">underestimatedYYYY</span> <span class="hljs-operator">=</span> <span class="hljs-number">1900</span> + (nonleapdays / <span class="hljs-number">365</span>);
 <span class="hljs-number">457</span> 
 <span class="hljs-number">458</span>         <span class="hljs-keyword">if</span> (underestimatedYYYY == overestimatedYYYY) {
 <span class="hljs-number">459</span>             <span class="hljs-built_in">this</span>.year = underestimatedYYYY;
 <span class="hljs-number">460</span>         }
 <span class="hljs-number">461</span>         <span class="hljs-keyword">else</span> {
 <span class="hljs-number">462</span>             <span class="hljs-type">int</span> <span class="hljs-variable">ss1</span> <span class="hljs-operator">=</span> calcSerial(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, underestimatedYYYY);
 <span class="hljs-number">463</span>             <span class="hljs-keyword">while</span> (ss1 &lt;= <span class="hljs-built_in">this</span>.serial) {
 <span class="hljs-number">464</span>                 underestimatedYYYY = underestimatedYYYY + <span class="hljs-number">1</span>;
 <span class="hljs-number">465</span>                 ss1 = calcSerial(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, underestimatedYYYY);
 <span class="hljs-number">466</span>             }
 <span class="hljs-number">467</span>             <span class="hljs-built_in">this</span>.year = underestimatedYYYY - <span class="hljs-number">1</span>;
 <span class="hljs-number">468</span>         }
 <span class="hljs-number">469</span> 
 <span class="hljs-number">470</span>         <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">ss2</span> <span class="hljs-operator">=</span> calcSerial(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-built_in">this</span>.year);
 <span class="hljs-number">471</span> 
 <span class="hljs-number">472</span>         <span class="hljs-type">int</span>[] daysToEndOfPrecedingMonth
 <span class="hljs-number">473</span>             = AGGREGATE_DAYS_TO_END_OF_PRECEDING_MONTH;
 <span class="hljs-number">474</span> 
 <span class="hljs-number">475</span>         <span class="hljs-keyword">if</span> (isLeapYear(<span class="hljs-built_in">this</span>.year)) {
 <span class="hljs-number">476</span>             daysToEndOfPrecedingMonth
 <span class="hljs-number">477</span>                 = LEAP_YEAR_AGGREGATE_DAYS_TO_END_OF_PRECEDING_MONTH;
 <span class="hljs-number">478</span>         }
 <span class="hljs-number">479</span> 
 <span class="hljs-number">480</span>         <span class="hljs-comment">// get the month from the serial date</span>
 <span class="hljs-number">481</span>         <span class="hljs-type">int</span> <span class="hljs-variable">mm</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;
 <span class="hljs-number">482</span>         <span class="hljs-type">int</span> <span class="hljs-variable">sss</span> <span class="hljs-operator">=</span> ss2 + daysToEndOfPrecedingMonth[mm] - <span class="hljs-number">1</span>;
 <span class="hljs-number">483</span>         <span class="hljs-keyword">while</span> (sss &lt; <span class="hljs-built_in">this</span>.serial) {
 <span class="hljs-number">484</span>             mm = mm + <span class="hljs-number">1</span>;
 <span class="hljs-number">485</span>             sss = ss2 + daysToEndOfPrecedingMonth[mm] - <span class="hljs-number">1</span>;
 <span class="hljs-number">486</span>         }
 <span class="hljs-number">487</span>         <span class="hljs-built_in">this</span>.month = mm - <span class="hljs-number">1</span>;
 <span class="hljs-number">488</span> 
 <span class="hljs-number">489</span>         <span class="hljs-comment">// what&#x27;s left is d(+1);</span>
 <span class="hljs-number">490</span>         <span class="hljs-built_in">this</span>.day = <span class="hljs-built_in">this</span>.serial - ss2
 <span class="hljs-number">491</span>                    - daysToEndOfPrecedingMonth[<span class="hljs-built_in">this</span>.month] + <span class="hljs-number">1</span>;
 <span class="hljs-number">492</span> 
 <span class="hljs-number">493</span>     }
 <span class="hljs-number">494</span> 
 <span class="hljs-number">495</span> }


</code></pre>
<h3>üìù ŸÅŸáÿ±ÿ≥ÿ™ B-6 ‚Äî ŸÅÿß€åŸÑ RelativeDayOfWeekRule.java</h3>
<pre class="hljs"><code> <span class="hljs-number">1</span> <span class="hljs-comment">/* ========================================================================
   2  * JCommon : a free general purpose class library for the Java(tm) platform
   3  * ========================================================================
   4  *
   5  * (C) Copyright 2000-2005, by Object Refinery Limited and Contributors.
   6  *
   7  * Project Info:  http://www.jfree.org/jcommon/index.html
   8  *
   9  * This library is free software; you can redistribute it and/or modify it
  10  * under the terms of the GNU Lesser General Public License as published by
  11  * the Free Software Foundation; either version 2.1 of the License, or
  12  * (at your option) any later version.
  13  *
  14  * This library is distributed in the hope that it will be useful, but
  15  * WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY
  16  * or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Lesser General Public
  17  * License for more details.
  18  *
  19  * You should have received a copy of the GNU Lesser General Public
  20  * License along with this library; if not, write to the Free Software
  21  * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301,
  22  * USA.
  23  *
  24  * [Java is a trademark or registered trademark of Sun Microsystems, Inc.
  25  * in the United States and other countries.]
  26  *
  27  * -------------------------
  28  * RelativeDayOfWeekRule.java
  29  * -------------------------
  30  * (C) Copyright 2000-2003, by Object Refinery Limited and Contributors.
  31  *
  32  * Original Author:  David Gilbert (for Object Refinery Limited);
  33  * Contributor(s):   -;
  34  *
  35  * $Id: RelativeDayOfWeekRule.java,v 1.6 2005/11/16 15:58:40 taqua Exp $
  36  *
  37  * Changes (from 26-Oct-2001)
  38  * -------------------------
  39  * 26-Oct-2001 : Changed package to com.jrefinery.date.*;
  40  * 03-Oct-2002 : Fixed errors reported by Checkstyle (DG);
  41  *
  42  */</span>
  <span class="hljs-number">43</span> 
  <span class="hljs-number">44</span> <span class="hljs-keyword">package</span> org.jfree.date;
  <span class="hljs-number">45</span> 
  <span class="hljs-number">46</span> <span class="hljs-comment">/**
  47  * An annual date rule that returns a date for each year based on (a) a
  48  * reference rule; (b) a day of the week; and (c) a selection parameter
  49  * (SerialDate.PRECEDING, SerialDate.NEAREST, SerialDate.FOLLOWING).
  50  * &lt;P&gt;
  51  * For example, Good Friday can be specified as &#x27;the Friday PRECEDING Easter
  52  * Sunday&#x27;.
  53  *
  54  * <span class="hljs-doctag">@author</span> David Gilbert
  55  */</span>
  <span class="hljs-number">56</span> <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RelativeDayOfWeekRule</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AnnualDateRule</span> {
  <span class="hljs-number">57</span> 
  <span class="hljs-number">58</span>     <span class="hljs-comment">/** A reference to the annual date rule on which this rule is based. */</span>
  <span class="hljs-number">59</span>     <span class="hljs-keyword">private</span> AnnualDateRule subrule;
  <span class="hljs-number">60</span> 
  <span class="hljs-number">61</span>     <span class="hljs-comment">/**
  62      * The day of the week (SerialDate.MONDAY, SerialDate.TUESDAY, and so on).
Appendix B: org.jfree.date.SerialDate
 391
 Listing B-6 (continued)
 RelativeDayOfWeekRule.java
  63      */</span>
  <span class="hljs-number">64</span>     <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> dayOfWeek;
  <span class="hljs-number">65</span> 
  <span class="hljs-number">66</span>     <span class="hljs-comment">/** Specifies which day of the week (PRECEDING, NEAREST or FOLLOWING). */</span>
  <span class="hljs-number">67</span>     <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> relative;
  <span class="hljs-number">68</span> 
  <span class="hljs-number">69</span>     <span class="hljs-comment">/**
  70      * Default constructor - builds a rule for the Monday following 1 January.
  71      */</span>
  <span class="hljs-number">72</span>     <span class="hljs-keyword">public</span> <span class="hljs-title function_">RelativeDayOfWeekRule</span><span class="hljs-params">()</span> {
  <span class="hljs-number">73</span>         <span class="hljs-built_in">this</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">DayAndMonthRule</span>(), SerialDate.MONDAY, SerialDate.FOLLOWING);
  <span class="hljs-number">74</span>     }
  <span class="hljs-number">75</span> 
  <span class="hljs-number">76</span>     <span class="hljs-comment">/**
  77      * Standard constructor - builds rule based on the supplied sub-rule.
  78      *
  79      * <span class="hljs-doctag">@param</span> subrule  the rule that determines the reference date.
  80      * <span class="hljs-doctag">@param</span> dayOfWeek  the day-of-the-week relative to the reference date.
  81      * <span class="hljs-doctag">@param</span> relative  indicates *which* day-of-the-week (preceding, nearest
  82      *                  or following).
  83      */</span>
  <span class="hljs-number">84</span>     <span class="hljs-keyword">public</span> <span class="hljs-title function_">RelativeDayOfWeekRule</span><span class="hljs-params">(<span class="hljs-keyword">final</span> AnnualDateRule subrule,
  <span class="hljs-number">85</span>             <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> dayOfWeek, <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> relative)</span> {
  <span class="hljs-number">86</span>         <span class="hljs-built_in">this</span>.subrule = subrule;
  <span class="hljs-number">87</span>         <span class="hljs-built_in">this</span>.dayOfWeek = dayOfWeek;
  <span class="hljs-number">88</span>         <span class="hljs-built_in">this</span>.relative = relative;
  <span class="hljs-number">89</span>     }
  <span class="hljs-number">90</span> 
  <span class="hljs-number">91</span>     <span class="hljs-comment">/**
  92      * Returns the sub-rule (also called the reference rule).
  93      *
  94      * <span class="hljs-doctag">@return</span> The annual date rule that determines the reference date for this
  95      *         rule.
  96      */</span>
  <span class="hljs-number">97</span>     <span class="hljs-keyword">public</span> AnnualDateRule <span class="hljs-title function_">getSubrule</span><span class="hljs-params">()</span> {
  <span class="hljs-number">98</span>         <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.subrule;
  <span class="hljs-number">99</span>     }
 <span class="hljs-number">100</span> 
 <span class="hljs-number">101</span>     <span class="hljs-comment">/**
 102      * Sets the sub-rule.
 103      *
 104      * <span class="hljs-doctag">@param</span> subrule  the annual date rule that determines the reference date
 105      *                 for this rule.
 106      */</span>
 <span class="hljs-number">107</span>     <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setSubrule</span><span class="hljs-params">(<span class="hljs-keyword">final</span> AnnualDateRule subrule)</span> {
 <span class="hljs-number">108</span>         <span class="hljs-built_in">this</span>.subrule = subrule;
 <span class="hljs-number">109</span>     }
 <span class="hljs-number">110</span> 
 <span class="hljs-number">111</span>     <span class="hljs-comment">/**
 112      * Returns the day-of-the-week for this rule.
 113      *
 114      * <span class="hljs-doctag">@return</span> the day-of-the-week for this rule.
 115      */</span>
 <span class="hljs-number">116</span>     <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getDayOfWeek</span><span class="hljs-params">()</span> {
 <span class="hljs-number">117</span>         <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.dayOfWeek;
 <span class="hljs-number">118</span>     }
 <span class="hljs-number">119</span> 
 <span class="hljs-number">120</span>     <span class="hljs-comment">/**
 121      * Sets the day-of-the-week for this rule.
 122      *
 123      * <span class="hljs-doctag">@param</span> dayOfWeek  the day-of-the-week (SerialDate.MONDAY,
 124      *                   SerialDate.TUESDAY, and so on).
392
 Appendix B: org.jfree.date.SerialDate
 Listing B-6 (continued)
 RelativeDayOfWeekRule.java
 125      */</span>
 <span class="hljs-number">126</span>     <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setDayOfWeek</span><span class="hljs-params">(<span class="hljs-keyword">final</span> <span class="hljs-type">int</span> dayOfWeek)</span> {
 <span class="hljs-number">127</span>         <span class="hljs-built_in">this</span>.dayOfWeek = dayOfWeek;
 <span class="hljs-number">128</span>     }
 <span class="hljs-number">129</span> 
 <span class="hljs-number">130</span>     <span class="hljs-comment">/**
 131      * Returns the &#x27;relative&#x27; attribute, that determines *which*
 132      * day-of-the-week we are interested in (SerialDate.PRECEDING,
 133      * SerialDate.NEAREST or SerialDate.FOLLOWING).
 134      *
 135      * <span class="hljs-doctag">@return</span> The &#x27;relative&#x27; attribute.
 136      */</span>
 <span class="hljs-number">137</span>     <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getRelative</span><span class="hljs-params">()</span> {
 <span class="hljs-number">138</span>         <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.relative;
 <span class="hljs-number">139</span>     }
 <span class="hljs-number">140</span> 
 <span class="hljs-number">141</span>     <span class="hljs-comment">/**
 142      * Sets the &#x27;relative&#x27; attribute (SerialDate.PRECEDING, SerialDate.NEAREST,
 143      * SerialDate.FOLLOWING).
 144      *
 145      * <span class="hljs-doctag">@param</span> relative  determines *which* day-of-the-week is selected by this
 146      *                  rule.
 147      */</span>
 <span class="hljs-number">148</span>     <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setRelative</span><span class="hljs-params">(<span class="hljs-keyword">final</span> <span class="hljs-type">int</span> relative)</span> {
 <span class="hljs-number">149</span>         <span class="hljs-built_in">this</span>.relative = relative;
 <span class="hljs-number">150</span>     }
 <span class="hljs-number">151</span> 
 <span class="hljs-number">152</span>     <span class="hljs-comment">/**
 153      * Creates a clone of this rule.
 154      *
 155      * <span class="hljs-doctag">@return</span> a clone of this rule.
 156      *
 157      * <span class="hljs-doctag">@throws</span> CloneNotSupportedException this should never happen.
 158      */</span>
 <span class="hljs-number">159</span>     <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">clone</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> CloneNotSupportedException {
 <span class="hljs-number">160</span>         <span class="hljs-keyword">final</span> RelativeDayOfWeekRule duplicate
 <span class="hljs-number">161</span>             = (RelativeDayOfWeekRule) <span class="hljs-built_in">super</span>.clone();
 <span class="hljs-number">162</span>         duplicate.subrule = (AnnualDateRule) duplicate.getSubrule().clone();
 <span class="hljs-number">163</span>         <span class="hljs-keyword">return</span> duplicate;
 <span class="hljs-number">164</span>     }
 <span class="hljs-number">165</span> 
 <span class="hljs-number">166</span>     <span class="hljs-comment">/**
 167      * Returns the date generated by this rule, for the specified year.
 168      *
 169      * <span class="hljs-doctag">@param</span> year  the year (1900 &amp;lt;= year &amp;lt;= 9999).
 170      *
 171      * <span class="hljs-doctag">@return</span> The date generated by the rule for the given year (possibly
 172      *         &lt;code&gt;null&lt;/code&gt;).
 173      */</span>
 <span class="hljs-number">174</span>     <span class="hljs-keyword">public</span> SerialDate <span class="hljs-title function_">getDate</span><span class="hljs-params">(<span class="hljs-keyword">final</span> <span class="hljs-type">int</span> year)</span> {
 <span class="hljs-number">175</span> 
 <span class="hljs-number">176</span>         <span class="hljs-comment">// check argument...</span>
 <span class="hljs-number">177</span>         <span class="hljs-keyword">if</span> ((year &lt; SerialDate.MINIMUM_YEAR_SUPPORTED)
 <span class="hljs-number">178</span>             || (year &gt; SerialDate.MAXIMUM_YEAR_SUPPORTED)) {
 <span class="hljs-number">179</span>             <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(
 <span class="hljs-number">180</span>                 <span class="hljs-string">&quot;RelativeDayOfWeekRule.getDate(): year outside valid range.&quot;</span>);
 <span class="hljs-number">181</span>         }
 <span class="hljs-number">182</span> 
 <span class="hljs-number">183</span>         <span class="hljs-comment">// calculate the date...</span>
 <span class="hljs-number">184</span>         <span class="hljs-type">SerialDate</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;
 <span class="hljs-number">185</span>         <span class="hljs-keyword">final</span> <span class="hljs-type">SerialDate</span> <span class="hljs-variable">base</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">this</span>.subrule.getDate(year);
 <span class="hljs-number">186</span> 
Appendix B: org.jfree.date.SerialDate
 <span class="hljs-number">393</span>
 Listing B-<span class="hljs-number">6</span> (continued)
 RelativeDayOfWeekRule.java
 <span class="hljs-number">187</span>         <span class="hljs-keyword">if</span> (base != <span class="hljs-literal">null</span>) {
 <span class="hljs-number">188</span>             <span class="hljs-keyword">switch</span> (<span class="hljs-built_in">this</span>.relative) {
 <span class="hljs-number">189</span>                 <span class="hljs-keyword">case</span>(SerialDate.PRECEDING):
 <span class="hljs-number">190</span>                     result = SerialDate.getPreviousDayOfWeek(<span class="hljs-built_in">this</span>.dayOfWeek,
 <span class="hljs-number">191</span>                             base);
 <span class="hljs-number">192</span>                     <span class="hljs-keyword">break</span>;
 <span class="hljs-number">193</span>                 <span class="hljs-keyword">case</span>(SerialDate.NEAREST):
 <span class="hljs-number">194</span>                     result = SerialDate.getNearestDayOfWeek(<span class="hljs-built_in">this</span>.dayOfWeek,
 <span class="hljs-number">195</span>                             base);
 <span class="hljs-number">196</span>                     <span class="hljs-keyword">break</span>;
 <span class="hljs-number">197</span>                 <span class="hljs-keyword">case</span>(SerialDate.FOLLOWING):
 <span class="hljs-number">198</span>                     result = SerialDate.getFollowingDayOfWeek(<span class="hljs-built_in">this</span>.dayOfWeek,
 <span class="hljs-number">199</span>                             base);
 <span class="hljs-number">200</span>                     <span class="hljs-keyword">break</span>;
 <span class="hljs-number">201</span>                 <span class="hljs-keyword">default</span>:
 <span class="hljs-number">202</span>                     <span class="hljs-keyword">break</span>;
 <span class="hljs-number">203</span>             }
 <span class="hljs-number">204</span>         }
 <span class="hljs-number">205</span>         <span class="hljs-keyword">return</span> result;
 <span class="hljs-number">206</span> 
 <span class="hljs-number">207</span>     }
 <span class="hljs-number">208</span> 
 <span class="hljs-number">209</span> }


</code></pre>
<h3>üìù ŸÅŸáÿ±ÿ≥ÿ™ B-7 ‚Äî ŸÅÿß€åŸÑ DayDate.java</h3>
<pre class="hljs"><code>
<span class="hljs-number">1</span> <span class="hljs-comment">/* ========================================================================
   2  * JCommon : a free general purpose class library for the Java(tm) platform
   3  * ========================================================================
   4  *
   5  * (C) Copyright 2000-2005, by Object Refinery Limited and Contributors.
   ...
  36  */</span>
  <span class="hljs-number">37</span> <span class="hljs-keyword">package</span> org.jfree.date;
  <span class="hljs-number">38</span> 
  <span class="hljs-number">39</span> <span class="hljs-keyword">import</span> java.io.Serializable;
  <span class="hljs-number">40</span> <span class="hljs-keyword">import</span> java.util.*;
  <span class="hljs-number">41</span> 
  <span class="hljs-number">42</span> <span class="hljs-comment">/**
  43  * An abstract class that represents immutable dates with a precision of
  44  * one day.  The implementation will map each date to an integer that
  45  * represents an ordinal number of days from some fixed origin.
  46  *
  47  * Why not just use java.util.Date?  We will, when it makes sense.  At times,
  48  * java.util.Date can be *too* precise - it represents an instant in time,
  49  * accurate to 1/1000th of a second (with the date itself depending on the
  50  * time-zone).  Sometimes we just want to represent a particular day (e.g. 21
  51  * January 2015) without concerning ourselves about the time of day, or the
  52  * time-zone, or anything else.  That&#x27;s what we&#x27;ve defined DayDate for.
  53  *
  54  * Use DayDateFactory.makeDate to create an instance.
  55  *
  56  * <span class="hljs-doctag">@author</span> David Gilbert
  57  * <span class="hljs-doctag">@author</span> Robert C. Martin did a lot of refactoring.
  58  */</span>
  <span class="hljs-number">59</span> 
  <span class="hljs-number">60</span> <span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DayDate</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Comparable</span>, Serializable {
  <span class="hljs-number">61</span>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getOrdinalDay</span><span class="hljs-params">()</span>;
  <span class="hljs-number">62</span>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getYear</span><span class="hljs-params">()</span>;
  <span class="hljs-number">63</span>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> Month <span class="hljs-title function_">getMonth</span><span class="hljs-params">()</span>;
  <span class="hljs-number">64</span>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getDayOfMonth</span><span class="hljs-params">()</span>;
  <span class="hljs-number">65</span> 
  <span class="hljs-number">66</span>   <span class="hljs-keyword">protected</span> <span class="hljs-keyword">abstract</span> Day <span class="hljs-title function_">getDayOfWeekForOrdinalZero</span><span class="hljs-params">()</span>;
  <span class="hljs-number">67</span> 
  <span class="hljs-number">68</span>   <span class="hljs-keyword">public</span> DayDate <span class="hljs-title function_">plusDays</span><span class="hljs-params">(<span class="hljs-type">int</span> days)</span> {
  <span class="hljs-number">69</span>     <span class="hljs-keyword">return</span> DayDateFactory.makeDate(getOrdinalDay() + days);
  <span class="hljs-number">70</span>   }
  <span class="hljs-number">71</span> 
  <span class="hljs-number">72</span>   <span class="hljs-keyword">public</span> DayDate <span class="hljs-title function_">plusMonths</span><span class="hljs-params">(<span class="hljs-type">int</span> months)</span> {
  <span class="hljs-number">73</span>     <span class="hljs-type">int</span> <span class="hljs-variable">thisMonthAsOrdinal</span> <span class="hljs-operator">=</span> getMonth().toInt() - Month.JANUARY.toInt();
  <span class="hljs-number">74</span>     <span class="hljs-type">int</span> <span class="hljs-variable">thisMonthAndYearAsOrdinal</span> <span class="hljs-operator">=</span> <span class="hljs-number">12</span> * getYear() + thisMonthAsOrdinal;
  <span class="hljs-number">75</span>     <span class="hljs-type">int</span> <span class="hljs-variable">resultMonthAndYearAsOrdinal</span> <span class="hljs-operator">=</span> thisMonthAndYearAsOrdinal + months;
  <span class="hljs-number">76</span>     <span class="hljs-type">int</span> <span class="hljs-variable">resultYear</span> <span class="hljs-operator">=</span> resultMonthAndYearAsOrdinal / <span class="hljs-number">12</span>;
  <span class="hljs-number">77</span>     <span class="hljs-type">int</span> <span class="hljs-variable">resultMonthAsOrdinal</span> <span class="hljs-operator">=</span> resultMonthAndYearAsOrdinal % <span class="hljs-number">12</span> + Month.JANUARY.toInt();
  <span class="hljs-number">78</span>     <span class="hljs-type">Month</span> <span class="hljs-variable">resultMonth</span> <span class="hljs-operator">=</span> Month.fromInt(resultMonthAsOrdinal);
  <span class="hljs-number">79</span>     <span class="hljs-type">int</span> <span class="hljs-variable">resultDay</span> <span class="hljs-operator">=</span> correctLastDayOfMonth(getDayOfMonth(), resultMonth, resultYear);
  <span class="hljs-number">80</span>     <span class="hljs-keyword">return</span> DayDateFactory.makeDate(resultDay, resultMonth, resultYear);
  <span class="hljs-number">81</span>   }
  <span class="hljs-number">82</span> 
  <span class="hljs-number">83</span>   <span class="hljs-keyword">public</span> DayDate <span class="hljs-title function_">plusYears</span><span class="hljs-params">(<span class="hljs-type">int</span> years)</span> {
  <span class="hljs-number">84</span>     <span class="hljs-type">int</span> <span class="hljs-variable">resultYear</span> <span class="hljs-operator">=</span> getYear() + years;
  <span class="hljs-number">85</span>     <span class="hljs-type">int</span> <span class="hljs-variable">resultDay</span> <span class="hljs-operator">=</span> correctLastDayOfMonth(getDayOfMonth(), getMonth(), resultYear);
  <span class="hljs-number">86</span>     <span class="hljs-keyword">return</span> DayDateFactory.makeDate(resultDay, getMonth(), resultYear);
  <span class="hljs-number">87</span>   }
  <span class="hljs-number">88</span> 
  <span class="hljs-number">89</span>   <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-title function_">correctLastDayOfMonth</span><span class="hljs-params">(<span class="hljs-type">int</span> day, Month month, <span class="hljs-type">int</span> year)</span> {
  <span class="hljs-number">90</span>     <span class="hljs-type">int</span> <span class="hljs-variable">lastDayOfMonth</span> <span class="hljs-operator">=</span> DateUtil.lastDayOfMonth(month, year);
  <span class="hljs-number">91</span>     <span class="hljs-keyword">if</span> (day &gt; lastDayOfMonth)
Appendix B: org.jfree.date.SerialDate
 <span class="hljs-number">395</span>
 Listing B-<span class="hljs-number">7</span> (continued)
 DayDate.java (Final)
  <span class="hljs-number">92</span>         day = lastDayOfMonth;
  <span class="hljs-number">93</span>     <span class="hljs-keyword">return</span> day;
  <span class="hljs-number">94</span>   }
  <span class="hljs-number">95</span> 
  <span class="hljs-number">96</span>   <span class="hljs-keyword">public</span> DayDate <span class="hljs-title function_">getPreviousDayOfWeek</span><span class="hljs-params">(Day targetDayOfWeek)</span> {
  <span class="hljs-number">97</span>     <span class="hljs-type">int</span> <span class="hljs-variable">offsetToTarget</span> <span class="hljs-operator">=</span> targetDayOfWeek.toInt() - getDayOfWeek().toInt();
  <span class="hljs-number">98</span>     <span class="hljs-keyword">if</span> (offsetToTarget &gt;= <span class="hljs-number">0</span>)
  <span class="hljs-number">99</span>       offsetToTarget -= <span class="hljs-number">7</span>;
 <span class="hljs-number">100</span>     <span class="hljs-keyword">return</span> plusDays(offsetToTarget);
 <span class="hljs-number">101</span>   }
 <span class="hljs-number">102</span> 
 <span class="hljs-number">103</span>   <span class="hljs-keyword">public</span> DayDate <span class="hljs-title function_">getFollowingDayOfWeek</span><span class="hljs-params">(Day targetDayOfWeek)</span> {
 <span class="hljs-number">104</span>     <span class="hljs-type">int</span> <span class="hljs-variable">offsetToTarget</span> <span class="hljs-operator">=</span> targetDayOfWeek.toInt() - getDayOfWeek().toInt();
 <span class="hljs-number">105</span>     <span class="hljs-keyword">if</span> (offsetToTarget &lt;= <span class="hljs-number">0</span>)
 <span class="hljs-number">106</span>       offsetToTarget += <span class="hljs-number">7</span>;
 <span class="hljs-number">107</span>     <span class="hljs-keyword">return</span> plusDays(offsetToTarget);
 <span class="hljs-number">108</span>   }
 <span class="hljs-number">109</span> 
 <span class="hljs-number">110</span>   <span class="hljs-keyword">public</span> DayDate <span class="hljs-title function_">getNearestDayOfWeek</span><span class="hljs-params">(Day targetDayOfWeek)</span> {
 <span class="hljs-number">111</span>     <span class="hljs-type">int</span> <span class="hljs-variable">offsetToThisWeeksTarget</span> <span class="hljs-operator">=</span> targetDayOfWeek.toInt() - getDayOfWeek().toInt();
 <span class="hljs-number">112</span>     <span class="hljs-type">int</span> <span class="hljs-variable">offsetToFutureTarget</span> <span class="hljs-operator">=</span> (offsetToThisWeeksTarget + <span class="hljs-number">7</span>) % <span class="hljs-number">7</span>;
 <span class="hljs-number">113</span>     <span class="hljs-type">int</span> <span class="hljs-variable">offsetToPreviousTarget</span> <span class="hljs-operator">=</span> offsetToFutureTarget - <span class="hljs-number">7</span>;
 <span class="hljs-number">114</span> 
 <span class="hljs-number">115</span>     <span class="hljs-keyword">if</span> (offsetToFutureTarget &gt; <span class="hljs-number">3</span>)
 <span class="hljs-number">116</span>       <span class="hljs-keyword">return</span> plusDays(offsetToPreviousTarget);
 <span class="hljs-number">117</span>     <span class="hljs-keyword">else</span>
 <span class="hljs-number">118</span>       <span class="hljs-keyword">return</span> plusDays(offsetToFutureTarget);
 <span class="hljs-number">119</span>   }
 <span class="hljs-number">120</span> 
 <span class="hljs-number">121</span>   <span class="hljs-keyword">public</span> DayDate <span class="hljs-title function_">getEndOfMonth</span><span class="hljs-params">()</span> {
 <span class="hljs-number">122</span>     <span class="hljs-type">Month</span> <span class="hljs-variable">month</span> <span class="hljs-operator">=</span> getMonth();
 <span class="hljs-number">123</span>     <span class="hljs-type">int</span> <span class="hljs-variable">year</span> <span class="hljs-operator">=</span> getYear();
 <span class="hljs-number">124</span>     <span class="hljs-type">int</span> <span class="hljs-variable">lastDay</span> <span class="hljs-operator">=</span> DateUtil.lastDayOfMonth(month, year);
 <span class="hljs-number">125</span>     <span class="hljs-keyword">return</span> DayDateFactory.makeDate(lastDay, month, year);
 <span class="hljs-number">126</span>   }
 <span class="hljs-number">127</span> 
 <span class="hljs-number">128</span>   <span class="hljs-keyword">public</span> Date <span class="hljs-title function_">toDate</span><span class="hljs-params">()</span> {
 <span class="hljs-number">129</span>     <span class="hljs-keyword">final</span> <span class="hljs-type">Calendar</span> <span class="hljs-variable">calendar</span> <span class="hljs-operator">=</span> Calendar.getInstance();
 <span class="hljs-number">130</span>     <span class="hljs-type">int</span> <span class="hljs-variable">ordinalMonth</span> <span class="hljs-operator">=</span> getMonth().toInt() - Month.JANUARY.toInt();
 <span class="hljs-number">131</span>     calendar.set(getYear(), ordinalMonth, getDayOfMonth(), <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);
 <span class="hljs-number">132</span>     <span class="hljs-keyword">return</span> calendar.getTime();
 <span class="hljs-number">133</span>   }
 <span class="hljs-number">134</span> 
 <span class="hljs-number">135</span>   <span class="hljs-keyword">public</span> String <span class="hljs-title function_">toString</span><span class="hljs-params">()</span> {
 <span class="hljs-number">136</span>     <span class="hljs-keyword">return</span> String.format(<span class="hljs-string">&quot;%02d-%s-%d&quot;</span>, getDayOfMonth(), getMonth(), getYear());
 <span class="hljs-number">137</span>   }
 <span class="hljs-number">138</span> 
 <span class="hljs-number">139</span>   <span class="hljs-keyword">public</span> Day <span class="hljs-title function_">getDayOfWeek</span><span class="hljs-params">()</span> {
 <span class="hljs-number">140</span>     <span class="hljs-type">Day</span> <span class="hljs-variable">startingDay</span> <span class="hljs-operator">=</span> getDayOfWeekForOrdinalZero();
 <span class="hljs-number">141</span>     <span class="hljs-type">int</span> <span class="hljs-variable">startingOffset</span> <span class="hljs-operator">=</span> startingDay.toInt() - Day.SUNDAY.toInt();
 <span class="hljs-number">142</span>     <span class="hljs-type">int</span> <span class="hljs-variable">ordinalOfDayOfWeek</span> <span class="hljs-operator">=</span> (getOrdinalDay() + startingOffset) % <span class="hljs-number">7</span>;
 <span class="hljs-number">143</span>     <span class="hljs-keyword">return</span> Day.fromInt(ordinalOfDayOfWeek + Day.SUNDAY.toInt());
 <span class="hljs-number">144</span>   }
 <span class="hljs-number">145</span> 
 <span class="hljs-number">146</span>   <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">daysSince</span><span class="hljs-params">(DayDate date)</span> {
 <span class="hljs-number">147</span>     <span class="hljs-keyword">return</span> getOrdinalDay() - date.getOrdinalDay();
 <span class="hljs-number">148</span>   }
 <span class="hljs-number">149</span> 
 <span class="hljs-number">150</span>   <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isOn</span><span class="hljs-params">(DayDate other)</span> {
 <span class="hljs-number">151</span>     <span class="hljs-keyword">return</span> getOrdinalDay() == other.getOrdinalDay();
 <span class="hljs-number">152</span>   }
 <span class="hljs-number">153</span> 
<span class="hljs-number">396</span>
 Appendix B: org.jfree.date.SerialDate
 Listing B-<span class="hljs-number">7</span> (continued)
 DayDate.java (Final)
 <span class="hljs-number">154</span>   <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isBefore</span><span class="hljs-params">(DayDate other)</span> {
 <span class="hljs-number">155</span>     <span class="hljs-keyword">return</span> getOrdinalDay() &lt; other.getOrdinalDay();
 <span class="hljs-number">156</span>   }
 <span class="hljs-number">157</span> 
 <span class="hljs-number">158</span>   <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isOnOrBefore</span><span class="hljs-params">(DayDate other)</span> {
 <span class="hljs-number">159</span>     <span class="hljs-keyword">return</span> getOrdinalDay() &lt;= other.getOrdinalDay();
 <span class="hljs-number">160</span>   }
 <span class="hljs-number">161</span> 
 <span class="hljs-number">162</span>   <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isAfter</span><span class="hljs-params">(DayDate other)</span> {
 <span class="hljs-number">163</span>     <span class="hljs-keyword">return</span> getOrdinalDay() &gt; other.getOrdinalDay();
 <span class="hljs-number">164</span>   }
 <span class="hljs-number">165</span> 
 <span class="hljs-number">166</span>   <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isOnOrAfter</span><span class="hljs-params">(DayDate other)</span> {
 <span class="hljs-number">167</span>     <span class="hljs-keyword">return</span> getOrdinalDay() &gt;= other.getOrdinalDay();
 <span class="hljs-number">168</span>   }
 <span class="hljs-number">169</span> 
 <span class="hljs-number">170</span>   <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isInRange</span><span class="hljs-params">(DayDate d1, DayDate d2)</span> {
 <span class="hljs-number">171</span>     <span class="hljs-keyword">return</span> isInRange(d1, d2, DateInterval.CLOSED);
 <span class="hljs-number">172</span>   }
 <span class="hljs-number">173</span> 
 <span class="hljs-number">174</span>   <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isInRange</span><span class="hljs-params">(DayDate d1, DayDate d2, DateInterval interval)</span> {
 <span class="hljs-number">175</span>     <span class="hljs-type">int</span> <span class="hljs-variable">left</span> <span class="hljs-operator">=</span> Math.min(d1.getOrdinalDay(), d2.getOrdinalDay());
 <span class="hljs-number">176</span>     <span class="hljs-type">int</span> <span class="hljs-variable">right</span> <span class="hljs-operator">=</span> Math.max(d1.getOrdinalDay(), d2.getOrdinalDay());
 <span class="hljs-number">177</span>     <span class="hljs-keyword">return</span> interval.isIn(getOrdinalDay(), left, right);
 <span class="hljs-number">178</span>   }
 <span class="hljs-number">179</span> }


</code></pre>
<h3>üìù ŸÅŸáÿ±ÿ≥ÿ™ B-8 ‚Äî ŸÅÿß€åŸÑ Month.java</h3>
<pre class="hljs"><code>
 <span class="hljs-number">1</span> <span class="hljs-keyword">package</span> org.jfree.date;
   <span class="hljs-number">2</span> 
   <span class="hljs-number">3</span> <span class="hljs-keyword">import</span> java.text.DateFormatSymbols;
   <span class="hljs-number">4</span> 
   <span class="hljs-number">5</span> <span class="hljs-keyword">public</span> <span class="hljs-keyword">enum</span> <span class="hljs-title class_">Month</span> {
   <span class="hljs-number">6</span>   JANUARY(<span class="hljs-number">1</span>), FEBRUARY(<span class="hljs-number">2</span>), MARCH(<span class="hljs-number">3</span>),
   <span class="hljs-number">7</span>   APRIL(<span class="hljs-number">4</span>),   MAY(<span class="hljs-number">5</span>),      JUNE(<span class="hljs-number">6</span>),
   <span class="hljs-number">8</span>   JULY(<span class="hljs-number">7</span>),    AUGUST(<span class="hljs-number">8</span>),   SEPTEMBER(<span class="hljs-number">9</span>),
   <span class="hljs-number">9</span>   OCTOBER(<span class="hljs-number">10</span>),NOVEMBER(<span class="hljs-number">11</span>),DECEMBER(<span class="hljs-number">12</span>);
  <span class="hljs-number">10</span>   <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">DateFormatSymbols</span> <span class="hljs-variable">dateFormatSymbols</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DateFormatSymbols</span>();
  <span class="hljs-number">11</span>   <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span>[] LAST_DAY_OF_MONTH =
  <span class="hljs-number">12</span>     {<span class="hljs-number">0</span>, <span class="hljs-number">31</span>, <span class="hljs-number">28</span>, <span class="hljs-number">31</span>, <span class="hljs-number">30</span>, <span class="hljs-number">31</span>, <span class="hljs-number">30</span>, <span class="hljs-number">31</span>, <span class="hljs-number">31</span>, <span class="hljs-number">30</span>, <span class="hljs-number">31</span>, <span class="hljs-number">30</span>, <span class="hljs-number">31</span>};
  <span class="hljs-number">13</span> 
  <span class="hljs-number">14</span>   <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> index;
  <span class="hljs-number">15</span> 
  <span class="hljs-number">16</span>   Month(<span class="hljs-type">int</span> index) {
  <span class="hljs-number">17</span>     <span class="hljs-built_in">this</span>.index = index;
  <span class="hljs-number">18</span>   }
  <span class="hljs-number">19</span> 
  <span class="hljs-number">20</span>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Month <span class="hljs-title function_">fromInt</span><span class="hljs-params">(<span class="hljs-type">int</span> monthIndex)</span> {
  <span class="hljs-number">21</span>     <span class="hljs-keyword">for</span> (Month m : Month.values()) {
  <span class="hljs-number">22</span>       <span class="hljs-keyword">if</span> (m.index == monthIndex)
  <span class="hljs-number">23</span>         <span class="hljs-keyword">return</span> m;
  <span class="hljs-number">24</span>     }
  <span class="hljs-number">25</span>     <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(<span class="hljs-string">&quot;Invalid month index &quot;</span> + monthIndex);
  <span class="hljs-number">26</span>   }
  <span class="hljs-number">27</span> 
  <span class="hljs-number">28</span>   <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">lastDay</span><span class="hljs-params">()</span> {
  <span class="hljs-number">29</span>     <span class="hljs-keyword">return</span> LAST_DAY_OF_MONTH[index];
  <span class="hljs-number">30</span>   }
  <span class="hljs-number">31</span> 
  <span class="hljs-number">32</span>   <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">quarter</span><span class="hljs-params">()</span> {
  <span class="hljs-number">33</span>     <span class="hljs-keyword">return</span> <span class="hljs-number">1</span> + (index - <span class="hljs-number">1</span>) / <span class="hljs-number">3</span>;
  <span class="hljs-number">34</span>   }
  <span class="hljs-number">35</span> 
  <span class="hljs-number">36</span>   <span class="hljs-keyword">public</span> String <span class="hljs-title function_">toString</span><span class="hljs-params">()</span> {
  <span class="hljs-number">37</span>     <span class="hljs-keyword">return</span> dateFormatSymbols.getMonths()[index - <span class="hljs-number">1</span>];
  <span class="hljs-number">38</span>   }
  <span class="hljs-number">39</span> 
  <span class="hljs-number">40</span>   <span class="hljs-keyword">public</span> String <span class="hljs-title function_">toShortString</span><span class="hljs-params">()</span> {
  <span class="hljs-number">41</span>     <span class="hljs-keyword">return</span> dateFormatSymbols.getShortMonths()[index - <span class="hljs-number">1</span>];
  <span class="hljs-number">42</span>   }
  <span class="hljs-number">43</span> 
  <span class="hljs-number">44</span>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Month <span class="hljs-title function_">parse</span><span class="hljs-params">(String s)</span> {
  <span class="hljs-number">45</span>     s = s.trim();
  <span class="hljs-number">46</span>     <span class="hljs-keyword">for</span> (Month m : Month.values())
  <span class="hljs-number">47</span>       <span class="hljs-keyword">if</span> (m.matches(s))
  <span class="hljs-number">48</span>         <span class="hljs-keyword">return</span> m;
  <span class="hljs-number">49</span> 
  <span class="hljs-number">50</span>     <span class="hljs-keyword">try</span> {
  <span class="hljs-number">51</span>       <span class="hljs-keyword">return</span> fromInt(Integer.parseInt(s));
  <span class="hljs-number">52</span>     }
  <span class="hljs-number">53</span>     <span class="hljs-keyword">catch</span> (NumberFormatException e) {}
  <span class="hljs-number">54</span>     <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(<span class="hljs-string">&quot;Invalid month &quot;</span> + s);
  <span class="hljs-number">55</span>   }
  <span class="hljs-number">56</span> 
  <span class="hljs-number">57</span>   <span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">matches</span><span class="hljs-params">(String s)</span> {
  <span class="hljs-number">58</span>     <span class="hljs-keyword">return</span> s.equalsIgnoreCase(toString()) ||
  <span class="hljs-number">59</span>            s.equalsIgnoreCase(toShortString());
  <span class="hljs-number">60</span>   }
  <span class="hljs-number">61</span> 
  <span class="hljs-number">62</span>   <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">toInt</span><span class="hljs-params">()</span> {
  <span class="hljs-number">63</span>     <span class="hljs-keyword">return</span> index;
  <span class="hljs-number">64</span>   }
  <span class="hljs-number">65</span> }


</code></pre>
<h3>üìù ŸÅŸáÿ±ÿ≥ÿ™ B-9 ‚Äî ŸÅÿß€åŸÑ Day.java</h3>
<pre class="hljs"><code> <span class="hljs-number">1</span> <span class="hljs-keyword">package</span> org.jfree.date;
   <span class="hljs-number">2</span> 
   <span class="hljs-number">3</span> <span class="hljs-keyword">import</span> java.util.Calendar;
   <span class="hljs-number">4</span> <span class="hljs-keyword">import</span> java.text.DateFormatSymbols;
   <span class="hljs-number">5</span> 
   <span class="hljs-number">6</span> <span class="hljs-keyword">public</span> <span class="hljs-keyword">enum</span> <span class="hljs-title class_">Day</span> {
   <span class="hljs-number">7</span>   MONDAY(Calendar.MONDAY),
   <span class="hljs-number">8</span>   TUESDAY(Calendar.TUESDAY),
   <span class="hljs-number">9</span>   WEDNESDAY(Calendar.WEDNESDAY),
  <span class="hljs-number">10</span>   THURSDAY(Calendar.THURSDAY),
  <span class="hljs-number">11</span>   FRIDAY(Calendar.FRIDAY),
  <span class="hljs-number">12</span>   SATURDAY(Calendar.SATURDAY),
  <span class="hljs-number">13</span>   SUNDAY(Calendar.SUNDAY);
  <span class="hljs-number">14</span> 
  <span class="hljs-number">15</span>   <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> index;
  <span class="hljs-number">16</span>   <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">DateFormatSymbols</span> <span class="hljs-variable">dateSymbols</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DateFormatSymbols</span>();
  <span class="hljs-number">17</span> 
  <span class="hljs-number">18</span>   Day(<span class="hljs-type">int</span> day) {
  <span class="hljs-number">19</span>     index = day;
  <span class="hljs-number">20</span>   }
  <span class="hljs-number">21</span> 
  <span class="hljs-number">22</span>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Day <span class="hljs-title function_">fromInt</span><span class="hljs-params">(<span class="hljs-type">int</span> index)</span> <span class="hljs-keyword">throws</span> IllegalArgumentException {
  <span class="hljs-number">23</span>     <span class="hljs-keyword">for</span> (Day d : Day.values())
  <span class="hljs-number">24</span>       <span class="hljs-keyword">if</span> (d.index == index)
  <span class="hljs-number">25</span>         <span class="hljs-keyword">return</span> d;
  <span class="hljs-number">26</span>     <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(
  <span class="hljs-number">27</span>       String.format(<span class="hljs-string">&quot;Illegal day index: %d.&quot;</span>, index));
  <span class="hljs-number">28</span>   }
  <span class="hljs-number">29</span> 
  <span class="hljs-number">30</span>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Day <span class="hljs-title function_">parse</span><span class="hljs-params">(String s)</span> <span class="hljs-keyword">throws</span> IllegalArgumentException {
  <span class="hljs-number">31</span>     String[] shortWeekdayNames =
  <span class="hljs-number">32</span>       dateSymbols.getShortWeekdays();
  <span class="hljs-number">33</span>     String[] weekDayNames =
  <span class="hljs-number">34</span>       dateSymbols.getWeekdays();
  <span class="hljs-number">35</span> 
  <span class="hljs-number">36</span>     s = s.trim();
  <span class="hljs-number">37</span>     <span class="hljs-keyword">for</span> (Day day : Day.values()) {
  <span class="hljs-number">38</span>       <span class="hljs-keyword">if</span> (s.equalsIgnoreCase(shortWeekdayNames[day.index]) ||
  <span class="hljs-number">39</span>           s.equalsIgnoreCase(weekDayNames[day.index])) {
  <span class="hljs-number">40</span>         <span class="hljs-keyword">return</span> day;
  <span class="hljs-number">41</span>       }
  <span class="hljs-number">42</span>     }
  <span class="hljs-number">43</span>     <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(
  <span class="hljs-number">44</span>       String.format(<span class="hljs-string">&quot;%s is not a valid weekday string&quot;</span>, s));
  <span class="hljs-number">45</span>   }
  <span class="hljs-number">46</span> 
  <span class="hljs-number">47</span>   <span class="hljs-keyword">public</span> String <span class="hljs-title function_">toString</span><span class="hljs-params">()</span> {
  <span class="hljs-number">48</span>     <span class="hljs-keyword">return</span> dateSymbols.getWeekdays()[index];
  <span class="hljs-number">49</span>   }
  <span class="hljs-number">50</span> 
  <span class="hljs-number">51</span>   <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">toInt</span><span class="hljs-params">()</span> {
  <span class="hljs-number">52</span>     <span class="hljs-keyword">return</span> index;
  <span class="hljs-number">53</span>   }
  <span class="hljs-number">54</span> }



</code></pre>
<h3>üìù ŸÅŸáÿ±ÿ≥ÿ™ B-10 ‚Äî ŸÅÿß€åŸÑ DateInterval.java</h3>
<pre class="hljs"><code> <span class="hljs-number">1</span> <span class="hljs-keyword">package</span> org.jfree.date;
   <span class="hljs-number">2</span> 
   <span class="hljs-number">3</span> <span class="hljs-keyword">public</span> <span class="hljs-keyword">enum</span> <span class="hljs-title class_">DateInterval</span> {
   <span class="hljs-number">4</span>   OPEN {
   <span class="hljs-number">5</span>     <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isIn</span><span class="hljs-params">(<span class="hljs-type">int</span> d, <span class="hljs-type">int</span> left, <span class="hljs-type">int</span> right)</span> {
   <span class="hljs-number">6</span>       <span class="hljs-keyword">return</span> d &gt; left &amp;&amp; d &lt; right;
   <span class="hljs-number">7</span>     }
   <span class="hljs-number">8</span>   },
   <span class="hljs-number">9</span>   CLOSED_LEFT {
  <span class="hljs-number">10</span>     <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isIn</span><span class="hljs-params">(<span class="hljs-type">int</span> d, <span class="hljs-type">int</span> left, <span class="hljs-type">int</span> right)</span> {
  <span class="hljs-number">11</span>       <span class="hljs-keyword">return</span> d &gt;= left &amp;&amp; d &lt; right;
  <span class="hljs-number">12</span>     }
  <span class="hljs-number">13</span>   },
  <span class="hljs-number">14</span>   CLOSED_RIGHT {
  <span class="hljs-number">15</span>     <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isIn</span><span class="hljs-params">(<span class="hljs-type">int</span> d, <span class="hljs-type">int</span> left, <span class="hljs-type">int</span> right)</span> {
  <span class="hljs-number">16</span>       <span class="hljs-keyword">return</span> d &gt; left &amp;&amp; d &lt;= right;
  <span class="hljs-number">17</span>     }
  <span class="hljs-number">18</span>   },
  <span class="hljs-number">19</span>   CLOSED {
  <span class="hljs-number">20</span>     <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isIn</span><span class="hljs-params">(<span class="hljs-type">int</span> d, <span class="hljs-type">int</span> left, <span class="hljs-type">int</span> right)</span> {
  <span class="hljs-number">21</span>       <span class="hljs-keyword">return</span> d &gt;= left &amp;&amp; d &lt;= right;
  <span class="hljs-number">22</span>     }
  <span class="hljs-number">23</span>   };
  <span class="hljs-number">24</span> 
  <span class="hljs-number">25</span>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isIn</span><span class="hljs-params">(<span class="hljs-type">int</span> d, <span class="hljs-type">int</span> left, <span class="hljs-type">int</span> right)</span>;
  <span class="hljs-number">26</span> }


</code></pre>
<h3>üìù ŸÅŸáÿ±ÿ≥ÿ™ B-11 ‚Äî ŸÅÿß€åŸÑ WeekInMonth.java</h3>
<pre class="hljs"><code><span class="hljs-number">1</span> <span class="hljs-keyword">package</span> org.jfree.date;
   <span class="hljs-number">2</span> 
   <span class="hljs-number">3</span> <span class="hljs-keyword">public</span> <span class="hljs-keyword">enum</span> <span class="hljs-title class_">WeekInMonth</span> {
   <span class="hljs-number">4</span>   FIRST(<span class="hljs-number">1</span>), SECOND(<span class="hljs-number">2</span>), THIRD(<span class="hljs-number">3</span>), FOURTH(<span class="hljs-number">4</span>), LAST(<span class="hljs-number">0</span>);
   <span class="hljs-number">5</span>   <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> index;
   <span class="hljs-number">6</span> 
   <span class="hljs-number">7</span>   WeekInMonth(<span class="hljs-type">int</span> index) {
   <span class="hljs-number">8</span>     <span class="hljs-built_in">this</span>.index = index;
   <span class="hljs-number">9</span>   }
  <span class="hljs-number">10</span> 
  <span class="hljs-number">11</span>   <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">toInt</span><span class="hljs-params">()</span> {
  <span class="hljs-number">12</span>     <span class="hljs-keyword">return</span> index;
  <span class="hljs-number">13</span>   }
  <span class="hljs-number">14</span> }


</code></pre>
<h3>üìù ŸÅŸáÿ±ÿ≥ÿ™ B-12 ‚Äî ŸÅÿß€åŸÑ WeekdayRange.java</h3>
<pre class="hljs"><code> <span class="hljs-number">1</span> <span class="hljs-keyword">package</span> org.jfree.date;
   <span class="hljs-number">2</span> 
   <span class="hljs-number">3</span> <span class="hljs-keyword">public</span> <span class="hljs-keyword">enum</span> <span class="hljs-title class_">WeekdayRange</span> {
   <span class="hljs-number">4</span>   LAST, NEAREST, NEXT
   <span class="hljs-number">5</span> }


</code></pre>
<h3>üìù ŸÅŸáÿ±ÿ≥ÿ™ B-13 ‚Äî ŸÅÿß€åŸÑ DateUtil.java</h3>
<pre class="hljs"><code>
 <span class="hljs-number">1</span> <span class="hljs-keyword">package</span> org.jfree.date;
   <span class="hljs-number">2</span> 
   <span class="hljs-number">3</span> <span class="hljs-keyword">import</span> java.text.DateFormatSymbols;
   <span class="hljs-number">4</span> 
   <span class="hljs-number">5</span> <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DateUtil</span> {
   <span class="hljs-number">6</span>   <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">DateFormatSymbols</span> <span class="hljs-variable">dateFormatSymbols</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DateFormatSymbols</span>();
   <span class="hljs-number">7</span> 
   <span class="hljs-number">8</span>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String[] getMonthNames() {
   <span class="hljs-number">9</span>     <span class="hljs-keyword">return</span> dateFormatSymbols.getMonths();
  <span class="hljs-number">10</span>   }
  <span class="hljs-number">11</span> 
  <span class="hljs-number">12</span>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isLeapYear</span><span class="hljs-params">(<span class="hljs-type">int</span> year)</span> {
  <span class="hljs-number">13</span>     <span class="hljs-type">boolean</span> <span class="hljs-variable">fourth</span> <span class="hljs-operator">=</span> year % <span class="hljs-number">4</span> == <span class="hljs-number">0</span>;
  <span class="hljs-number">14</span>     <span class="hljs-type">boolean</span> <span class="hljs-variable">hundredth</span> <span class="hljs-operator">=</span> year % <span class="hljs-number">100</span> == <span class="hljs-number">0</span>;
  <span class="hljs-number">15</span>     <span class="hljs-type">boolean</span> <span class="hljs-variable">fourHundredth</span> <span class="hljs-operator">=</span> year % <span class="hljs-number">400</span> == <span class="hljs-number">0</span>;
  <span class="hljs-number">16</span>     <span class="hljs-keyword">return</span> fourth &amp;&amp; (!hundredth || fourHundredth);
  <span class="hljs-number">17</span>   }
  <span class="hljs-number">18</span> 
  <span class="hljs-number">19</span>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-title function_">lastDayOfMonth</span><span class="hljs-params">(Month month, <span class="hljs-type">int</span> year)</span> {
  <span class="hljs-number">20</span>     <span class="hljs-keyword">if</span> (month == Month.FEBRUARY &amp;&amp; isLeapYear(year))
  <span class="hljs-number">21</span>       <span class="hljs-keyword">return</span> month.lastDay() + <span class="hljs-number">1</span>;
  <span class="hljs-number">22</span>     <span class="hljs-keyword">else</span>
  <span class="hljs-number">23</span>       <span class="hljs-keyword">return</span> month.lastDay();
  <span class="hljs-number">24</span>   }
  <span class="hljs-number">25</span> 
  <span class="hljs-number">26</span>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-title function_">leapYearCount</span><span class="hljs-params">(<span class="hljs-type">int</span> year)</span> {
  <span class="hljs-number">27</span>     <span class="hljs-type">int</span> <span class="hljs-variable">leap4</span> <span class="hljs-operator">=</span> (year - <span class="hljs-number">1896</span>) / <span class="hljs-number">4</span>;
  <span class="hljs-number">28</span>     <span class="hljs-type">int</span> <span class="hljs-variable">leap100</span> <span class="hljs-operator">=</span> (year - <span class="hljs-number">1800</span>) / <span class="hljs-number">100</span>;
  <span class="hljs-number">29</span>     <span class="hljs-type">int</span> <span class="hljs-variable">leap400</span> <span class="hljs-operator">=</span> (year - <span class="hljs-number">1600</span>) / <span class="hljs-number">400</span>;
  <span class="hljs-number">30</span>     <span class="hljs-keyword">return</span> leap4 - leap100 + leap400;
  <span class="hljs-number">31</span>   }
  <span class="hljs-number">32</span> }


</code></pre>
<h3>üìù ŸÅŸáÿ±ÿ≥ÿ™ B-14 ‚Äî ŸÅÿß€åŸÑ DayDateFactory.java</h3>
<pre class="hljs"><code> <span class="hljs-number">1</span> <span class="hljs-keyword">package</span> org.jfree.date;
   <span class="hljs-number">2</span> 
   <span class="hljs-number">3</span> <span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DayDateFactory</span> {
   <span class="hljs-number">4</span>   <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">DayDateFactory</span> <span class="hljs-variable">factory</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SpreadsheetDateFactory</span>();
   <span class="hljs-number">5</span>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setInstance</span><span class="hljs-params">(DayDateFactory factory)</span> {
   <span class="hljs-number">6</span>     DayDateFactory.factory = factory;
   <span class="hljs-number">7</span>   }
   <span class="hljs-number">8</span> 
   <span class="hljs-number">9</span>   <span class="hljs-keyword">protected</span> <span class="hljs-keyword">abstract</span> DayDate <span class="hljs-title function_">_makeDate</span><span class="hljs-params">(<span class="hljs-type">int</span> ordinal)</span>;
  <span class="hljs-number">10</span>   <span class="hljs-keyword">protected</span> <span class="hljs-keyword">abstract</span> DayDate <span class="hljs-title function_">_makeDate</span><span class="hljs-params">(<span class="hljs-type">int</span> day, Month month, <span class="hljs-type">int</span> year)</span>;
  <span class="hljs-number">11</span>   <span class="hljs-keyword">protected</span> <span class="hljs-keyword">abstract</span> DayDate <span class="hljs-title function_">_makeDate</span><span class="hljs-params">(<span class="hljs-type">int</span> day, <span class="hljs-type">int</span> month, <span class="hljs-type">int</span> year)</span>;
  <span class="hljs-number">12</span>   <span class="hljs-keyword">protected</span> <span class="hljs-keyword">abstract</span> DayDate <span class="hljs-title function_">_makeDate</span><span class="hljs-params">(java.util.Date date)</span>;
  <span class="hljs-number">13</span>   <span class="hljs-keyword">protected</span> <span class="hljs-keyword">abstract</span> <span class="hljs-type">int</span> <span class="hljs-title function_">_getMinimumYear</span><span class="hljs-params">()</span>;
  <span class="hljs-number">14</span>   <span class="hljs-keyword">protected</span> <span class="hljs-keyword">abstract</span> <span class="hljs-type">int</span> <span class="hljs-title function_">_getMaximumYear</span><span class="hljs-params">()</span>;
  <span class="hljs-number">15</span> 
  <span class="hljs-number">16</span>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> DayDate <span class="hljs-title function_">makeDate</span><span class="hljs-params">(<span class="hljs-type">int</span> ordinal)</span> {
  <span class="hljs-number">17</span>     <span class="hljs-keyword">return</span> factory._makeDate(ordinal);
  <span class="hljs-number">18</span>   }
  <span class="hljs-number">19</span> 
  <span class="hljs-number">20</span>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> DayDate <span class="hljs-title function_">makeDate</span><span class="hljs-params">(<span class="hljs-type">int</span> day, Month month, <span class="hljs-type">int</span> year)</span> {
  <span class="hljs-number">21</span>     <span class="hljs-keyword">return</span> factory._makeDate(day, month, year);
  <span class="hljs-number">22</span>   }
  <span class="hljs-number">23</span> 
  <span class="hljs-number">24</span>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> DayDate <span class="hljs-title function_">makeDate</span><span class="hljs-params">(<span class="hljs-type">int</span> day, <span class="hljs-type">int</span> month, <span class="hljs-type">int</span> year)</span> {
  <span class="hljs-number">25</span>     <span class="hljs-keyword">return</span> factory._makeDate(day, month, year);
  <span class="hljs-number">26</span>   }
  <span class="hljs-number">27</span> 
  <span class="hljs-number">28</span>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> DayDate <span class="hljs-title function_">makeDate</span><span class="hljs-params">(java.util.Date date)</span> {
  <span class="hljs-number">29</span>     <span class="hljs-keyword">return</span> factory._makeDate(date);
  <span class="hljs-number">30</span>   }
  <span class="hljs-number">31</span> 
  <span class="hljs-number">32</span>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getMinimumYear</span><span class="hljs-params">()</span> {
  <span class="hljs-number">33</span>     <span class="hljs-keyword">return</span> factory._getMinimumYear();
  <span class="hljs-number">34</span>   }
  <span class="hljs-number">35</span> 
  <span class="hljs-number">36</span>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getMaximumYear</span><span class="hljs-params">()</span> {
  <span class="hljs-number">37</span>     <span class="hljs-keyword">return</span> factory._getMaximumYear();
  <span class="hljs-number">38</span>   }
  <span class="hljs-number">39</span> }


</code></pre>
<h3>üìù ŸÅŸáÿ±ÿ≥ÿ™ B-15 ‚Äî ŸÅÿß€åŸÑ SpreadsheetDateFactory.java</h3>
<pre class="hljs"><code>
  <span class="hljs-number">1</span> <span class="hljs-keyword">package</span> org.jfree.date;
   <span class="hljs-number">2</span> 
   <span class="hljs-number">3</span> <span class="hljs-keyword">import</span> java.util.*;
   <span class="hljs-number">4</span> 
   <span class="hljs-number">5</span> <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SpreadsheetDateFactory</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">DayDateFactory</span> {
   <span class="hljs-number">6</span>   <span class="hljs-keyword">public</span> DayDate <span class="hljs-title function_">_makeDate</span><span class="hljs-params">(<span class="hljs-type">int</span> ordinal)</span> {
   <span class="hljs-number">7</span>     <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SpreadsheetDate</span>(ordinal);
   <span class="hljs-number">8</span>   }
   <span class="hljs-number">9</span> 
  <span class="hljs-number">10</span>   <span class="hljs-keyword">public</span> DayDate <span class="hljs-title function_">_makeDate</span><span class="hljs-params">(<span class="hljs-type">int</span> day, Month month, <span class="hljs-type">int</span> year)</span> {
  <span class="hljs-number">11</span>     <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SpreadsheetDate</span>(day, month, year);
  <span class="hljs-number">12</span>   }
  <span class="hljs-number">13</span> 
  <span class="hljs-number">14</span>   <span class="hljs-keyword">public</span> DayDate <span class="hljs-title function_">_makeDate</span><span class="hljs-params">(<span class="hljs-type">int</span> day, <span class="hljs-type">int</span> month, <span class="hljs-type">int</span> year)</span> {
  <span class="hljs-number">15</span>     <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SpreadsheetDate</span>(day, month, year);
  <span class="hljs-number">16</span>   }
  <span class="hljs-number">17</span> 
  <span class="hljs-number">18</span>   <span class="hljs-keyword">public</span> DayDate <span class="hljs-title function_">_makeDate</span><span class="hljs-params">(Date date)</span> {
  <span class="hljs-number">19</span>     <span class="hljs-keyword">final</span> <span class="hljs-type">GregorianCalendar</span> <span class="hljs-variable">calendar</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">GregorianCalendar</span>();
  <span class="hljs-number">20</span>     calendar.setTime(date);
  <span class="hljs-number">21</span>     <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SpreadsheetDate</span>(
  <span class="hljs-number">22</span>       calendar.get(Calendar.DATE),
  <span class="hljs-number">23</span>       Month.fromInt(calendar.get(Calendar.MONTH) + <span class="hljs-number">1</span>),
  <span class="hljs-number">24</span>       calendar.get(Calendar.YEAR));
  <span class="hljs-number">25</span>   }
  <span class="hljs-number">26</span> 
  <span class="hljs-number">27</span>   <span class="hljs-keyword">protected</span> <span class="hljs-type">int</span> <span class="hljs-title function_">_getMinimumYear</span><span class="hljs-params">()</span> {
  <span class="hljs-number">28</span>     <span class="hljs-keyword">return</span> SpreadsheetDate.MINIMUM_YEAR_SUPPORTED;
  <span class="hljs-number">29</span>   }
  <span class="hljs-number">30</span> 
  <span class="hljs-number">31</span>   <span class="hljs-keyword">protected</span> <span class="hljs-type">int</span> <span class="hljs-title function_">_getMaximumYear</span><span class="hljs-params">()</span> {
  <span class="hljs-number">32</span>     <span class="hljs-keyword">return</span> SpreadsheetDate.MAXIMUM_YEAR_SUPPORTED;
  <span class="hljs-number">33</span>   }
  <span class="hljs-number">34</span> }


</code></pre>
<h3>üìù ŸÅŸáÿ±ÿ≥ÿ™ B-16 ‚Äî ŸÅÿß€åŸÑ SpreadsheetDate.java</h3>
<pre class="hljs"><code> <span class="hljs-number">1</span> <span class="hljs-comment">/* ========================================================================
   2  * JCommon : a free general purpose class library for the Java(tm) platform
   3  * ========================================================================
   4  *
   5  * (C) Copyright 2000-2005, by Object Refinery Limited and Contributors.
   6  * 
...
  52  *
  53  */</span>
  <span class="hljs-number">54</span> 
  <span class="hljs-number">55</span> <span class="hljs-keyword">package</span> org.jfree.date;
  <span class="hljs-number">56</span> 
  <span class="hljs-number">57</span> <span class="hljs-keyword">import</span> <span class="hljs-keyword">static</span> org.jfree.date.Month.FEBRUARY;
  <span class="hljs-number">58</span> 
  <span class="hljs-number">59</span> <span class="hljs-keyword">import</span> java.util.*;
  <span class="hljs-number">60</span> 
  <span class="hljs-number">61</span> <span class="hljs-comment">/**
  62  * Represents a date using an integer, in a similar fashion to the
  63  * implementation in Microsoft Excel.  The range of dates supported is
  64  * 1-Jan-1900 to 31-Dec-9999.
  65  * &lt;p/&gt;
  66  * Be aware that there is a deliberate bug in Excel that recognises the year
  67  * 1900 as a leap year when in fact it is not a leap year. You can find more
  68  * information on the Microsoft website in article Q181370:
  69  * &lt;p/&gt;
  70  * http://support.microsoft.com/support/kb/articles/Q181/3/70.asp
  71  * &lt;p/&gt;
  72  * Excel uses the convention that 1-Jan-1900 = 1.  This class uses the
  73  * convention 1-Jan-1900 = 2.
  74  * The result is that the day number in this class will be different to the
  75  * Excel figure for January and February 1900...but then Excel adds in an extra
  76  * day (29-Feb-1900 which does not actually exist!) and from that point forward
  77  * the day numbers will match.
  78  *
  79  * <span class="hljs-doctag">@author</span> David Gilbert
  80  */</span>
  <span class="hljs-number">81</span> <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SpreadsheetDate</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">DayDate</span> {
  <span class="hljs-number">82</span>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">EARLIEST_DATE_ORDINAL</span> <span class="hljs-operator">=</span> <span class="hljs-number">2</span>;     <span class="hljs-comment">// 1/1/1900</span>
  <span class="hljs-number">83</span>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">LATEST_DATE_ORDINAL</span> <span class="hljs-operator">=</span> <span class="hljs-number">2958465</span>; <span class="hljs-comment">// 12/31/9999</span>
  <span class="hljs-number">84</span>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">MINIMUM_YEAR_SUPPORTED</span> <span class="hljs-operator">=</span> <span class="hljs-number">1900</span>;
  <span class="hljs-number">85</span>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">MAXIMUM_YEAR_SUPPORTED</span> <span class="hljs-operator">=</span> <span class="hljs-number">9999</span>;
  <span class="hljs-number">86</span>   <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span>[] AGGREGATE_DAYS_TO_END_OF_PRECEDING_MONTH =
  <span class="hljs-number">87</span>     {<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">31</span>, <span class="hljs-number">59</span>, <span class="hljs-number">90</span>, <span class="hljs-number">120</span>, <span class="hljs-number">151</span>, <span class="hljs-number">181</span>, <span class="hljs-number">212</span>, <span class="hljs-number">243</span>, <span class="hljs-number">273</span>, <span class="hljs-number">304</span>, <span class="hljs-number">334</span>, <span class="hljs-number">365</span>};
  <span class="hljs-number">88</span>   <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span>[] LEAP_YEAR_AGGREGATE_DAYS_TO_END_OF_PRECEDING_MONTH =
  <span class="hljs-number">89</span>     {<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">31</span>, <span class="hljs-number">60</span>, <span class="hljs-number">91</span>, <span class="hljs-number">121</span>, <span class="hljs-number">152</span>, <span class="hljs-number">182</span>, <span class="hljs-number">213</span>, <span class="hljs-number">244</span>, <span class="hljs-number">274</span>, <span class="hljs-number">305</span>, <span class="hljs-number">335</span>, <span class="hljs-number">366</span>};
  <span class="hljs-number">90</span> 
  <span class="hljs-number">91</span>   <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> ordinalDay;
  <span class="hljs-number">92</span>   <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> day;
  <span class="hljs-number">93</span>   <span class="hljs-keyword">private</span> Month month;
  <span class="hljs-number">94</span>   <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> year;
  <span class="hljs-number">95</span> 
  <span class="hljs-number">96</span>   <span class="hljs-keyword">public</span> <span class="hljs-title function_">SpreadsheetDate</span><span class="hljs-params">(<span class="hljs-type">int</span> day, Month month, <span class="hljs-type">int</span> year)</span> {
  <span class="hljs-number">97</span>     <span class="hljs-keyword">if</span> (year &lt; MINIMUM_YEAR_SUPPORTED || year &gt; MAXIMUM_YEAR_SUPPORTED)
  <span class="hljs-number">98</span>       <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(
  <span class="hljs-number">99</span>         <span class="hljs-string">&quot;The &#x27;year&#x27; argument must be in range &quot;</span> +
 <span class="hljs-number">100</span>         MINIMUM_YEAR_SUPPORTED + <span class="hljs-string">&quot; to &quot;</span> + MAXIMUM_YEAR_SUPPORTED + <span class="hljs-string">&quot;.&quot;</span>);
 <span class="hljs-number">101</span>     <span class="hljs-keyword">if</span> (day &lt; <span class="hljs-number">1</span> || day &gt; DateUtil.lastDayOfMonth(month, year))
 <span class="hljs-number">102</span>       <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(<span class="hljs-string">&quot;Invalid &#x27;day&#x27; argument.&quot;</span>);
 <span class="hljs-number">103</span> 
 <span class="hljs-number">104</span>     <span class="hljs-built_in">this</span>.year = year;
 <span class="hljs-number">105</span>     <span class="hljs-built_in">this</span>.month = month;
<span class="hljs-number">406</span>
 Appendix B: org.jfree.date.SerialDate
 Listing B-<span class="hljs-number">16</span> (continued)
 SpreadsheetDate.java (Final)
 <span class="hljs-number">106</span>     <span class="hljs-built_in">this</span>.day = day;
 <span class="hljs-number">107</span>     ordinalDay = calcOrdinal(day, month, year);
 <span class="hljs-number">108</span>   }
 <span class="hljs-number">109</span> 
 <span class="hljs-number">110</span>   <span class="hljs-keyword">public</span> <span class="hljs-title function_">SpreadsheetDate</span><span class="hljs-params">(<span class="hljs-type">int</span> day, <span class="hljs-type">int</span> month, <span class="hljs-type">int</span> year)</span> {
 <span class="hljs-number">111</span>     <span class="hljs-built_in">this</span>(day, Month.fromInt(month), year);
 <span class="hljs-number">112</span>   }
 <span class="hljs-number">113</span> 
 <span class="hljs-number">114</span>   <span class="hljs-keyword">public</span> <span class="hljs-title function_">SpreadsheetDate</span><span class="hljs-params">(<span class="hljs-type">int</span> serial)</span> {
 <span class="hljs-number">115</span>     <span class="hljs-keyword">if</span> (serial &lt; EARLIEST_DATE_ORDINAL || serial &gt; LATEST_DATE_ORDINAL)
 <span class="hljs-number">116</span>       <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(
 <span class="hljs-number">117</span>         <span class="hljs-string">&quot;SpreadsheetDate: Serial must be in range 2 to 2958465.&quot;</span>);
 <span class="hljs-number">118</span> 
 <span class="hljs-number">119</span>     ordinalDay = serial;
 <span class="hljs-number">120</span>     calcDayMonthYear();
 <span class="hljs-number">121</span>   }
 <span class="hljs-number">122</span> 
 <span class="hljs-number">123</span>   <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getOrdinalDay</span><span class="hljs-params">()</span> {
 <span class="hljs-number">124</span>     <span class="hljs-keyword">return</span> ordinalDay;
 <span class="hljs-number">125</span>   }
 <span class="hljs-number">126</span> 
 <span class="hljs-number">127</span>   <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getYear</span><span class="hljs-params">()</span> {
 <span class="hljs-number">128</span>     <span class="hljs-keyword">return</span> year;
 <span class="hljs-number">129</span>   }
 <span class="hljs-number">130</span> 
 <span class="hljs-number">131</span>   <span class="hljs-keyword">public</span> Month <span class="hljs-title function_">getMonth</span><span class="hljs-params">()</span> {
 <span class="hljs-number">132</span>     <span class="hljs-keyword">return</span> month;
 <span class="hljs-number">133</span>   }
 <span class="hljs-number">134</span> 
 <span class="hljs-number">135</span>   <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getDayOfMonth</span><span class="hljs-params">()</span> {
 <span class="hljs-number">136</span>     <span class="hljs-keyword">return</span> day;
 <span class="hljs-number">137</span>   }
 <span class="hljs-number">138</span> 
 <span class="hljs-number">139</span>   <span class="hljs-keyword">protected</span> Day <span class="hljs-title function_">getDayOfWeekForOrdinalZero</span><span class="hljs-params">()</span> {<span class="hljs-keyword">return</span> Day.SATURDAY;}
 <span class="hljs-number">140</span> 
 <span class="hljs-number">141</span>   <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">equals</span><span class="hljs-params">(Object object)</span> {
 <span class="hljs-number">142</span>     <span class="hljs-keyword">if</span> (!(object <span class="hljs-keyword">instanceof</span> DayDate))
 <span class="hljs-number">143</span>       <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
 <span class="hljs-number">144</span> 
 <span class="hljs-number">145</span>     <span class="hljs-type">DayDate</span> <span class="hljs-variable">date</span> <span class="hljs-operator">=</span> (DayDate) object;
 <span class="hljs-number">146</span>     <span class="hljs-keyword">return</span> date.getOrdinalDay() == getOrdinalDay();
 <span class="hljs-number">147</span>   }
 <span class="hljs-number">148</span> 
 <span class="hljs-number">149</span>   <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">hashCode</span><span class="hljs-params">()</span> {
 <span class="hljs-number">150</span>     <span class="hljs-keyword">return</span> getOrdinalDay();
 <span class="hljs-number">151</span>   }
 <span class="hljs-number">152</span> 
 <span class="hljs-number">153</span>   <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">compareTo</span><span class="hljs-params">(Object other)</span> {
 <span class="hljs-number">154</span>     <span class="hljs-keyword">return</span> daysSince((DayDate) other);
 <span class="hljs-number">155</span>   }
 <span class="hljs-number">156</span> 
 <span class="hljs-number">157</span>   <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-title function_">calcOrdinal</span><span class="hljs-params">(<span class="hljs-type">int</span> day, Month month, <span class="hljs-type">int</span> year)</span> {
 <span class="hljs-number">158</span>     <span class="hljs-type">int</span> <span class="hljs-variable">leapDaysForYear</span> <span class="hljs-operator">=</span> DateUtil.leapYearCount(year - <span class="hljs-number">1</span>);
 <span class="hljs-number">159</span>     <span class="hljs-type">int</span> <span class="hljs-variable">daysUpToYear</span> <span class="hljs-operator">=</span> (year - MINIMUM_YEAR_SUPPORTED) * <span class="hljs-number">365</span> + leapDaysForYear;
 <span class="hljs-number">160</span>     <span class="hljs-type">int</span> <span class="hljs-variable">daysUpToMonth</span> <span class="hljs-operator">=</span> AGGREGATE_DAYS_TO_END_OF_PRECEDING_MONTH[month.toInt()];
 <span class="hljs-number">161</span>     <span class="hljs-keyword">if</span> (DateUtil.isLeapYear(year) &amp;&amp; month.toInt() &gt; FEBRUARY.toInt())
 <span class="hljs-number">162</span>       daysUpToMonth++;
 <span class="hljs-number">163</span>     <span class="hljs-type">int</span> <span class="hljs-variable">daysInMonth</span> <span class="hljs-operator">=</span> day - <span class="hljs-number">1</span>;
 <span class="hljs-number">164</span>     <span class="hljs-keyword">return</span> daysUpToYear + daysUpToMonth + daysInMonth + EARLIEST_DATE_ORDINAL;
 <span class="hljs-number">165</span>   }
 <span class="hljs-number">166</span> 
Appendix B: org.jfree.date.SerialDate
 <span class="hljs-number">407</span>
 Listing B-<span class="hljs-number">16</span> (continued)
 SpreadsheetDate.java (Final)
 <span class="hljs-number">167</span>   <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">calcDayMonthYear</span><span class="hljs-params">()</span> {
 <span class="hljs-number">168</span>     <span class="hljs-type">int</span> <span class="hljs-variable">days</span> <span class="hljs-operator">=</span> ordinalDay - EARLIEST_DATE_ORDINAL;
 <span class="hljs-number">169</span>     <span class="hljs-type">int</span> <span class="hljs-variable">overestimatedYear</span> <span class="hljs-operator">=</span> MINIMUM_YEAR_SUPPORTED + days / <span class="hljs-number">365</span>;
 <span class="hljs-number">170</span>     <span class="hljs-type">int</span> <span class="hljs-variable">nonleapdays</span> <span class="hljs-operator">=</span> days - DateUtil.leapYearCount(overestimatedYear);
 <span class="hljs-number">171</span>     <span class="hljs-type">int</span> <span class="hljs-variable">underestimatedYear</span> <span class="hljs-operator">=</span> MINIMUM_YEAR_SUPPORTED + nonleapdays / <span class="hljs-number">365</span>;
 <span class="hljs-number">172</span> 
 <span class="hljs-number">173</span>     year = huntForYearContaining(ordinalDay, underestimatedYear);
 <span class="hljs-number">174</span>     <span class="hljs-type">int</span> <span class="hljs-variable">firstOrdinalOfYear</span> <span class="hljs-operator">=</span> firstOrdinalOfYear(year);
 <span class="hljs-number">175</span>     month = huntForMonthContaining(ordinalDay, firstOrdinalOfYear);
 <span class="hljs-number">176</span>     day = ordinalDay - firstOrdinalOfYear - daysBeforeThisMonth(month.toInt());
 <span class="hljs-number">177</span>   }
 <span class="hljs-number">178</span> 
 <span class="hljs-number">179</span>   <span class="hljs-keyword">private</span> Month <span class="hljs-title function_">huntForMonthContaining</span><span class="hljs-params">(<span class="hljs-type">int</span> anOrdinal, <span class="hljs-type">int</span> firstOrdinalOfYear)</span> {
 <span class="hljs-number">180</span>     <span class="hljs-type">int</span> <span class="hljs-variable">daysIntoThisYear</span> <span class="hljs-operator">=</span> anOrdinal - firstOrdinalOfYear;
 <span class="hljs-number">181</span>     <span class="hljs-type">int</span> <span class="hljs-variable">aMonth</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;
 <span class="hljs-number">182</span>     <span class="hljs-keyword">while</span> (daysBeforeThisMonth(aMonth) &lt; daysIntoThisYear)
 <span class="hljs-number">183</span>       aMonth++;
 <span class="hljs-number">184</span> 
 <span class="hljs-number">185</span>     <span class="hljs-keyword">return</span> Month.fromInt(aMonth - <span class="hljs-number">1</span>);
 <span class="hljs-number">186</span>   }
 <span class="hljs-number">187</span> 
 <span class="hljs-number">188</span>   <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-title function_">daysBeforeThisMonth</span><span class="hljs-params">(<span class="hljs-type">int</span> aMonth)</span> {
 <span class="hljs-number">189</span>     <span class="hljs-keyword">if</span> (DateUtil.isLeapYear(year))
 <span class="hljs-number">190</span>       <span class="hljs-keyword">return</span> LEAP_YEAR_AGGREGATE_DAYS_TO_END_OF_PRECEDING_MONTH[aMonth] - <span class="hljs-number">1</span>;
 <span class="hljs-number">191</span>     <span class="hljs-keyword">else</span>
 <span class="hljs-number">192</span>       <span class="hljs-keyword">return</span> AGGREGATE_DAYS_TO_END_OF_PRECEDING_MONTH[aMonth] - <span class="hljs-number">1</span>;
 <span class="hljs-number">193</span>   }
 <span class="hljs-number">194</span> 
 <span class="hljs-number">195</span>   <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-title function_">huntForYearContaining</span><span class="hljs-params">(<span class="hljs-type">int</span> anOrdinalDay, <span class="hljs-type">int</span> startingYear)</span> {
 <span class="hljs-number">196</span>     <span class="hljs-type">int</span> <span class="hljs-variable">aYear</span> <span class="hljs-operator">=</span> startingYear;
 <span class="hljs-number">197</span>     <span class="hljs-keyword">while</span> (firstOrdinalOfYear(aYear) &lt;= anOrdinalDay)
 <span class="hljs-number">198</span>       aYear++;
 <span class="hljs-number">199</span> 
 <span class="hljs-number">200</span>     <span class="hljs-keyword">return</span> aYear - <span class="hljs-number">1</span>;
 <span class="hljs-number">201</span>   }
 <span class="hljs-number">202</span> 
 <span class="hljs-number">203</span>   <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-title function_">firstOrdinalOfYear</span><span class="hljs-params">(<span class="hljs-type">int</span> year)</span> {
 <span class="hljs-number">204</span>     <span class="hljs-keyword">return</span> calcOrdinal(<span class="hljs-number">1</span>, Month.JANUARY, year);
 <span class="hljs-number">205</span>   }
 <span class="hljs-number">206</span> 
 <span class="hljs-number">207</span>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> DayDate <span class="hljs-title function_">createInstance</span><span class="hljs-params">(Date date)</span> {
 <span class="hljs-number">208</span>     <span class="hljs-type">GregorianCalendar</span> <span class="hljs-variable">calendar</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">GregorianCalendar</span>();
 <span class="hljs-number">209</span>     calendar.setTime(date);
 <span class="hljs-number">210</span>     <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SpreadsheetDate</span>(calendar.get(Calendar.DATE),
 <span class="hljs-number">211</span>                                Month.fromInt(calendar.get(Calendar.MONTH) + <span class="hljs-number">1</span>),
 <span class="hljs-number">212</span>                                calendar.get(Calendar.YEAR));
 <span class="hljs-number">213</span> 
 <span class="hljs-number">214</span>   }
 <span class="hljs-number">215</span> }


</code></pre>

  </main>

  <!-- ŸÅŸàÿ™ÿ± ŸÖÿ¥ÿ™ÿ±⁄© -->
  <footer class="footer">
    <div class="container">
      <p>
        <img src="/Gitab/icone/copyright.svg" alt="⁄©Ÿæ€å‚Äåÿ±ÿß€åÿ™" width="14" height="14"
             style="vertical-align:middle;margin-inline:4px">
        <span id="y"></span> Gitab ‚Äî ÿ®ÿ±ÿß€å ÿ™Ÿàÿ≥ÿπŸá‚ÄåÿØŸáŸÜÿØ⁄ØÿßŸÜ
      </p>
    </div>
  </footer>

  <!-- ÿ≥ÿßŸÑ Ÿà ÿßÿ≥⁄©ÿ±€åŸæÿ™ ÿ™ÿ∫€å€åÿ± ÿ™ŸÖ -->
  <script>
  (() => {
    const root = document.documentElement;
    const btn = document.getElementById('themeToggle');
    const KEY = 'gitab-theme';

    function updateTheme(s) {
      root.setAttribute('data-theme', s);
      const mode = s;  // ŸÅŸÇÿ∑ `dark` €åÿß `light` ÿÆŸàÿßŸáÿØ ÿ®ŸàÿØ
      root.dataset.colorMode = mode;
      btn.dataset.icon = mode === 'dark' ? 'moon' : 'sun';
    }

    // Ÿàÿ∂ÿπ€åÿ™ ÿ™ŸÖ ÿ∞ÿÆ€åÿ±Ÿá ÿ¥ÿØŸá ÿßÿ≤ localStorage
    let saved = localStorage.getItem(KEY) || 'light'; // Ÿæ€åÿ¥‚ÄåŸÅÿ±ÿ∂ ÿ±Ÿàÿ¥ŸÜ
    updateTheme(saved);

    // ÿ™ŸÜÿ∏€åŸÖ ŸÖÿ¨ÿØÿØ ÿ™ŸÖ ŸáŸÜ⁄ØÿßŸÖ ÿ™ÿ∫€å€åÿ± Ÿàÿ∂ÿπ€åÿ™ ÿØ⁄©ŸÖŸá
    btn.addEventListener('click', () => {
      const current = localStorage.getItem(KEY) || 'light';
      const next = current === 'dark' ? 'light' : 'dark';  // ŸÅŸÇÿ∑ ÿØŸà ÿ≠ÿßŸÑÿ™: ÿ™ÿßÿ±€å⁄© Ÿà ÿ±Ÿàÿ¥ŸÜ
      localStorage.setItem(KEY, next);
      updateTheme(next);
    });

    // ŸáŸÜ⁄ØÿßŸÖ ÿ®ÿßÿ±⁄Øÿ∞ÿßÿ±€å ÿµŸÅÿ≠Ÿá
    document.addEventListener('DOMContentLoaded', () => {
      updateTheme(localStorage.getItem(KEY) || 'light');
    });
  })();
</script>


  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
  <script>hljs.highlightAll();</script>

  <script>
  document.querySelectorAll('pre code').forEach(block => {
    const btn = document.createElement('button');
    btn.className = 'copy-btn';

    const icon = document.createElement('img');
    icon.src = "/Gitab/icone/copy.svg";
    icon.alt = 'Copy';
    btn.appendChild(icon);

    block.parentNode.insertBefore(btn, block);

    btn.addEventListener('click', async () => {
      await navigator.clipboard.writeText(block.textContent);
      btn.classList.add('copied');
      setTimeout(() => btn.classList.remove('copied'), 1500);
    });
  });
  </script>

  <script>
  document.body.dataset.page = window.location.pathname;

  const menuBtn = document.querySelector(".menu-toggle");
  const nav = document.querySelector(".nav");

  if (menuBtn && nav) {
    menuBtn.addEventListener("click", (e) => {
      e.stopPropagation();
      nav.classList.toggle("show");
    });

    document.addEventListener("click", (e) => {
      const clickedInsideNav = nav.contains(e.target);
      const clickedMenuButton = menuBtn.contains(e.target);
      if (!clickedInsideNav && !clickedMenuButton) {
        nav.classList.remove("show");
      }
    });
  }
  </script>

  <script>
    document.getElementById('y').textContent = new Date().getFullYear();
  </script>
  <script>
document.getElementById("openDonate").addEventListener("click", () => {
  document.getElementById("donateModal").style.display = "block";
});
document.getElementById("closeDonate").addEventListener("click", () => {
  document.getElementById("donateModal").style.display = "none";
});
document.querySelectorAll(".copy-btn").forEach(btn => {
  btn.addEventListener("click", () => {
    navigator.clipboard.writeText(btn.dataset.copy);
    btn.textContent = "‚úÖ ⁄©Ÿæ€å ÿ¥ÿØ!";
    setTimeout(() => (btn.textContent = "⁄©Ÿæ€å"), 2000);
  });
});
</script>

</body>
</html>
