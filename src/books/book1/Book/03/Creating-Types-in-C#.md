# ูุตู ุณูู : ุงุฌุงุฏ Typeูุง ุฏุฑ ุณ ุดุงุฑูพ

ุฏุฑ ุงู ูุตูุ ูุง ูุงุฑุฏ ูุจุญุซ **typeูุง** ู **type memberูุง** ูโุดูู.

---

### ๐ ฺฉูุงุณโูุง (Classes)

ฺฉ **class** ุฑุงุฌโุชุฑู ููุน ุงุฒ **reference type** ุงุณุช. ุณุงุฏูโุชุฑู ุดฺฉู ููฺฉู ุจุฑุง ุชุนุฑู ฺฉ ฺฉูุงุณ ุจู ุงู ุตูุฑุช ุงุณุช:

```csharp
class YourClassName
{
}
```

ฺฉ ฺฉูุงุณ ูพฺุฏูโุชุฑ ูโุชูุงูุฏ ุดุงูู ููุงุฑุฏ ุฒุฑ ุจุงุดุฏ:

* **ูุจู ุงุฒ ฺฉููู ฺฉูุฏ class** โ ูโุชูุงูุฏ ุดุงูู **attributes** ู **class modifiers** ุจุงุดุฏ.
* **ุจุนุฏ ุงุฒ ูุงู ฺฉูุงุณ (YourClassName)** โ ูโุชูุงูุฏ ุดุงูู **generic type parameters** ุจุงุดุฏ.
* **ุฏุงุฎู ุจุฑุงฺฉุชโูุง { }** โ ูโุชูุงูุฏ ุดุงูู **class members** ูุงููุฏ ููุงุฑุฏ ุฒุฑ ุจุงุดุฏ:

  * fields
  * constructors
  * methods
  * properties
  * indexers
  * events
  * finalizer
  * overloaded operators
  * nested types
  * base class
  * interfaces
  * constraints

โ๏ธ ุฏุฑ ุงู ูุตูุ ููู ุงู ุณุงุฎุชุงุฑูุง ุชูุถุญ ุฏุงุฏู ูโุดููุฏุ **ุจูโุฌุฒ** ููุงุฑุฏ ุฒุฑ ฺฉู ุฏุฑ ูุตู ด ูพูุดุด ุฏุงุฏู ุฎูุงููุฏ ุดุฏ:

* attributes
* operator functions
* ฺฉููู ฺฉูุฏ `unsafe`

ุจุฎุดโูุง ุจุนุฏุ ูุฑ ฺฉ ุงุฒ **class memberูุง** ุฑุง ุจุฑุฑุณ ูโฺฉููุฏ.

---

### ๐ ููุฏูุง (Fields)

ฺฉ **field** ุฏุฑ ูุงูุน ฺฉ ูุชุบุฑ ุงุณุช ฺฉู ุจูโุนููุงู ุนุถู ุงุฒ ฺฉ **class** ุง **struct** ุชุนุฑู ูโุดูุฏุ ุจุฑุง ูุซุงู:

```csharp
class Octopus
{
    string name;
    public int Age = 10;
}
```

---

#### ๐ ููุฏูุง ูโุชูุงููุฏ ุดุงูู ุงู modifiers ุจุงุดูุฏ

* **Static modifier** โ `static`
* **Access modifiers** โ `public`, `internal`, `private`, `protected`
* **Inheritance modifier** โ `new`
* **Unsafe code modifier** โ `unsafe`
* **Read-only modifier** โ `readonly`
* **Threading modifier** โ `volatile`

---

#### ๐ช ูุฑุงุฑุฏุงุฏูุง ูุงูโฺฏุฐุงุฑ (Naming Conventions) ุจุฑุง ููุฏูุง private

ุฏู ูุฑุงุฑุฏุงุฏ ูพุฑฺฉุงุฑุจุฑุฏ ูุฌูุฏ ุฏุงุฑุฏ:

1. **camelCase** โ ูุซู: `firstName`
2. **camelCase ููุฑุงู ุจุง underscore** โ ูุซู: `_firstName`

ุฑูุด ุฏูู ฺฉูฺฉ ูโฺฉูุฏ ฺฉู ุณุฑุนุงู ููุฏูุง private ุฑุง ุงุฒ **ูพุงุฑุงูุชุฑูุง** ู **ูุชุบุฑูุง ูุญู** ุชุดุฎุต ุฏูุฏ.

---

#### ๐ ฺฉููู ฺฉูุฏ `readonly`

ฺฉููู ฺฉูุฏ **`readonly`** ุจุงุนุซ ูโุดูุฏ ฺฉ ููุฏ ูพุณ ุงุฒ ุณุงุฎุช (construction) ุฏฺฏุฑ ูุงุจู ุชุบุฑ ูุจุงุดุฏ.
ฺฉ ููุฏ **readonly** ููุท ูโุชูุงูุฏ ุฏุฑ **ุงุนูุงู ุขู** ุง ุฏุฑ **ุณุงุฒูุฏูโ (constructor) ููุงู type** ููุฏุงุฑุฏู ุดูุฏ.

---

#### โ๏ธ ููุฏุงุฑุฏู ุงููู ููุฏูุง (Field Initialization)

* ููุฏุงุฑุฏู ุงููู ุจุฑุง ููุฏูุง **ุงุฎุชุงุฑ** ุงุณุช.
* ุงฺฏุฑ ฺฉ ููุฏ ููุฏุงุฑุฏู ูุดูุฏุ ููุฏุงุฑ ูพุดโูุฑุถ ุฎูุงูุฏ ุฏุงุดุช:

  * ุนุฏุฏโูุง: `0`
  * ฺฉุงุฑุงฺฉุชุฑ: `'\0'`
  * reference types: `null`
  * bool: `false`

๐ ููุฏุงุฑุฏู ุงููู ููุฏูุง **ูุจู ุงุฒ constructorูุง** ุงุฌุฑุง ูโุดูุฏ:

```csharp
public int Age = 10;
```

ููุฏุงุฑุฏู ุงููู ูโุชูุงูุฏ ุดุงูู **ุนุจุงุฑุชโูุง** ุง ุญุช **ูุฑุงุฎูุงู ูุชุฏูุง** ุจุงุดุฏ:

```csharp
static readonly string TempFolder = System.IO.Path.GetTempPath();
```

---

#### ๐ ุงุนูุงู ฺูุฏ ููุฏ ููุฒูุงู (Declaring Multiple Fields Together)

ุจุฑุง ุฑุงุญุชุ ูโุชูุงูุฏ ฺูุฏู ููุฏ ุงุฒ ฺฉ ููุน ุฑุง ุฏุฑ ฺฉ ูุณุช ุฌุฏุงุดุฏู ุจุง ฺฉุงูุง ุชุนุฑู ฺฉูุฏ.
ุงู ุฑูุด ุจุงุนุซ ูโุดูุฏ ฺฉู ููู ููุฏูุง **attributes** ู **field modifiers** ฺฉุณุงู ุฏุงุดุชู ุจุงุดูุฏ:

```csharp
static readonly int legs = 8,
                   eyes = 2;
```

### ๐ ุซุงุจุชโูุง (Constants)

ฺฉ **constant** ุฏุฑ ุฒูุงู **compile time** ุจูโุตูุฑุช ุงุณุชุง (statically) ุงุฑุฒุงุจ ูโุดูุฏ ู ฺฉุงููพุงูุฑ ููุฏุงุฑ ุขู ุฑุง ุฏุฑ ูุฑ ุฌุง ฺฉู ุงุณุชูุงุฏู ุดูุฏุ ุฌุงฺฏุฒู ูโฺฉูุฏ (ุดุจู ุจู **macro** ุฏุฑ ++C).

ฺฉ **constant** ูโุชูุงูุฏ ุงุฒ ููุนโูุง ุฒุฑ ุจุงุดุฏ:

* `bool`
* `char`
* `string`
* ูุฑ ฺฉ ุงุฒ ููุนโูุง ุนุฏุฏ **built-in**
* ุง ฺฉ **enum type**

---

#### ๐ ุชุนุฑู constant

ฺฉ **constant** ุจุง ุงุณุชูุงุฏู ุงุฒ ฺฉููู ฺฉูุฏ **`const`** ุชุนุฑู ูโุดูุฏ ู ุจุงุฏ ุฏุฑ ููฺฏุงู ุงุนูุงูุ ููุฏุงุฑุฏู ุงููู ุดูุฏ.

ูุซุงู:

```csharp
public class Test
{
    public const string Message = "Hello World";
}
```

---

#### โ๏ธ ุชูุงูุช ุจุง `static readonly`

ฺฉ constant ูโุชูุงูุฏ ููุด ุดุจู ุจู ฺฉ **static readonly field** ุงูุง ฺฉูุฏุ ุงูุง ุจุณุงุฑ **ูุญุฏูุฏุชุฑ** ุงุณุชุ ูู ุงุฒ ูุธุฑ ููุน ุฏุงุฏูโูุง ฺฉู ูุงุจู ุงุณุชูุงุฏูโุงูุฏ ู ูู ุงุฒ ูุธุฑ ููุงุนุฏ ููุฏุงุฑุฏู ุงููู.

ููฺููุ ุชูุงูุช ููู ุงู ุงุณุช ฺฉู **constant ุฏุฑ ุฒูุงู compile** ุงุฑุฒุงุจ ูโุดูุฏุ ุฏุฑ ุญุงู ฺฉู ููุฏุงุฑ ฺฉ **static readonly** ููฺฉู ุงุณุช ุฏุฑ ุฒูุงู ุงุฌุฑุง ุชุนู ุดูุฏ.

ุจุฑุง ูุซุงู:

```csharp
public static double Circumference(double radius)
{
    return 2 * System.Math.PI * radius;
}
```

ุฏุฑ ุฒูุงู ฺฉุงููพุงู ุจู ุงู ุชุจุฏู ูโุดูุฏ:

```csharp
public static double Circumference(double radius)
{
    return 6.2831853071795862 * radius;
}
```

๐น ุจูุงุจุฑุงู ููุทู ุงุณุช ฺฉู `PI` ุจูโุตูุฑุช ฺฉ **constant** ุชุนุฑู ุดูุฏ ฺูู ููุฏุงุฑ ุขู ุงุฒ ูุจู ูุดุฎุต ุงุณุช.

ุฏุฑ ููุงุจู:

```csharp
static readonly DateTime StartupTime = DateTime.Now;
```

ูุฑ ุจุงุฑ ฺฉู ุจุฑูุงูู ุงุฌุฑุง ุดูุฏุ ููุฏุงุฑ ูุชูุงูุช ุฎูุงูุฏ ุฏุงุดุช.

---

#### โ๏ธ ูุดฺฉู ูุณุฎูโูุง ุจุง constant

ุงฺฏุฑ ฺฉ **assembly** (ูุซูุงู X) ฺฉ constant ุฑุง expose ฺฉูุฏ:

```csharp
public const decimal ProgramVersion = 2.3m;
```

ู ฺฉ **assembly** ุฏฺฏุฑ (ูุซูุงู Y) ุงุฒ ุขู ุงุณุชูุงุฏู ฺฉูุฏุ ููุฏุงุฑ `2.3` ููฺฏุงู ฺฉุงููพุงู ุฏุฑ assembly Y **ุซุงุจุชโุณุงุฒ (baked in)** ูโุดูุฏ.
ุงฺฏุฑ ุจุนุฏูุง X ุจุง ููุฏุงุฑ ุฌุฏุฏ (ูุซูุงู `2.4`) ุฏูุจุงุฑู ฺฉุงููพุงู ุดูุฏุ Y ููฺูุงู ููุฏุงุฑ ูุฏู `2.3` ุฑุง ุงุณุชูุงุฏู ูโฺฉูุฏ ุชุง ุฒูุงู ฺฉู Y ูู ุฏูุจุงุฑู ฺฉุงููพุงู ุดูุฏ.

๐น ุงุณุชูุงุฏู ุงุฒ **static readonly field** ุงู ูุดฺฉู ุฑุง ุจุฑุทุฑู ูโฺฉูุฏ.

ุจู ุจุงู ุฏฺฏุฑ: ูุฑ ููุฏุงุฑ ฺฉู **ููฺฉู ุงุณุช ุฏุฑ ุขูุฏู ุชุบุฑ ฺฉูุฏ**ุ ุฐุงุชุงู **constant** ูุณุช ู ูุจุงุฏ ุจูโุนููุงู constant ุชุนุฑู ุดูุฏ.

---

#### ๐ ุซุงุจุชโูุง ูุญู (Local Constants)

ุดูุง ูโุชูุงูุฏ ุฏุงุฎู ฺฉ ูุชุฏ ูู constant ุชุนุฑู ฺฉูุฏ:

```csharp
void Test()
{
    const double twoPI = 2 * System.Math.PI;
    ...
}
```

---

#### ๐ modifiers ูุฌุงุฒ ุจุฑุง constantูุง ุบุฑูุญู

* **Access modifiers** โ `public`, `internal`, `private`, `protected`
* **Inheritance modifier** โ `new`

---

### ๐ง ูุชุฏูุง (Methods)

ฺฉ **method** ุนูู ุฑุง ุฏุฑ ูุงูุจ ฺฉ ุณุฑ **statement**ูุง ุงุฌุฑุง ูโฺฉูุฏ.

* ฺฉ ูุชุฏ ูโุชูุงูุฏ ุฏุงุฏูโูุง ูุฑูุฏ ุฑุง ุงุฒ **caller** ุฏุฑุงูุช ฺฉูุฏ (ุจุง ุชุนุฑู **parameters**).
* ู ุฏุงุฏู ุฎุฑูุฌ ุฑุง ุจู **caller** ุจุงุฒฺฏุฑุฏุงูุฏ (ุจุง ุชุนุฑู **return type**).
* ุงฺฏุฑ ฺฉ ูุชุฏ **`void`** ุจุงุดุฏุ ุจู ุงู ูุนูุงุณุช ฺฉู ูฺ ููุฏุงุฑ ุฑุง ุจุฑููโฺฏุฑุฏุงูุฏ.
* ููฺูู ูโุชูุงูุฏ ุจุง ุงุณุชูุงุฏู ุงุฒ **ref/out parameters** ุฏุงุฏู ุฑุง ุจู caller ุจุงุฒฺฏุฑุฏุงูุฏ.

---

#### ๐ ุงูุถุง ูุชุฏ (Method Signature)

* ุงูุถุง ฺฉ ูุชุฏ ุจุงุฏ ุฏุฑ ฺฉ type **ููุญุตุฑโุจูโูุฑุฏ** ุจุงุดุฏ.
* ุงูุถุง ุดุงูู **ูุงู ูุชุฏ** ู **ุงููุงุน ูพุงุฑุงูุชุฑูุง** ุจูโุชุฑุชุจ ุงุณุช.
* ูุงู ูพุงุฑุงูุชุฑูุง ู ููุน ุจุงุฒฺฏุดุช (return type) ุจุฎุด ุงุฒ ุงูุถุง ูุณุชูุฏ.

---

#### ๐ modifiers ูุฌุงุฒ ุจุฑุง ูุชุฏูุง

* **Static modifier** โ `static`
* **Access modifiers** โ `public`, `internal`, `private`, `protected`
* **Inheritance modifiers** โ `new`, `virtual`, `abstract`, `override`, `sealed`
* **Partial method modifier** โ `partial`
* **Unmanaged code modifiers** โ `unsafe`, `extern`
* **Asynchronous code modifier** โ `async`

---

#### โก๏ธ ูุชุฏูุง expression-bodied

ุงฺฏุฑ ูุชุฏ ููุท ฺฉ **expression** ุฏุงุดุชู ุจุงุดุฏ:

```csharp
int Foo(int x) { return x * 2; }
```

ูโุชูุงู ุขู ุฑุง ุจูโุดฺฉู ฺฉูุชุงูโุชุฑ ููุดุช:

```csharp
int Foo(int x) => x * 2;
```

ุญุช ุงฺฏุฑ ูุชุฏ **`void`** ุจุงุดุฏ:

```csharp
void Foo(int x) => Console.WriteLine(x);
```

---

#### ๐ ูุชุฏูุง ูุญู (Local Methods)

ูโุชูุงูุฏ ฺฉ ูุชุฏ ุฑุง ุฏุงุฎู ูุชุฏ ุฏฺฏุฑ ุชุนุฑู ฺฉูุฏ:

```csharp
void WriteCubes()
{
    Console.WriteLine(Cube(3));
    Console.WriteLine(Cube(4));
    Console.WriteLine(Cube(5));

    int Cube(int value) => value * value * value;
}
```

* ูุชุฏ ูุญู (`Cube`) ููุท ุฏุฑ ููุงู ูุชุฏ ูุงูุฏ (`WriteCubes`) ูุงุจู ูุดุงูุฏู ุงุณุช.
* ุงู ฺฉุงุฑ ุจุงุนุซ ุณุงุฏูโุชุฑ ุดุฏู type ูโุดูุฏ ู ุณุฑุนุงู ูุดุงู ูโุฏูุฏ ฺฉู Cube ุฌุง ุฏฺฏุฑ ุงุณุชูุงุฏู ููโุดูุฏ.
* ูุชุฏูุง ูุญู ูโุชูุงููุฏ ุจู ูุชุบุฑูุง ู ูพุงุฑุงูุชุฑูุง ูุชุฏ ูุงูุฏ ุฏุณุชุฑุณ ุฏุงุดุชู ุจุงุดูุฏ.

๐ ุฌุฒุฆุงุช ุจุดุชุฑ ุฏุฑ ุจุฎุด **Capturing Outer Variables** (ุตูุญู ฑนฐ) ุชูุถุญ ุฏุงุฏู ุฎูุงูุฏ ุดุฏ.

* ูุชุฏูุง ูุญู ูโุชูุงููุฏ ุฏุฑูู ุฏฺฏุฑ ุชูุงุจุน ูุงููุฏ property accessorsุ constructorูุง ู ุบุฑู ูุฒ ุชุนุฑู ุดููุฏ.
* ุญุช ูโุชูุงู ูุชุฏูุง ูุญู ุฑุง ุฏุงุฎู ุฏฺฏุฑ ูุชุฏูุง ูุญู ุง ุฏุงุฎู **lambda expression**ูุง (ุจุง statement block) ูุฑุงุฑ ุฏุงุฏ.
* ูุชุฏูุง ูุญู ูโุชูุงููุฏ **iterator** (ูุตู ด) ุง **asynchronous** (ูุตู ฑด) ุจุงุดูุฏ.

---

#### โก ูุชุฏูุง ูุญู static (Static Local Methods)

ุงุฒ **C# 8** ุจู ุจุนุฏุ ุงูุฒูุฏู **static modifier** ุจู ฺฉ ูุชุฏ ูุญู ุจุงุนุซ ูโุดูุฏ ุขู ูุชุฏ ุฏฺฏุฑ ุจู ูุชุบุฑูุง ู ูพุงุฑุงูุชุฑูุง ูุชุฏ ูุงูุฏ ุฏุณุชุฑุณ ูุฏุงุดุชู ุจุงุดุฏ.

๐น ุงู ฺฉุงุฑ ูุงุจุณุชฺฏ (coupling) ุฑุง ฺฉุงูุด ูโุฏูุฏ ู ุฌูู ุงุณุชูุงุฏู ุชุตุงุฏู ุงุฒ ูุชุบุฑูุง ูุชุฏ ูุงูุฏ ุฑุง ูโฺฏุฑุฏ.

### ๐ ูุชุฏูุง ูุญู ู Top-Level Statements

ูุฑ **method** ฺฉู ุฏุฑ **top-level statements** ุชุนุฑู ฺฉูุฏุ ุฏุฑ ูุงูุน ุจูโุนููุงู ฺฉ **local method** ุฏุฑ ูุธุฑ ฺฏุฑูุชู ูโุดูุฏ.
ุงู ุนู (ูฺฏุฑ ุงูโฺฉู ุจุง `static` ุนูุงูุชโฺฏุฐุงุฑ ุดูุฏ) ูโุชูุงููุฏ ุจู ูุชุบุฑูุง ุชุนุฑูโุดุฏู ุฏุฑ top-level ุฏุณุชุฑุณ ุฏุงุดุชู ุจุงุดูุฏ:

```csharp
int x = 3;
Foo();

void Foo() => Console.WriteLine(x);
```

---

### ๐ Overloading ูุชุฏูุง

* **Local methods** ูุงุจู **overload** ุดุฏู ูุณุชูุฏ.
  ุจูุงุจุฑุงูุ ูุชุฏูุง ฺฉู ุฏุฑ **top-level statements** ุชุนุฑู ูโุดููุฏ (ฺฉู ุฏุฑ ูุงูุน ููุงู local methods ูุณุชูุฏ)ุ ููโุชูุงููุฏ overload ุดููุฏ.

* ุงูุง ฺฉ **type** ูโุชูุงูุฏ ูุชุฏูุง ุฑุง overload ฺฉูุฏุ ุนู ฺูุฏ ูุชุฏ ุจุง ูุงู ฺฉุณุงู ุฏุงุดุชู ุจุงุดุฏุ ุจูโุดุฑุท ฺฉู **ุงูุถุง ุขูโูุง (signature)** ูุชูุงูุช ุจุงุดุฏ.

ูุซุงู:

```csharp
void Foo(int x) {...}
void Foo(double x) {...}
void Foo(int x, float y) {...}
void Foo(float x, int y) {...}
```

๐ ุงูุง ูุซุงูโูุง ุฒุฑ **ุฎุทุง ุฒูุงู ฺฉุงููพุงู** ุฏุงุฑูุฏุ ฺูู `return type` ู `params modifier` ุจุฎุด ุงุฒ **ุงูุถุง** ูุญุณูุจ ููโุดููุฏ:

```csharp
void  Foo(int x) {...}
float Foo(int x) {...}           // Compile-time error

void  Goo(int[] x) {...}
void  Goo(params int[] x) {...}  // Compile-time error
```

---

#### ๐ ูพุงุฑุงูุชุฑูุง ref ู out ุฏุฑ ุงูุถุง

ุงูโฺฉู ูพุงุฑุงูุชุฑูุง ุจูโุตูุฑุช **by-value** ุง **by-reference** ูพุงุณ ุฏุงุฏู ุดููุฏุ ุจุฎุด ุงุฒ ุงูุถุง ูุญุณูุจ ูโุดูุฏ.

โ ุจูุงุจุฑุงู:

```csharp
void Foo(int x) {...}
void Foo(ref int x) {...}   // OK
```

โ ุงูุง:

```csharp
void Foo(out int x) {...}   // Compile-time error
```

ุฒุฑุง `ref` ู `out` ุจูโุทูุฑ ููโุฒูุงู ููโุชูุงููุฏ overload ุดููุฏ.

---

### ๐๏ธ Instance Constructors

**Constructor**ูุง ฺฉุฏ ุจุฑุง ููุฏุงุฑุฏู ุงููู (initialization) ุฑู ฺฉ **class** ุง **struct** ุงุฌุฑุง ูโฺฉููุฏ.
ฺฉ constructor ูุงููุฏ ฺฉ ูุชุฏ ุชุนุฑู ูโุดูุฏุ ุจุง ุงู ุชูุงูุช ฺฉู **ูุงู ูุชุฏ** ููุงู **ูุงู type ูุงูุฏ** ุงุณุช ู ูฺ **return type** ูุฏุงุฑุฏ:

```csharp
Panda p = new Panda("Petey");   // Call constructor

public class Panda
{
    string name;                // Define field

    public Panda(string n)      // Define constructor
    {
        name = n;               // Initialization code (set up field)
    }
}
```

---

#### ๐ modifiers ูุฌุงุฒ ุจุฑุง constructors

* **Access modifiers** โ `public`, `internal`, `private`, `protected`
* **Unmanaged code modifiers** โ `unsafe`, `extern`

---

#### โก๏ธ Expression-bodied constructors

ุงฺฏุฑ constructor ฺฉ statement ุณุงุฏู ุฏุงุดุชู ุจุงุดุฏุ ูโุชูุงูุฏ ุจูโุดฺฉู ฺฉูุชุงู ููุดุชู ุดูุฏ:

```csharp
public Panda(string n) => name = n;
```

---

#### ๐ ุฑูุน ุงุจูุงู ุจุง `this`

ุงฺฏุฑ ูุงู ูพุงุฑุงูุชุฑ ุจุง ูุงู ููุฏ ฺฉ ุจุงุดุฏุ ูโุชูุงูุฏ ุจุง **`this`** ููุฏ ุฑุง ูุดุฎุต ฺฉูุฏ:

```csharp
public Panda(string name) => this.name = name;
```

---

### ๐ Overloading Constructors

ฺฉ ฺฉูุงุณ ุง struct ูโุชูุงูุฏ **constructorูุง overload** ุฏุงุดุชู ุจุงุดุฏ.

ุจุฑุง ุฌููฺฏุฑ ุงุฒ ุชฺฉุฑุงุฑ ฺฉุฏุ ฺฉ constructor ูโุชูุงูุฏ constructor ุฏฺฏุฑ ุฑุง ุจุง ุงุณุชูุงุฏู ุงุฒ **`this`** ุตุฏุง ุจุฒูุฏ:

```csharp
public class Wine
{
    public decimal Price;
    public int Year;

    public Wine(decimal price) => Price = price;

    public Wine(decimal price, int year) : this(price) => Year = year;
}
```

๐ ุฏุฑ ุงู ุญุงูุชุ constructor ูุฑุงุฎูุงูโุดุฏู **ุงุจุชุฏุง** ุงุฌุฑุง ูโุดูุฏ.

ูโุชูุงูุฏ ฺฉ **ุนุจุงุฑุช** ุฑุง ูุฒ ุจู constructor ุฏฺฏุฑ ูพุงุณ ุฏูุฏ:

```csharp
public Wine(decimal price, DateTime year) : this(price, year.Year) { }
```

โ๏ธ ุฏุฑ ุงู ูุฑุญููุ ููุท ูโุชูุงู ุจู **ุงุนุถุง static ฺฉูุงุณ** ุฏุณุชุฑุณ ุฏุงุดุชุ ูู ุงุนุถุง instanceุ ฺูู ูููุฒ ุดุก ุชูุณุท constructor ููุฏุงุฑุฏู ูุดุฏู ุงุณุช.

---

#### ๐๏ธ ุฌุงฺฏุฒู ุจูุชุฑ: ูพุงุฑุงูุชุฑ ุงุฎุชุงุฑ

ูุซุงู ุจุงูุง ุฑุง ูโุชูุงู ุจุง ฺฉ constructor ุณุงุฏูโุชุฑ ููุดุช:

```csharp
public Wine(decimal price, int year = 0)
{
    Price = price;
    Year = year;
}
```

๐ ุฑุงูโุญู ุฏฺฏุฑ ูุฒ ุฏุฑ ุจุฎุด **Object Initializers** (ุตูุญู ฑฑฑ) ูุนุฑู ุฎูุงูุฏ ุดุฏ.

---

### ๐ Implicit Parameterless Constructors

ุจุฑุง **class**ูุงุ ฺฉุงููพุงูุฑ C# ุจูโุทูุฑ ุฎูุฏฺฉุงุฑ ฺฉ **constructor ุจุฏูู ูพุงุฑุงูุชุฑ public** ุชููุฏ ูโฺฉูุฏุ ุจูโุดุฑุท ฺฉู ุดูุง ูฺ constructor ุฏฺฏุฑ ุชุนุฑู ูฺฉุฑุฏู ุจุงุดุฏ.
ุงูุง ุจู ูุญุถ ุงูโฺฉู ุญุฏุงูู ฺฉ constructor ุชุนุฑู ฺฉูุฏุ ุฏฺฏุฑ ุงู constructor ูพุดโูุฑุถ ุณุงุฎุชู ููโุดูุฏ.

---

### ๐ ุชุฑุชุจ ููุฏุงุฑุฏู ุงููู ููุฏ ู constructor

ููุงูโุทูุฑ ฺฉู ุฏุฏูุ ูโุชูุงู ููุฏูุง ุฑุง ููฺฏุงู ุงุนูุงู ููุฏุงุฑุฏู ฺฉุฑุฏ:

```csharp
class Player
{
    int shields = 50;   // Initialized first
    int health = 100;   // Initialized second
}
```

๐ ููุฏุงุฑุฏู ุงููู ููุฏูุง **ูุจู ุงุฒ ุงุฌุฑุง constructor** ุงูุฌุงู ูโุดูุฏ ู ุจูโุชุฑุชุจ ุงุนูุงู ููุฏูุง ุงุฌุฑุง ูโฺฏุฑุฏุฏ.

### ๐น ุณุงุฒูุฏูโูุง ุบุฑุนููู (Nonpublic constructors)

ุณุงุฒูุฏูโูุง ุงูุฒุงู ูุฏุงุฑูุฏ ฺฉู ุนููู (**public**) ุจุงุดูุฏ. ฺฉ ุฏูู ุฑุงุฌ ุจุฑุง ุฏุงุดุชู ุณุงุฒูุฏูโูุง ุบุฑุนููู ุงู ุงุณุช ฺฉู ุงุฌุงุฏ ูููููโูุง (**instance creation**) ููุท ุงุฒ ุทุฑู ฺฉ ูุชุฏ ุงุณุชุง (**static method**) ฺฉูุชุฑู ุดูุฏ.

ุจูโุนููุงู ูุซุงูุ ูุชุฏ ุงุณุชุง ูโุชูุงูุฏ ุจูโุฌุง ุงุฌุงุฏ ฺฉ ุดุก ุฌุฏุฏุ ฺฉ ุดุก ููุฌูุฏ ุฑุง ุงุฒ **object pool** ุจุฑฺฏุฑุฏุงูุฏุ ุง ุจุฑ ุงุณุงุณ ูุฑูุฏโูุง ูุฎุชููุ ุฒุฑฺฉูุงุณโูุง ูุชูุงูุช ุฑุง ุจุงุฒฺฏุฑุฏุงูุฏ:

```csharp
public class Class1
{
    Class1() {}   // ุณุงุฒูุฏู ุฎุตูุต

    public static Class1 Create (...)
    {
        // ุงุฌุฑุง ููุทู ุณูุงุฑุด ุจุฑุง ุจุฑฺฏุฑุฏุงูุฏู ฺฉ ุดุก ุงุฒ ููุน Class1
        ...
    }
}
```

---

### ๐น ุฏฺฉุงูุณุชุฑุงฺฉุชูุฑ (Deconstructor)

**ุฏฺฉุงูุณุชุฑุงฺฉุชูุฑ** ุง **ูุชุฏ deconstructing** ุชูุฑุจุงู ุจุฑุนฺฉุณ ฺฉ ุณุงุฒูุฏู ุนูู ูโฺฉูุฏ:

* ุณุงุฒูุฏู ูุนูููุงู ูุฌููุนูโุง ุงุฒ ููุงุฏุฑ ูุฑูุฏ (ูพุงุฑุงูุชุฑูุง) ุฑุง ฺฏุฑูุชู ู ุขูโูุง ุฑุง ุจู ููุฏูุง ูุณุจุช ูโุฏูุฏ.
* ุฏฺฉุงูุณุชุฑุงฺฉุชูุฑ ุจุฑุนฺฉุณ ุงู ฺฉุงุฑ ุฑุง ุงูุฌุงู ูโุฏูุฏ: ููุฏูุง ุฑุง ุจู ูุฌููุนูโุง ุงุฒ ูุชุบุฑูุง ุจุฑูโฺฏุฑุฏุงูุฏ.

๐ธ ููุงูู:

* ูุงู ุงู ูุชุฏ ุจุงุฏ ุฏููุงู `Deconstruct` ุจุงุดุฏ.
* ุจุงุฏ ุฏุงุฑุง ฺฉ ุง ฺูุฏ **ูพุงุฑุงูุชุฑ out** ุจุงุดุฏ.

ูุซุงู:

```csharp
class Rectangle
{
    public readonly float Width, Height;

    public Rectangle (float width, float height)
    {
        Width = width;
        Height = height;
    }

    public void Deconstruct (out float width, out float height)
    {
        width = Width;
        height = Height;
    }
}
```

---

### ๐น ูุฑุงุฎูุงู ุฏฺฉุงูุณุชุฑุงฺฉุชูุฑ

```csharp
var rect = new Rectangle(3, 4);
(float width, float height) = rect;   // ุฏฺฉุงูุณุชุฑุงฺฉุดู
Console.WriteLine(width + " " + height);   // 3 4
```

๐น ุงู ูุฑุงุฎูุงู ูุนุงุฏู ุงุณุช ุจุง:

```csharp
float width, height;
rect.Deconstruct(out width, out height);
```

ุง:

```csharp
rect.Deconstruct(out var width, out var height);
```

---

### ๐น ูฺฉุงุช ููู ุฏุฑ ุฏฺฉุงูุณุชุฑุงฺฉุดู

* ุงูฺฉุงู ุงุณุชูุงุฏู ุงุฒ **implicit typing** ูุฌูุฏ ุฏุงุฑุฏ:

  ```csharp
  (var width, var height) = rect;
  var (width, height) = rect;
  ```

* ุงฺฏุฑ ุจู ฺฉ ุงุฒ ูุชุบุฑูุง ูุงุฒ ูุฏุงุฑุฏุ ูโุชูุงูุฏ ุงุฒ ููุงุฏ **discard (`_`)** ุงุณุชูุงุฏู ฺฉูุฏ:

  ```csharp
  var (_, height) = rect;
  ```

* ุงฺฏุฑ ูุชุบุฑูุง ูุจูุงู ุชุนุฑู ุดุฏู ุจุงุดูุฏุ ูโุชูุงูุฏ **ููุนโูุง ุฑุง ุญุฐู ฺฉูุฏ**:

  ```csharp
  float width, height;
  (width, height) = rect;   // ุฏฺฉุงูุณุชุฑุงฺฉุดู assignment
  ```

* ูโุชูุงูุฏ ุงุฒ ุฏฺฉุงูุณุชุฑุงฺฉุดู ุจุฑุง ุณุงุฏูโุณุงุฒ ุณุงุฒูุฏูโูุง ุงุณุชูุงุฏู ฺฉูุฏ:

  ```csharp
  public Rectangle (float width, float height) =>
      (Width, Height) = (width, height);
  ```

* ุงูฺฉุงู **overload ฺฉุฑุฏู ูุชุฏ Deconstruct** ุจุฑุง ุงุฑุงุฆู ฺฏุฒููโูุง ุจุดุชุฑ ูุฌูุฏ ุฏุงุฑุฏ.
* ูุชุฏ `Deconstruct` ูโุชูุงูุฏ ฺฉ **extension method** ูู ุจุงุดุฏ (ุจุฑุง ุฏฺฉุงูุณุชุฑุงฺฉุดู ุฑู ุชุงูพโูุง ฺฉู ููุณูุฏูโ ุขู ูุณุชุฏ).
* ุงุฒ C# 10 ุจู ุจุนุฏุ ูโุชูุงูุฏ **ูุชุบุฑูุง ููุฌูุฏ ู ุฌุฏุฏ** ุฑุง ุจุง ูู ุชุฑฺฉุจ ฺฉูุฏ:

  ```csharp
  double x1 = 0;
  (x1, double y2) = rect;
  ```

---

### ๐น ููุฏุงุฑุฏู ุงููู ุดุก (Object Initializers)

ุจุฑุง ุณุงุฏูโุณุงุฒ ููุฏุงุฑุฏู ุงูููุ ูโุชูุงู **ููุฏูุง ุง propertyูุง ูุงุจู ุฏุณุชุฑุณ** ุฑุง ูุณุชููุงู ุจุนุฏ ุงุฒ ุณุงุฒูุฏู ุชูุธู ฺฉุฑุฏ.

ูุซุงู ฺฉูุงุณ:

```csharp
public class Bunny
{
    public string Name;
    public bool LikesCarrots, LikesHumans;

    public Bunny() {}
    public Bunny(string n) => Name = n;
}
```

๐ ูููููโุณุงุฒ ุจุง ููุฏุงุฑุฏู ุงููู ุดุก:

```csharp
// ุณุงุฒูุฏู ุจุฏูู ูพุงุฑุงูุชุฑ ูโุชูุงูุฏ ูพุฑุงูุชุฒ ุฎุงู ุฑุง ุญุฐู ฺฉูุฏ
Bunny b1 = new Bunny { Name="Bo", LikesCarrots=true, LikesHumans=false };
Bunny b2 = new Bunny("Bo") { LikesCarrots=true, LikesHumans=false };
```

ุงู ฺฉุฏ ุฏููุงู ูุนุงุฏู ููุงุฑุฏ ุฒุฑ ุงุณุช (ฺฉุงููพุงูุฑ ูุชุบุฑูุง ูููุช ูโุณุงุฒุฏ):

```csharp
Bunny temp1 = new Bunny();
temp1.Name = "Bo";
temp1.LikesCarrots = true;
temp1.LikesHumans = false;
Bunny b1 = temp1;

Bunny temp2 = new Bunny("Bo");
temp2.LikesCarrots = true;
temp2.LikesHumans = false;
Bunny b2 = temp2;
```

๐ธ ุฏูู ุงุณุชูุงุฏู ุงุฒ ูุชุบุฑูุง ูููุช ุงู ุงุณุช ฺฉู ุงฺฏุฑ ุฏุฑ ุทูู ููุฏุงุฑุฏู ุงููู **exception** ุฑุฎ ุฏูุฏุ ุดุก **ูููโุณุงุฒูุงูโุงูุชู (half-initialized)** ุจุงู ููุงูุฏ.

### ๐น ููุงุณู ููุฏุงุฑุฏู ุงููู ุดุก ุจุง ูพุงุฑุงูุชุฑูุง ุงุฎุชุงุฑ (Object Initializers Versus Optional Parameters)

ุจู ุฌุง ุงุณุชูุงุฏู ุงุฒ **object initializer**ุ ูโุชูุงูู ุณุงุฒูุฏูโ ฺฉูุงุณ `Bunny` ุฑุง ุทูุฑ ุจููุณู ฺฉู ฺฉ ูพุงุฑุงูุชุฑ ุงุฌุจุงุฑ ู ุฏู ูพุงุฑุงูุชุฑ ุงุฎุชุงุฑ ุฏุงุดุชู ุจุงุดุฏ:

```csharp
public Bunny (string name,
              bool likesCarrots = false,
              bool likesHumans = false)
{
    Name = name;
    LikesCarrots = likesCarrots;
    LikesHumans = likesHumans;
}
```

๐ ุงู ฺฉุงุฑ ุจู ูุง ุงุฌุงุฒู ูโุฏูุฏ ุดุก ุฑุง ุจู ุดฺฉู ุฒุฑ ุจุณุงุฒู:

```csharp
Bunny b1 = new Bunny(name: "Bo", likesCarrots: true);
```

---

#### โ ูุฒุช ุชุงุฑุฎ ุงุณุชูุงุฏู ุงุฒ ุณุงุฒูุฏูโูุง

* ุฏุฑ ฺฏุฐุดุชู ุงุณุชูุงุฏู ุงุฒ ุณุงุฒูุฏูโูุง ุจุฑุง ููุฏุงุฑุฏู ุงููู ูุฒุช ุฏุงุดุชุ ฺูู ูโุชูุงูุณุชู ููุฏูุง ุง propertyูุง ุฑุง **ููุท-ุฎูุงูุฏู (read-only)** ฺฉูู.
* ุงุฌุงุฏ ููุฏ ุง property ููุทโุฎูุงูุฏู ฺฉุงุฑ ุฎูุจ ุงุณุช ููุช ฺฉู ูุงุฒ ุจู ุชุบุฑ ููุฏุงุฑ ุขู ุฏุฑ ุทูู ุนูุฑ ุดุก ูุฌูุฏ ูุฏุงุฑุฏ.
* ุงูุง ุงุฒ **C# 9** ุจู ุจุนุฏุ ุจุง **init modifier** ูโุชูุงูู ููู ูุฏู ุฑุง ุจุง **object initializer** ูุฒ ูุญูู ฺฉูู.

---

#### โ ูุนุงุจ ูพุงุฑุงูุชุฑูุง ุงุฎุชุงุฑ

1. **ูุฏุงุดุชู ูพุดุชุจุงู ุขุณุงู ุงุฒ ุชุบุฑุงุช ุบุฑูุฎุฑุจ (nondestructive mutation)**

   * ุณุงุฒูุฏู ุจุง ูพุงุฑุงูุชุฑูุง ุงุฎุชุงุฑ ุงุฌุงุฒูโ ุชุบุฑ ุจุฏูู ุชุฎุฑุจ (immutable-friendly mutation) ุฑุง ุจูโุณุงุฏฺฏ ููโุฏูุฏ.
   * ุงู ูุดฺฉู ุฏุฑ ุจุฎุด **Records** (ุตูุญู 227) ุญู ุฎูุงูุฏ ุดุฏ.

2. **ูุดฺฉู ุฏุฑ backward compatibility (ุณุงุฒฺฏุงุฑ ุนูุจโุฑู)**

   * ููุช ุงุฒ ูพุงุฑุงูุชุฑูุง ุงุฎุชุงุฑ ุฏุฑ ฺฉุชุงุจุฎุงููโูุง ุนููู ุงุณุชูุงุฏู ุดูุฏุ ุงูุฒูุฏู ูพุงุฑุงูุชุฑ ุงุฎุชุงุฑ ุฌุฏุฏ ุฏุฑ ุขูุฏู ุจุงุนุซ ูโุดูุฏ **ุณุงุฒฺฏุงุฑ ุฏูุฏู (binary compatibility)** ุจุง ูุตุฑูโฺฉููุฏฺฏุงู ูุจู ุดฺฉุณุชู ุดูุฏ.
   * ุจูโุฎุตูุต ุฏุฑ ฺฉุชุงุจุฎุงููโูุง ฺฉู ุฑู **NuGet** ููุชุดุฑ ูโุดููุฏ ูุดฺฉูโุณุงุฒ ุงุณุช.

๐น ุฏูู: ููุฏุงุฑ ูพุงุฑุงูุชุฑูุง ุงุฎุชุงุฑ ุฏุฑ **ฺฉุฏ ูุฑุงุฎูุงูโฺฉููุฏู** ฺฉุงููพุงู ู ุฌุงฺฏุฒู ูโุดูุฏ.
ูุซุงู:

```csharp
Bunny b1 = new Bunny("Bo", true, false);
```

ุงฺฏุฑ ุจุนุฏุงู ูพุงุฑุงูุชุฑ ุฌุฏุฏ ูุงููุฏ `likesCats` ุงุถุงูู ุดูุฏุ ุงุณูุจู ูุตุฑูโฺฉููุฏู ฺฉู ุฏูุจุงุฑู ฺฉุงููพุงู ูุดุฏู ููฺูุงู ูุชุฏ ุจุง ุณู ูพุงุฑุงูุชุฑ ุฑุง ุตุฏุง ูโุฒูุฏ ฺฉู ุฏฺฏุฑ ูุฌูุฏ ูุฏุงุฑุฏ โ ุฎุทุง ุฏุฑ ุฒูุงู ุงุฌุฑุง.

ุญุช ุชุบุฑ ููุฏุงุฑ ูพุดโูุฑุถ ฺฉ ุงุฒ ูพุงุฑุงูุชุฑูุง ุงุฎุชุงุฑ ูุฒ ูุดฺฉู ุงุฌุงุฏ ูโฺฉูุฏ: ูุตุฑูโฺฉููุฏฺฏุงู ูุฏู ุชุง ุฒูุงู ุจุงุฒฺฉุงููพุงู ุงุฒ ููุฏุงุฑ ูุฏู ุงุณุชูุงุฏู ูโฺฉููุฏ.

---

#### ๐น ููุงุญุธู ุฏฺฏุฑ

ุณุงุฒูุฏูโูุง ุฑู **ุงุฑุซโุจุฑ (Inheritance)** ูู ุงุซุฑ ูโฺฏุฐุงุฑูุฏ (ุจุญุซ ุฏุฑ ุตูุญู 126).

* ุฏุงุดุชู ฺูุฏ ุณุงุฒูุฏู ุจุง ูุณุชโูุง ุทููุงู ูพุงุฑุงูุชุฑุ ุฒุฑฺฉูุงุณโุณุงุฒ ุฑุง ุณุฎุช ูโฺฉูุฏ.
* ุฑุงูโุญู: ุชุนุฏุงุฏ ู ูพฺุฏฺฏ ุณุงุฒูุฏูโูุง ุฑุง ุจู ุญุฏุงูู ุจุฑุณุงูุฏ ู ุงุฒ **object initializer** ุจุฑุง ุฌุฒุฆุงุช ุงุณุชูุงุฏู ฺฉูุฏ.

---

### ๐น ูุฑุฌุน `this`

ฺฉูููโ ฺฉูุฏ `this` ุจู ูููููโ ุฌุงุฑ (instance) ุงุดุงุฑู ูโฺฉูุฏ.

ูุซุงู:

```csharp
public class Panda
{
    public Panda Mate;
    public void Marry(Panda partner)
    {
        Mate = partner;
        partner.Mate = this;
    }
}
```

ููฺูู `this` ุจุฑุง ุฑูุน ุงุจูุงู ูุงู ููุฏ ู ูพุงุฑุงูุชุฑ/ูุชุบุฑ ูุญู ุงุณุชูุงุฏู ูโุดูุฏ:

```csharp
public class Test
{
    string name;
    public Test(string name) => this.name = name;
}
```

๐ ูุฑุฌุน `this` ููุท ุฏุฑ ุงุนุถุง **nonstatic** ฺฉูุงุณ ุง struct ูุนุชุจุฑ ุงุณุช.

---

### ๐น ูฺฺฏโูุง (Properties)

ูฺฺฏโูุง (**Properties**) ุงุฒ ุจุฑูู ุดุจู ููุฏูุง ุจู ูุธุฑ ูโุฑุณูุฏุ ุงูุง ุฏุฑ ุฏุฑูู ููุทู ุฏุงุฑูุฏ (ูุซู ูุชุฏูุง).

ูุซุงู:

```csharp
Stock msft = new Stock();
msft.CurrentPrice = 30;
msft.CurrentPrice -= 3;
Console.WriteLine(msft.CurrentPrice);
```

ุฏุฑ ุธุงูุฑ ูุนููู ูุณุช ฺฉู `CurrentPrice` ฺฉ ููุฏ ุงุณุช ุง property.

๐ธ ุชุนุฑู property:

```csharp
public class Stock
{
    decimal currentPrice;    // ููุฏ ุฎุตูุต (backing field)
    public decimal CurrentPrice   // property ุนููู
    {
        get { return currentPrice; }
        set { currentPrice = value; }
    }
}
```

* **get accessor** ููุช property ุฎูุงูุฏู ูโุดูุฏ ุงุฌุฑุง ูโุดูุฏ.
* **set accessor** ููุช ููุฏุงุฑุฏู ูโุดูุฏ ุงุฌุฑุง ูโุดูุฏ ู ูพุงุฑุงูุชุฑ ุถูู `value` ุฏุงุฑุฏ.

๐ ุชูุงูุช ุงุตู ุจุง ููุฏูุง:

* property ุงูฺฉุงู ฺฉูุชุฑู ฺฉุงูู ุฑู ุฎูุงูุฏู/ููุดุชู ููุฏุงุฑ ุฑุง ุจู ุจุฑูุงููโููุณ ูโุฏูุฏ.
* ูุซูุงู ูโุชูุงู ุฏุฑ setter ุจุฑุฑุณ ฺฉุฑุฏ ฺฉู ููุฏุงุฑ ูุฑูุฏ ุฏุฑ ุจุงุฒู ูุนุชุจุฑ ุจุงุดุฏุ ู ุฏุฑ ุบุฑ ุงู ุตูุฑุช ุฎุทุง ูพุฑุชุงุจ ฺฉุฑุฏ.

---

### ๐น ุงุตูุงุญโฺฉููุฏูโูุง ูุฌุงุฒ ุฑู Properties

* **Static modifier:** `static`
* **Access modifiers:** `public internal private protected`
* **Inheritance modifiers:** `new virtual abstract override sealed`
* **Unmanaged code modifiers:** `unsafe extern`

---

### ๐น ูฺฺฏโูุง ููุทโุฎูุงูุฏู ู ูุญุงุณุจุงุช (Read-only and calculated properties)

* ุงฺฏุฑ ููุท **get accessor** ุชุนุฑู ุดูุฏ โ property ููุทโุฎูุงูุฏู ุงุณุช.
* ุงฺฏุฑ ููุท **set accessor** ุชุนุฑู ุดูุฏ โ property ููุทโููุดุชู ุงุณุช (ุจู ูุฏุฑุช ุงุณุชูุงุฏู ูโุดูุฏ).
* property ูโุชูุงูุฏ ุงุฒ ุฏุงุฏูโูุง ุฏฺฏุฑ ูุญุงุณุจู ุดูุฏ:

```csharp
decimal currentPrice, sharesOwned;
public decimal Worth
{
    get { return currentPrice * sharesOwned; }
}
```

---

### ๐น ูฺฺฏโูุง Expression-Bodied

ุจุฑุง ููุดุชู ฺฉูุชุงูโุชุฑ propertyูุง ููุทโุฎูุงูุฏู:

```csharp
public decimal Worth => currentPrice * sharesOwned;
```

ุญุช setter ูู ูโุชูุงูุฏ expression-bodied ุจุงุดุฏ:

```csharp
public decimal Worth
{
    get => currentPrice * sharesOwned;
    set => sharesOwned = value / currentPrice;
}
```

---

### ๐น ูฺฺฏโูุง ุฎูุฏฺฉุงุฑ (Automatic Properties)

ุฑุงุฌโุชุฑู ููุน propertyุ ุณุงุฏูโุชุฑู ูพุงุฏูโุณุงุฒ ุงุณุช: ููุท ุฎูุงูุฏู/ููุดุชู ุจู ฺฉ ููุฏ ุฎุตูุต.

ุจู ุฌุง ููุดุชู ุฏุณุชุ ูโุชูุงู ุงุฒ property ุฎูุฏฺฉุงุฑ ุงุณุชูุงุฏู ฺฉุฑุฏ:

```csharp
public class Stock
{
    public decimal CurrentPrice { get; set; }
}
```

* ฺฉุงููพุงูุฑ ุจู ุทูุฑ ุฎูุฏฺฉุงุฑ ฺฉ **backing field ุฎุตูุต** ุชููุฏ ูโฺฉูุฏ.
* ูโุชูุงู setter ุฑุง **private** ุง **protected** ฺฉุฑุฏ ุชุง property ุจุฑุง ุฏฺฏุฑุงู ููุทโุฎูุงูุฏู ุจุงุดุฏ.

๐ ูฺฺฏโูุง ุฎูุฏฺฉุงุฑ ุงุฒ C# 3.0 ูุนุฑู ุดุฏูุฏ.

---

### ๐น ููุฏุงุฑุฏู ุงููู property (Property Initializers)

propertyูุง ุฎูุฏฺฉุงุฑ ูโุชูุงููุฏ ูุณุชููุงู ููุฏุงุฑ ุงููู ุฏุงุดุชู ุจุงุดูุฏ:

```csharp
public decimal CurrentPrice { get; set; } = 123;
```

* ุงูุฌุง ููุฏุงุฑ ุงูููโ `CurrentPrice` ุจุฑุงุจุฑ ุจุง 123 ุงุณุช.
* property ุจุง initializer ูโุชูุงูุฏ **ููุทโุฎูุงูุฏู** ูู ุจุงุดุฏ:

```csharp
public int Maximum { get; } = 999;
```

ูุงููุฏ ููุฏูุง readonlyุ propertyูุง ุฎูุฏฺฉุงุฑ readonly ูุฒ ูโุชูุงููุฏ ุฏุฑ **constructor** ููุฏุงุฑุฏู ุดููุฏ.
ุงู ูุงุจูุช ุจุฑุง ุณุงุฎุชู **ุงููุงุน immutable (ููุทโุฎูุงูุฏู)** ุจุณุงุฑ ฺฉุงุฑุจุฑุฏ ุงุณุช.

### ๐น ุฏุณุชุฑุณ ุฏุฑ get ู set (get and set accessibility)

ุฏุฑ C# ูโุชูุงู **ุณุทุญ ุฏุณุชุฑุณ** (accessibility) ูุชุฏูุง `get` ู `set` ฺฉ property ุฑุง ูุชูุงูุช ุชุนุฑู ฺฉุฑุฏ.

๐ ฺฉุงุฑุจุฑุฏ ุฑุงุฌ: ุฏุงุดุชู ฺฉ property ุนููู (**public**) ุจุง ฺฉ setter ุฎุตูุต ุง ุฏุงุฎู (**private/internal**).

ูุซุงู:

```csharp
public class Foo
{
    private decimal x;
    public decimal X
    {
        get         { return x; }
        private set { x = Math.Round(value, 2); }
    }
}
```

๐ ุฏูุช ฺฉูุฏ: property ุฎูุฏุด ุณุทุญ ุฏุณุชุฑุณ ุจุงุฒุชุฑ (ุงูุฌุง `public`) ุฏุงุฑุฏุ ุงูุง setter ุณุทุญ ุฏุณุชุฑุณ ูุญุฏูุฏุชุฑ (`private`).

---

### ๐น Setterูุง ููุท-init (Init-only setters)

ุงุฒ **C# 9** ูโุชูุงู ุจู ุฌุง `set` ุงุฒ **init** ุงุณุชูุงุฏู ฺฉุฑุฏ:

```csharp
public class Note
{
    public int Pitch    { get; init; } = 20;   // property ููุท-init
    public int Duration { get; init; } = 100;  // property ููุท-init
}
```

* ุงู propertyูุง ูุงููุฏ read-only ุนูู ูโฺฉููุฏุ ุงูุง ูโุชูุงููุฏ ุจุง **object initializer** ููุฏุงุฑุฏู ุดููุฏ:

```csharp
var note = new Note { Pitch = 50 };
```

* ุจุนุฏ ุงุฒ ุขู ุฏฺฏุฑ ููโุชูุงู ููุฏุงุฑ ุฑุง ุชุบุฑ ุฏุงุฏ:

```csharp
note.Pitch = 200;   // โ ุฎุทุง โ setter ููุท-init
```

* ุญุช ุงุฒ ุฏุงุฎู ฺฉูุงุณ ูู ูุงุจู ุชุบุฑ ูุณุชูุฏ (ูฺฏุฑ ุฏุฑ initializerุ constructor ุง ฺฉ accessor ุฏฺฏุฑ ุงุฒ ููุน init).

---

### ๐น ุฌุงฺฏุฒู init-only properties

ุฑุงู ุฌุงฺฏุฒูุ ุชุนุฑู propertyูุง ููุทโุฎูุงูุฏู ู ููุฏุงุฑุฏู ุขูโูุง ุฏุฑ constructor ุงุณุช:

```csharp
public class Note
{
    public int Pitch    { get; }
    public int Duration { get; }
    public Note (int pitch = 20, int duration = 100)
    {
        Pitch = pitch; Duration = duration;
    }
}
```

โ ูุดฺฉู: ุงฺฏุฑ ุงู ฺฉูุงุณ ุฏุฑ ฺฉ **ฺฉุชุงุจุฎุงูู ุนููู** ุจุงุดุฏุ ุงูุฒูุฏู ูพุงุฑุงูุชุฑ ุงุฎุชุงุฑ ุฌุฏุฏ ุจู constructor ุจุงุนุซ ุดฺฉุณุชู **ุณุงุฒฺฏุงุฑ ุฏูุฏู (binary compatibility)** ูโุดูุฏ.
ุงูุง ุงูุฒูุฏู ฺฉ **property ููุท-init** ูฺ ูุดฺฉู ุงุฌุงุฏ ููโฺฉูุฏ.

---

### ๐น ูุฒุงุง init-only properties

* ูพุดุชุจุงู ุงุฒ **nondestructive mutation** ููุช ุจุง **records** ุงุณุชูุงุฏู ุดููุฏ (ุจุฎุด Recordsุ ุตูุญู 227).
* ุงูฺฉุงู ูพุงุฏูโุณุงุฒ setter ุจุง ููุทู ุฏุงุฎู:

```csharp
public class Note
{
    readonly int _pitch;
    public int Pitch { get => _pitch; init => _pitch = value; }
}
```

๐ก ูฺฉุชู: ุญุช ูโุชูุงู ููุฏูุง **readonly** ุฑุง ุฏุฑ setter ููุท-init ุชุบุฑ ุฏุงุฏ. ุงู ุจุงุนุซ ูโุดูุฏ ฺฉูุงุณ **immutable ุฏุงุฎู** ุจุงู ุจูุงูุฏ.

โ ุชุบุฑ ฺฉ accessor ุงุฒ `init` ุจู `set` (ุง ุจุฑุนฺฉุณ) ฺฉ **ุชุบุฑ ุณุงุฒฺฏุงุฑโุดฺฉู (binary breaking change)** ุงุณุช. ุจูุงุจุฑุงู ุงุณูุจูโูุง ุฏฺฏุฑ ุจุงุฏ ุฏูุจุงุฑู ฺฉุงููพุงู ุดููุฏ.

---

### ๐น ูพุงุฏูโุณุงุฒ property ุฏุฑ CLR

ุฏุฑ ุณุทุญ CLRุ propertyูุง ุจู ูุชุฏูุง ุชุจุฏู ูโุดููุฏ:

```csharp
public decimal get_CurrentPrice {...}
public void set_CurrentPrice (decimal value) {...}
```

* ฺฉ accessor ุงุฒ ููุน `init` ูุซู `set` ูพุฑุฏุงุฒุด ูโุดูุฏุ ุงูุง ฺฉ flag ุงุถุงูู ุฏุฑ ูุชุงุฏุชุง ุฏุงุฑุฏ.
* propertyูุง ุณุงุฏู ู ุบุฑูุฌุงุฒ ุชูุณุท **JIT compiler** inline ูโุดููุฏ (ุนู ูุฑุงุฎูุงู ูุชุฏ ุจุง ุจุฏููโุงุด ุฌุงฺฏุฒู ูโุดูุฏ).
* ุฏุฑ ูุชุฌูุ ุฏุณุชุฑุณ ุจู property ู ููุฏ ุงุฒ ูุธุฑ ฺฉุงุฑุง **ูฺ ุชูุงูุช ูุฏุงุฑุฏ**.

---

### ๐น ุงูุฏฺฉุณุฑูุง (Indexers)

ุงูุฏฺฉุณุฑูุง่ฏญ ๐ ุงุฌุงุฒู ูโุฏููุฏ ฺฉ ฺฉูุงุณ ุง struct ูุซู ุขุฑุงู ุฑูุชุงุฑ ฺฉูุฏ.

๐ `string` ฺฉ ุงูุฏฺฉุณุฑ ุฏุงุฑุฏ ฺฉู ุงุฌุงุฒู ูโุฏูุฏ ุจุง ุงุณุชูุงุฏู ุงุฒ ฺฉ ุงูุฏุณ ุนุฏุฏ ุจู ูุฑ `char` ุฏุณุชุฑุณ ูพุฏุง ฺฉูุฏ:

```csharp
string s = "hello";
Console.WriteLine(s[0]);  // h
Console.WriteLine(s[3]);  // l
```

* ุงูุฏฺฉุณุฑูุง ูุซู property ูุณุชูุฏุ ุงูุง ุจู ุฌุง ูุงูุ ุจุง **ุงูุฏุณ (index argument)** ุตุฏุง ุฒุฏู ูโุดููุฏ.
* ุงูุฏุณ ูโุชูุงูุฏ ุงุฒ ูุฑ ููุน ุจุงุดุฏุ ูู ููุท ุนุฏุฏ ุตุญุญ.
* ููุงู modifierูุง property ุฑุง ุฏุงุฑูุฏ (`public, private, static, ...`).
* ูโุชูุงููุฏ ุจู ุตูุฑุช **null-ุดุฑุท** ุงุณุชูุงุฏู ุดููุฏ:

```csharp
string s = null;
Console.WriteLine(s?[0]);  // ฺุฒ ฺุงูพ ููโุดูุฏุ ุฎุทุง ูู ุฑุฎ ููโุฏูุฏ
```

---

### ๐น ูพุงุฏูโุณุงุฒ ุงูุฏฺฉุณุฑ

ุจุฑุง ุชุนุฑู ุงูุฏฺฉุณุฑุ ฺฉ property ุจุง ูุงู `this` ูโุณุงุฒู ู ูพุงุฑุงูุชุฑูุง ุฑุง ุฏุงุฎู ฺฉุฑูุดู ูุฑุงุฑ ูโุฏูู:

```csharp
class Sentence
{
    string[] words = "The quick brown fox".Split();
    public string this[int wordNum]   // ุงูุฏฺฉุณุฑ
    {
        get { return words[wordNum]; }
        set { words[wordNum] = value; }
    }
}
```

ูุซุงู ุงุณุชูุงุฏู:

```csharp
Sentence s = new Sentence();
Console.WriteLine(s[3]);   // fox
s[3] = "kangaroo";
Console.WriteLine(s[3]);   // kangaroo
```

* ฺฉ ฺฉูุงุณ ูโุชูุงูุฏ ฺูุฏู ุงูุฏฺฉุณุฑ ุจุง ููุน ูพุงุฑุงูุชุฑูุง ูุชูุงูุช ุฏุงุดุชู ุจุงุดุฏ.
* ุงูุฏฺฉุณุฑ ูโุชูุงูุฏ ุจุด ุงุฒ ฺฉ ูพุงุฑุงูุชุฑ ุจฺฏุฑุฏ:

```csharp
public string this[int arg1, string arg2]
{
    get { ... }
    set { ... }
}
```

* ุงฺฏุฑ setter ุญุฐู ุดูุฏ โ ุงูุฏฺฉุณุฑ ููุทโุฎูุงูุฏู ูโุดูุฏ.
* ูโุชูุงู ุจุง **expression-bodied** ููุดุช:

```csharp
public string this[int wordNum] => words[wordNum];
```

---

### ๐น ูพุงุฏูโุณุงุฒ ุงูุฏฺฉุณุฑ ุฏุฑ CLR

ุงูุฏฺฉุณุฑูุง ุจู ูุชุฏูุง ุฒุฑ ฺฉุงููพุงู ูโุดููุฏ:

```csharp
public string get_Item(int wordNum) {...}
public void set_Item(int wordNum, string value) {...}
```

---

### ๐น ุงุณุชูุงุฏู ุงุฒ Indices ู Ranges ุฏุฑ ุงูุฏฺฉุณุฑูุง

ูโุชูุงู ุงูุฏฺฉุณุฑูุง ุจุฑุง `Index` ู `Range` ุชุนุฑู ฺฉุฑุฏ (ุจุฎุด Indices and Rangesุ ุตูุญู 63).

ูุซุงู ุชูุณุนู ฺฉูุงุณ Sentence:

```csharp
public string this[Index index] => words[index];
public string[] this[Range range] => words[range];
```

ูุซุงู ุงุณุชูุงุฏู:

```csharp
Sentence s = new Sentence();
Console.WriteLine(s[^1]);          // fox
string[] firstTwoWords = s[..2];   // (The, quick)
```

### ๐น ุณุงุฒูุฏูโูุง ุงุตู (Primary Constructors) ุฏุฑ #C 12

ุงุฒ ูุณุฎูโ **#C 12** ูโุชูุงูุฏ ฺฉ ูุณุช ูพุงุฑุงูุชุฑ ุฑุง ูุณุชููุงู ุจุนุฏ ุงุฒ ุชุนุฑู ฺฉ ฺฉูุงุณ (ุง struct) ูุฑุงุฑ ุฏูุฏ:

```csharp
class Person (string firstName, string lastName)
{
  public void Print() => Console.WriteLine(firstName + " " + lastName);
}
```

ุงู ฺฉุงุฑ ุจู ฺฉุงููพุงูุฑ ุฏุณุชูุฑ ูโุฏูุฏ ฺฉู ุจูโุทูุฑ ุฎูุฏฺฉุงุฑ ฺฉ **ุณุงุฒูุฏูโ ุงุตู (primary constructor)** ุจุง ุงุณุชูุงุฏู ุงุฒ ูพุงุฑุงูุชุฑูุง `firstName` ู `lastName` ุจุณุงุฒุฏ. ุฏุฑ ูุชุฌู ูโุชูุงูู ฺฉูุงุณ ุฎูุฏ ุฑุง ุจู ุงู ุดฺฉู ูููููโุณุงุฒ ฺฉูู:

```csharp
Person p = new Person("Alice", "Jones");
p.Print();    // Alice Jones
```

โก ุณุงุฒูุฏูโูุง ุงุตู ุจุฑุง **ูููููโุณุงุฒ ุณุฑุน (prototyping)** ู ุณูุงุฑููุง ุณุงุฏู ููุฏ ูุณุชูุฏ.
ุฑูุด ุฌุงฺฏุฒู ุงู ุงุณุช ฺฉู ููุฏูุง ุฑุง ุชุนุฑู ฺฉุฑุฏู ู ฺฉ ุณุงุฒูุฏู ูุนููู ุจููุณุฏ:

```csharp
class Person    // (ุจุฏูู primary constructor)
{
  string firstName, lastName;   // ุชุนุฑู ููุฏูุง

  public Person(string firstName, string lastName)   // ุณุงุฒูุฏู
  {
    this.firstName = firstName;   // ุงูุชุณุงุจ ุจู ููุฏ
    this.lastName = lastName;     // ุงูุชุณุงุจ ุจู ููุฏ
  }

  public void Print() => Console.WriteLine(firstName + " " + lastName);
}
```

ุณุงุฒูุฏูโุง ฺฉู ุชูุณุท #C ุณุงุฎุชู ูโุดูุฏุ **ุงุตู (primary)** ูุงูุฏู ูโุดูุฏุ ุฒุฑุง ูุฑ ุณุงุฒูุฏู ุฏฺฏุฑ ฺฉู ุฎูุฏุชุงู ุจูโุทูุฑ ุตุฑุญ ุชุนุฑู ฺฉูุฏุ **ุจุงุฏ ุขู ุฑุง ูุฑุงุฎูุงู ฺฉูุฏ**:

```csharp
class Person (string firstName, string lastName)
{
  public Person(string firstName, string lastName, int age)
    : this(firstName, lastName)   // ุจุงุฏ primary constructor ูุฑุงุฎูุงู ุดูุฏ
  {
  }
  ...
}
```

ุงู ุจุงุนุซ ูโุดูุฏ ูพุงุฑุงูุชุฑูุง ุณุงุฒูุฏูโ ุงุตู ููุดู ููุฏุงุฑุฏู ุดููุฏ โ.

---

### ๐ ูฺฉุชู ุฏุฑุจุงุฑูโ **Records**

ุฏุฑ #C ุนูุงูู ุจุฑ ฺฉูุงุณโูุงุ **Records** ูู ูุฌูุฏ ุฏุงุฑูุฏ (ุฏุฑ ุตูุญูโ 227 ุชูุถุญ ุฏุงุฏู ุดุฏู ุงุณุช).
Records ูุฒ ุงุฒ **primary constructor** ูพุดุชุจุงู ูโฺฉููุฏุ ุงูุง ฺฉุงููพุงูุฑ ฺฉ ูุฑุญููโ ุงุถุงูู ุงูุฌุงู ูโุฏูุฏ: ุจุฑุง ูุฑ ูพุงุฑุงูุชุฑ ุณุงุฒูุฏูโ ุงุตูุ ุจูโุทูุฑ ูพุดโูุฑุถ ฺฉ **property ุนููู ุจุง init-only** ุชููุฏ ูโฺฉูุฏ.
ุงฺฏุฑ ฺูู ุฑูุชุงุฑ ูุฏูุธุฑ ุดูุงุณุชุ ุจูุชุฑ ุงุณุช ุงุฒ **Record** ุงุณุชูุงุฏู ฺฉูุฏ.

---

### โ๏ธ ูุญุฏูุฏุชโูุง Primary Constructor

ุงู ุณุงุฒูุฏูโูุง ุจุดุชุฑ ุจุฑุง ุณูุงุฑููุง ุณุงุฏู ููุงุณุจโุงูุฏุ ุฒุฑุง:

1. ููโุชูุงูุฏ ฺฉุฏ ุงุถุงู ุจุฑุง ููุฏุงุฑุฏู ุงููู ุฏุงุฎู primary constructor ุงุถุงูู ฺฉูุฏ.
2. ุงฺฏุฑ ุจุฎูุงูุฏ ูพุงุฑุงูุชุฑูุง ุฑุง ุจูโุนููุงู property ุนููู ููุชุดุฑ ฺฉูุฏุ ุงุถุงูู ฺฉุฑุฏู **ููุทู ุงุนุชุจุงุฑุณูุฌ (validation logic)** ุขุณุงู ูุณุช (ูฺฏุฑ property ููุท ุฎูุงูุฏู ุจุงุดุฏ).

๐ธ ููฺูู ุณุงุฒูุฏูโ ุงุตู ุฌุงฺฏุฒู **ุณุงุฒูุฏูโ ูพุดโูุฑุถ ุจุฏูู ูพุงุฑุงูุชุฑ** ูโุดูุฏ ฺฉู ุฏุฑ ุญุงูุช ุนุงุฏ #C ุชููุฏ ูโฺฉุฑุฏ.

---

### ๐ ุฑูุชุงุฑ ุณุงุฒูุฏูโ ุงุตู ุฏุฑ ููุงุณู ุจุง ุณุงุฒูุฏู ูุนููู

ุฏุฑ ฺฉ ุณุงุฒูุฏู ูุนููู:

```csharp
class Person
{
  public Person(string firstName, string lastName)
  {
    // ุงูุฌุงู ุนููุงุช ุจุง firstName, lastName
  }
}
```

ููุช ฺฉุฏ ุฏุงุฎู ุณุงุฒูุฏู ุชูุงู ุดุฏุ ูพุงุฑุงูุชุฑูุง (`firstName` ู `lastName`) ุงุฒ ูุญุฏูุฏูโ ุฏุฏ ุฎุงุฑุฌ ูโุดููุฏ ู ุฏฺฏุฑ ูุงุจู ุฏุณุชุฑุณ ูุณุชูุฏ.

ุงูุง ุฏุฑ **primary constructor**ุ ูพุงุฑุงูุชุฑูุง ุงุฒ ูุญุฏูุฏู ุฎุงุฑุฌ ููโุดููุฏ ู ูโุชูุงู ุขูโูุง ุฑุง ุฏุฑ ฺฉู ุจุฏููโ ฺฉูุงุณ ู ุทูู ุนูุฑ ุดุก ุงุณุชูุงุฏู ฺฉุฑุฏ.

---

### โ๏ธ ููุฏูุง ู Propertyโูุง ุฏุฑ Primary Constructor

ุฏุณุชุฑุณ ูพุงุฑุงูุชุฑูุง ุจู **initializerูุง** ูุฒ ฺฏุณุชุฑุด ูโุงุจุฏ:

```csharp
class Person (string firstName, string lastName)
{
  public readonly string FirstName = firstName;  // ููุฏ
  public string LastName { get; } = lastName;    // Property
}
```

---

### ๐ญ ูุงุณฺฉโฺฏุฐุงุฑ (Masking) ูพุงุฑุงูุชุฑูุง

ููุฏูุง ุง Propertyูุง ูโุชูุงููุฏ ููุงู ูุงู ูพุงุฑุงูุชุฑูุง ุฑุง ุจฺฏุฑูุฏ:

```csharp
class Person (string firstName, string lastName)
{
  readonly string firstName = firstName;
  readonly string lastName = lastName;

  public void Print() => Console.WriteLine(firstName + " " + lastName);
}
```

ุฏุฑ ุงู ุญุงูุชุ ููุฏ ุง property ุจุฑ ูพุงุฑุงูุชุฑ **ุงูููุช ุฏุงุฑุฏ** (ูพุงุฑุงูุชุฑ ุฑุง mask ูโฺฉูุฏ)ุ ูฺฏุฑ ุฏุฑ ุณูุช ุฑุงุณุช initializerูุง.

---

### โจ ุงุนุชุจุงุฑุณูุฌ ู ูพุฑุฏุงุฒุด ููุงุฏุฑ

ูุซุงู ุฐุฎุฑูโุณุงุฒ FullName ุจุง ูุญุงุณุจู ุฏุฑ initializer:

```csharp
new Person("Alice", "Jones").Print();   // Alice Jones

class Person (string firstName, string lastName)
{
  public readonly string FullName = firstName + " " + lastName;
  public void Print() => Console.WriteLine(FullName);
}
```

ูุซุงู ุฐุฎุฑูโ ููุฏุงุฑ uppercase ุจุฑุง `lastName`:

```csharp
new Person("Alice", "Jones").Print();   // Alice JONES

class Person (string firstName, string lastName)
{
  readonly string lastName = lastName.ToUpper();
  public void Print() => Console.WriteLine(firstName + " " + lastName);
}
```

---

### ๐จ ุงุนุชุจุงุฑุณูุฌ ุจุง ุงุณุชุซูุง (Exception)

ูโุชูุงู ุงุฒ **throw expression** ุฏุฑ initializer ุงุณุชูุงุฏู ฺฉุฑุฏ:

```csharp
new Person("Alice", null);   // ArgumentNullException

class Person (string firstName, string lastName)
{
  readonly string lastName = (lastName == null)
    ? throw new ArgumentNullException("lastName")
    : lastName;
}
```

(ุจู ุงุฏ ุฏุงุดุชู ุจุงุดุฏ: initializerูุง ููฺฏุงู ุณุงุฎุชู ุดุฏู ุดุก ุงุฌุฑุง ูโุดููุฏุ ูู ููฺฏุงู ุฏุณุชุฑุณ ุจู ููุฏ ุง property.)

---

### ๐ ุงูุชุดุงุฑ ูพุงุฑุงูุชุฑ ุจูโุนููุงู Property ุจุง set

```csharp
class Person (string firstName, string lastName)
{
  public string LastName { get; set; } = lastName;
}
```

ุงูุง ุฏุฑ ุงู ุญุงูุช ุงุนุชุจุงุฑุณูุฌ ุณุงุฏู ูุณุชุ ฺูู ุจุงุฏ ูู ุฏุฑ **set accessor** ู ูู ุฏุฑ **initializer** ุงุนุชุจุงุฑุณูุฌ ุฑุง ูพุงุฏูโุณุงุฒ ฺฉูุฏ (ููู ูุดฺฉู ุจุฑุง init-only ูู ูุฌูุฏ ุฏุงุฑุฏ).
ุฏุฑ ฺูู ุดุฑุงุท ุจูุชุฑ ุงุณุช ุงุฒ **ุณุงุฒูุฏูโูุง ูุนููู ู ููุฏูุง ูพุดุชุจุงู (backing fields)** ุงุณุชูุงุฏู ฺฉูุฏ.

### โก ุณุงุฒูุฏูโูุง ุงุณุชุงุชฺฉ (Static Constructors)

๐น ฺฉ **static constructor** ููุท ฺฉ ุจุงุฑ ุจุฑุง ูุฑ **ููุน (type)** ุงุฌุฑุง ูโุดูุฏ (ูู ุจุฑุง ูุฑ ููููู).
ฺฉ ููุน ููุท ูโุชูุงูุฏ **ฺฉ ุณุงุฒูุฏูโ ุงุณุชุงุชฺฉ** ุฏุงุดุชู ุจุงุดุฏุ ุงู ุณุงุฒูุฏู ุจุงุฏ ุจุฏูู ูพุงุฑุงูุชุฑ ุจุงุดุฏ ู ูุงู ุขู ุฏููุงู ููุงู ูุงู ฺฉูุงุณ ุจุงุดุฏ:

```csharp
class Test
{
  static Test() { Console.WriteLine("Type Initialized"); }
}
```

ุฒูุงู ุงุฌุฑุง (runtime) ุงู ุณุงุฒูุฏูโ ุงุณุชุงุชฺฉ ุฑุง **ุจูโุทูุฑ ุฎูุฏฺฉุงุฑ ุฏุฑุณุช ูุจู ุงุฒ ุงููู ุงุณุชูุงุฏู ุงุฒ ููุน** ูุฑุงุฎูุงู ูโฺฉูุฏ. ุฏู ฺุฒ ุงู ุณุงุฒูุฏู ุฑุง ูุนุงู ูโฺฉูุฏ:

1. ูููููโุณุงุฒ ุงุฒ ููุน ๐
2. ุฏุณุชุฑุณ ุจู ฺฉ ุนุถู ุงุณุชุงุชฺฉ ุฏุฑ ุขู ููุน โ๏ธ

๐ธ ุชููุง **modifier**ูุง ฺฉู ุฏุฑ ุณุงุฒูุฏูโ ุงุณุชุงุชฺฉ ูุฌุงุฒ ูุณุชูุฏ ุนุจุงุฑุชโุงูุฏ ุงุฒ: `unsafe` ู `extern`.

๐จ ุงฺฏุฑ ฺฉ ุณุงุฒูุฏูโ ุงุณุชุงุชฺฉ ุงุณุชุซูุง ูุฏุฑุชโูุดุฏู (unhandled exception) ูพุฑุชุงุจ ฺฉูุฏุ ุขู **ููุน ุชุง ูพุงุงู ุนูุฑ ุจุฑูุงูู ุบุฑูุงุจูโุงุณุชูุงุฏู ูโุดูุฏ**.

---

### ๐๏ธ Module Initializers (ุงุฒ #C 9)

ุงุฒ ูุณุฎูโ **#C 9** ูโุชูุงูุฏ **Module Initializer** ุชุนุฑู ฺฉูุฏ ฺฉู ฺฉ ุจุงุฑ ุจุฑุง ูุฑ **assembly** ู ููฺฏุงู ุจุงุฑฺฏุฐุงุฑ ุขู ุงุฌุฑุง ูโุดูุฏ:

```csharp
[System.Runtime.CompilerServices.ModuleInitializer]
internal static void InitAssembly()
{
  ...
}
```

---

### ๐ ุณุงุฒูุฏูโูุง ุงุณุชุงุชฺฉ ู ุชุฑุชุจ ููุฏุงุฑุฏู ููุฏูุง

* ููุฏุงุฑุฏู ุงูููโ ููุฏูุง ุงุณุชุงุชฺฉ ุฏููุงู ูุจู ุงุฒ ูุฑุงุฎูุงู ุณุงุฒูุฏูโ ุงุณุชุงุชฺฉ ุงุฌุฑุง ูโุดูุฏ.
* ุงฺฏุฑ ููุน ุณุงุฒูุฏูโ ุงุณุชุงุชฺฉ ูุฏุงุดุชู ุจุงุดุฏุ ููุฏุงุฑุฏู ุงูููโ ููุฏูุง ุฏุฑุณุช ูุจู ุงุฒ ุงููู ุงุณุชูุงุฏู ุงุฒ ููุน (ุง ุฒูุฏุชุฑุ ุจุณุชู ุจู ุชุตูู runtime) ุงูุฌุงู ูโุดูุฏ.
* ููุฏุงุฑุฏู ุงูููโ ููุฏูุง ุจู ุชุฑุชุจ ุงุณุช ฺฉู ุชุนุฑู ุดุฏูโุงูุฏ.

ูุซุงู:

```csharp
class Foo
{
  public static int X = Y;   // 0
  public static int Y = 3;   // 3
}
```

ุงฺฏุฑ ุฌุง ุงู ุฏู ุฎุท ุฑุง ุนูุถ ฺฉููุ ูุฑ ุฏู ุจุฑุงุจุฑ 3 ูโุดููุฏ.

---

ูุซุงู ุฏฺฏุฑ:

```csharp
Console.WriteLine(Foo.X);    // 3

class Foo
{
  public static Foo Instance = new Foo();
  public static int X = 3;

  Foo() => Console.WriteLine(X);   // 0
}
```

ุฏุฑ ุงูุฌุง ุงุจุชุฏุง **0** ู ุณูพุณ **3** ฺุงูพ ูโุดูุฏ.
ุงฺฏุฑ ุฌุง ุฏู ุฎุท ูพุฑุฑูฺฏ ุฑุง ุนูุถ ฺฉููุ ุฎุฑูุฌ **3 ู 3** ุฎูุงูุฏ ุจูุฏ.

---

### ๐ท๏ธ ฺฉูุงุณโูุง ุงุณุชุงุชฺฉ (Static Classes)

* ฺฉูุงุณ ฺฉู ุจุง `static` ุนูุงูุชโฺฏุฐุงุฑ ุดุฏู ุจุงุดุฏ:

  * ููโุชูุงู ุงุฒ ุขู ููููู ุณุงุฎุช ๐ซ
  * ููโุชูุงูุฏ ุฒุฑฺฉูุงุณ ุดูุฏ ๐ซ
  * ุจุงุฏ ููุท ุดุงูู **ุงุนุถุง ุงุณุชุงุชฺฉ** ุจุงุดุฏ.

๐ ูููููโูุง ูุนุฑูู: `System.Console` ู `System.Math`.

---

### ๐๏ธ Finalizers

**Finalizer** ูุชุฏ ุงุณุช ฺฉู ุฏุฑุณุช ูุจู ุงุฒ ุขุฒุงุฏ ุดุฏู ุญุงูุธูโ ฺฉ ุดุก ุชูุณุท **Garbage Collector** ุงุฌุฑุง ูโุดูุฏ.

ุณูุชฺฉุณ: ูุงู ฺฉูุงุณ ููุฑุงู ุจุง `~`

```csharp
class Class1
{
  ~Class1()
  {
    ...
  }
}
```

ุงู ุฏุฑ ูุงูุน ูุนุงุฏู ุจุงุฒููุณ ูุชุฏ `Finalize` ุงุฒ ฺฉูุงุณ `Object` ุงุณุช:

```csharp
protected override void Finalize()
{
  ...
  base.Finalize();
}
```

๐ ุชูุถุญุงุช ฺฉุงูู ุฏุฑุจุงุฑูโ garbage collection ู finalizerูุง ุฏุฑ ูุตู 12 ุฎูุงูุฏ ุขูุฏ.

ูโุชูุงูุฏ finalizer ุชฺฉโุฎุท ูู ุจููุณุฏ:

```csharp
~Class1() => Console.WriteLine("Finalizing");
```

---

### ๐งฉ Partial Types ู Partial Methods

๐น **Partial types** ุจู ุดูุง ุงุฌุงุฒู ูโุฏููุฏ ุชุนุฑู ฺฉ ููุน ุฑุง ุจู ฺูุฏ ุจุฎุด (ูุนูููุงู ุฏุฑ ูุงูโูุง ูุฎุชูู) ุชูุณู ฺฉูุฏ.

ุณูุงุฑู ุฑุงุฌ:

* ฺฉ ูุงู auto-generated (ูุซูุงู ุชูุณุท Visual Studio Designer)
* ฺฉ ูุงู ุฏุณุช ุจุฑุง ุงูุฒูุฏู ฺฉุฏ ุณูุงุฑุด

```csharp
// PaymentFormGen.cs - auto-generated
partial class PaymentForm { ... }

// PaymentForm.cs - hand-authored
partial class PaymentForm { ... }
```

โ๏ธ ูุฑ ุจุฎุด ุจุงุฏ `partial` ุจุงุดุฏ. ุงู ฺฉุฏ ุบุฑูุงููู ุงุณุช:

```csharp
partial class PaymentForm {}
class PaymentForm {}
```

* ุงุนุถุง ุชฺฉุฑุงุฑ (ูุซูุงู ุณุงุฒูุฏู ุจุง ููุงู ูพุงุฑุงูุชุฑูุง) ูุฌุงุฒ ูุณุชูุฏ.
* **partial types** ฺฉุงููุงู ุฏุฑ ุฒูุงู ฺฉุงููพุงู ุชูุณุท ฺฉุงููพุงูุฑ ุชุฑฺฉุจ ูโุดููุฏ.
* ูููโ ุจุฎุดโูุง ุจุงุฏ ุฏุฑ **ฺฉ assembly** ุจุงุดูุฏ.
* ูโุชูุงูุฏ ุฏุฑ ุจุฑุฎ ุจุฎุดโูุง base class ูุดุฎุต ฺฉูุฏุ ุจู ุดุฑุท ฺฉู ฺฉ ุจุงุดูุฏ.
* ูุฑ ุจุฎุด ูโุชูุงูุฏ ุจูโุทูุฑ ูุณุชูู interfaceูุง ุฑุง ูพุงุฏูโุณุงุฒ ฺฉูุฏ.

---

### ๐ง Partial Methods

ฺฉ **partial type** ูโุชูุงูุฏ ุดุงูู **partial method** ุจุงุดุฏ. ุงูโูุง ูุนูููุงู ุจุฑุง ูุฑุงูู ฺฉุฑุฏู hook ุฏุฑ ฺฉุฏ auto-generated ุงุณุชูุงุฏู ูโุดููุฏ:

```csharp
partial class PaymentForm    // ูุงู auto-generated
{
  partial void ValidatePayment(decimal amount);
}

partial class PaymentForm    // ูุงู ุฏุณุช
{
  partial void ValidatePayment(decimal amount)
  {
    if (amount > 100)
      ...
  }
}
```

* ฺฉ partial method ุดุงูู **ุชุนุฑู (definition)** ู **ูพุงุฏูโุณุงุฒ (implementation)** ุงุณุช.
* ุชุนุฑู ูุนูููุงู ุชูุณุท generator ููุดุชู ูโุดูุฏุ ูพุงุฏูโุณุงุฒ ุฏุณุช ุงุถุงูู ูโุดูุฏ.
* ุงฺฏุฑ ูพุงุฏูโุณุงุฒ ุงุฑุงุฆู ูุดูุฏุ ูู ุชุนุฑู ู ูู ุชูุงู ูุฑุงุฎูุงูโูุง ุขู ุญุฐู ูโุดููุฏ โ ูฺ ูุฒููโุง ุจุฑุง ฺฉุฏ ูุฏุงุฑุฏ โ.
* partial methodูุง ุจุงุฏ `void` ุจุงุดูุฏ ู ุฐุงุชุงู `private` ูุณุชูุฏ.
* ููโุชูุงููุฏ `out parameter` ุฏุงุดุชู ุจุงุดูุฏ.

### ๐งฉ ูุชุฏูุง partial ุชูุณุนูโุงูุชู (Extended Partial Methods)

๐น ูุชุฏูุง partial ุชูุณุนูโุงูุชู (ุงุฒ C# 9 ุจู ุจุนุฏ) ุจุฑุง ุณูุงุฑู ูุนฺฉูุณ ุชููุฏ ฺฉุฏ ุทุฑุงุญ ุดุฏูโุงูุฏุ ุฌุง ฺฉู ฺฉ ุจุฑูุงููโููุณ **hook**โูุง ุชุนุฑู ูโฺฉูุฏ ฺฉู ฺฉ **code generator** ุขูโูุง ุฑุง ูพุงุฏูโุณุงุฒ ูโฺฉูุฏ.
ฺฉ ููููู ุงุฒ ฺฉุงุฑุจุฑุฏ ุงู ููุถูุนุ **source generators** ูุณุชูุฏ (ูุงุจูุช ุฏุฑ Roslyn) ฺฉู ุจู ุดูุง ุงุฌุงุฒู ูโุฏููุฏ ุงุณูุจูโุง ุฑุง ุจู ฺฉุงููพุงูุฑ ุจุฏูุฏ ุชุง ุจูโุตูุฑุช ุฎูุฏฺฉุงุฑ ุจุฎุดโูุง ุงุฒ ฺฉุฏ ุดูุง ุฑุง ุชููุฏ ฺฉูุฏ.

---

```csharp
public partial class Test
{
  public partial void M1();    // ูุชุฏ partial ุชูุณุนูโุงูุชู
  private partial void M2();   // ูุชุฏ partial ุชูุณุนูโุงูุชู
}
```

๐ ุงฺฏุฑ ฺฉ ุงุนูุงู ูุชุฏ partial ุจุง ฺฉ **accessibility modifier** (ูุซู public ุง private) ุขุบุงุฒ ุดูุฏุ ุขู ูุชุฏ ุจูโุนููุงู ฺฉ ูุชุฏ partial ุชูุณุนูโุงูุชู ุฏุฑ ูุธุฑ ฺฏุฑูุชู ูโุดูุฏ.

ูฺฉุงุช ููู:

* ูุชุฏูุง partial ุชูุณุนูโุงูุชู **ุญุชูุงู ุจุงุฏ ูพุงุฏูโุณุงุฒ ุฏุงุดุชู ุจุงุดูุฏ**ุ ุงฺฏุฑ ูพุงุฏูโุณุงุฒ ูุดููุฏุ ุงุฒ ุจู ููโุฑููุฏ.
* ุฏุฑ ูุซุงู ุจุงูุงุ ูู `M1` ู ูู `M2` ุจุงุฏ ูพุงุฏูโุณุงุฒ ุดููุฏ.
* ุงู ูุชุฏูุง ูโุชูุงููุฏ **ูุฑ ููุน ููุฏุงุฑ ุฑุง ุจุฑฺฏุฑุฏุงููุฏ** ู ููฺูู ูโุชูุงููุฏ **ูพุงุฑุงูุชุฑูุง out** ุฏุงุดุชู ุจุงุดูุฏ.

ูุซุงู:

```csharp
public partial class Test
{
  public partial bool IsValid (string identifier);
  internal partial bool TryParse (string number, out int result);
}
```

---

### ๐ท๏ธ ุนููฺฏุฑ nameof

๐น ุนููฺฏุฑ `nameof` ูุงู ูุฑ **symbol** (ูุซู typeุ memberุ variable ู โฆ) ุฑุง ุจูโุตูุฑุช ฺฉ **string** ุจุฑูโฺฏุฑุฏุงูุฏ:

```csharp
int count = 123;
string name = nameof (count);   // ููุฏุงุฑ name ุจุฑุงุจุฑ ุงุณุช ุจุง "count"
```

๐ ูุฒุช ุงุตู `nameof` ูุณุจุช ุจู ููุดุชู ูุณุชูู ฺฉ ุฑุดุชู ุงู ุงุณุช ฺฉู ุงุฒ **static type checking** ูพุดุชุจุงู ูโฺฉูุฏ.
ุงุจุฒุงุฑูุง ูุซู **Visual Studio** ุงู ุงุฑุฌุงุน ุฑุง ูโุดูุงุณูุฏุ ุจูุงุจุฑุงู ุงฺฏุฑ ุดูุง ูุงู symbol ุฑุง ุชุบุฑ ุฏูุฏุ ุชูุงู ุงุฑุฌุงุนุงุช ุขู ูุฒ ุจูโุทูุฑ ุฎูุฏฺฉุงุฑ ุชุบุฑ ุฎูุงููุฏ ฺฉุฑุฏ.

ูุซุงู ุจุฑุง **field** ุง **property**:

```csharp
string name = nameof (StringBuilder.Length);  // ุฎุฑูุฌ: "Length"
```

ุงฺฏุฑ ุจุฎูุงูุฏ `"StringBuilder.Length"` ุฑุง ฺฉุงูู ุจุฑฺฏุฑุฏุงูุฏ:

```csharp
nameof (StringBuilder) + "." + nameof (StringBuilder.Length);
```

---

### ๐๏ธ ูุฑุงุซุช (Inheritance)

๐น ฺฉ ฺฉูุงุณ ูโุชูุงูุฏ ุงุฒ ฺฉูุงุณ ุฏฺฏุฑ **ุงุฑุซโุจุฑ (inherit)** ฺฉูุฏ ุชุง ุขู ุฑุง ฺฏุณุชุฑุด ุง ุณูุงุฑุดโุณุงุฒ ฺฉูุฏ.
ุจุง ุงุฑุซโุจุฑ ูโุชูุงู ุงุฒ ุงูฺฉุงูุงุช ฺฉ ฺฉูุงุณ ุงุณุชูุงุฏู ฺฉุฑุฏ ุจุฏูู ุงูฺฉู ุงุฒ ุตูุฑ ูููโฺุฒ ุฑุง ุจุณุงุฒุฏ.

* ฺฉ ฺฉูุงุณ ููุท ูโุชูุงูุฏ ุงุฒ ฺฉ ฺฉูุงุณ ุงุฑุซโุจุฑ ฺฉูุฏ.
* ุงูุง ุฎูุฏุด ูโุชูุงูุฏ ุชูุณุท ฺูุฏู ฺฉูุงุณ ุฏฺฏุฑ ุงุฑุซโุจุฑ ุดูุฏ (ุชุดฺฉู **class hierarchy**).

ูุซุงู:

```csharp
public class Asset
{
  public string Name;
}

public class Stock : Asset     // inherits from Asset
{
  public long SharesOwned;
}

public class House : Asset     // inherits from Asset
{
  public decimal Mortgage;
}
```

ูุญููโ ุงุณุชูุงุฏู:

```csharp
Stock msft = new Stock { Name="MSFT", SharesOwned=1000 };
Console.WriteLine (msft.Name);        // MSFT
Console.WriteLine (msft.SharesOwned); // 1000

House mansion = new House { Name="Mansion", Mortgage=250000 };
Console.WriteLine (mansion.Name);     // Mansion
Console.WriteLine (mansion.Mortgage); // 250000
```

๐ ฺฉูุงุณโูุง `Stock` ู `House` ููุฏ `Name` ุฑุง ุงุฒ ฺฉูุงุณ ูพุงูโ `Asset` ุจู ุงุฑุซ ูโุจุฑูุฏ.

* ฺฉูุงุณ ูุดุชูโุดุฏู = **subclass**
* ฺฉูุงุณ ูพุงู = **superclass**

---

### ๐ ฺูุฏุฑุฎุช (Polymorphism)

๐น ุฏุฑ C# ูุฑุงุฌุน (**references**) ฺูุฏุฑุฎุช ูุณุชูุฏ.
ุงู ุนู ฺฉ ูุชุบุฑ ุงุฒ ููุน `x` ูโุชูุงูุฏ ุจู ฺฉ ุดุก ุงุฒ ููุน ฺฉู ุฒุฑฺฉูุงุณ `x` ุงุณุช ุงุดุงุฑู ฺฉูุฏ.

ูุซุงู:

```csharp
public static void Display (Asset asset)
{
  System.Console.WriteLine (asset.Name);
}

Stock msft    = new Stock { Name="MSFT" };
House mansion = new House { Name="Mansion" };

Display (msft);     // OK
Display (mansion);  // OK
```

๐ ุฏููุด ุงู ุงุณุช ฺฉู ฺฉูุงุณโูุง ูุดุชูโุดุฏู (`Stock` ู `House`) ูููโ ูฺฺฏโูุง ฺฉูุงุณ ูพุงู (`Asset`) ุฑุง ุฏุงุฑูุฏ.

ุงูุง ุจุฑุนฺฉุณ ุฏุฑุณุช ูุณุช:

```csharp
Display (new Asset());   // ุฎุทุง ุฒูุงู ฺฉุงููพุงู

public static void Display (House house)
{
  System.Console.WriteLine (house.Mortgage);
}
```

---

### ๐ญ Casting ู Reference Conversions

ฺฉ ูุฑุฌุน (object reference) ูโุชูุงูุฏ:

* ุจูโุทูุฑ **ุถูู (implicit)** ุจู ฺฉูุงุณ ูพุงู **upcast** ุดูุฏ.
* ุจูโุทูุฑ **ุตุฑุญ (explicit)** ุจู ุฒุฑฺฉูุงุณ **downcast** ุดูุฏ.

๐ Upcast ู Downcast ุจู ุงููุงุน ุณุงุฒฺฏุงุฑ ูุฑุฌุนุ ุฏุฑูุงูุน ฺฉ **reference conversion** ุงูุฌุงู ูโุฏููุฏ:
ุนู ฺฉ ูุฑุฌุน ุฌุฏุฏ ุณุงุฎุชู ูโุดูุฏ ฺฉู ุจู ููุงู ุดุก ุงุดุงุฑู ูโฺฉูุฏ.

* Upcast ููุดู ูููู ุงุณุช โ
* Downcast ููุท ููุช ูููู ุงุณุช ฺฉู ุดุก ูุงูุนุงู ุงุฒ ููุน ููุงุณุจ ุจุงุดุฏ โ๏ธ

---

#### ๐ผ Upcasting

```csharp
Stock msft = new Stock();
Asset a = msft;     // Upcast
```

ุฏุฑ ุงูุฌุงุ ูุฑ ุฏู ูุชุบุฑ `a` ู `msft` ุจู ููุงู ุดุก ุงุฒ ููุน `Stock` ุงุดุงุฑู ูโฺฉููุฏ:

```csharp
Console.WriteLine (a == msft);   // True
Console.WriteLine (a.Name);      // OK
Console.WriteLine (a.SharesOwned); // ุฎุทุง ุฒูุงู ฺฉุงููพุงู
```

๐ ุฏูู ุฎุทุง ุขุฎุฑ: ูุชุบุฑ `a` ุงุฒ ููุน `Asset` ุงุณุชุ ุจูุงุจุฑุงู ููุท ูโุชูุงูุฏ ุงุนุถุง `Asset` ุฑุง ุจุจูุฏ.
ุจุฑุง ุฏุณุชุฑุณ ุจู `SharesOwned` ุจุงุฏ ุดุก ุฑุง ุจู `Stock` **downcast** ฺฉูุฏ.

### ๐ฝ Downcasting

**Downcast** ุนููุงุช ุงุณุช ฺฉู ฺฉ ูุฑุฌุน ฺฉูุงุณ ูพุงู ุฑุง ุจู ูุฑุฌุน ฺฉูุงุณ ูุดุชูโุดุฏู ุชุจุฏู ูโฺฉูุฏ:

```csharp
Stock msft = new Stock();
Asset a = msft;        // Upcast
Stock s = (Stock)a;    // Downcast
Console.WriteLine(s.SharesOwned); // ุจุฏูู ุฎุทุง
Console.WriteLine(s == a);        // True
Console.WriteLine(s == msft);     // True
```

* ูุงููุฏ **Upcast**ุ ููุท ูุฑุฌุน ุชุบุฑ ูโฺฉูุฏ ู ุดุก ุงุตู ุชุบุฑ ููโฺฉูุฏ.
* **Downcast** ูุงุฒ ุจู cast ุตุฑุญ ุฏุงุฑุฏุ ุฒุฑุง ููฺฉู ุงุณุช ุฏุฑ ุฒูุงู ุงุฌุฑุง ุดฺฉุณุช ุจุฎูุฑุฏ:

```csharp
House h = new House();
Asset a = h;        // Upcast ููุดู ูููู
Stock s = (Stock)a; // Downcast ุดฺฉุณุช ูโุฎูุฑุฏุ ฺูู a ุงุฒ ููุน Stock ูุณุช
```

โ๏ธ ุงฺฏุฑ Downcast ุดฺฉุณุช ุจุฎูุฑุฏุ ฺฉ **InvalidCastException** ูพุฑุชุงุจ ูโุดูุฏ.

---

### ๐น ุนููฺฏุฑ `as`

* ุงูุฌุงู Downcast ุจุฏูู ูพุฑุชุงุจ Exception ุฏุฑ ุตูุฑุช ุดฺฉุณุช:

```csharp
Asset a = new Asset();
Stock s = a as Stock; // s ุจุฑุงุจุฑ null ุงุณุชุ ุจุฏูู Exception
```

* ุงู ููุฏ ุงุณุช ููุช ูโุฎูุงูุฏ ูุชุฌู ุฑุง ูุจู ุงุฒ ุงุณุชูุงุฏู ุจุฑุฑุณ ฺฉูุฏ:

```csharp
if (s != null)
    Console.WriteLine(s.SharesOwned);
```

๐ก ุชูุงูุช ุจุง cast ุตุฑุญ:

* `cast` โ ุงุทููุงู ุงุฒ ููุน ุฏุงุฑุฏุ ุงฺฏุฑ ุงุดุชุจุงู ุจุงุดุฏ Exception ูพุฑุชุงุจ ูโุดูุฏ.
* `as` โ ููุน ูุทูุฆู ูุณุชุ ูโุชูุงูุฏ ุจุฑ ุงุณุงุณ null ุชุตูู ุจฺฏุฑุฏ.

โ๏ธ ูุญุฏูุฏุชโูุง:

* ููโุชูุงูุฏ ุชุจุฏู ุณูุงุฑุด ุง ุนุฏุฏ ุงูุฌุงู ุฏูุฏ:

```csharp
long x = 3 as long; // ุฎุทุง ฺฉุงููพุงู
```

---

### ๐น ุนููฺฏุฑ `is`

* ุจุฑุฑุณ ูโฺฉูุฏ ฺฉู ฺฉ ูุชุบุฑ ุจุง ููุน ุง ุงูฺฏู ูุดุฎุต ูุทุงุจูุช ุฏุงุฑุฏ:

```csharp
if (a is Stock)
    Console.WriteLine(((Stock)a).SharesOwned);
```

* ูโุชูุงู ููุฒูุงู ุจุง ูุนุฑู ฺฉ ูุชุบุฑ ุงุณุชูุงุฏู ฺฉุฑุฏ:

```csharp
if (a is Stock s)
    Console.WriteLine(s.SharesOwned);
```

* ุงู ูุชุบุฑ ุญุช ุฎุงุฑุฌ ุงุฒ ุดุฑุท ูุฒ ุฏุฑ ูุญุฏูุฏูโ ูุงุจู ุฏุณุชุฑุณ ุจุงู ูโูุงูุฏ:

```csharp
if (a is Stock s && s.SharesOwned > 100000)
    Console.WriteLine("Wealthy");
else
    s = new Stock();

Console.WriteLine(s.SharesOwned); // ูููุฒ ุฏุฑ ูุญุฏูุฏู ุงุณุช
```

---

### ๐น Virtual Function Members

* ูุชุฏุ ูพุฑุงูพุฑุชุ ุงูุฏฺฉุณุฑ ู event ูโุชูุงููุฏ **virtual** ุจุงุดูุฏ ุชุง ฺฉูุงุณโูุง ูุดุชู ุขูโูุง ุฑุง **override** ฺฉููุฏ:

```csharp
public class Asset
{
    public string Name;
    public virtual decimal Liability => 0; // Expression-bodied property
}

public class Stock : Asset
{
    public long SharesOwned;
}

public class House : Asset
{
    public decimal Mortgage;
    public override decimal Liability => Mortgage;
}
```

```csharp
House mansion = new House { Name="McMansion", Mortgage=250000 };
Asset a = mansion;

Console.WriteLine(mansion.Liability); // 250000
Console.WriteLine(a.Liability);       // 250000
```

โ๏ธ **ุชูุฌู:** ูุฑุงุฎูุงู ูุชุฏ virtual ุงุฒ ุฏุงุฎู constructor ูโุชูุงูุฏ ุฎุทุฑูุงฺฉ ุจุงุดุฏุ ุฒุฑุง ฺฉูุงุณ ูุดุชู ููฺฉู ุงุณุช ูููุฒ ุจู ุทูุฑ ฺฉุงูู ููุฏุงุฑุฏู ูุดุฏู ุจุงุดุฏ.

---

### ๐น Covariant Return Types (C# 9)

* ุงุฒ C# 9 ูโุชูุงู ูุชุฏ ุฑุง override ฺฉุฑุฏ ุชุง ููุน ุจุงุฒฺฏุดุช **ูุดุชู ุดุฏูโุชุฑ** ุฏุงุดุชู ุจุงุดุฏ:

```csharp
public class Asset
{
    public string Name;
    public virtual Asset Clone() => new Asset { Name = Name };
}

public class House : Asset
{
    public decimal Mortgage;
    public override House Clone() => new House { Name = Name, Mortgage = Mortgage };
}
```

* ูุจู ุงุฒ C# 9ุ ููุน ุจุงุฒฺฏุดุช ุจุงุฏ ุฏููุงู ููุงู ููุน ูพุงู ูโุจูุฏ:

```csharp
public override Asset Clone() => new House { Name = Name, Mortgage = Mortgage };
```

* ุจุฑุง ุงุณุชูุงุฏู ุงุฒ ูฺฺฏโูุง Houseุ Downcast ูุงุฒู ุจูุฏ:

```csharp
House mansion1 = new House { Name="McMansion", Mortgage=250000 };
House mansion2 = (House)mansion1.Clone();
```

### ๐น Abstract Classes and Abstract Members

* ฺฉ ฺฉูุงุณ **abstract** ูฺโฺฏุงู ููโุชูุงูุฏ ูููููโุณุงุฒ ุดูุฏุ ุชููุง ุฒุฑฺฉูุงุณโูุง **concrete** ูโุชูุงููุฏ ููููู ุงุฌุงุฏ ฺฉููุฏ.
* ฺฉูุงุณโูุง abstract ูโุชูุงููุฏ **abstract members** ุฏุงุดุชู ุจุงุดูุฏ ฺฉู ุดุจู virtual ูุณุชูุฏุ ุงูุง ูพุงุฏูโุณุงุฒ ูพุดโูุฑุถ ูุฏุงุฑูุฏ. ุฒุฑฺฉูุงุณ ููุธู ุงุณุช ุขูโูุง ุฑุง ูพุงุฏูโุณุงุฒ ฺฉูุฏ ูฺฏุฑ ุงูฺฉู ุฎูุฏุด ูู abstract ุจุงุดุฏ.

```csharp
public abstract class Asset
{
    public abstract decimal NetValue { get; }
}

public class Stock : Asset
{
    public long SharesOwned;
    public decimal CurrentPrice;
    public override decimal NetValue => CurrentPrice * SharesOwned;
}
```

---

### ๐น Hiding Inherited Members

* ุงฺฏุฑ ฺฉูุงุณ ูพุงู ู ฺฉูุงุณ ูุดุชู **ุนุถููุง ููโูุงู** ุฏุงุดุชู ุจุงุดูุฏุ ุนุถู ฺฉูุงุณ ูุดุชูุ ุนุถู ฺฉูุงุณ ูพุงู ุฑุง **ูุฎู ูโฺฉูุฏ**.

```csharp
public class A { public int Counter = 1; }
public class B : A { public int Counter = 2; }
```

* ฺฉุงููพุงูุฑ ูุดุฏุงุฑ ูโุฏูุฏุ ุงูุง ูโุชูุงู ุจุง **modifer `new`** ุจู ุตูุฑุช ุนูุฏ ูุฎูโุณุงุฒ ฺฉุฑุฏ:

```csharp
public class B : A { public new int Counter = 2; }
```

* `new` ุฏุฑ ุงู ุฒููู ููุท ูุดุฏุงุฑ ฺฉุงููพุงูุฑ ุฑุง ุญุฐู ูโฺฉูุฏ ู ูุตุฏ ุจุฑูุงููโููุณ ุฑุง ูุดุฎุต ูโฺฉูุฏ.

---

### ๐น `new` versus `override`

* `override` โ ุฌุงฺฏุฒู ฺฉ ูุชุฏ virtual ุฏุฑ ฺฉูุงุณ ูพุงู
* `new` โ ูุฎู ฺฉุฑุฏู ฺฉ ุนุถู ููโูุงู ุจุฏูู override

```csharp
public class BaseClass
{
    public virtual void Foo() { Console.WriteLine("BaseClass.Foo"); }
}

public class Overrider : BaseClass
{
    public override void Foo() { Console.WriteLine("Overrider.Foo"); }
}

public class Hider : BaseClass
{
    public new void Foo() { Console.WriteLine("Hider.Foo"); }
}
```

```csharp
Overrider over = new Overrider();
BaseClass b1 = over;
over.Foo(); // Overrider.Foo
b1.Foo();   // Overrider.Foo

Hider h = new Hider();
BaseClass b2 = h;
h.Foo();    // Hider.Foo
b2.Foo();   // BaseClass.Foo
```

---

### ๐น Sealing Functions and Classes

* ุจุง `sealed` ูโุชูุงู **ฺฉ ูุชุฏ override ุฑุง ูุณุฏูุฏ** ฺฉุฑุฏ ุชุง ุชูุณุท ฺฉูุงุณโูุง ูุดุชู ุฏฺฏุฑ override ูุดูุฏ:

```csharp
public sealed override decimal Liability { get { return Mortgage; } }
```

* ููฺูู ูโุชูุงู **ฺฉ ฺฉูุงุณ ุฑุง sealed** ฺฉุฑุฏ ุชุง ุงูฺฉุงู subclassing ุขู ูุจุงุดุฏ.

โ๏ธ ููโุชูุงู ฺฉ ุนุถู ุฑุง ุฏุฑ ุจุฑุงุจุฑ **ูุฎู ุดุฏู ุจุง `new`** ูุณุฏูุฏ ฺฉุฑุฏ.

---

### ๐น The `base` Keyword

* `base` ูุดุงุจู `this` ุงุณุชุ ุงูุง ุจุฑุง ููุงุฑุฏ ุฒุฑ ุงุณุชูุงุฏู ูโุดูุฏ:

  1. ุฏุณุชุฑุณ ุจู ูพุงุฏูโุณุงุฒ **overridden** ฺฉูุงุณ ูพุงู
  2. ูุฑุงุฎูุงู **constructor** ฺฉูุงุณ ูพุงู

```csharp
public class House : Asset
{
    public decimal Mortgage;
    public override decimal Liability => base.Liability + Mortgage;
}
```

* ุจุง `base` ุจู ูุณุฎู ฺฉูุงุณ ูพุงู ุฏุณุชุฑุณ ุบุฑ virtual ุฏุงุฑู ู ุฏุฑ ุตูุฑุช ูพููุงู ุดุฏู ุนุถู ูู ฺฉุงุฑ ูโฺฉูุฏ.

---

### ๐น Constructors and Inheritance

* ุฒุฑฺฉูุงุณ ุจุงุฏ **constructor ุฎูุฏุด** ุฑุง ุชุนุฑู ฺฉูุฏ. constructor ูุง ฺฉูุงุณ ูพุงู ุจู ุทูุฑ ุฎูุฏฺฉุงุฑ ุจู ฺฉูุงุณ ูุดุชู ููุชูู ููโุดููุฏ.
* ุจุฑุง ุงุณุชูุงุฏู ุงุฒ constructor ฺฉูุงุณ ูพุงูุ ุงุฒ `base` ุงุณุชูุงุฏู ูโฺฉูู:

```csharp
public class Baseclass
{
    public int X;
    public Baseclass() { }
    public Baseclass(int x) => X = x;
}

public class Subclass : Baseclass
{
    public Subclass(int x) : base(x) { }
}
```

* **Base-class constructors ููุดู ุงูู ุงุฌุฑุง ูโุดููุฏ** ุชุง ุงุจุชุฏุง ููุฏุงุฑุฏู ฺฉูุงุณ ูพุงู ฺฉุงูู ุดูุฏ.

### ๐น Implicit Calling of the Parameterless Base-Class Constructor

* ุงฺฏุฑ ุฏุฑ **ุฒุฑฺฉูุงุณ** ุงุฒ `base` ุงุณุชูุงุฏู ูฺฉููุ **constructor ุจุฏูู ูพุงุฑุงูุชุฑ ฺฉูุงุณ ูพุงู** ุจูโุตูุฑุช ุถูู ูุฑุงุฎูุงู ูโุดูุฏ:

```csharp
public class Baseclass
{
    public int X;
    public Baseclass() { X = 1; }
}

public class Subclass : Baseclass
{
    public Subclass() { Console.WriteLine(X); }  // 1
}
```

* ุงฺฏุฑ ฺฉูุงุณ ูพุงู **constructor ุจุฏูู ูพุงุฑุงูุชุฑ ูุฏุงุดุชู ุจุงุดุฏ**ุ ุฒุฑฺฉูุงุณ ูุฌุจูุฑ ุงุณุช ุงุฒ `base` ุงุณุชูุงุฏู ฺฉูุฏ:

```csharp
class Baseclass
{
    public Baseclass(int x, int y, int z, string s, DateTime d) { ... }
}

public class Subclass : Baseclass
{
    public Subclass(int x, int y, int z, string s, DateTime d)
        : base(x, y, z, s, d) { ... }
}
```

---

### ๐น Required Members (C# 11)

* ุจุง ุงุณุชูุงุฏู ุงุฒ **required members** ูโุชูุงู ุงูุฒุงู ฺฉุฑุฏ ฺฉู ฺฉ ููุฏ ุง property ุญุชูุงู ููฺฏุงู ุณุงุฎุช ุดุก ููุฏุงุฑุฏู ุดูุฏ:

```csharp
public class Asset
{
    public required string Name;
}

Asset a1 = new Asset { Name="House" };  // OK
Asset a2 = new Asset();                 // Error
```

* ูโุชูุงู ุจุง `[SetsRequiredMembers]` ุงู ูุญุฏูุฏุช ุฑุง ุฏุฑ constructor ุฏูุฑ ุฒุฏ:

```csharp
public class Asset
{
    public required string Name;

    [System.Diagnostics.CodeAnalysis.SetsRequiredMembers]
    public Asset(string n) => Name = n;
}
```

* ุงู ุงูฺฉุงู ุงุฌุงุฒู ูโุฏูุฏ ฺฉู ูู ุงุฒ **object initializer** ู ูู ุงุฒ constructor ุงุณุชูุงุฏู ุดูุฏ.

---

### ๐น Constructor and Field Initialization Order

ููฺฏุงู ูููููโุณุงุฒุ **ุชุฑุชุจ ููุฏุงุฑุฏู** ุจู ุดฺฉู ุฒุฑ ุงุณุช:

1. **ุงุฒ ุฒุฑฺฉูุงุณ ุจู ฺฉูุงุณ ูพุงู**
   a. ููุฏูุง ุฒุฑฺฉูุงุณ ููุฏุงุฑุฏู ูโุดููุฏ
   b. ุขุฑฺฏููุงูโูุง ูุฑุงุฎูุงู constructor ูพุงู ุงุฑุฒุงุจ ูโุดููุฏ

2. **ุงุฒ ฺฉูุงุณ ูพุงู ุจู ุฒุฑฺฉูุงุณ**
   a. ุจุฏูู constructor ฺฉูุงุณ ูพุงู ุงุฌุฑุง ูโุดูุฏ
   b. ุจุฏูู constructor ุฒุฑฺฉูุงุณ ุงุฌุฑุง ูโุดูุฏ

```csharp
public class B
{
    int x = 1;          // 3rd
    public B(int x) { ... } // 4th
}

public class D : B
{
    int y = 1;          // 1st
    public D(int x) : base(x + 1) // 2nd
    {
        ...              // 5th
    }
}
```

---

### ๐น Inheritance with Primary Constructors

* ฺฉูุงุณโูุง ุจุง **primary constructors** ูโุชูุงููุฏ ุจู ุดฺฉู ุฒุฑ subclass ุดููุฏ:

```csharp
public class Baseclass(int x) { ... }
public class Subclass(int x, int y) : Baseclass(x) { ... }
```

* ุงู ููุงู ฺฉุงุฑ ุงุณุช ฺฉู `base(x)` ุฏุฑ constructor ูุนููู ุงูุฌุงู ูโุฏูุฏ.

---

### ๐น Overloading and Resolution

* ููฺฏุงู ูุฑุงุฎูุงู **overloaded methods**ุ **ููุน ุฏููโุชุฑ** ุงุฑุฌุญุช ุฏุงุฑุฏ:

```csharp
static void Foo(Asset a) { }
static void Foo(House h) { }

House h = new House(...);
Foo(h);  // ูุฑุงุฎูุงู Foo(House)
```

* ุงูุง **ุชุนู overload** ุจุฑ ุงุณุงุณ ููุน **ุงุณุชุงุชฺฉ** (compile-time) ุงูุฌุงู ูโุดูุฏ:

```csharp
Asset a = new House(...);
Foo(a);  // ูุฑุงุฎูุงู Foo(Asset)
```

* ุจุง ุงุณุชูุงุฏู ุงุฒ `dynamic`ุ ุชุตููโฺฏุฑ **ุชุง ุฒูุงู ุงุฌุฑุง** ุจู ุชุนูู ูโุงูุชุฏ:

```csharp
Foo((dynamic)a);  // ูุฑุงุฎูุงู Foo(House) ุฏุฑ ุฒูุงู ุงุฌุฑุง
```

---

### ๐น The `object` Type

* `object` ูพุงู ููุง ุชูุงู ููุนโูุง ุงุณุช. ูุฑ ููุน ูโุชูุงูุฏ ุจู `object` **upcast** ุดูุฏ.
* ูุซุงู ุงุณุชูุงุฏู ุฏุฑ ฺฉ **Stack ุณุงุฏู**:

```csharp
public class Stack
{
    int position;
    object[] data = new object[10];

    public void Push(object obj) { data[position++] = obj; }
    public object Pop() { return data[--position]; }
}

Stack stack = new Stack();
stack.Push("sausage");
string s = (string)stack.Pop();  // ูุงุฒ ุจู downcast
Console.WriteLine(s);            // sausage

stack.Push(3);
int three = (int)stack.Pop();    // boxing/unboxing
```

---

### ๐น Boxing and Unboxing

* **Boxing** โ ุชุจุฏู ฺฉ value type ุจู object (ุง interface):

```csharp
int x = 9;
object obj = x;  // boxing
```

* **Unboxing** โ ุชุจุฏู object ุจู value type (ูุงุฒููุฏ cast ุตุฑุญ):

```csharp
int y = (int)obj;  // unboxing
```

โ๏ธ ููุน ุงุนูุงู ุดุฏู ุจุงุฏ ุฏููุงู ุจุง ููุน ูุงูุน ูุทุงุจูุช ุฏุงุดุชู ุจุงุดุฏุ ุฏุฑ ุบุฑ ุงู ุตูุฑุช `InvalidCastException` ุฑุฎ ูโุฏูุฏ:

```csharp
object obj = 9;
long x = (long)obj; // InvalidCastException

long x2 = (int)obj; // ุตุญุญ: unboxing ุณูพุณ ุชุจุฏู ุนุฏุฏ
```

* **Boxing** ู **Unboxing** ุจู ููุน ุณุณุชู **unified type system** ุงุฌุงุฒู ูโุฏูุฏ ุชุง value ู reference type ูุง ุฑุง ุจุง ูู ฺฉุงุฑ ฺฉูุฏุ ุงูุง ููุท ุจุฑุง **reference conversions** ุฏุฑ ุขุฑุงูโูุง ู genericูุง ุตุงุฏู ุงุณุช:

```csharp
object[] a1 = new string[3]; // OK
object[] a2 = new int[3];    // Error
```

* **Copy semantics**: ููฺฏุงู boxing/unboxingุ ููุฏุงุฑ ฺฉูพ ูโุดูุฏุ ุจูุงุจุฑุงู ุชุบุฑ value type ุงุตู ุชุงุซุฑ ุจุฑ ูุณุฎู boxed ูุฏุงุฑุฏ:

```csharp
int i = 3;
object boxed = i;
i = 5;
Console.WriteLine(boxed);  // 3
```

ุจุฑุฑุณ ููุน ุจูโุตูุฑุช **ุงุณุชุงุชฺฉ ู ุฒูุงู ุงุฌุฑุง** ๐๐ฅ๏ธ

ุจุฑูุงููโูุง C# ูู ุฏุฑ ุฒูุงู **ฺฉุงููพุงู** (ุจูโุตูุฑุช ุงุณุชุงุชฺฉ) ู ูู ุฏุฑ ุฒูุงู **ุงุฌุฑุง ุจุฑูุงูู** (ุชูุณุท CLR) ุจุฑุฑุณ ููุน ูโุดููุฏ.

### ุจุฑุฑุณ ููุน ุงุณุชุงุชฺฉ

ุจุฑุฑุณ ููุน ุงุณุชุงุชฺฉ ุจู ฺฉุงููพุงูุฑ ุงุฌุงุฒู ูโุฏูุฏ ฺฉู **ุฏุฑุณุช ุจุฑูุงูู ุดูุง ุฑุง ุจุฏูู ุงุฌุฑุง ุขู** ุจุฑุฑุณ ฺฉูุฏ. ุจุฑุง ูุซุงูุ ฺฉุฏ ุฒุฑ ุฎุทุง ุฎูุงูุฏ ุฏุงุฏุ ุฒุฑุง ฺฉุงููพุงูุฑ ููุนโุฏู ุงุณุชุงุชฺฉ ุฑุง ุงุนูุงู ูโฺฉูุฏ:

```csharp
int x = "5";  // ุฎุทุง: ููุน ุตุญุญ ูุณุช
```

### ุจุฑุฑุณ ููุน ุฒูุงู ุงุฌุฑุง

ุจุฑุฑุณ ููุน ุฏุฑ ุฒูุงู ุงุฌุฑุง ุชูุณุท **CLR** ุงูุฌุงู ูโุดูุฏุ ูุซูุงู ููุช ฺฉู ุดูุง ฺฉ **downcast** ุจุง ุงุณุชูุงุฏู ุงุฒ ุชุจุฏู ูุฑุฌุน ุง **unboxing** ุงูุฌุงู ูโุฏูุฏ:

```csharp
object y = "5";
int z = (int)y;  // ุฎุทุง ุฒูุงู ุงุฌุฑุงุ downcast ูุงูููู
```

ุงู ุจุฑุฑุณ ููฺฉู ุงุณุชุ ุฒุฑุง ูุฑ ุดุก ุฏุฑ ุญุงูุธู heap ุจูโุตูุฑุช ุฏุงุฎู **ฺฉ ุชูฺฉู ููุน ฺฉูฺฺฉ** ุฐุฎุฑู ูโฺฉูุฏ. ูโุชูุงูุฏ ุงู ุชูฺฉู ุฑุง ุจุง ูุฑุงุฎูุงู ูุชุฏ `GetType` ุงุฒ ุดุก ุฏุฑุงูุช ฺฉูุฏ.

---

### ูุชุฏ GetType ู ุนููฺฏุฑ typeof ๐ท๏ธ

ุชูุงู ุงููุงุน ุฏุฑ C# ุฏุฑ ุฒูุงู ุงุฌุฑุง ุจุง ูููููโุง ุงุฒ `System.Type` ููุงุด ุฏุงุฏู ูโุดููุฏ. ุฏู ุฑูุด ุงุตู ุจุฑุง ุฏุฑุงูุช ุดุก `System.Type` ูุฌูุฏ ุฏุงุฑุฏ:

* ูุฑุงุฎูุงู `GetType` ุฑู ููููู
* ุงุณุชูุงุฏู ุงุฒ ุนููฺฏุฑ `typeof` ุฑู ูุงู ููุน

`GetType` ุฏุฑ ุฒูุงู ุงุฌุฑุง ุงุฑุฒุงุจ ูโุดูุฏุ ุงูุง `typeof` ุจูโุตูุฑุช **ุงุณุชุงุชฺฉ** ุฏุฑ ุฒูุงู ฺฉุงููพุงู ุงุฑุฒุงุจ ูโุดูุฏ (ููุช ูพุงุฑุงูุชุฑูุง ฺูุฑฺฉ ุฏุฑ ฺฉุงุฑ ุจุงุดูุฏุ ุชูุณุท **JIT Compiler** ุญู ูโุดูุฏ).

```csharp
Point p = new Point();
Console.WriteLine(p.GetType().Name);             // Point
Console.WriteLine(typeof(Point).Name);          // Point
Console.WriteLine(p.GetType() == typeof(Point)); // True
Console.WriteLine(p.X.GetType().Name);           // Int32
Console.WriteLine(p.Y.GetType().FullName);       // System.Int32

public class Point { public int X, Y; }
```

`System.Type` ููฺูู ูุชุฏูุง ุฏุงุฑุฏ ฺฉู ุฏุฑูุงุฒูโุง ุจู **ูุฏู Reflection ุฒูุงู ุงุฌุฑุง** ูุณุชูุฏ (ฺฉู ุฏุฑ ูุตู 18 ุชูุถุญ ุฏุงุฏู ุดุฏู ุงุณุช).

---

### ูุชุฏ ToString ๐

ูุชุฏ `ToString` **ููุงุด ูุชู ูพุดโูุฑุถ** ฺฉ ููููู ุงุฒ ููุน ุฑุง ุจุฑูโฺฏุฑุฏุงูุฏ. ุงู ูุชุฏ ุฏุฑ ุชูุงู ุงููุงุน ุฏุงุฎู ุจุงุฒููุณ ุดุฏู ุงุณุช:

```csharp
int x = 1;
string s = x.ToString(); // s ุจุฑุงุจุฑ ุจุง "1"
```

ูโุชูุงูุฏ `ToString` ุฑุง ุฑู ุงููุงุน ุณูุงุฑุด ุฎูุฏ ุจุงุฒููุณ ฺฉูุฏ:

```csharp
Panda p = new Panda { Name = "Petey" };
Console.WriteLine(p);  // Petey

public class Panda
{
    public string Name;
    public override string ToString() => Name;
}
```

ุงฺฏุฑ `ToString` ุจุงุฒููุณ ูุดูุฏุ ูุงู ููุน ุฑุง ุจุฑูโฺฏุฑุฏุงูุฏ.
ููฺฏุงู ูุฑุงุฎูุงู ฺฉ ุนุถู ุจุงุฒููุณโุดุฏู ูุงููุฏ `ToString` ุฑู ููุน ููุฏุงุฑุ **boxing ุฑุฎ ููโุฏูุฏ**ุ ู ุชููุง ููุช ุชุจุฏู ุงูุฌุงู ุฏูุฏุ boxing ุงุชูุงู ูโุงูุชุฏ:

```csharp
int x = 1;
string s1 = x.ToString();    // ูุฑุงุฎูุงู ุฑู ููุฏุงุฑ ุบุฑ-boxed
object box = x;
string s2 = box.ToString();  // ูุฑุงุฎูุงู ุฑู ููุฏุงุฑ boxed
```

---

### ุงุนุถุง ฺฉูุงุณ object ๐ฆ

```csharp
public class Object
{
    public Object();
    public extern Type GetType();
    public virtual bool Equals(object obj);
    public static bool Equals(object objA, object objB);
    public static bool ReferenceEquals(object objA, object objB);
    public virtual int GetHashCode();
    public virtual string ToString();
    protected virtual void Finalize();
    protected extern object MemberwiseClone();
}
```

ูุชุฏูุง `Equals`ุ `ReferenceEquals` ู `GetHashCode` ุฏุฑ ูุตู "Equality Comparison" ุชูุถุญ ุฏุงุฏู ุดุฏูโุงูุฏ.

---

### Struct ูุง ๐

ฺฉ `struct` ุดุจู ฺฉูุงุณ ุงุณุช ุจุง ุชูุงูุชโูุง ฺฉูุฏ ุฒุฑ:

* `struct` ฺฉ **value type** ุงุณุชุ ุฏุฑ ุญุงู ฺฉู ฺฉูุงุณ ฺฉ **reference type** ุงุณุช.
* `struct` ุงุฒ **ูุฑุงุซุช** ูพุดุชุจุงู ููโฺฉูุฏ (ุจู ุฌุฒ ุจูโุตูุฑุช ุถูู ุงุฒ `object` ุง ุฏููโุชุฑ `System.ValueType`).

ฺฉ struct ูโุชูุงูุฏ ุชูุงู ุงุนุถุง ุฑุง ุฏุงุดุชู ุจุงุดุฏ ฺฉู ฺฉูุงุณ ุฏุงุฑุฏุ ุจู ุฌุฒ **finalizer**. ููฺูู ููโุชูุงู ุงุนุถุง ุขู ุฑุง **virtualุ abstract ุง protected** ุชุนุฑู ฺฉุฑุฏ.

ูุจู ุงุฒ C# 10ุ ุชุนุฑู **field initializer** ู **constructor ุจุฏูู ูพุงุฑุงูุชุฑ** ุฏุฑ structโูุง ููููุน ุจูุฏุ ุงูุง ุญุงูุง ุงู ูุญุฏูุฏุช ุจุฑุง **record struct**ูุง ุจุฑุฏุงุดุชู ุดุฏู ุงุณุช.

Structูุง ุจุฑุง ุฒูุงู ููุงุณุจ ูุณุชูุฏ ฺฉู **ุฑูุชุงุฑ ููุน ููุฏุงุฑ (value-type)** ูุฏ ูุธุฑ ุจุงุดุฏุ ูุงููุฏ ุงููุงุน ุนุฏุฏ ฺฉู **ฺฉูพ ููุฏุงุฑ** ุจู ุฌุง ฺฉูพ ูุฑุฌุน ุทุจุนโุชุฑ ุงุณุช. ูุฑ ููููู struct ูุงุฒ ุจู ุงุฌุงุฏ ุดุก ุฏุฑ heap ูุฏุงุฑุฏ ู ุงู ุจุงุนุซ ุตุฑููโุฌู ุฏุฑ ุญุงูุธู ูโุดูุฏ.

ููฺูู struct ููโุชูุงูุฏ `null` ุจุงุดุฏ ู ููุฏุงุฑ ูพุดโูุฑุถ ุขูุ **ูููููโุง ุฎุงู ุจุง ุชูุงู ููุฏูุง ุฏุฑ ููุฏุงุฑ ูพุดโูุฑุถุดุงู** ุงุณุช.

---

### ุณุงุฎุชุงุฑ ุณุงุฎุช Struct ๐๏ธ

ูุจู ุงุฒ C# 11ุ ูุฑ ููุฏ struct ุจุงุฏ ุจูโุตูุฑุช **ุตุฑุญ ุฏุฑ constructor ุง field initializer** ููุฏุงุฑุฏู ูโุดุฏ. ุญุงูุง ุงู ูุญุฏูุฏุช ุจุฑุฏุงุดุชู ุดุฏู ุงุณุช.

#### Constructor ูพุดโูุฑุถ

ุนูุงูู ุจุฑ constructorูุง ุดูุงุ ฺฉ **constructor ุจุฏูู ูพุงุฑุงูุชุฑ ุถูู** ููุดู ูุฌูุฏ ุฏุงุฑุฏ ฺฉู ููุฏูุง ุฑุง ุจูโุตูุฑุช **bitwise-zero** ููุฏุงุฑุฏู ูโฺฉูุฏ:

```csharp
Point p = new Point();  // p.X ู p.Y ุจุฑุงุจุฑ 0
struct Point { int x, y; }
```

ุญุช ุงฺฏุฑ ุฎูุฏุชุงู ฺฉ constructor ุจุฏูู ูพุงุฑุงูุชุฑ ุชุนุฑู ฺฉูุฏุ constructor ุถูู ููฺูุงู ูุฌูุฏ ุฏุงุฑุฏ ู ูโุชูุงู ุจุง ุงุณุชูุงุฏู ุงุฒ **default keyword** ุจู ุขู ุฏุณุชุฑุณ ูพุฏุง ฺฉุฑุฏ:

```csharp
Point p1 = new Point();  // p1.x ู p1.y ุจุฑุงุจุฑ 1
Point p2 = default;      // p2.x ู p2.y ุจุฑุงุจุฑ 0

struct Point
{
    int x = 1;
    int y;
    public Point() => y = 1;
}
```

ุฏุฑ ุงู ูุซุงูุ x ุจุง **field initializer** ู y ุจุง **constructor ุจุฏูู ูพุงุฑุงูุชุฑ** ููุฏุงุฑุฏู ุดุฏู ุงุณุชุ ุงูุง ุจุง `default` ูโุชูุงู ูููููโุง ุณุงุฎุช ฺฉู ูุฑ ุฏู ููุฏุงุฑุฏู ุฑุง ูุงุฏุฏู ุจฺฏุฑุฏ.

---

### ุงุณุชุฑุงุชฺ ูพุดููุงุฏ ุจุฑุง Struct

ุจูุชุฑู ุฑูุด ุงู ุงุณุช ฺฉู struct ุฑุง ุทูุฑ ุทุฑุงุญ ฺฉูุฏ ฺฉู **ููุฏุงุฑ ูพุดโูุฑุถ ุขู ฺฉ ุญุงูุช ูุนุชุจุฑ** ุจุงุดุฏ ู ูุงุฒ ุจู ููุฏุงุฑุฏู ุงุถุงู ูุจุงุดุฏ:

```csharp
struct WebOptions
{
    string protocol;
    public string Protocol
    {
        get => protocol ?? "https";
        set => protocol = value;
    }
}
```

ุงู ุฑูุด ุจุงุนุซ **ุณุงุฏฺฏ ู ุฌููฺฏุฑ ุงุฒ ุฑูุชุงุฑ ฺฏุฌโฺฉููุฏู** ููฺฏุงู ููุฏุงุฑุฏู ูโุดูุฏ. โ

ุณุงุฎุชุงุฑูุง **ุฎูุงูุฏู (Read-Only Structs) ู ุชูุงุจุน** ๐๐๏ธ

ูโุชูุงูุฏ ุงุฒ **modifer `readonly`** ุฑู ฺฉ struct ุงุณุชูุงุฏู ฺฉูุฏ ุชุง ุงุทููุงู ุญุงุตู ุดูุฏ ฺฉู **ุชูุงู ููุฏูุง ููุท ุฎูุงูุฏู ูุณุชูุฏ**. ุงู ฺฉุงุฑ ูู ูุช ุดูุง ุฑุง ูุงุถุญ ูโฺฉูุฏ ู ูู ุจู ฺฉุงููพุงูุฑ ุงุฌุงุฒู ูโุฏูุฏ ุจูููโุณุงุฒโูุง ุจุดุชุฑ ุงูุฌุงู ุฏูุฏ:

```csharp
readonly struct Point
{
    public readonly int X, Y;  // X ู Y ุจุงุฏ readonly ุจุงุดูุฏ
}
```

ุงฺฏุฑ ูุงุฒ ุฏุงุฑุฏ `readonly` ุฑุง ุจุง ุฌุฒุฆุงุช ุจุดุชุฑ ุงุนูุงู ฺฉูุฏุ ุงุฒ C# 8 ุจู ุจุนุฏ ูโุชูุงูุฏ **ุชูุงุจุน struct** ุฑุง ุจุง `readonly` ุนูุงูุชโฺฏุฐุงุฑ ฺฉูุฏ. ุงู ฺฉุงุฑ ุจุงุนุซ ูโุดูุฏ ุงฺฏุฑ ุชุงุจุน ุชูุงุด ฺฉูุฏ ููุฏ ุฑุง ุชุบุฑ ุฏูุฏุ **ุฎุทุง ุฒูุงู ฺฉุงููพุงู** ุตุงุฏุฑ ุดูุฏ:

```csharp
struct Point
{
    public int X, Y;
    public readonly void ResetX() => X = 0;  // ุฎุทุง!
}
```

ุงฺฏุฑ ฺฉ ุชุงุจุน `readonly`ุ ุชุงุจุน ุบุฑ-readonly ุฏฺฏุฑ ุฑุง ูุฑุงุฎูุงู ฺฉูุฏุ ฺฉุงููพุงูุฑ **ูุดุฏุงุฑ** ุตุงุฏุฑ ูโฺฉูุฏ ู struct ุฑุง ุจูโุตูุฑุช ูุญุงูุธูโฺฉุงุฑุงูู ฺฉูพ ูโฺฉูุฏ ุชุง ุงุญุชูุงู ุชุบุฑ ูุงุฎูุงุณุชู ุฌููฺฏุฑ ุดูุฏ.

---

### Ref Structs ๐

**Ref struct**ูุง ุฏุฑ C# 7.2 ูุนุฑู ุดุฏูุฏ ู ูฺฺฏโุง ุฎุงุต ุจุฑุง **Span<T>** ู **ReadOnlySpan<T>** ูุฑุงูู ูโฺฉููุฏ ฺฉู ุฏุฑ ูุตู 23 ุชูุถุญ ุฏุงุฏู ุดุฏูโุงูุฏ (ู ููฺูู Utf8JsonReader ุฏุฑ ูุตู 11). ุงู structูุง ุจู **ูฺฉุฑูุจูููโุณุงุฒ ุญุงูุธู** ฺฉูฺฉ ูโฺฉููุฏ.

* ุจุฑุฎูุงู **reference type**ูุง ฺฉู ููุดู ุฑู heap ูุฑุงุฑ ุฏุงุฑูุฏุ **value type**ูุง ุฏุฑ ููุงู ูฺฉุงู ฺฉู ุงุนูุงู ุดุฏูโุงูุฏ ุฒูุฏฺฏ ูโฺฉููุฏ.
* ุงฺฏุฑ value type ุจูโุตูุฑุช ูพุงุฑุงูุชุฑ ุง ูุชุบุฑ ูุญู ุจุงุดุฏุ ุฑู **stack** ูุฑุงุฑ ูโฺฏุฑุฏ:

```csharp
void SomeMethod()
{
    Point p;  // p ุฑู stack ูุฑุงุฑ ูโฺฏุฑุฏ
}
struct Point { public int X, Y; }
```

* ุงฺฏุฑ value type ุจูโุนููุงู ููุฏ ฺฉ ฺฉูุงุณ ุจุงุดุฏุ ุฑู **heap** ูุฑุงุฑ ูโฺฏุฑุฏ:

```csharp
class MyClass
{
    Point p;  // ุฑู heapุ ุฒุฑุง MyClass ุฑู heap ุงุณุช
}
```

* ุงุถุงูู ฺฉุฑุฏู `ref` ุจู ุชุนุฑู struct ุชุถูู ูโฺฉูุฏ ฺฉู struct **ุชููุง ุฑู stack ูุฑุงุฑ ฺฏุฑุฏ**. ุงฺฏุฑ ุชูุงุด ุดูุฏ ุฑู heap ุจุงุดุฏุ ุฎุทุง ุฒูุงู ฺฉุงููพุงู ุฑุฎ ูโุฏูุฏ:

```csharp
var points = new Point[100];  // ุฎุทุง: ฺฉุงููพุงู ููโุดูุฏ
ref struct Point { public int X, Y; }
class MyClass { Point P; }    // ุฎุทุง: ฺฉุงููพุงู ููโุดูุฏ
```

Ref structูุง ุจู ุฏูู ูุญุฏูุฏุช ุฏุฑ ุฒูุฏฺฏ ุฑู stackุ ููโุชูุงููุฏ ุฏุฑ ูฺฺฏโูุง ุดุฑฺฉุช ฺฉููุฏ ฺฉู ููฺฉู ุงุณุช ุจุงุนุซ ูุฑุงุฑฺฏุฑ ุฑู heap ุดููุฏุ ูุงููุฏ **lambda expressionูุงุ iteratorูุง ู ุชูุงุจุน async**. ููฺูู ููโุชูุงููุฏ ุฏุฑ structูุง ุบุฑ-ref ุจุงุดูุฏ ู ููโุชูุงููุฏ interface ูพุงุฏูโุณุงุฒ ฺฉููุฏ (ฺูู ููฺฉู ุงุณุช boxing ุฑุฎ ุฏูุฏ).

---

### Access Modifiers ๐

ุจุฑุง **ูุญุฏูุฏ ฺฉุฑุฏู ุฏุณุชุฑุณ** ฺฉ ููุน ุง ุนุถู ููุน ุจู ุณุงุฑ ููุนโูุง ุง ุงุณูุจูโูุงุ ูโุชูุงู **access modifier** ุงุณุชูุงุฏู ฺฉุฑุฏ:

* `public`: ุฏุณุชุฑุณ ฺฉุงูู. ุจุฑุง ุงุนุถุง enum ุง interface ูพุดโูุฑุถ ุงุณุช.
* `internal`: ููุท ุฏุฑ ุงุณูุจู ุฌุงุฑ ุง friend assembly ูุงุจู ุฏุณุชุฑุณ ุงุณุช.
* `private`: ููุท ุฏุฑ ุฏุงุฎู ููุน ุฌุงุฑ ูุงุจู ุฏุณุชุฑุณ ุงุณุช.
* `protected`: ููุท ุฏุฑ ุฏุงุฎู ููุน ุฌุงุฑ ุง subclasses ูุงุจู ุฏุณุชุฑุณ ุงุณุช.
* `protected internal`: ุงุชุญุงุฏ `protected` ู `internal`.
* `private protected`: ุงุดุชุฑุงฺฉ `protected` ู `internal`.
* `file` (C# 11): ููุท ุฏุฑ ููุงู ูุงู ูุงุจู ุฏุณุชุฑุณ ุงุณุช.

**ูุซุงูโูุง:**

```csharp
class Class1 {}            // internal (ูพุดโูุฑุถ)
public class Class2 {}     // public
```

```csharp
class ClassA { int x; }          // x private
class ClassB { internal int x; } // x internal
```

```csharp
class BaseClass
{
    void Foo() {}           // private
    protected void Bar() {}
}
class Subclass : BaseClass
{
    void Test1() { Foo(); } // ุฎุทุง: ููโุชูุงู ุจู Foo ุฏุณุชุฑุณ ุฏุงุดุช
    void Test2() { Bar(); } // ุฏุฑุณุช
}
```

---

### Friend Assemblies ๐ค

ูโุชูุงูุฏ ุงุนุถุง **internal** ุฑุง ุจู ุณุงุฑ friend assemblyูุง ุจุง ุงุณุชูุงุฏู ุงุฒ attribute ุฒุฑ ุฏุฑ ุณุทุญ ุงุณูุจู ุฏุฑ ุฏุณุชุฑุณ ูุฑุงุฑ ุฏูุฏ:

```csharp
[assembly: InternalsVisibleTo("Friend")]
```

ุงฺฏุฑ assembly ุฏุงุฑุง **strong name** ุจุงุดุฏุ ุจุงุฏ ฺฉู ฺฉูุฏ ุนููู 160 ุจุงุช ุขู ุฑุง ูุดุฎุต ฺฉูุฏ:

```csharp
[assembly: InternalsVisibleTo("StrongFriend, PublicKey=0024f000048c...")]
```

---

### ูุญุฏูุฏุชโูุง ู Capping ุฏุณุชุฑุณ

* ููุนุ ุฏุณุชุฑุณ ุงุนุถุง ุงุนูุงู ุดุฏู ุฎูุฏ ุฑุง ูุญุฏูุฏ ูโฺฉูุฏ. ูุซูุงู ฺฉ ููุน internal ุจุง ุงุนุถุง publicุ ุฏุฑ ุนูู ุงุนุถุง ุขู ุฑุง internal ูโฺฉูุฏ.
* ููฺฏุงู override ฺฉุฑุฏู ฺฉ ุชุงุจุน baseุ **ุฏุณุชุฑุณ ุจุงุฏ ฺฉุณุงู ุจุงุดุฏ**:

```csharp
class BaseClass { protected virtual void Foo() {} }
class Subclass1 : BaseClass { protected override void Foo() {} } // OK
class Subclass2 : BaseClass { public override void Foo() {} }     // ุฎุทุง
```

ฺฉุงููพุงูุฑ ุงุฒ ูุฑฺฏููู **ูุงุณุงุฒฺฏุงุฑ ุฏุฑ access modifiers** ุฌููฺฏุฑ ูโฺฉูุฏ. ุจู ุทูุฑ ูุซุงูุ ฺฉ subclass ูโุชูุงูุฏ ฺฉูุชุฑ ุงุฒ base class ุฏุณุชุฑุณ ุฏุงุดุชู ุจุงุดุฏุ ุงูุง ููโุชูุงูุฏ ุจุดุชุฑ ุฏุงุดุชู ุจุงุดุฏ:

```csharp
internal class A {}
public class B : A {}  // ุฎุทุง
```

**Interfaces (ุฑุงุจุทูโูุง) ๐งฉ**

ฺฉ **interface** ุดุจู ฺฉ ฺฉูุงุณ ุงุณุชุ ุงูุง ุชููุง ุฑูุชุงุฑ (Behavior) ุฑุง ูุดุฎุต ูโฺฉูุฏ ู **ุญุงูุช (State)** ุง ุฏุงุฏู ูฺฏู ููโุฏุงุฑุฏ. ุจูุงุจุฑุงู:

* ฺฉ interface ุชููุง ูโุชูุงูุฏ **ุชูุงุจุน** ุชุนุฑู ฺฉูุฏ ู ููโุชูุงูุฏ **ููุฏ** ุฏุงุดุชู ุจุงุดุฏ.
* ุงุนุถุง interface ุจูโุตูุฑุช ุถูู **abstract** ูุณุชูุฏ. (ุงุณุชุซูุงูุง ูุฌูุฏ ุฏุงุฑุฏ ฺฉู ุฏุฑ ุจุฎุด ยซDefault Interface Membersยป ุตูุญู 151 ู ยซStatic Interface Membersยป ุตูุญู 152 ุชูุถุญ ุฏุงุฏู ุดุฏูโุงูุฏ.)
* ฺฉ ฺฉูุงุณ ุง struct ูโุชูุงูุฏ ฺูุฏู interface ุฑุง ูพุงุฏูโุณุงุฒ ฺฉูุฏ. ุฏุฑ ููุงุจูุ ฺฉ ฺฉูุงุณ ุชููุง ูโุชูุงูุฏ ุงุฒ ฺฉ ฺฉูุงุณ ุฏฺฏุฑ ุงุฑุซโุจุฑ ฺฉูุฏ ู struct ุงุตูุงู ููโุชูุงูุฏ ุงุฑุซโุจุฑ ฺฉูุฏ (ุจู ุฌุฒ ุงุฒ System.ValueType).

ุชุนุฑู ฺฉ interface ุดุจู ุชุนุฑู ฺฉูุงุณ ุงุณุชุ ุงูุง ูุนูููุงู ูฺ ูพุงุฏูโุณุงุฒ ุจุฑุง ุงุนุถุง ุฎูุฏ ุงุฑุงุฆู ููโุฏูุฏุ ุฒุฑุง ุงุนุถุง ุขู ุจูโุตูุฑุช ุถูู abstract ูุณุชูุฏ. ุงู ุงุนุถุง ุชูุณุท ฺฉูุงุณโูุง ู structูุง ฺฉู interface ุฑุง ูพุงุฏูโุณุงุฒ ูโฺฉููุฏุ ูพุงุฏูโุณุงุฒ ูโุดููุฏ. ฺฉ interface ูโุชูุงูุฏ ุชููุง ุดุงูู **ุชูุงุจุนุ ูุชุฏูุงุ propertiesุ events ู indexerูุง** ุจุงุดุฏ (ฺฉู ุฏููุงู ููุงู ุงุนุถุง ฺฉูุงุณ ูุณุชูุฏ ฺฉู ูโุชูุงููุฏ abstract ุจุงุดูุฏ).

ูุซุงู ุชุนุฑู interface `IEnumerator` ุฏุฑ System.Collections:

```csharp
public interface IEnumerator
{
    bool MoveNext();
    object Current { get; }
    void Reset();
}
```

ุงุนุถุง interface ููุดู **ุถูู public** ูุณุชูุฏ ู ููโุชูุงููุฏ access modifier ุงุนูุงู ฺฉููุฏ. ูพุงุฏูโุณุงุฒ ฺฉ interface ุนู **ุงุฑุงุฆู ูพุงุฏูโุณุงุฒ public** ุจุฑุง ุชูุงู ุงุนุถุง ุขู:

```csharp
internal class Countdown : IEnumerator
{
    int count = 11;
    public bool MoveNext() => count-- > 0;
    public object Current => count;
    public void Reset() { throw new NotSupportedException(); }
}
```

ูโุชูุงูุฏ ฺฉ ุดุก ุฑุง ุจู ูุฑ interface ฺฉู ูพุงุฏูโุณุงุฒ ูโฺฉูุฏุ **ุจูโุตูุฑุช ุถูู cast ฺฉูุฏ**:

```csharp
IEnumerator e = new Countdown();
while (e.MoveNext())
    Console.Write(e.Current);  // 109876543210
```

ุญุช ุงฺฏุฑ Countdown ฺฉ ฺฉูุงุณ internal ุจุงุดุฏุ ุงุนุถุง ุขู ฺฉู IEnumerator ุฑุง ูพุงุฏูโุณุงุฒ ูโฺฉููุฏ ูโุชูุงููุฏ **ุจูโุตูุฑุช public** ูุฑุงุฎูุงู ุดููุฏ.

---

### ฺฏุณุชุฑุด ฺฉ Interface โ

Interfaces ูโุชูุงููุฏ ุงุฒ ุณุงุฑ interfaceูุง ุงุฑุซโุจุฑ ฺฉููุฏ:

```csharp
public interface IUndoable { void Undo(); }
public interface IRedoable : IUndoable { void Redo(); }
```

ุฏุฑ ุงู ูุซุงูุ IRedoable ุชูุงู ุงุนุถุง IUndoable ุฑุง ยซุจู ุงุฑุซ ูโุจุฑุฏยป. ุนู ูุฑ ููุน ฺฉู IRedoable ุฑุง ูพุงุฏูโุณุงุฒ ฺฉูุฏุ ุจุงุฏ ุงุนุถุง IUndoable ุฑุง ูุฒ ูพุงุฏูโุณุงุฒ ฺฉูุฏ.

---

### ูพุงุฏูโุณุงุฒ ุตุฑุญ Interface ๐

ูพุงุฏูโุณุงุฒ ฺูุฏ interface ฺฏุงู ุจุงุนุซ **ุชุฏุงุฎู ุฏุฑ ุงูุถุงูุง ุงุนุถุง** ูโุดูุฏ. ูโุชูุงูุฏ ุงู ุชุฏุงุฎูโูุง ุฑุง ุจุง **ูพุงุฏูโุณุงุฒ ุตุฑุญ** ุญู ฺฉูุฏ:

```csharp
interface I1 { void Foo(); }
interface I2 { int Foo(); }

public class Widget : I1, I2
{
    public void Foo()
    {
        Console.WriteLine("Widget's implementation of I1.Foo");
    }
    int I2.Foo()
    {
        Console.WriteLine("Widget's implementation of I2.Foo");
        return 42;
    }
}
```

* ฺูู I1 ู I2 ุฏุงุฑุง Foo ุจุง ุงูุถุงูุง ูุชูุงูุช ูุณุชูุฏุ Widget **ุตุฑุญุงู I2.Foo** ุฑุง ูพุงุฏูโุณุงุฒ ูโฺฉูุฏ.
* ุชููุง ุฑุงู ูุฑุงุฎูุงู ฺฉ ุนุถู ูพุงุฏูโุณุงุฒ ุตุฑุญุ **cast ุจู interface** ุงุณุช:

```csharp
Widget w = new Widget();
w.Foo();         // Widget's implementation of I1.Foo
((I1)w).Foo();   // Widget's implementation of I1.Foo
((I2)w).Foo();   // Widget's implementation of I2.Foo
```

ฺฉ ุฏฺฏุฑ ุงุฒ ุฏูุงู ูพุงุฏูโุณุงุฒ ุตุฑุญุ **ูุฎู ฺฉุฑุฏู ุงุนุถุง ุชุฎุตุต ู ฺฏุฌโฺฉููุฏู** ุจุฑุง ุงุณุชูุงุฏู ูุนููู ููุน ุงุณุชุ ูุงููุฏ ISerializable.

---

### ูพุงุฏูโุณุงุฒ ูุฌุงุฒ Interface Members โก

ฺฉ ุนุถู interface ฺฉู ุจูโุทูุฑ ุถูู ูพุงุฏูโุณุงุฒ ุดุฏู ุงุณุชุ ุจูโุตูุฑุช ูพุดโูุฑุถ **sealed** ุงุณุช ู ุจุฑุง override ุดุฏู ุจุงุฏ ุฏุฑ ฺฉูุงุณ ูพุงู **virtual ุง abstract** ุนูุงูุชโฺฏุฐุงุฑ ุดูุฏ:

```csharp
public interface IUndoable { void Undo(); }
public class TextBox : IUndoable
{
    public virtual void Undo() => Console.WriteLine("TextBox.Undo");
}
public class RichTextBox : TextBox
{
    public override void Undo() => Console.WriteLine("RichTextBox.Undo");
}
```

ูุฑุงุฎูุงู ุนุถู interface ุงุฒ ุทุฑู ฺฉูุงุณ ูพุงู ุง interfaceุ **ูพุงุฏูโุณุงุฒ subclass** ุฑุง ุตุฏุง ูโุฒูุฏ:

```csharp
RichTextBox r = new RichTextBox();
r.Undo();                // RichTextBox.Undo
((IUndoable)r).Undo();   // RichTextBox.Undo
((TextBox)r).Undo();     // RichTextBox.Undo
```

ฺฉ ุนุถู ูพุงุฏูโุณุงุฒ ุตุฑุญ **ููโุชูุงูุฏ virtual ุจุงุดุฏ** ู ููโุชูุงู ุขู ุฑุง ุจูโุทูุฑ ูุนููู override ฺฉุฑุฏุ ุงูุง ูโุชูุงู ุขู ุฑุง **reimplement** ฺฉุฑุฏ.

---

### ูพุงุฏูโุณุงุฒ ูุฌุฏุฏ Interface ุฏุฑ Subclass ๐

ฺฉ subclass ูโุชูุงูุฏ ูุฑ ุนุถู interface ฺฉู ูุจูุงู ุชูุณุท ฺฉูุงุณ ูพุงู ูพุงุฏูโุณุงุฒ ุดุฏู ุงุณุช ุฑุง **reimplement** ฺฉูุฏ. ูพุงุฏูโุณุงุฒ ูุฌุฏุฏ ููุช ฺฉู ุงุฒ ุทุฑู interface ุตุฏุง ุฒุฏู ุดูุฏุ ุฌุงฺฏุฒู ูพุงุฏูโุณุงุฒ ฺฉูุงุณ ูพุงู ูโุดูุฏ ู ูุฑู ูุฏุงุฑุฏ ุนุถู **virtual** ุจุงุดุฏ ุง ุฎุฑ.

ูุซุงู:

```csharp
public interface IUndoable { void Undo(); }

public class TextBox : IUndoable
{
    void IUndoable.Undo() => Console.WriteLine("TextBox.Undo");
}

public class RichTextBox : TextBox, IUndoable
{
    public void Undo() => Console.WriteLine("RichTextBox.Undo");
}
```

* ูุฑุงุฎูุงู ุนุถู reimplemented ุงุฒ ุทุฑู interfaceุ ูพุงุฏูโุณุงุฒ subclass ุฑุง ุตุฏุง ูโุฒูุฏ:

```csharp
RichTextBox r = new RichTextBox();
r.Undo();                 // RichTextBox.Undo      Case 1
((IUndoable)r).Undo();    // RichTextBox.Undo      Case 2
```

ุงฺฏุฑ TextBox ุนุถู Undo ุฑุง ุจูโุตูุฑุช **ุถูู ูพุงุฏูโุณุงุฒ** ูโฺฉุฑุฏุ ูุฑุงุฎูุงู ุงุฒ ุทุฑู ฺฉูุงุณ ูพุงู ูุฒ ููฺฉู ุจูุฏ ู ุจุงุนุซ **ูุงุณุงุฒฺฏุงุฑ** ูโุดุฏ:

```csharp
((TextBox)r).Undo();      // TextBox.Undo
```

โ ูฺฉุชู: ูพุงุฏูโุณุงุฒ ูุฌุฏุฏ ูุนูููุงู **ุจูุชุฑู ุงุณุชุฑุงุชฺ ุจุฑุง override ฺฉุฑุฏู ุงุนุถุง ุตุฑุญ interface** ุงุณุชุ ุฒุฑุง ุชููุง ููุช ฺฉู ุนุถู ุงุฒ ุทุฑู interface ุตุฏุง ุฒุฏู ุดูุฏุ ุงุซุฑ ูโฺฉูุฏ ู ุงุฒ ุฑูุชุงุฑ ูุงุณุงุฒฺฏุงุฑ ุฌููฺฏุฑ ูโฺฉูุฏ.
**ุฌุงฺฏุฒูโูุง ูพุงุฏูโุณุงุฒ ูุฌุฏุฏ Interface ๐**

ุญุช ุจุง ูพุงุฏูโุณุงุฒ ุตุฑุญ ุงุนุถุงุ ูพุงุฏูโุณุงุฒ ูุฌุฏุฏ interface ูโุชูุงูุฏ ูุดฺฉูโุณุงุฒ ุจุงุดุฏ ุจู ฺูุฏ ุฏูู:

* **ุฒุฑฺฉูุงุณ ูฺ ุฑุงู ุจุฑุง ูุฑุงุฎูุงู ูุชุฏ ฺฉูุงุณ ูพุงู ูุฏุงุฑุฏ.**
* **ููุณูุฏู ฺฉูุงุณ ูพุงู ููฺฉู ุงุณุช ุงูุชุธุงุฑ ูุฏุงุดุชู ุจุงุดุฏ ฺฉู ฺฉ ูุชุฏ reimplement ุดูุฏ** ู ูพุงูุฏูุง ุงุญุชูุงู ุขู ุฑุง ุฏุฑ ูุธุฑ ูฺฏุฑุฏ.

ูพุงุฏูโุณุงุฒ ูุฌุฏุฏ ูโุชูุงูุฏ ุจู ุนููุงู ุขุฎุฑู ุฑุงู ุญู ุฏุฑ ููุงูุน ฺฉู subclassing ูพุดโุจู ูุดุฏู ุงุณุช ููุฏ ุจุงุดุฏ. ุงูุง ฺฏุฒูู ุจูุชุฑุ ุทุฑุงุญ ฺฉูุงุณ ูพุงู ุจู ฺฏูููโุง ุงุณุช ฺฉู **ูุฑฺฏุฒ ูุงุฒ ุจู reimplementation ูุจุงุดุฏ**. ุฏู ุฑุงู ุจุฑุง ุงู ฺฉุงุฑ ูุฌูุฏ ุฏุงุฑุฏ:

* ููุช ฺฉ ุนุถู ุฑุง ุจูโุทูุฑ ุถูู ูพุงุฏูโุณุงุฒ ูโฺฉูุฏุ ุงฺฏุฑ ููุงุณุจ ุงุณุช ุขู ุฑุง **virtual** ุนูุงูุช ุจุฒูุฏ.
* ููุช ฺฉ ุนุถู ุฑุง ุตุฑุญุงู ูพุงุฏูโุณุงุฒ ูโฺฉูุฏุ ุงฺฏุฑ ูพุดโุจู ูโฺฉูุฏ ุฒุฑฺฉูุงุณโูุง ููฺฉู ุงุณุช ูุงุฒ ุจู override ุฏุงุดุชู ุจุงุดูุฏุ ุงุฒ ุงูฺฏู ุฒุฑ ุงุณุชูุงุฏู ฺฉูุฏ:

```csharp
public class TextBox : IUndoable
{
    void IUndoable.Undo()         => Undo();    // ูุฑุงุฎูุงู ูุชุฏ ุฒุฑ
    protected virtual void Undo() => Console.WriteLine("TextBox.Undo");
}

public class RichTextBox : TextBox
{
    protected override void Undo() => Console.WriteLine("RichTextBox.Undo");
}
```

ุงฺฏุฑ ุงูุชุธุงุฑ subclassing ูุฏุงุฑุฏุ ูโุชูุงูุฏ ฺฉูุงุณ ุฑุง **sealed** ุนูุงูุช ุจุฒูุฏ ุชุง ุงุฒ ูพุงุฏูโุณุงุฒ ูุฌุฏุฏ ุฌููฺฏุฑ ุดูุฏ.

---

### Interface ู Boxing ๐ฆ

ุชุจุฏู ฺฉ **struct** ุจู ฺฉ interface ุจุงุนุซ **boxing** ูโุดูุฏ. ุงูุง ูุฑุงุฎูุงู ฺฉ ุนุถู ุถูู ูพุงุฏูโุณุงุฒโุดุฏู ุฑู structุ ุจุงุนุซ boxing ููโุดูุฏ:

```csharp
interface I { void Foo(); }
struct S : I { public void Foo() {} }

S s = new S();
s.Foo();         // ุจุฏูู boxing
I i = s;         // ููฺฏุงู cast ุจู interfaceุ boxing ุฑุฎ ูโุฏูุฏ
i.Foo();
```

---

### Default Interface Members ๐

ุงุฒ C# 8 ุจู ุจุนุฏ ูโุชูุงูุฏ **ูพุงุฏูโุณุงุฒ ูพุดโูุฑุถ** ุจุฑุง ุงุนุถุง interface ุงุถุงูู ฺฉูุฏ ู ุงุฌุฑุง ุขู ุฑุง ุงุฎุชุงุฑ ฺฉูุฏ:

```csharp
interface ILogger
{
    void Log(string text) => Console.WriteLine(text);
}
```

ุงู ูฺฺฏ ููุฏ ุงุณุช ุงฺฏุฑ ุจุฎูุงูุฏ ฺฉ ุนุถู ุฌุฏุฏ ุจู interfaceโุง ฺฉู ุฏุฑ ฺฉ ฺฉุชุงุจุฎุงูู ูพุฑฺฉุงุฑุจุฑุฏ ุชุนุฑู ุดุฏู ุงุถุงูู ฺฉูุฏุ ุจุฏูู ุงูฺฉู ูพุงุฏูโุณุงุฒโูุง ููุฌูุฏ (ุงุญุชูุงูุงู ูุฒุงุฑุงู ููุฑุฏ) ุฎุฑุงุจ ุดููุฏ.

* ูพุงุฏูโุณุงุฒ ูพุดโูุฑุถ ููุดู **explicit** ุงุณุชุ ุจูุงุจุฑุงู ุงฺฏุฑ ฺฉูุงุณ ูพุงุฏูโุณุงุฒโฺฉููุฏู ILogger ูุชุฏ Log ุฑุง ุชุนุฑู ูฺฉูุฏุ ุชููุง ุฑุงู ูุฑุงุฎูุงู ุขู ุงุฒ ุทุฑู interface ุงุณุช:

```csharp
class Logger : ILogger { }
((ILogger)new Logger()).Log("message");
```

* ุงู ฺฉุงุฑ ุงุฒ ูุดฺฉู **multiple implementation inheritance** ุฌููฺฏุฑ ูโฺฉูุฏุ ุนู ุงฺฏุฑ ฺฉ ุนุถู ูพุดโูุฑุถ ุฏุฑ ุฏู interface ฺฉู ฺฉ ฺฉูุงุณ ูพุงุฏูโุณุงุฒ ูโฺฉูุฏ ุงุถุงูู ุดูุฏุ ูฺ ุงุจูุงู ุฏุฑุจุงุฑู ูุฑุงุฎูุงู ุขู ูุฌูุฏ ูุฏุงุฑุฏ.

---

### Static Interface Members โก

ฺฉ interface ูโุชูุงูุฏ **ุงุนุถุง static** ูุฒ ุฏุงุดุชู ุจุงุดุฏ. ุฏู ููุน static ูุฌูุฏ ุฏุงุฑุฏ:

* **Static nonvirtual interface members**
* **Static virtual/abstract interface members**

ุจุฑ ุฎูุงู ุงุนุถุง instanceุ ุงุนุถุง static ุจูโุทูุฑ ูพุดโูุฑุถ nonvirtual ูุณุชูุฏ. ุจุฑุง virtual ฺฉุฑุฏู ฺฉ ุนุถู staticุ ุจุงุฏ ุขู ุฑุง ุจุง **static abstract** ุง **static virtual** ุนูุงูุช ุจุฒูุฏ.

#### Static nonvirtual interface members

ุงู ุงุนุถุง ุนูุฏุชุงู ุจุฑุง ููุดุชู **default interface members** ููุฏ ูุณุชูุฏ. ุชูุณุท ฺฉูุงุณโูุง ุง structูุง ูพุงุฏูโุณุงุฒ ููโุดููุฏุ ุจูฺฉู ูุณุชููุงู ูุตุฑู ูโุดููุฏ. ูโุชูุงููุฏ ุดุงูู **ููุฏ** ูุฒ ุจุงุดูุฏ ฺฉู ูุนูููุงู ุฏุฑ ูพุงุฏูโุณุงุฒ ูพุดโูุฑุถ ุงุนุถุง ุงุณุชูุงุฏู ูโุดูุฏ:

```csharp
interface ILogger
{
    void Log(string text) => Console.WriteLine(Prefix + text);
    static string Prefix = ""; 
}
ILogger.Prefix = "File log: ";
```

* ุงุนุถุง instance ูููุฒ ุฏุฑ interface ูุฌุงุฒ ูุณุชูุฏุ ุฒุฑุง ูุฏู interface ุชุนุฑู **ุฑูุชุงุฑุ ูู ุญุงูุช** ุงุณุช.

#### Static virtual/abstract interface members

ุงุนุถุง **static virtual/abstract** (ุงุฒ C# 11) ุงูฺฉุงู **polymorphism ุงุณุชุงุชฺฉ** ุฑุง ูุฑุงูู ูโฺฉููุฏุ ฺฉู ฺฉ ูฺฺฏ ูพุดุฑูุชู ุงุณุช.

```csharp
interface ITypeDescribable
{
    static abstract string Description { get; }
    static virtual string Category => null;
}

class CustomerTest : ITypeDescribable
{
    public static string Description => "Customer tests";  // ุงูุฒุงู
    public static string Category    => "Unit testing";    // ุงุฎุชุงุฑ
}
```

* ุนูุงูู ุจุฑ ูุชุฏูุงุ propertiesุ ู eventsุ operatorูุง ู conversions ูุฒ ูโุชูุงููุฏ ุนุถู static virtual interface ุจุงุดูุฏ.
* ุงู ุงุนุถุง ุงุฒ ุทุฑู **constrained type parameter** ูุฑุงุฎูุงู ูโุดููุฏ (ุฏุฑ ุจุฎุด Static Polymorphism ู Generic Math ุชูุถุญ ุฏุงุฏู ุฎูุงูุฏ ุดุฏ).

---

### ููุดุชู Class ุฏุฑ ููุงุจู Interface ๐

ุฑุงูููุง:

* ุจุฑุง ููุนโูุง ฺฉู **ุจูโุทูุฑ ุทุจุน ูพุงุฏูโุณุงุฒ ูุดุชุฑฺฉ ุฏุงุฑูุฏ**ุ ุงุฒ ฺฉูุงุณ ู ุฒุฑฺฉูุงุณ ุงุณุชูุงุฏู ฺฉูุฏ.
* ุจุฑุง ููุนโูุง ฺฉู **ูพุงุฏูโุณุงุฒ ูุณุชูู ุฏุงุฑูุฏ**ุ ุงุฒ interface ุงุณุชูุงุฏู ฺฉูุฏ.

ูุซุงู:

```csharp
abstract class Animal {}
abstract class Bird           : Animal {}
abstract class Insect         : Animal {}
abstract class FlyingCreature : Animal {}
abstract class Carnivore      : Animal {}

// ฺฉูุงุณโูุง Concrete
class Ostrich : Bird {}
class Eagle   : Bird, FlyingCreature, Carnivore {}  // ุบุฑูุงููู
class Bee     : Insect, FlyingCreature {}           // ุบุฑูุงููู
class Flea    : Insect, Carnivore {}                // ุบุฑูุงููู
```

* ฺฉูุงุณโูุง Eagleุ Beeุ ู Flea ฺฉุงููพุงู ููโุดููุฏุ ุฒุฑุง **ุงุฑุซโุจุฑ ฺูุฏฺฏุงูู ุงุฒ ฺฉูุงุณโูุง ูุฌุงุฒ ูุณุช**.
* ุฑุงู ุญู: ุจุฑุฎ ุงุฒ ููุนโูุง ุฑุง ุจู interface ุชุจุฏู ฺฉูู.

ูุงุนุฏู ุนููู:

* Insect ู Bird ูพุงุฏูโุณุงุฒ ูุดุชุฑฺฉ ุฏุงุฑูุฏ โ ฺฉูุงุณ ุจุงู ุจูุงููุฏ
* FlyingCreature ู Carnivore ุฏุงุฑุง ูฺฉุงูุฒูโูุง ูุณุชูู ูุณุชูุฏ โ ุชุจุฏู ุจู interface:

```csharp
interface IFlyingCreature {}
interface ICarnivore      {}
```

* ูุซุงู ูุงูุน: Bird ู Insect ูโุชูุงููุฏ ูุนุงุฏู Windows control ู web control ุจุงุดูุฏ. FlyingCreature ู Carnivore ูโุชูุงููุฏ ูุนุงุฏู IPrintable ู IUndoable ุจุงุดูุฏ.
**Enums ๐ข**

ฺฉ **enum** ููุน ูฺูโุง ุงุฒ value type ุงุณุช ฺฉู ุจู ุดูุง ุงูฺฉุงู ูโุฏูุฏ ฺฏุฑูู ุงุฒ **ุซุงุจุชโูุง ุนุฏุฏ ูุงูโฺฏุฐุงุฑโุดุฏู** ุฑุง ุชุนุฑู ฺฉูุฏ. ุจู ุนููุงู ูุซุงู:

```csharp
public enum BorderSide { Left, Right, Top, Bottom }
```

ูโุชูุงูู ุงุฒ ุงู enum ุจู ุงู ุดฺฉู ุงุณุชูุงุฏู ฺฉูู:

```csharp
BorderSide topSide = BorderSide.Top;
bool isTop = (topSide == BorderSide.Top);   // true
```

ูุฑ ุนุถู enum ุฏุงุฑุง ฺฉ **ููุฏุงุฑ ุนุฏุฏ ุฒูููโุง** ุงุณุช. ุจูโุทูุฑ ูพุดโูุฑุถ:

* ููุงุฏุฑ ุฒูููโุง ุงุฒ ููุน `int` ูุณุชูุฏ.
* ุซุงุจุชโูุง ุจู ุชุฑุชุจ ุงุนูุงูโุดุฏูุ ุจู ุตูุฑุช ุฎูุฏฺฉุงุฑ 0ุ 1ุ 2โฆ ุงุฎุชุตุงุต ูโุงุจูุฏ.

ูโุชูุงูุฏ ููุน ุนุฏุฏ ุฌุงฺฏุฒู ูุฒ ูุดุฎุต ฺฉูุฏ:

```csharp
public enum BorderSide : byte { Left, Right, Top, Bottom }
```

ููฺูู ูโุชูุงูุฏ ุจุฑุง ูุฑ ุนุถู ููุฏุงุฑ ุฒูููโุง ุตุฑุญ ุชุนู ฺฉูุฏ:

```csharp
public enum BorderSide : byte { Left=1, Right=2, Top=10, Bottom=11 }
```

ฺฉุงููพุงูุฑ ุจู ุดูุง ุงุฌุงุฒู ูโุฏูุฏ ุชููุง ุจุฑุฎ ุงุฒ ุงุนุถุง ุฑุง ููุฏุงุฑุฏู ฺฉูุฏุ ุงุนุถุง ุจุฏูู ููุฏุงุฑุ ุงุฒ ุขุฎุฑู ููุฏุงุฑ ุตุฑุญ ุงูุฒุงุด ุงุฏุงูู ูโุงุจูุฏ.

---

### ุชุจุฏูโูุง Enum ๐

ูโุชูุงูุฏ ฺฉ ููููู enum ุฑุง ุจู ููุน ุนุฏุฏ ุฒูููโุง ู ุจุฑุนฺฉุณ ุชุจุฏู ฺฉูุฏ ุจุง **explicit cast**:

```csharp
int i = (int) BorderSide.Left;
BorderSide side = (BorderSide) i;
bool leftOrRight = (int) side <= 2;
```

ููฺูู ูโุชูุงูุฏ ฺฉ enum ุฑุง ุจู enum ุฏฺฏุฑ ุชุจุฏู ฺฉูุฏ:

```csharp
public enum HorizontalAlignment
{
    Left = BorderSide.Left,
    Right = BorderSide.Right,
    Center
}

HorizontalAlignment h = (HorizontalAlignment) BorderSide.Right;
// ูุดุงุจู:
HorizontalAlignment h = (HorizontalAlignment)(int) BorderSide.Right;
```

* ุนุฏุฏ 0 ุฏุฑ ฺฉ ุนุจุงุฑุช enum ุจูโุทูุฑ ูฺูโุง ุฑูุชุงุฑ ูโฺฉูุฏ ู ูุงุฒ ุจู cast ูุฏุงุฑุฏ:

```csharp
BorderSide b = 0;    // ุจุฏูู cast
if (b == 0) ...
```

ุฏูุงู ูฺู ุจูุฏู 0:

* ุนุถู ุงูู enum ุงุบูุจ ุจู ุนููุงู ููุฏุงุฑ **default** ุงุณุชูุงุฏู ูโุดูุฏ.
* ุจุฑุง enumูุง ุชุฑฺฉุจุ 0 ุจู ูุนูุง **no flags** ุงุณุช.

---

### Flags Enums ๐ด

ูโุชูุงูุฏ ุงุนุถุง enum ุฑุง ุจุง ูู ุชุฑฺฉุจ ฺฉูุฏ. ุจุฑุง ุฌููฺฏุฑ ุงุฒ ุงุจูุงูุ ุงุนุถุง **combinable enum** ุจุงุฏ ููุงุฏุฑ ุตุฑุญ ุฏุงุดุชู ุจุงุดูุฏุ ูุนูููุงู ุจู ุตูุฑุช ุชูุงูโูุง ุฏู:

```csharp
[Flags]
enum BorderSides { None=0, Left=1, Right=2, Top=4, Bottom=8 }
```

ุง:

```csharp
enum BorderSides { None=0, Left=1, Right=1<<1, Top=1<<2, Bottom=1<<3 }
```

ุจุฑุง ฺฉุงุฑ ุจุง ููุงุฏุฑ ุชุฑฺฉุจ ุงุฒ **ุนููฺฏุฑูุง ุจุช** ูุงููุฏ `|` ู `&` ุงุณุชูุงุฏู ูโฺฉูู:

```csharp
BorderSides leftRight = BorderSides.Left | BorderSides.Right;
if ((leftRight & BorderSides.Left) != 0)
    Console.WriteLine("Includes Left");  // Includes Left
```

```csharp
string formatted = leftRight.ToString();   // "Left, Right"
BorderSides s = BorderSides.Left;
s |= BorderSides.Right;
Console.WriteLine(s == leftRight);   // True
s ^= BorderSides.Right;               // ุชุนูุถ BorderSides.Right
Console.WriteLine(s);                 // Left
```

* ุทุจู conventionุ ุงฺฏุฑ ุงุนุถุง enum ูุงุจู ุชุฑฺฉุจ ูุณุชูุฏุ ููุดู **Flags attribute** ุฑุง ุงุถุงูู ฺฉูุฏ.
* ูุงู enum ุชุฑฺฉุจ ูุนูููุงู ุจู **ุฌูุน** ูุงูโฺฏุฐุงุฑ ูโุดูุฏ.
* ูโุชูุงูุฏ **ุงุนุถุง ุชุฑฺฉุจ** ุฑุง ุฏุฑ ุฎูุฏ declaration ุชุนุฑู ฺฉูุฏ:

```csharp
[Flags]
enum BorderSides
{
    None=0,
    Left=1, Right=1<<1, Top=1<<2, Bottom=1<<3,
    LeftRight = Left | Right, 
    TopBottom = Top | Bottom,
    All       = LeftRight | TopBottom
}
```

---

### ุนููฺฏุฑูุง Enum โ๏ธ

ุนููฺฏุฑูุง ฺฉู ุจุง enums ฺฉุงุฑ ูโฺฉููุฏ:

```
=   ==   !=   <   >   <=   >=   +   -   ^  &  |   ~
+=  -=  ++  --   sizeof
```

* ุนููฺฏุฑูุง ุจุชุ ูุญุงุณุจุงุช ู ููุงุณูโุง ูุชุฌู ุฑุง ุฑู ููุงุฏุฑ ุนุฏุฏ ุฒูููโุง ุงูุฌุงู ูโุฏููุฏ.
* ุฌูุน ุจู ฺฉ enum ู ููุน ุนุฏุฏ ูุฌุงุฒ ุงุณุชุ ุงูุง ุจู ุฏู enum ูุฌุงุฒ ูุณุช.

---

### ูุณุงุฆู Type-Safety โ๏ธ

ูุฑุถ ฺฉูุฏ ุฏุงุฑู:

```csharp
public enum BorderSide { Left, Right, Top, Bottom }
```

ฺูู enum ูโุชูุงูุฏ ุจู ููุน ุนุฏุฏ ู ุจุงูุนฺฉุณ ุชุจุฏู ุดูุฏุ ููฺฉู ุงุณุช ููุฏุงุฑ ุขู ุฎุงุฑุฌ ุงุฒ ูุญุฏูุฏู ุงุนุถุง ูุงููู ุจุงุดุฏ:

```csharp
BorderSide b = (BorderSide)12345;
Console.WriteLine(b);  // 12345
```

ุนููฺฏุฑูุง ุจุช ู ูุญุงุณุจุงุช ูุฒ ูโุชูุงููุฏ ููุงุฏุฑ ูุงูุนุชุจุฑ ุชููุฏ ฺฉููุฏ:

```csharp
BorderSide b = BorderSide.Bottom;
b++;  // ุจุฏูู ุฎุทุง
```

* ููุฏุงุฑ ูุงูุนุชุจุฑ ูโุชูุงูุฏ ฺฉุฏ ุฒุฑ ุฑุง ุฎุฑุงุจ ฺฉูุฏ:

```csharp
void Draw(BorderSide side)
{
    if      (side == BorderSide.Left)  {...}
    else if (side == BorderSide.Right) {...}
    else if (side == BorderSide.Top)   {...}
    else                               {...} // ูุฑุถ BorderSide.Bottom
}
```

ุฑุงู ุญูโูุง:

1. ุงุถุงูู ฺฉุฑุฏู ฺฉ else ุฏฺฏุฑ:

```csharp
...
else if (side == BorderSide.Bottom) ...
else throw new ArgumentException("Invalid BorderSide: " + side, "side");
```

2. ุจุฑุฑุณ ุตุฑุญ ููุฏุงุฑ enum ุจุง `Enum.IsDefined`:

```csharp
BorderSide side = (BorderSide)12345;
Console.WriteLine(Enum.IsDefined(typeof(BorderSide), side));   // False
```

* ูุชุฃุณูุงููุ `Enum.IsDefined` ุจุฑุง **flagged enums** ฺฉุงุฑ ููโฺฉูุฏ. ุงูุง ูโุชูุงู ุงุฒ ุฑูุด ฺฉูฺฉ ุฒุฑ ุงุณุชูุงุฏู ฺฉุฑุฏ:

```csharp
bool IsFlagDefined(Enum e)
{
    decimal d;
    return !decimal.TryParse(e.ToString(), out d);
}
```

---

### Nested Types ๐

ฺฉ **nested type** ุฏุฑ ุฏุงุฎู ูุญุฏูุฏู ฺฉ ููุน ุฏฺฏุฑ ุชุนุฑู ูโุดูุฏ:

```csharp
public class TopLevel
{
    public class Nested { }               // ฺฉูุงุณ ุชู ุฏุฑ ุชู
    public enum Color { Red, Blue, Tan }  // enum ุชู ุฏุฑ ุชู
}
```

ูฺฺฏโูุง nested type:

* ูโุชูุงูุฏ ุจู **private members** ููุน enclosing ุฏุณุชุฑุณ ุฏุงุดุชู ุจุงุดุฏ.
* ูโุชูุงูุฏ ุงุฒ ุชูุงู access modifierูุง ุงุณุชูุงุฏู ฺฉูุฏ.
* ุฏุณุชุฑุณ ูพุดโูุฑุถ ุจุฑุง nested type **private** ุงุณุช ูู internal.
* ุฏุณุชุฑุณ ุจู ฺฉ nested type ุงุฒ ุฎุงุฑุฌ ูุงุฒููุฏ qualification ุจุง ูุงู enclosing type ุงุณุช:

```csharp
TopLevel.Color color = TopLevel.Color.Red;
```

* ููู ููุนโูุง (classุ structุ interfaceุ delegate ู enum) ูโุชูุงููุฏ nested ุจุงุดูุฏ.

ูุซุงู ุฏุณุชุฑุณ ุจู member ุฎุตูุต ุงุฒ nested type:

```csharp
public class TopLevel
{
    static int x;
    class Nested
    {
        static void Foo() { Console.WriteLine(TopLevel.x); }
    }
}
```

ูุซุงู ุงุณุชูุงุฏู ุงุฒ `protected` ุฑู nested type:

```csharp
public class TopLevel
{
    protected class Nested { }
}
public class SubTopLevel : TopLevel
{
    static void Foo() { new TopLevel.Nested(); }
}
```

Nested types ุชูุณุท ฺฉุงููพุงูุฑ ูุฒ ุจุฑุง ุงุฌุงุฏ **ฺฉูุงุณโูุง ุฎุตูุต** ฺฉู state ุฑุง ุจุฑุง iteratorูุง ู anonymous methods ุฐุฎุฑู ูโฺฉููุฏุ ุงุณุชูุงุฏู ูโุดููุฏ.

---

### Generics โ๏ธ

ุงฺฏุฑ ูุฏู ุงุฒ ุงุณุชูุงุฏู ุงุฒ nested type ุชููุง ุฌููฺฏุฑ ุงุฒ ุดููุบ namespace ุงุณุชุ ุจูุชุฑ ุงุณุช ุงุฒ **nested namespace** ุงุณุชูุงุฏู ฺฉูุฏ.

C# ุฏู ูฺฉุงูุฒู ุจุฑุง ููุดุชู ฺฉุฏ ูุงุจู ุงุณุชูุงุฏู ูุฌุฏุฏ ุฏุฑ ููุนโูุง ูุฎุชูู ุฏุงุฑุฏ:

* **Inheritance**: ุจุงุฒฺฏู ูุงุจูุช reuse ุจุง base type

* **Generics**: ุจุงุฒฺฏู ูุงุจูุช reuse ุจุง template ฺฉู ุดุงูู placeholder typeูุงุณุช

* Generics ูโุชูุงููุฏ **type safety** ุฑุง ุงูุฒุงุด ุฏููุฏ ู ูุงุฒ ุจู casting ู boxing ุฑุง ฺฉุงูุด ุฏููุฏ.

#### Generic Types ๐งฉ

C# generics ู C++ templates ูุดุงุจู ูุณุชูุฏ ุงูุง ุฑูุชุงุฑ ูุชูุงูุช ุฏุงุฑูุฏ.

ฺฉ **generic type** ูพุงุฑุงูุชุฑูุง ููุน (placeholder) ุชุนุฑู ูโฺฉูุฏ ฺฉู ูุตุฑูโฺฉููุฏู generic ููุน ูุงูุน ุฑุง ุฌุงฺฏุฒู ูโฺฉูุฏ. ูุซุงู **Stack<T>**:

```csharp
public class Stack<T>
{
    int position;
    T[] data = new T[100];

    public void Push(T obj) => data[position++] = obj;
    public T Pop() => data[--position];
}
```

ุงุณุชูุงุฏู ุงุฒ Stack<T>:

```csharp
var stack = new Stack<int>();
stack.Push(5);
stack.Push(10);
int x = stack.Pop();  // 10
int y = stack.Pop();  // 5
```

* `Stack<int>` ูพุงุฑุงูุชุฑ ููุน `T` ุฑุง ุจุง `int` ุฌุงฺฏุฒู ูโฺฉูุฏ ู ููุน ุจุณุชูโุง ุงุฌุงุฏ ูโฺฉูุฏ.
* ุชูุงุด ุจุฑุง push ฺฉุฑุฏู ฺฉ `string` ุฑู `Stack<int>` ุจุงุนุซ ุฎุทุง compile-time ูโุดูุฏ.

```csharp
// ุชุนุฑู ูุดุงุจู Stack<int>
public class ###
{
    int position;
    int[] data = new int[100];

    public void Push(int obj) => data[position++] = obj;
    public int Pop() => data[--position];
}
```

* `Stack<T>` ฺฉ **open type** ุงุณุชุ ู `Stack<int>` ฺฉ **closed type**.
* ุฏุฑ ุฒูุงู ุงุฌุฑุงุ ุชูุงู ูููููโูุง generic type ุจุณุชู ูุณุชูุฏ ู placeholderูุง ูพุฑ ูโุดููุฏ.

ูุซุงู ูุงูุนุชุจุฑ:

```csharp
var stack = new Stack<T>();   // ุบุฑูุงููู: T ฺุณุชุ
```

* ุงูุง ุงฺฏุฑ ุฏุฑ ฺฉ ฺฉูุงุณ ุง ูุชุฏ ฺฉู ุฎูุฏุด T ุฑุง ุชุนุฑู ฺฉุฑุฏู ุจุงุดุฏ:

```csharp
public class Stack<T>
{
    ...
    public Stack<T> Clone()
    {
        Stack<T> clone = new Stack<T>();   // ูุงููู
        ...
    }
}
```

### Why Generics Exist ๐งฉ

Generics ุฏุฑ C# ูุฌูุฏ ุฏุงุฑูุฏ ุชุง ุจุชูุงูุฏ ฺฉุฏ **ูุงุจู ุงุณุชูุงุฏู ูุฌุฏุฏ ุจุฑุง ุงููุงุน ูุฎุชูู** ุจููุณุฏ.

ูุฑุถ ฺฉูุฏ ูโุฎูุงูู ฺฉ stack ุจุฑุง ุงุนุฏุงุฏ ุตุญุญ ุฏุงุดุชู ุจุงุดู ู generic ูุฏุงุฑู. ุฏู ุฑุงู ูุฌูุฏ ุฏุงุฑุฏ:

1. ุงุฌุงุฏ ูุณุฎูโูุง ุฌุฏุงฺฏุงูู ฺฉูุงุณ ุจุฑุง ูุฑ ููุน ููุฑุฏ ูุงุฒ: `IntStack`, `StringStack` ู ุบุฑู โ ุจุงุนุซ **ุชฺฉุฑุงุฑ ุฒุงุฏ ฺฉุฏ** ูโุดูุฏ.
2. ุงุณุชูุงุฏู ุงุฒ `object` ุจู ุนููุงู ููุน ุนูุงุตุฑ:

```csharp
public class ObjectStack
{
    int position;
    object[] data = new object[10];
    public void Push(object obj) => data[position++] = obj;
    public object Pop() => data[--position];
}
```

ุงูุง **ObjectStack** ูุนุงุจ ุฏุงุฑุฏ:

* ูุงุฒ ุจู **boxing** ู **downcasting** ุจุฑุง ููุนโูุง value type.
* ููุน ูุงุฏุฑุณุช ูโุชูุงูุฏ ูุงุฑุฏ ุดูุฏ ุจุฏูู ุงูฺฉู ฺฉุงููพุงูุฑ ุฎุทุง ุจุฏูุฏ:

```csharp
ObjectStack stack = new ObjectStack();
stack.Push("s");           // Wrong type, no compile error
int i = (int)stack.Pop();  // Runtime error
```

ุฑุงู ุญู: ุงุณุชูุงุฏู ุงุฒ **generics**.

```csharp
Stack<int> stack = new Stack<int>();
```

* ูุงููุฏ ObjectStack: ฺฉุจุงุฑ ููุดุชู ุดุฏู ู ูโุชูุงูุฏ ุจุง ูุฑ ููุน ฺฉุงุฑ ฺฉูุฏ.
* ูุงููุฏ IntStack: ุจุฑุง ููุน ุฎุงุต `T` ุชุฎุตุต ุดุฏู ุงุณุช.
* ูุฒุช: **ุงูู ููุน** ู ฺฉุงูุด ูุงุฒ ุจู cast ู boxing.

> ObjectStack ุนููุงู ูุนุงุฏู `Stack<object>` ุงุณุช.

---

### Generic Methods ๐

ูุชุฏูุง generic ูพุงุฑุงูุชุฑูุง ููุน ุฎูุฏ ุฑุง ุฏุฑ **signature ูุชุฏ** ูุนุฑู ูโฺฉููุฏ.
ูุซุงู: swap ุฏู ููุฏุงุฑ ุงุฒ ูุฑ ููุน T

```csharp
static void Swap<T>(ref T a, ref T b)
{
    T temp = a;
    a = b;
    b = temp;
}
```

ุงุณุชูุงุฏู:

```csharp
int x = 5, y = 10;
Swap(ref x, ref y);
```

* ูุนูููุงู ูุงุฒ ุจู ูุดุฎุต ฺฉุฑุฏู ููุน ูุณุชุ ฺฉุงููพุงูุฑ ุขู ุฑุง ุงุณุชูุชุงุฌ ูโฺฉูุฏ.
* ุงฺฏุฑ ุงุจูุงู ุจุงุดุฏ:

```csharp
Swap<int>(ref x, ref y);
```

> ฺฉ ูุชุฏ ุฏุฑ ุฏุงุฎู generic typeุ ูฺฏุฑ ุงูฺฉู type parameter ุฌุฏุฏ ูุนุฑู ฺฉูุฏุ **ูุชุฏ generic** ูุญุณูุจ ููโุดูุฏ.

---

### Declaring Type Parameters ๐ฆ

ูพุงุฑุงูุชุฑูุง ููุน ูโุชูุงููุฏ ุฏุฑ **ฺฉูุงุณโูุงุ structูุงุ interfaceูุงุ delegateูุง ู ูุชุฏูุง** ุชุนุฑู ุดููุฏ.
ูุซุงู:

```csharp
public struct Nullable<T>
{
    public T Value { get; }
}

class Dictionary<TKey, TValue> {...}
var myDict = new Dictionary<int,string>();
```

* ูโุชูุงู ฺูุฏ ูพุงุฑุงูุชุฑ ููุน ุฏุงุดุช: `Dictionary<TKey, TValue>`
* ูุงูฺฏุฐุงุฑ: ูพุงุฑุงูุชุฑ ุชฺฉ ููุน โ `T`ุ ฺูุฏ ูพุงุฑุงูุชุฑ โ `TKey, TValue` ู ุบุฑู.

#### typeof ู Unbound Generic Types

* **Open generic types** ุฏุฑ ุฒูุงู ุงุฌุฑุง ูุฌูุฏ ูุฏุงุฑูุฏ ูฺฏุฑ ุจู ุดฺฉู **Type object**:

```csharp
class A<T> {}
Type a1 = typeof(A<>);   // Unbound
Type a2 = typeof(A<,>);  // ุจุฑุง ฺูุฏ ูพุงุฑุงูุชุฑ
Type a3 = typeof(A<int,int>); // Closed
```

---

### Default Generic Value โ๏ธ

ฺฉููู ฺฉูุฏ `default` ุจุฑุง ฺฏุฑูุชู ููุฏุงุฑ ูพุดโูุฑุถ ูพุงุฑุงูุชุฑ ููุน ุงุณุชูุงุฏู ูโุดูุฏ:

```csharp
static void Zap<T>(T[] array)
{
    for (int i = 0; i < array.Length; i++)
        array[i] = default(T);
}

// C# 7.1 ุจู ุจุนุฏ:
array[i] = default;
```

* ููุฏุงุฑ ูพุดโูุฑุถ **reference type** โ `null`
* ููุฏุงุฑ ูพุดโูุฑุถ **value type** โ ุตูุฑ ุจุช ุจู ุจุช (bitwise-zero)

---

### Generic Constraints ๐ก๏ธ

ุจูโุทูุฑ ูพุดโูุฑุถ ูโุชูุงู ูุฑ ููุน ุฑุง ุฌุงฺฏุฒู T ฺฉุฑุฏุ ุงูุง **constraints** ูุญุฏูุฏุชโูุง ุงุถุงูู ูโฺฉููุฏ:

```csharp
where T : base-class       // Must derive from a base class
where T : interface        // Must implement an interface
where T : class            // Reference type
where T : struct           // Value type (excludes Nullable)
where T : unmanaged        // Simple value type without references
where T : new()            // Parameterless constructor
where U : T                // U must derive from T
where T : notnull          // Non-nullable (C# 8+)
```

ูุซุงู:

```csharp
class SomeClass {}
interface Interface1 {}

class GenericClass<T, U>
    where T : SomeClass, Interface1
    where U : new()
{
    ...
}
```

* ูุฏู ุงุตู constraints: **ุงูฺฉุงู ุงูุฌุงู ุนููุงุช ฺฉู ุจุฏูู ุขู ุบุฑููฺฉู ุงุณุช**.
* ูุซุงู: `T:Foo` ุงุฌุงุฒู ูโุฏูุฏ T ุฑุง ูุซู Foo ุฑูุชุงุฑ ุฏูุฏุ `T:new()` ุงุฌุงุฒู ุณุงุฎุช instance ุงุฒ T ูโุฏูุฏ.

---

### Example: Max Method Using Constraints โ

ุงุณุชูุงุฏู ุงุฒ interface constraint `IComparable<T>`:

```csharp
static T Max<T>(T a, T b) where T : IComparable<T>
{
    return a.CompareTo(b) > 0 ? a : b;
}

int z = Max(5, 10);               // 10
string last = Max("ant", "zoo");  // "zoo"
```

* C# 11: interface constraint ุงุฌุงุฒู ูุฑุงุฎูุงู **static virtual/abstract members** ูโุฏูุฏ.

---

### Other Constraints Examples

* **class/struct constraint**: ูุดุฎุต ูโฺฉูุฏ T ฺฉ reference type ุง value type ุงุณุช.
* **unmanaged constraint**: T ุจุงุฏ ฺฉ value type ุณุงุฏู ุง struct ุจุฏูู reference types ุจุงุดุฏ.
* **new() constraint**: ุงุฌุงุฒู ุณุงุฎุช instance ุจุง `new T()`:

```csharp
static void Initialize<T>(T[] array) where T : new()
{
    for (int i = 0; i < array.Length; i++)
        array[i] = new T();
}
```

* **naked type constraint**: ฺฉ type parameter ุจุงุฏ ุงุฒ ุฏฺฏุฑ ูุดุชู ุดูุฏ:

```csharp
class Stack<T>
{
    Stack<U> FilteredStack<U>() where U : T {...}
}
```

### Subclassing Generic Types ๐งฌ

ฺฉ ฺฉูุงุณ generic ูโุชูุงูุฏ ูุงููุฏ ฺฉูุงุณ ูุนููู subclass ุดูุฏ. ฺูุฏ ุญุงูุช ูุฌูุฏ ุฏุงุฑุฏ:

1. **SubClass ุจุง ููุงู ูพุงุฑุงูุชุฑ ููุน ุจุงุฒ ุจุงู ูโูุงูุฏ**:

```csharp
class Stack<T> { ... }
class SpecialStack<T> : Stack<T> { ... }
```

2. **SubClass ููุน ูพุงุฑุงูุชุฑ ุฑุง ุจู ฺฉ ููุน ูุดุฎุต ูโุจูุฏุฏ**:

```csharp
class IntStack : Stack<int> { ... }
```

3. **SubClass ูโุชูุงูุฏ ูพุงุฑุงูุชุฑ ููุน ุฌุฏุฏ ูุนุฑู ฺฉูุฏ**:

```csharp
class List<T> { ... }
class KeyedList<T, TKey> : List<T> { ... }
```

* ุฏุฑ ูุงูุนุ ุชูุงู type argumentูุง ุฏุฑ subclass **fresh** ูุณุชูุฏ ู ูโุชูุงู ูุงูโูุง ุฌุฏุฏ ู ูุนูุงุฏุงุฑุชุฑ ุจุฑุง ุขููุง ุงูุชุฎุงุจ ฺฉุฑุฏ:

```csharp
class KeyedList<TElement, TKey> : List<TElement> { ... }
```

---

### Self-Referencing Generic Declarations ๐

ฺฉ ููุน ูโุชูุงูุฏ ุฎูุฏุด ุฑุง ุจู ุนููุงู **concrete type** ูุนุฑู ฺฉูุฏ:

```csharp
public interface IEquatable<T> { bool Equals(T obj); }

public class Balloon : IEquatable<Balloon>
{
    public string Color { get; set; }
    public int CC { get; set; }
    public bool Equals(Balloon b)
    {
        if (b == null) return false;
        return b.Color == Color && b.CC == CC;
    }
}
```

ููฺูู ุงูโูุง ูุงููู ูุณุชูุฏ:

```csharp
class Foo<T> where T : IComparable<T> { ... }
class Bar<T> where T : Bar<T> { ... }
```

---

### Static Data in Generic Types ๐พ

* **Static data** ููุญุตุฑ ุจู ูุฑ **closed type** ุงุณุช:

```csharp
class Bob<T> { public static int Count; }

Console.WriteLine(++Bob<int>.Count);    // 1
Console.WriteLine(++Bob<int>.Count);    // 2
Console.WriteLine(++Bob<string>.Count); // 1
Console.WriteLine(++Bob<object>.Count); // 1
```

---

### Type Parameters and Conversions โ๏ธ

C# ฺูุฏ ููุน ุชุจุฏู ุฑุง ูพุดุชุจุงู ูโฺฉูุฏ:

* Numeric
* Reference
* Boxing/unboxing
* Custom (operator overloading)

ุงูุง ุจุง **generic type parameters**ุ ููุน ุฏูู ุฏุฑ ุฒูุงู ฺฉุงููพุงู ูุดุฎุต ูุณุชุ ูพุณ ููฺฉู ุงุณุช **ุงุจูุงู** ุงุฌุงุฏ ุดูุฏ.

ูุซุงู:

```csharp
StringBuilder Foo<T>(T arg)
{
    if (arg is StringBuilder)
        return (StringBuilder)arg; // ุฎุทุง ุฏุฑ ฺฉุงููพุงู
}
```

ุฑุงู ุญูโูุง:

1. ุงุณุชูุงุฏู ุงุฒ `as` (ุจโุงุจูุงู):

```csharp
StringBuilder sb = arg as StringBuilder;
if (sb != null) return sb;
```

2. ุง ุงุจุชุฏุง cast ุจู `object` ู ุณูพุณ ุจู ููุน ููุฑุฏ ูุธุฑ:

```csharp
return (StringBuilder)(object)arg;
```

> Unboxing ูู ูโุชูุงูุฏ ุงุจูุงู ุงุฌุงุฏ ฺฉูุฏ:
>
> ```csharp
> int Foo<T>(T x) => (int)x;  // ุฎุทุง ฺฉุงููพุงู
> int Foo<T>(T x) => (int)(object)x; // ุตุญุญ
> ```

---

### Covariance & Contravariance ๐

* **Covariance**: ุงฺฏุฑ `A` ุจู `B` ูุงุจู ุชุจุฏู ุจุงุดุฏุ ููุน generic `X<A>` ูโุชูุงูุฏ ุจู `X<B>` ุชุจุฏู ุดูุฏ.
* ููุท ุจุฑุง **implicit reference conversions** ุงุนูุงู ูโุดูุฏ (ูุซู subclass ุง interface implementation).
* **Classes** ูพุดุชุจุงู ููโฺฉููุฏุ ุงูุง **interfaces ู delegates** ู **arrays** ูพุดุชุจุงู ูโฺฉููุฏ.

ูุซุงู ุนุฏู covariance:

```csharp
class Animal {}
class Bear : Animal {}
class Camel : Animal {}

Stack<Bear> bears = new Stack<Bear>();
Stack<Animal> animals = bears;  // ุฎุทุง ฺฉุงููพุงู
animals.Push(new Camel());      // ุงฺฏุฑ ูุฌุงุฒ ุจูุฏุ runtime error
```

ุฑุงู ุญูโูุง:

1. ูุชุฏ generic ุจุง constraint ุจููุณู:

```csharp
class ZooCleaner
{
    public static void Wash<T>(Stack<T> animals) where T : Animal { ... }
}

Stack<Bear> bears = new Stack<Bear>();
ZooCleaner.Wash(bears);
```

2. ุง Stack<T> ุฑุง ุฑู interface ุจุง **covariant type parameter** ุชุนุฑู ฺฉูู.

---

### Arrays ู Covariance โ๏ธ

* Arrayูุง ุงุฒ ูุธุฑ ุชุงุฑุฎ covariant ูุณุชูุฏ:

```csharp
Bear[] bears = new Bear[3];
Animal[] animals = bears;  // OK
```

* ุงูุง **assignments ูุงุฏุฑุณุช ููฺฉู ุงุณุช runtime error ุจุฏูุฏ**:

```csharp
animals[0] = new Camel();  // Runtime error
```

### ุงุนูุงู ฺฉ ูพุงุฑุงูุชุฑ ููุน ฺฉููุงุฑุงูุช ๐

ูพุงุฑุงูุชุฑูุง ููุน ุฏุฑ **interfaces** ู **delegates** ูโุชูุงููุฏ ุจุง ุนูุงูุชโฺฏุฐุงุฑ ุจุง **modifer `out`** ฺฉููุงุฑุงูุช ุงุนูุงู ุดููุฏ. ุงู **modifer** ุชุถูู ูโฺฉูุฏ ฺฉู ุจุฑุฎูุงู ุขุฑุงูโูุงุ ูพุงุฑุงูุชุฑูุง ููุน ฺฉููุงุฑุงูุช ฺฉุงููุงู **ุงูู ุงุฒ ูุธุฑ ููุน (type-safe)** ูุณุชูุฏ.

ูโุชูุงูู ุงู ููุถูุน ุฑุง ุจุง ฺฉูุงุณ `Stack<T>` ุฎูุฏ ูุดุงู ุฏููุ ุจู ุทูุฑ ฺฉู ุขู ุฑุง ุจู ุดฺฉู ุฒุฑ ูพุงุฏูโุณุงุฒ ฺฉูู:

```csharp
public interface IPoppable<out T> { T Pop(); }
```

ุนูุงูุช `out` ุฑู `T` ูุดุงู ูโุฏูุฏ ฺฉู `T` ุชููุง ุฏุฑ **ูููุนุชโูุง ุฎุฑูุฌ** (ูุซูุงู ููุน ุจุงุฒฺฏุดุช ูุชุฏูุง) ุงุณุชูุงุฏู ูโุดูุฏ. ุงู ุนูุงูุชุ ูพุงุฑุงูุชุฑ ููุน ุฑุง ฺฉููุงุฑุงูุช ฺฉุฑุฏู ู ุงุฌุงุฒู ูโุฏูุฏ ฺฉุงุฑูุง ุฒุฑ ุฑุง ุงูุฌุงู ุฏูู:

```csharp
var bears = new Stack<Bear>();
bears.Push(new Bear());
// Bears ูพุงุฏูโุณุงุฒ IPoppable<Bear> ุฑุง ุฏุงุฑุฏ. ูโุชูุงูู ุขู ุฑุง ุจู IPoppable<Animal> ุชุจุฏู ฺฉูู:
IPoppable<Animal> animals = bears;   // ูุงููู
Animal a = animals.Pop();
```

ุชุจุฏู ุงุฒ `bears` ุจู `animals` ุชูุณุท ฺฉุงููพุงูุฑ ูุฌุงุฒ ุงุณุชุ ุฒุฑุง **ูพุงุฑุงูุชุฑ ููุน ฺฉููุงุฑุงูุช ุงุณุช**. ุงู ุชุจุฏู **ุงูู ุงุฒ ูุธุฑ ููุน** ุงุณุชุ ุฒุฑุง ูููุนุช ฺฉู ฺฉุงููพุงูุฑ ูโุฎูุงูุฏ ุงุฒ ุขู ุฌููฺฏุฑ ฺฉูุฏโูุฑุงุฑ ุฏุงุฏู ฺฉ **Camel** ุฏุฑ ุงุณุชฺฉโุงูฺฉุงูโูพุฐุฑ ูุณุชุ ฺุฑุง ฺฉู ูฺ ุฑุงู ุจุฑุง ูุฑุณุชุงุฏู Camel ุจู ฺฉ interface ฺฉู `T` ุชููุง ุฏุฑ ุฎุฑูุฌ ุธุงูุฑ ูโุดูุฏุ ูุฌูุฏ ูุฏุงุฑุฏ.

๐ก ฺฉููุงุฑุงูุณ (ู ฺฉุงูุชุฑฺฉููุงุฑุงูุณ) ุฏุฑ interfaces ูุนูููุงู **ูุตุฑู ูโุดูุฏ** ู ฺฉูุชุฑ ูพุด ูโุขุฏ ฺฉู ูุงุฒ ุจุงุดุฏ **interfaces ฺฉููุงุฑุงูุช ุจููุณุฏ**.

ูฺฉุชู ุฌุงูุจ: ูพุงุฑุงูุชุฑูุง ูุชุฏ ฺฉู ุจุง `out` ุนูุงูุชโฺฏุฐุงุฑ ุดุฏูโุงูุฏุ ุจู ุฏูู ูุญุฏูุฏุชโูุง CLRุ **ูุงุจู ฺฉููุงุฑุงูุณ ูุณุชูุฏ**.

ูโุชูุงูู ุงุฒ ูุงุจูุช **cast ฺฉููุงุฑุงูุช** ุจุฑุง ุญู ูุดฺฉู **ูุงุจูุช ุงุณุชูุงุฏู ูุฌุฏุฏ (reusability)** ฺฉู ูุจูุงู ุชูุถุญ ุฏุงุฏู ุดุฏุ ุงุณุชูุงุฏู ฺฉูู:

```csharp
public class ZooCleaner
{
    public static void Wash(IPoppable<Animal> animals) { ... }
}
```

๐ก **interfaces `IEnumerator<T>` ู `IEnumerable<T>`** ฺฉู ุฏุฑ ูุตู ท ุชูุถุญ ุฏุงุฏู ุดุฏูโุงูุฏุ ุฏุงุฑุง ูพุงุฑุงูุชุฑ ููุน ฺฉููุงุฑุงูุช `T` ูุณุชูุฏ. ุงู ุจุงุนุซ ูโุดูุฏ ุจุชูุงูุฏุ ุจุฑุง ูุซุงูุ `IEnumerable<string>` ุฑุง ุจู `IEnumerable<object>` ุชุจุฏู ฺฉูุฏ.

ฺฉุงููพุงูุฑ **ุฎุทุง ุงุฌุงุฏ ูโฺฉูุฏ** ุงฺฏุฑ ูพุงุฑุงูุชุฑ ููุน ฺฉููุงุฑุงูุช ุฑุง ุฏุฑ ฺฉ **ูููุนุช ูุฑูุฏ** (ูุซูุงู ูพุงุฑุงูุชุฑ ูุชุฏ ุง property ูุงุจู ููุดุชู) ุงุณุชูุงุฏู ฺฉูุฏ.

---

### ฺฉููุงุฑุงูุณ (ู ฺฉุงูุชุฑฺฉููุงุฑุงูุณ) ู ูุญุฏูุฏุชโูุง โ๏ธ

ฺฉููุงุฑุงูุณ ู ฺฉุงูุชุฑฺฉููุงุฑุงูุณ **ููุท ุจุฑุง ุนูุงุตุฑ ุจุง ุชุจุฏู ูุฑุฌุน (reference conversion)** ฺฉุงุฑ ูโฺฉูุฏโูู ุจุฑุง ุชุจุฏูโูุง boxing. ุงู ูุงููู ูู ุจุฑุง **variance ูพุงุฑุงูุชุฑ ููุน** ู ูู ุจุฑุง **variance ุขุฑุงูโูุง** ุงุนูุงู ูโุดูุฏ. ุจูุงุจุฑุงู ุงฺฏุฑ ูุชุฏ ูพุงุฑุงูุชุฑ ุงุฒ ููุน `IPoppable<object>` ุจูพุฐุฑุฏุ ูโุชูุงู ุขู ุฑุง ุจุง `IPoppable<string>` ูุฑุงุฎูุงู ฺฉุฑุฏ ุงูุง **ูู ุจุง `IPoppable<int>`**.

---

### ฺฉุงูุชุฑฺฉููุงุฑุงูุณ ๐

ูุฑุถ ฺฉูุฏ `A` ูุงุจูุช ุชุจุฏู ูุฑุฌุน ุจู `B` ุฑุง ุฏุงุฑุฏ. ุงฺฏุฑ `X<A>` ูุงุจูุช ุชุจุฏู ุจู `X<B>` ุฑุง ุฏุงุดุชู ุจุงุดุฏุ ูพุงุฑุงูุชุฑ ููุน `X` ฺฉููุงุฑุงูุช ุงุณุช.
ฺฉุงูุชุฑฺฉููุงุฑุงูุณ ุฒูุงู ุงุณุช ฺฉู ุจุชูุงูุฏ **ุฏุฑ ุฌูุช ูุนฺฉูุณ** ุชุจุฏู ฺฉูุฏโุงุฒ `X<B>` ุจู `X<A>`. ุงู ุฒูุงู ุงูฺฉุงูโูพุฐุฑ ุงุณุช ฺฉู **ูพุงุฑุงูุชุฑ ููุน ุชููุง ุฏุฑ ูููุนุชโูุง ูุฑูุฏ ุงุณุชูุงุฏู ุดูุฏ** ู ุจุง `in` ุนูุงูุชโฺฏุฐุงุฑ ุดูุฏ.

ุจุง ฺฏุณุชุฑุด ูุซุงู ูุจูุ ูุฑุถ ฺฉูุฏ ฺฉูุงุณ `Stack<T>` ุงู interface ุฑุง ูพุงุฏูโุณุงุฒ ูโฺฉูุฏ:

```csharp
public interface IPushable<in T> { void Push(T obj); }
```

ุงฺฉููู ูโุชูุงูู ูุงููู ุนูู ฺฉูู:

```csharp
IPushable<Animal> animals = new Stack<Animal>();
IPushable<Bear> bears = animals;    // ูุงููู
bears.Push(new Bear());
```

ูฺ ุนุถู ุฏุฑ `IPushable` ููุน `T` ุฑุง ุฎุฑูุฌ ููโุฏูุฏุ ุจูุงุจุฑุงู ููโุชูุงูู ุจุง ุชุจุฏู `animals` ุจู `bears` ุฏฺุงุฑ ูุดฺฉู ุดูู (ูุซูุงู ุฑุงู ุจุฑุง Pop ฺฉุฑุฏู ูุฌูุฏ ูุฏุงุฑุฏ).

ฺฉูุงุณ `Stack<T>` ูุง ูโุชูุงูุฏ ููุฒูุงู **`IPushable<T>` ู `IPoppable<T>`** ุฑุง ูพุงุฏูโุณุงุฒ ฺฉูุฏุ ุญุช ุงฺฏุฑ `T` ุฏุฑ ุฏู interface ุจุง **annotaionโูุง variance ูุฎุงูู** ุจุงุดุฏ! ุงู ฺฉุงุฑ ุงูฺฉุงูโูพุฐุฑ ุงุณุช ุฒุฑุง **variance ุจุงุฏ ุงุฒ ุทุฑู interface ุงุนูุงู ุดูุฏุ ูู ฺฉูุงุณ**ุ ุจูุงุจุฑุงูุ ูุจู ุงุฒ ุงูุฌุงู ุชุจุฏู variantุ ุจุงุฏ ุงุฒ ุฏุฏฺฏุงู IPoppable ุง IPushable ูุชุนูุฏ ุดูุฏ. ุงู ุฏุฏฺฏุงู ุณูพุณ ุดูุง ุฑุง ุจู ุนููุงุช ูุงููู ุชุญุช ููุงูู variance ูุญุฏูุฏ ูโฺฉูุฏ.

๐ก ุงู ุชูุถุญ ูโุฏูุฏ ฺุฑุง **ฺฉูุงุณโูุง ุงุฌุงุฒู ูพุงุฑุงูุชุฑ ููุน variant ูุฏุงุฑูุฏ**: ูพุงุฏูโุณุงุฒโูุง ูุงูุน ูุนูููุงู ูุงุฒ ุฏุงุฑูุฏ ุฏุงุฏูโูุง **ุฏุฑ ูุฑ ุฏู ุฌูุช ุฌุฑุงู ุฏุงุดุชู ุจุงุดูุฏ**.

---

### ูุซุงู ุฏฺฏุฑ: IComparer<in T> ๐งฎ

ุฏุฑ ูุถุง ูุงู **System**:

```csharp
public interface IComparer<in T>
{
    // ููุฏุงุฑ ูุณุจุช ุชุฑุชุจ a ู b ุฑุง ุจุฑูโฺฏุฑุฏุงูุฏ
    int Compare(T a, T b);
}
```

ฺูู ุงู interface ุฏุงุฑุง ูพุงุฑุงูุชุฑ ููุน ฺฉุงูุชุฑฺฉููุงุฑุงูุช `T` ุงุณุชุ ูโุชูุงูู ุงุฒ ฺฉ `IComparer<object>` ุจุฑุง ููุงุณู ุฏู ุฑุดุชู ุงุณุชูุงุฏู ฺฉูู:

```csharp
var objectComparer = Comparer<object>.Default; // objectComparer ูพุงุฏูโุณุงุฒ IComparer<object>
IComparer<string> stringComparer = objectComparer;
int result = stringComparer.Compare("Brett", "Jemaine");
```

ููุงููุฏ ฺฉููุงุฑุงูุณุ ฺฉุงููพุงูุฑ **ุฎุทุง ฺฏุฒุงุฑุด ูโุฏูุฏ** ุงฺฏุฑ ูพุงุฑุงูุชุฑ ููุน ฺฉุงูุชุฑฺฉููุงุฑุงูุช ุฑุง ุฏุฑ **ูููุนุช ุฎุฑูุฌ** (ูุซูุงู ููุฏุงุฑ ุจุงุฒฺฏุดุช ุง property ูุงุจู ุฎูุงูุฏู) ุงุณุชูุงุฏู ฺฉูุฏ.

---

### C# Generics ุฏุฑ ููุงุณู ุจุง C++ Templates โ๏ธ

**Generics ุฏุฑ C#** ูุดุงุจู **templates ุฏุฑ C++** ูุณุชูุฏ ุงูุง ุจู ุดฺฉู ูุชูุงูุช ุนูู ูโฺฉููุฏ. ุฏุฑ ูุฑ ุฏู ุญุงูุชุ ฺฉ **ุชุฑฺฉุจ ุจู ุชููุฏฺฉููุฏู ู ูุตุฑูโฺฉููุฏู** ุตูุฑุช ูโฺฏุฑุฏ ฺฉู ุฏุฑ ุขู **placeholder typeูุง ุชููุฏฺฉููุฏู** ุชูุณุท ูุตุฑูโฺฉููุฏู ูพุฑ ูโุดููุฏ.

ุจุง ุงู ุญุงูุ ุฏุฑ **C# generics**ุ ุชููุฏฺฉููุฏูโูุง (open types ูุงููุฏ `List<T>`) ูโุชูุงููุฏ ุจู ฺฉ **ฺฉุชุงุจุฎุงูู ฺฉุงููพุงู ุดููุฏ** (ูุซู `mscorlib.dll`) ฺูู ุชุฑฺฉุจ ุชููุฏฺฉููุฏู ู ูุตุฑูโฺฉููุฏู ฺฉู ููุฌุฑ ุจู closed typeูุง ูโุดูุฏุ **ููุท ุฏุฑ ุฒูุงู ุงุฌุฑุง ุงุชูุงู ูโุงูุชุฏ**.

ุฏุฑ C++ templatesุ ุงู ุชุฑฺฉุจ ุฏุฑ **ุฒูุงู ฺฉุงููพุงู** ุงูุฌุงู ูโุดูุฏุ ุจูุงุจุฑุงู **ฺฉุชุงุจุฎุงููโูุง template ุจู ุตูุฑุช DLL ููุชุดุฑ ููโุดููุฏ** ู ููุท ุจู ุนููุงู **ฺฉุฏ ููุจุน** ูุฌูุฏ ุฏุงุฑูุฏ. ุงู ุจุงุนุซ ูโุดูุฏ ุจุฑุฑุณ ู ุงุฌุงุฏ dynamic ููุนโูุง ูพุงุฑุงูุชุฑ ุฏุดูุงุฑ ุจุงุดุฏ.

---

### ูุซุงู Max ุฏุฑ C# ู C++

ุฏุฑ C#:

```csharp
static T Max<T>(T a, T b) where T : IComparable<T>
  => a.CompareTo(b) > 0 ? a : b;
```

ฺุฑุง ููโุชูุงูู ุงูุทูุฑ ูพุงุฏู ฺฉููุ

```csharp
static T Max<T>(T a, T b)
  => (a > b ? a : b); // ุฎุทุง ฺฉุงููพุงู
```

ฺูู Max ุจุงุฏ **ฺฉ ุจุงุฑ ฺฉุงููพุงู ุดูุฏ ู ุจุฑุง ููู ููุนโูุง T ฺฉุงุฑ ฺฉูุฏ**. ฺฉุงููพุงู ููโุชูุงูุฏ ูููู ุดูุฏ ุฒุฑุง ุนููฺฏุฑ `>` ูุนูุง ฺฉููุงุฎุช ุจุฑุง ููู ููุนโูุง ูุฏุงุฑุฏโุฏุฑ ูุงูุนุ ููู Tูุง ุญุช ุนููฺฏุฑ `>` ูุฏุงุฑูุฏ.

ุฏุฑ ููุงุจูุ ุฏุฑ C++:

```cpp
template <class T> 
T Max(T a, T b)
{
    return a > b ? a : b;
}
```

ุงู ฺฉุฏ **ุจุฑุง ูุฑ ููุฏุงุฑ T ุฌุฏุงฺฏุงูู ฺฉุงููพุงู ูโุดูุฏ** ู ูุนูุง `>` ุฑุง ุจุฑุง ููุน ุฎุงุต ุฎูุฏ ูโฺฏุฑุฏุ ู ุงฺฏุฑ ููุน ุงุฒ `>` ูพุดุชุจุงู ูฺฉูุฏุ ฺฉุงููพุงู ุฎุทุง ูโุฏูุฏ.
