---
layout: layout.njk
title:  ุงุณูุจูโูุง (Assemblies)
---
# ุฏุฑุณ ููุฏูู:  ุงุณูุจูโูุง (Assemblies)

ฺฉ **assembly** ูุงุญุฏ ูพุงูโุง ุจุฑุง ุงุณุชูุฑุงุฑ (deployment) ุฏุฑ .NET ุงุณุช ู ููฺูู ูุญูุธูโุง ุจุฑุง ุชูุงู **type**ูุง ุจู ุดูุงุฑ ูโุขุฏ. ฺฉ ุงุณูุจู ุดุงูู **type**ูุง ฺฉุงููพุงูโุดุฏู ุจู ููุฑุงู ฺฉุฏ **Intermediate Language (IL)**ุ ููุงุจุน ุงุฌุฑุง (**runtime resources**) ู ุงุทูุงุนุงุช ุจุฑุง ูุฏุฑุช ูุณุฎูโูุง ู ุงุฑุฌุงุน ุจู ุณุงุฑ ุงุณูุจูโูุง ุงุณุช. ููฺูู ุงุณูุจู ฺฉ ูุฑุฒ ุจุฑุง **type resolution** ุชุนุฑู ูโฺฉูุฏ. ุฏุฑ .NETุ ฺฉ ุงุณูุจู ูุนูููุงู ุดุงูู ฺฉ ูุงู ุจุง ูพุณููุฏ `.dll` ุงุณุช.

ุฒูุงู ฺฉู ฺฉ ุจุฑูุงูู ุงุฌุฑุง ุฏุฑ .NET ูโุณุงุฒุฏุ ุฏู ูุงู ุงุฌุงุฏ ูโุดูุฏ:

* ฺฉ ุงุณูุจู (.dll)
* ฺฉ **executable launcher** (.exe) ฺฉู ูุชูุงุณุจ ุจุง ูพูุชูุฑู ุงุณุช ฺฉู ูุฏู ูุฑุงุฑ ุฏุงุฏูโุงุฏ.

ุงู ุจุง ฺุฒ ฺฉู ุฏุฑ **.NET Framework** ุงุชูุงู ูโุงูุชุฏ ูุชูุงูุช ุงุณุชุ ุฌุง ฺฉู ฺฉ **portable executable (PE) assembly** ุชููุฏ ูโุดูุฏ. ฺฉ PE ุจุง ูพุณููุฏ `.exe` ูู ุจูโุนููุงู ุงุณูุจู ู ูู ุจูโุนููุงู ุจุฑูุงูู ุงุฌุฑุง ุนูู ูโฺฉูุฏ ู ูโุชูุงูุฏ ุจูโุทูุฑ ููุฒูุงู ูุณุฎูโูุง ณฒ ู ถด ุจุช ููุฏูุฒ ุฑุง ูุฏู ูุฑุงุฑ ุฏูุฏ.

ุงฺฉุซุฑ **type**ูุง ุงู ูุตู ุงุฒ ูุถุง ูุงูโูุง ุฒุฑ ุขูุฏูโุงูุฏ:

* `System.Reflection`
* `System.Resources`
* `System.Globalization`

---

### ๐น ูุญุชูุง ฺฉ ุงุณูุจู (Whatโs in an Assembly) ๐น

ฺฉ ุงุณูุจู ุดุงูู ฺูุงุฑ ููุน ูุญุชูุง ุงุณุช:

1. **Assembly Manifest**

   * ุงุทูุงุนุงุช ุจู **CLR** ูโุฏูุฏุ ูุงููุฏ ูุงู ุงุณูุจูุ ูุณุฎู ุขู ู ุณุงุฑ ุงุณูุจูโูุง ฺฉู ุจู ุขู ุงุฑุฌุงุน ุฏุงุฑูุฏ.

2. **Application Manifest**

   * ุงุทูุงุนุงุช ุจู ุณุณุชูโุนุงูู ูโุฏูุฏุ ูุงููุฏ ูุญูู ุงุณุชูุฑุงุฑ ุงุณูุจู ู ุงูโฺฉู ุขุง ูุงุฒ ุจู ุฏุณุชุฑุณ ูุฏุฑุช ูุฌูุฏ ุฏุงุฑุฏ ุง ุฎุฑ.

3. **Compiled Types**

   * ฺฉุฏ IL ฺฉุงููพุงูโุดุฏู ู **metadata** ูุฑุจูุท ุจู **type**ูุง ุชุนุฑูโุดุฏู ุฏุฑ ุงุณูุจู.

4. **Resources**

   * ุณุงุฑ ุฏุงุฏูโูุง ุชุนุจูโุดุฏู ุฏุฑ ุงุณูุจูุ ูุงููุฏ ุชุตุงูุฑ ู ูุชูโูุง ูุงุจู ุจููโุณุงุฒ (**localizable text**).

ุงุฒ ุงู ูุงูุ ุชููุง **assembly manifest** ุงุฌุจุงุฑ ุงุณุชุ ูุฑฺูุฏ ฺฉู ุชูุฑุจุงู ููุดู ฺฉ ุงุณูุจู ุดุงูู **type**ูุง ฺฉุงููพุงูโุดุฏู ูู ูุณุช (ูฺฏุฑ ุงูฺฉู ฺฉ **resource assembly** ุจุงุดุฏ. ุจุฑุง ุฌุฒุฆุงุช ุจู ุจุฎุด โResources and Satellite Assembliesโ ุฏุฑ ุตูุญู ททถ ูุฑุงุฌุนู ฺฉูุฏ).

---

### ๐น Assembly Manifest ๐น

**Assembly Manifest** ุฏู ูุฏู ุฏุงุฑุฏ:

* ุงุณูุจู ุฑุง ุจู ูุญุท ูุฒุจุงู ูุฏุฑุชโุดุฏู (**managed hosting environment**) ูุนุฑู ูโฺฉูุฏ.
* ุจูโุนููุงู ฺฉ ููุฑุณุช ุจุฑุง **module**ูุงุ **type**ูุง ู ููุงุจุน ููุฌูุฏ ุฏุฑ ุงุณูุจู ุนูู ูโฺฉูุฏ.

ุจูุงุจุฑุงูุ ุงุณูุจูโูุง ุฎูุฏุชูุตู (**self-describing**) ูุณุชูุฏ. ูุตุฑูโฺฉููุฏู ูโุชูุงูุฏ ุชูุงู ุฏุงุฏูโูุงุ **type**ูุง ู ุนููฺฉุฑุฏูุง ฺฉ ุงุณูุจู ุฑุง ุจุฏูู ูุงุฒ ุจู ูุงูโูุง ุงุถุงู ฺฉุดู ฺฉูุฏ.

**Assembly Manifest** ุจูโุตูุฑุช ุฏุณุช ุงุถุงูู ููโุดูุฏุ ุจูฺฉู ุจูโุทูุฑ ุฎูุฏฺฉุงุฑ ุฏุฑ ููฺฏุงู ฺฉุงููพุงู ุฏุงุฎู ุงุณูุจู ุฌุงุณุงุฒ ูโุดูุฏ.

---

### ๐น ุฏุงุฏูโูุง ููู ุฐุฎุฑูโุดุฏู ุฏุฑ Manifest ๐น

* ูุงู ุณุงุฏูโ ุงุณูุจู
* ุดูุงุฑู ูุณุฎู (**AssemblyVersion**)
* ฺฉูุฏ ุนููู ู ูุด ุงูุถุง ุดุฏูุ ุฏุฑ ุตูุฑุช ุฏุงุดุชู **strong name**
* ููุฑุณุช ุงุณูุจูโูุง ูุฑุฌุนุ ุดุงูู ูุณุฎู ู ฺฉูุฏ ุนููู ุขูโูุง
* ููุฑุณุช **type**ูุง ุชุนุฑูโุดุฏู ุฏุฑ ุงุณูุจู
* ูุฑููฺฏ ฺฉู ูุฏู ูุฑุงุฑ ุฏุงุฏู ุดุฏูุ ุฏุฑ ุตูุฑุช **satellite assembly** (**AssemblyCulture**)

**ุฏุงุฏูโูุง ุงุทูุงุนุงุช ุฏฺฏุฑ ุดุงูู:**

* ุนููุงู ู ุชูุถุญุงุช ฺฉุงูู (**AssemblyTitle ู AssemblyDescription**)
* ุงุทูุงุนุงุช ุดุฑฺฉุช ู ุญู ูุดุฑ (**AssemblyCompany ู AssemblyCopyright**)
* ูุณุฎู ููุงุด (**AssemblyInformationalVersion**)
* ูฺฺฏโูุง ุงุถุงู ุจุฑุง ุฏุงุฏูโูุง ุณูุงุฑุด

ุจุฎุด ุงุฒ ุงู ุฏุงุฏูโูุง ุงุฒ ูพุงุฑุงูุชุฑูุง ูุฑูุฏ ุจู ฺฉุงููพุงูุฑ ุงุณุชุฎุฑุงุฌ ูโุดููุฏุ ูุงููุฏ ููุฑุณุช ุงุณูุจูโูุง ูุฑุฌุน ุง ฺฉูุฏ ุนููู ุจุฑุง ุงูุถุง ุงุณูุจู. ุจูู ุงุฒ **assembly attributes** ูโุขูุฏ (ฺฉู ุฏุฑ ูพุฑุงูุชุฒ ูุดุฎุต ุดุฏูโุงูุฏ).

---

### ๐น ูุดุงูุฏู ูุญุชูุงุช Manifest ๐น

ูโุชูุงูุฏ ูุญุชูุงุช **assembly manifest** ุฑุง ุจุง ุงุจุฒุงุฑ **.NET** ุจู ูุงู `ildasm.exe` ูุดุงูุฏู ฺฉูุฏ. ุฏุฑ ูุตู ุจุนุฏ (ฑธ) ุชูุถุญ ุฏุงุฏู ูโุดูุฏ ฺฉู ฺฺฏููู ูโุชูุงู ุงู ฺฉุงุฑ ุฑุง ุจูโุตูุฑุช ุจุฑูุงููโููุณ ุจุง **reflection** ุงูุฌุงู ุฏุงุฏ.

---

### ๐น ูุดุฎุต ฺฉุฑุฏู Assembly Attributes ๐น

ูฺฺฏโูุง ูุนููู ุงุณูุจู ุฑุง ูโุชูุงู ุฏุฑ **Visual Studio**ุ ุฏุฑ ุตูุญู Properties ูพุฑูฺู ู ุฏุฑ ุชุจ **Package** ูุดุฎุต ฺฉุฑุฏ. ุชูุธูุงุช ุงู ุชุจ ุจู ูุงู ูพุฑูฺู (.csproj) ุงุถุงูู ูโุดููุฏ.

ุจุฑุง ูุดุฎุต ฺฉุฑุฏู ูฺฺฏโูุง ฺฉู ุชูุณุท ุชุจ **Package** ูพุดุชุจุงู ููโุดููุฏุ ุง ุฏุฑ ุตูุฑุช ุนุฏู ฺฉุงุฑ ุจุง ูุงู .csprojุ ูโุชูุงูุฏ **assembly attributes** ุฑุง ุฏุฑ ฺฉุฏ ููุจุน ุชุนู ฺฉูุฏ (ุงุบูุจ ุฏุฑ ูุงู ุจู ูุงู `AssemblyInfo.cs`).

ูุซุงู: ุจุฑุง ุฏุณุชุฑุณ ุฏุงุฏู ุจู **type**ูุง ุฏุงุฎู ุจู ฺฉ ูพุฑูฺู ุชุณุช ูุงุญุฏ:

```csharp
using System.Runtime.CompilerServices;
[assembly: InternalsVisibleTo("MyUnitTestProject")]
```

---

### ๐น Application Manifest (ููุฏูุฒ) ๐น

**Application Manifest** ฺฉ ูุงู XML ุงุณุช ฺฉู ุงุทูุงุนุงุช ุฏุฑุจุงุฑูโ ุงุณูุจู ุจู ุณุณุชูโุนุงูู ููุชูู ูโฺฉูุฏ. ุงู ูุงู ุฏุฑ ููฺฏุงู ุณุงุฎุชุ ุจูโุนููุงู ฺฉ **Win32 resource** ุฏุงุฎู ูุงู ุงุฌุฑุง ูุฑุงุฑ ูโฺฏุฑุฏ. ุงฺฏุฑ ููุฌูุฏ ุจุงุดุฏุ ูุจู ุงุฒ ุจุงุฑฺฏุฐุงุฑ ุงุณูุจู ุชูุณุท CLR ุฎูุงูุฏู ุดุฏู ู ูพุฑุฏุงุฒุด ูโุดูุฏ ู ูโุชูุงูุฏ ูุญูู ุงุฌุฑุง ูุฑุขูุฏ ุจุฑูุงูู ุฏุฑ ููุฏูุฒ ุฑุง ุชุญุช ุชุฃุซุฑ ูุฑุงุฑ ุฏูุฏ.

ฺฉ **manifest** ุฏุฑ .NET ุฏุงุฑุง ุนูุตุฑ ุฑุดูโุง ุจู ูุงู `assembly` ุฏุฑ ูุถุง ูุงู XML ุฒุฑ ุงุณุช:

```xml
<?xml version="1.0" encoding="utf-8"?>
<assembly manifestVersion="1.0" xmlns="urn:schemas-microsoft-com:asm.v1">
  <!-- ูุญุชูุง manifest -->
</assembly>
```

ูุซุงู ฺฉู ุฏุฑุฎูุงุณุช ุฏุณุชุฑุณ ูุฏุฑุช (**administrative elevation**) ูโฺฉูุฏ:

```xml
<?xml version="1.0" encoding="utf-8"?>
<assembly manifestVersion="1.0" xmlns="urn:schemas-microsoft-com:asm.v1">
  <trustInfo xmlns="urn:schemas-microsoft-com:asm.v2">
    <security>
      <requestedPrivileges>
        <requestedExecutionLevel level="requireAdministrator" />
      </requestedPrivileges>
    </security>
  </trustInfo>
</assembly>
```

> โ๏ธ ุจุฑูุงููโูุง **UWP** ุฏุงุฑุง manifest ุจุณุงุฑ ูพฺุฏูโุชุฑ ูุณุชูุฏ ฺฉู ุฏุฑ ูุงู `Package.appxmanifest` ุชูุตู ุดุฏู ุงุณุช ู ุดุงูู ุงุนูุงู ูุงุจูุชโูุง ุจุฑูุงูู ุงุณุช ฺฉู ูุดุฎุต ูโฺฉูุฏ ุณุณุชูโุนุงูู ฺู ูุฌูุฒูุง ูโุฏูุฏ. ุณุงุฏูโุชุฑู ุฑูุด ุจุฑุง ูุฑุงุด ุงู ูุงูุ ุงุณุชูุงุฏู ุงุฒ **Visual Studio** ุงุณุช ฺฉู ุจุง ุฏูุจุงุฑ ฺฉูฺฉ ุฑู ูุงูุ ฺฉ ุฏุงููฺฏ ููุงุด ูโุฏูุฏ.

---

### ๐น ุงุณุชูุฑุงุฑ Application Manifest ๐น

ุจุฑุง ุงูุฒูุฏู ฺฉ **application manifest** ุจู ูพุฑูฺู .NET ุฏุฑ **Visual Studio**:

1. ุฑู ูพุฑูฺู ุฏุฑ **Solution Explorer** ุฑุงุณุชโฺฉูฺฉ ฺฉูุฏ.
2. ุงูุชุฎุงุจ ฺฉูุฏ **Add โ New Item**
3. ฺฏุฒูู **Application Manifest File** ุฑุง ุงูุชุฎุงุจ ฺฉูุฏ.

ูพุณ ุงุฒ ุณุงุฎุช ูพุฑูฺูุ **manifest** ุฏุงุฎู **output assembly** ุฌุงุณุงุฒ ูโุดูุฏ.

---

### ๐น Modules ๐น

ุงุจุฒุงุฑ `ildasm.exe` ูุฌูุฏ ฺฉ **application manifest** ุฌุงุณุงุฒโุดุฏู ุฑุง ุชุดุฎุต ููโุฏูุฏุ ุงูุง **Visual Studio** ููฺฏุงู ุฏูุจุงุฑ ฺฉูฺฉ ุฑู ุงุณูุจู ุฏุฑ **Solution Explorer** ูุดุงู ูโุฏูุฏ ฺฉู ุขุง manifest ููุฌูุฏ ุงุณุช ุง ุฎุฑ.

ุฏุฑ ูุงูุนุ ูุญุชูุงุช ฺฉ ุงุณูุจู ุฏุงุฎู ฺฉ **container** ูุงู ุจู ูุงู **module** ุจุณุชูโุจูุฏ ูโุดูุฏ. ูุฑ **module** ูุชูุงุธุฑ ุจุง ฺฉ ูุงู ุญุงู ูุญุชูุงุช ุงุณูุจู ุงุณุช. ุฏูู ุงู ูุงู ุงุถุงู ุงู ุงุณุช ฺฉู ุฏุฑ **.NET Framework** ุงูฺฉุงู ุชูุฒุน ฺฉ ุงุณูุจู ุฏุฑ ฺูุฏ ูุงู ูุฌูุฏ ุฏุงุฑุฏุ ุงูุง ุงู ูฺฺฏ ุฏุฑ **.NET 5+ ู .NET Core** ูุฌูุฏ ูุฏุงุฑุฏ.

๐ ุดฺฉู 17-1 ุฑุงุจุทู ุจู **assembly** ู **module** ุฑุง ูุดุงู ูโุฏูุฏ.

<div align="center">

![Conventions-UsedThis-Book](../../../assets/image/17/Table-17-1.jpeg)
</div>

ุงฺฏุฑฺู .NET ุงุฒ **multifile assemblies** ูพุดุชุจุงู ููโฺฉูุฏุ ฺฏุงู ูุงุฒู ุงุณุช ุงุฒ ูุงู ุงุถุงู **containership** ฺฉู **module**ูุง ุงุฌุงุฏ ูโฺฉููุฏุ ุขฺฏุงู ุจุงุดุฏ. ุณูุงุฑู ุงุตู ุงู ููุถูุน ุฏุฑ **reflection** ุงุณุช (ุจู ุจุฎุดโูุง ยซReflecting Assembliesยป ุฏุฑ ุตูุญู ธฒท ู ยซEmitting Assemblies and Typesยป ุฏุฑ ุตูุญู ธดฑ ูุฑุงุฌุนู ฺฉูุฏ).

---

### ๐น ฺฉูุงุณ Assembly ๐น

ฺฉูุงุณ **Assembly** ุฏุฑ ูุถุง ูุงู `System.Reflection` ุฏุฑูุงุฒูโุง ุจุฑุง ุฏุณุชุฑุณ ุจู **metadata** ุงุณูุจูโูุง ุฏุฑ ุฒูุงู ุงุฌุฑุง (**runtime**) ุงุณุช. ุฑูุดโูุง ูุฎุชูู ุจุฑุง ุจูโุฏุณุช ุขูุฑุฏู ฺฉ **assembly object** ูุฌูุฏ ุฏุงุฑุฏุ ุณุงุฏูโุชุฑู ุฑูุดุ ุงุณุชูุงุฏู ุงุฒ ูฺฺฏ **Assembly** ฺฉ **Type** ุงุณุช:

```csharp
Assembly a = typeof(Program).Assembly;
```

ููฺูู ูโุชูุงูุฏ ุจุง ูุฑุงุฎูุงู ฺฉ ุงุฒ **static method**ูุง ฺฉูุงุณ **Assembly** ฺฉ ุดุก ุงุณูุจู ุจูโุฏุณุช ุขูุฑุฏ:

* **GetExecutingAssembly**
  ุงุณูุจู ููุน ุฑุง ุจุฑูโฺฏุฑุฏุงูุฏ ฺฉู ุชุงุจุน ุฌุงุฑ ุฏุฑ ุขู ุชุนุฑู ุดุฏู ุงุณุช.

* **GetCallingAssembly**
  ุนููฺฉุฑุฏ ูุดุงุจู **GetExecutingAssembly** ุฑุง ุฏุงุฑุฏุ ุงูุง ุจุฑุง ุชุงุจุน ฺฉู ุชุงุจุน ุฌุงุฑ ุฑุง ูุฑุงุฎูุงู ฺฉุฑุฏู ุงุณุช.

* **GetEntryAssembly**
  ุงุณูุจูโุง ุฑุง ุจุฑูโฺฏุฑุฏุงูุฏ ฺฉู ูุชุฏ ูุฑูุฏ (**entry method**) ุงุตู ุจุฑูุงูู ุฑุง ุชุนุฑู ูโฺฉูุฏ.

ูพุณ ุงุฒ ุฏุงุดุชู ฺฉ **Assembly object**ุ ูโุชูุงูุฏ ุงุฒ **properties** ู **methods** ุขู ุจุฑุง ูพุฑุณโูุฌู **metadata** ุงุณูุจู ู ุจุงุฒุชุงุจ (**reflect**) ุจุฑ ุฑู **type**ูุง ุขู ุงุณุชูุงุฏู ฺฉูุฏ.

๐ ุฌุฏูู ฑท-ฑ ุฎูุงุตูโุง ุงุฒ ุงู ุชูุงุจุน ุฑุง ูุดุงู ูโุฏูุฏ.
<div align="center">

![Conventions-UsedThis-Book](../../../assets/image/17/Table-17-2.jpeg)
</div>

### ๐น ุงุณุงู ูู ู ุงูุถุง ุงุณูุจู (Strong Names and Assembly Signing) ๐น

ุฏุงุดุชู **strong name** ุจุฑุง ฺฉ ุงุณูุจู ุฏุฑ **.NET Framework** ุงููุช ุฏุงุดุชุ ุจู ุฏู ุฏูู:

* ุงูฺฉุงู ุจุงุฑฺฏุฐุงุฑ ุงุณูุจู ุฏุฑ **Global Assembly Cache (GAC)**.
* ุงูฺฉุงู ุงุฑุฌุงุน ุณุงุฑ **strongly named assemblies** ุจู ุขู.

ุฏุฑ **.NET 5+** ู **.NET Core** ุงู ููุถูุน ฺฉูุชุฑ ุงููุช ุฏุงุฑุฏุ ุฒุฑุง ุงู **runtime**ูุง ูู **global assembly cache** ุฏุงุฑูุฏ ู ูู ูุญุฏูุฏุช ุฏูู ุฑุง ุงุนูุงู ูโฺฉููุฏ.

ฺฉ **strongly named assembly** ููุช ฺฉุชุง ุฏุงุฑุฏ. ุงู ฺฉุงุฑ ุจุง ุงูุฒูุฏู ุฏู ูุทุนู **metadata** ุจู **manifest** ุงูุฌุงู ูโุดูุฏ:

* ฺฉ ุดูุงุฑู ฺฉุชุง ูุชุนูู ุจู ููุณูุฏฺฏุงู ุงุณูุจู
* ฺฉ **signed hash** ุงุฒ ุงุณูุจู ฺฉู ุซุงุจุช ูโฺฉูุฏ ุตุงุญุจ ุดูุงุฑู ฺฉุชุงุ ุงุณูุจู ุฑุง ุชููุฏ ฺฉุฑุฏู ุงุณุช

ุงู ูุฑุขูุฏ ูุงุฒููุฏ ฺฉ ุฌูุช **ฺฉูุฏ ุนููู/ุฎุตูุต** ุงุณุช. ฺฉูุฏ ุนููู ุดูุงุฑู ฺฉุชุง ุดูุงุณุง ุฑุง ูุฑุงูู ูโฺฉูุฏ ู ฺฉูุฏ ุฎุตูุต ุจุฑุง ุงูุถุง ุงุณุชูุงุฏู ูโุดูุฏ.

> โ๏ธ **Strong-name-signing** ุจุง **Authenticode-signing** ูุชูุงูุช ุงุณุช. **Authenticode** ุจุนุฏุงู ุฏุฑ ููู ูุตู ุชูุถุญ ุฏุงุฏู ุฎูุงูุฏ ุดุฏ.

ฺฉูุฏ ุนููู ุฏุฑ ุชุถูู ฺฉุชุง ุงุฑุฌุงุนุงุช ุจู ุงุณูุจูโูุง ุงุฑุฒุดููุฏ ุงุณุช: ฺฉ **strongly named assembly** ฺฉูุฏ ุนููู ุฑุง ุฏุฑ ููุช ุฎูุฏ ูุงุฑุฏ ูโฺฉูุฏ.

ุฏุฑ **.NET Framework**ุ ฺฉูุฏ ุฎุตูุต ุงุฒ ุชุบุฑ ู ุฏุณุชฺฉุงุฑ ุงุณูุจู ุฌููฺฏุฑ ูโฺฉูุฏุ ุฒุฑุง ุจุฏูู ฺฉูุฏ ุฎุตูุต ุดูุงุ ูฺโฺฉุณ ููโุชูุงูุฏ ูุณุฎู ุชุบุฑ ุงูุชู ุงุณูุจู ุฑุง ููุชุดุฑ ฺฉูุฏ ุจุฏูู ุงูฺฉู ุงูุถุง ุฎุฑุงุจ ุดูุฏ. ุฏุฑ ุนููุ ุงู ุจุฑุง ุจุงุฑฺฏุฐุงุฑ ุงุณูุจู ุฏุฑ **GAC** ฺฉุงุฑุจุฑุฏ ุฏุงุฑุฏ. ุฏุฑ **.NET 5+** ู **.NET Core** ุงูุถุง ฺฉูฺฉ ูุฏุงุฑุฏุ ุฒุฑุง ุจุฑุฑุณ ููโุดูุฏ.

ุงุถุงูู ฺฉุฑุฏู **strong name** ุจู ฺฉ ุงุณูุจู ูุจูุงู ยซุถุนูยป ูุงูโฺฏุฐุงุฑโุดุฏูุ ููุช ุขู ุฑุง ุชุบุฑ ูโุฏูุฏ. ุจู ููู ุฏููุ ุจูุชุฑ ุงุณุช ุงุฒ ุงุจุชุฏุง ุงฺฏุฑ ุงุญุชูุงู ูโุฏูุฏ ุงุณูุจู ุฏุฑ ุขูุฏู ุจู **strong name** ูุงุฒ ูพุฏุง ฺฉูุฏุ ุขู ุฑุง ุงุฒ ุงุจุชุฏุง ูู ูุงูโฺฏุฐุงุฑ ฺฉูุฏ.

---

### ๐น ฺฺฏููู ฺฉ ุงุณูุจู ุฑุง Strongly Name ฺฉูู ๐น

ุจุฑุง ุฏุงุฏู **strong name** ุจู ฺฉ ุงุณูุจูุ ุงุจุชุฏุง ฺฉ ุฌูุช ฺฉูุฏ ุนููู/ุฎุตูุต ุจุง ุงุจุฒุงุฑ `sn.exe` ุชููุฏ ฺฉูุฏ:

```bash
sn.exe -k MyKeyPair.snk
```

**Visual Studio** ูุงูุจุฑ ุจู ูุงู **Developer Command Prompt for VS** ูุตุจ ูโฺฉูุฏ ฺฉู ฺฉ **command prompt** ุจุง ูุณุฑ ุงุจุฒุงุฑูุง ุชูุณุนู (ูุงููุฏ `sn.exe`) ูุฑุงูู ูโุขูุฑุฏ.

ุงู ุฏุณุชูุฑ ฺฉ ุฌูุช ฺฉูุฏ ุฌุฏุฏ ุชููุฏ ูโฺฉูุฏ ู ุขู ุฑุง ุฏุฑ ูุงู ุจู ูุงู `MyKeyPair.snk` ุฐุฎุฑู ูโฺฉูุฏ. ุงฺฏุฑ ุจุนุฏุงู ุงู ูุงู ุฑุง ุงุฒ ุฏุณุช ุจุฏูุฏุ ุชูุงูุง ฺฉุงููพุงู ูุฌุฏุฏ ุงุณูุจู ุจุง ููุงู ููุช ุฑุง ุจูโุทูุฑ ุฏุงุฆู ุงุฒ ุฏุณุช ุฎูุงูุฏ ุฏุงุฏ.

ูโุชูุงูุฏ ุจุง ุงุณุชูุงุฏู ุงุฒ ุงู ูุงูุ ุงุณูุจู ุฑุง ุงูุถุง ฺฉูุฏ. ุฏุฑ **Visual Studio**:

1. ุจู **Project Properties** ุจุฑูุฏ
2. ุฏุฑ ุชุจ **Signing**ุ ฺฏุฒูู **Sign the assembly** ุฑุง ุงูุชุฎุงุจ ฺฉูุฏ
3. ูุงู `.snk` ุฎูุฏ ุฑุง ูุดุฎุต ฺฉูุฏ

ฺฉ ุฌูุช ฺฉูุฏ ูโุชูุงูุฏ ฺูุฏู ุงุณูุจู ุฑุง ุงูุถุง ฺฉูุฏุ ูุฑ ฺฉุฏุงู ูููุฒ ููุช ูุชูุงุฒ ุฎูุงููุฏ ุฏุงุดุชุ ุงฺฏุฑ ูุงู ุณุงุฏู ุขูโูุง ูุชูุงูุช ุจุงุดุฏ.

---

### ๐น ุงุณุงู ุงุณูุจู (Assembly Names) ๐น

ููุช ฺฉ ุงุณูุจู ุดุงูู ฺูุงุฑ ุจุฎุด ุงุฒ **metadata** ุฏุฑ **manifest** ุงุณุช:

* **ูุงู ุณุงุฏู (Simple Name)**
* **ูุณุฎู (Version)** โ ุงฺฏุฑ ููุฌูุฏ ูุจุงุดุฏ โ0.0.0.0โ ุงุณุช
* **ูุฑููฺฏ (Culture)** โ ุงฺฏุฑ satellite assembly ูุจุงุดุฏ โneutralโ ุงุณุช
* **Public Key Token** โ ุงฺฏุฑ **strongly named** ูุจุงุดุฏ โnullโ ุงุณุช

ูุงู ุณุงุฏู ุงุฒ ูฺฺฏโูุง ุงุณุชุฎุฑุงุฌ ููโุดูุฏุ ุจูฺฉู ุงุฒ ูุงู ูุงู ุงุตู ฺฉุงููพุงูโุดุฏู (ุจุฏูู ูพุณููุฏ) ูโุขุฏ. ูุซูุงู ูุงู ุณุงุฏู ุงุณูุจู `System.Xml.dll` ุจุฑุงุจุฑ ุจุง `System.Xml` ุงุณุช. ุชุบุฑ ูุงู ูุงูุ ูุงู ุณุงุฏู ุงุณูุจู ุฑุง ุชุบุฑ ููโุฏูุฏ.

ุดูุงุฑู ูุณุฎู ุงุฒ ูฺฺฏ **AssemblyVersion** ูโุขุฏ ู ุฑุดุชูโุง ุดุงูู ฺูุงุฑ ูุณูุช ุงุณุช:

```
major.minor.build.revision
```

ูุซุงู:

```csharp
[assembly: AssemblyVersion("2.5.6.7")]
```

ูุฑููฺฏ ุงุฒ ูฺฺฏ **AssemblyCulture** ฺฏุฑูุชู ูโุดูุฏ ู ุจุฑุง **satellite assembly**ูุง ฺฉุงุฑุจุฑุฏ ุฏุงุฑุฏ (ุฏุฑ ุจุฎุด ยซResources and Satellite Assembliesยป ุตูุญู ททถ ุชูุถุญ ุฏุงุฏู ุดุฏู ุงุณุช).

**Public Key Token** ุงุฒ **strong name** ููฺฏุงู ฺฉุงููพุงู ุจู ุฏุณุช ูโุขุฏ.

---

### ๐น ุงุณุงู ฺฉุงูู (Fully Qualified Names) ๐น

ฺฉ ูุงู ฺฉุงูู ุงุณูุจู ุฑุดุชูโุง ุงุณุช ฺฉู ุดุงูู ูุฑ ฺูุงุฑ ุจุฎุด ููุช ุงุณุชุ ุจู ุดฺฉู:

```
simple-name, Version=version, Culture=culture, PublicKeyToken=public-key
```

ูุซุงู: ูุงู ฺฉุงูู `System.Private.CoreLib.dll`:

```
System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e
```

ุงฺฏุฑ ูฺฺฏ **AssemblyVersion** ูุฌูุฏ ูุฏุงุดุชู ุจุงุดุฏุ ูุณุฎู ุจู ุตูุฑุช `0.0.0.0` ููุงุด ุฏุงุฏู ูโุดูุฏ. ุงฺฏุฑ unsigned ุจุงุดุฏุ **public key token** ุจุฑุงุจุฑ `null` ุงุณุช.

ูฺฺฏ **FullName** ฺฉ **Assembly object** ูุงู ฺฉุงูู ุขู ุฑุง ุจุฑูโฺฏุฑุฏุงูุฏ. ฺฉุงููพุงูุฑ ููุดู ุงุฒ ูุงู ฺฉุงูู ุจุฑุง ุซุจุช ุงุฑุฌุงุนุงุช ุจู ุงุณูุจู ุฏุฑ **manifest** ุงุณุชูุงุฏู ูโฺฉูุฏ.

> โ๏ธ ูุงู ฺฉุงูู ุงุณูุจู ุดุงูู ูุณุฑ ุฏุงุฑฺฉุชูุฑ ูุณุช. ุงูุชู ุงุณูุจู ุฏุฑ ุฏุงุฑฺฉุชูุฑ ุฏฺฏุฑ ููุถูุน ุฌุฏุงฺฏุงูู ุงุณุช ฺฉู ุฏุฑ ุจุฎุด ยซLoading, Resolving, and Isolating Assembliesยป ุตูุญู ทธณ ุชูุถุญ ุฏุงุฏู ูโุดูุฏ.

---

### ๐น ฺฉูุงุณ AssemblyName ๐น

ฺฉูุงุณ **AssemblyName** ุฏุงุฑุง ูฺฺฏโูุง typed ุจุฑุง ูุฑ ฺูุงุฑ ุจุฎุด ูุงู ฺฉุงูู ุงุณูุจู ุงุณุช. ุฏู ฺฉุงุฑุจุฑุฏ ุงุตู ุฏุงุฑุฏ:

* ุชุฌุฒู ุง ุณุงุฎุช ูุงู ฺฉุงูู ุงุณูุจู
* ุฐุฎุฑู ุฏุงุฏูโูุง ุงุถุงู ุจุฑุง ฺฉูฺฉ ุจู ุงูุชู (**resolve**) ุงุณูุจู

ุฑูุดโูุง ุจูโุฏุณุช ุขูุฑุฏู ฺฉ **AssemblyName object**:

* ุณุงุฎุช ฺฉ **AssemblyName** ุจุง ุงุฑุงุฆู ูุงู ฺฉุงูู
* ูุฑุงุฎูุงู **GetName** ุฑู ฺฉ **Assembly** ููุฌูุฏ
* ูุฑุงุฎูุงู **AssemblyName.GetAssemblyName** ุจุง ูุณุฑ ูุงู ุงุณูุจู

ููฺูู ูโุชูุงู ฺฉ **AssemblyName** ุจุฏูู ุขุฑฺฏููุงู ุณุงุฎุช ู ุณูพุณ ูุฑ ูฺฺฏ ุขู ุฑุง ุชูุธู ฺฉุฑุฏ ุชุง ฺฉ ูุงู ฺฉุงูู ุณุงุฎุชู ุดูุฏ. ุฏุฑ ุงู ุญุงูุชุ **AssemblyName** ูุงุจู ุชุบุฑ (**mutable**) ุงุณุช.

---

### ๐น ูฺฺฏโูุง ู ูุชุฏูุง ุงุตู AssemblyName ๐น

| ููุน         | ูุงู                                       | ุชูุถุญ                       |
| ----------- | ----------------------------------------- | --------------------------- |
| string      | FullName                                  | ูุงู ฺฉุงูู                    |
| string      | Name                                      | ูุงู ุณุงุฏู                    |
| Version     | Version                                   | ูุณุฎู ุงุณูุจู                 |
| CultureInfo | CultureInfo                               | ุจุฑุง **satellite assembly** |
| string      | CodeBase                                  | ูฺฉุงู ุงุณูุจู                 |
| byte\[]     | GetPublicKey()                            | ฺฉูุฏ ุนููู ฺฉุงูู (160 ุจุงุช)  |
| void        | SetPublicKey(byte\[] key)                 | ุชุนู ฺฉูุฏ ุนููู            |
| byte\[]     | GetPublicKeyToken()                       | ูุณุฎู ธ ุจุงุช ฺฉูุฏ ุนููู     |
| void        | SetPublicKeyToken(byte\[] publicKeyToken) | ุชุนู public key token      |

* **Version** ุฎูุฏ ฺฉ ุดุก strongly typed ุจุง ูฺฺฏโูุง **Major, Minor, Build, Revision** ุงุณุช.
* **GetPublicKey** ฺฉูุฏ ุนููู ุฑูุฒูฺฏุงุฑ ฺฉุงูู ุฑุง ุจุฑูโฺฏุฑุฏุงูุฏ.
* **GetPublicKeyToken** ุขุฎุฑู ธ ุจุงุช ุงุณุชูุงุฏูโุดุฏู ุจุฑุง ุชุนู ููุช ุฑุง ุจุฑูโฺฏุฑุฏุงูุฏ.

ูุซุงู: ุจูโุฏุณุช ุขูุฑุฏู ูุงู ุณุงุฏู ฺฉ ุงุณูุจู:

```csharp
Console.WriteLine(typeof(string).Assembly.GetName().Name);
// System.Private.CoreLib
```

ุฏุฑุงูุช ูุณุฎู ุงุณูุจู:

```csharp
string v = myAssembly.GetName().Version.ToString();
```

---

### ๐น ูุณุฎูโูุง ุงุทูุงุนุงุช ู ูุงู ุงุณูุจู ๐น

ุฏู ูฺฺฏ ุฏฺฏุฑ ุจุฑุง ุจุงู ุงุทูุงุนุงุช ูุฑุจูุท ุจู ูุณุฎู ูุฌูุฏ ุฏุงุฑุฏ. ุจุฑุฎูุงู **AssemblyVersion**ุ ุงู ุฏู ูฺฺฏ ููุช ุงุณูุจู ุฑุง ุชุบุฑ ููโุฏููุฏ ู ุชุฃุซุฑ ุจุฑ ฺฉุงููพุงู ุง ุฒูุงู ุงุฌุฑุง ูุฏุงุฑูุฏ:

* **AssemblyInformationalVersion**
  ูุณุฎูโุง ฺฉู ุจู ฺฉุงุฑุจุฑ ููุง ููุงุด ุฏุงุฏู ูโุดูุฏ. ุฏุฑ ุฏุงููฺฏ **Windows File Properties** ุจูโุนููุงู **Product Version** ุฏุฏู ูโุดูุฏ. ูุฑ ุฑุดุชูโุง ูโุชูุงูุฏ ุจุงุดุฏุ ูุงููุฏ `"5.1 Beta 2"`. ูุนูููุงู ุชูุงู ุงุณูุจูโูุง ฺฉ ุจุฑูุงูู ุฏุงุฑุง ููู ุดูุงุฑู ูุณุฎู ุงุทูุงุนุงุช ูุณุชูุฏ.

* **AssemblyFileVersion**
  ูุนูููุงู ุจู ุดูุงุฑู **build** ุขู ุงุณูุจู ุงุดุงุฑู ุฏุงุฑุฏ. ุฏุฑ ุฏุงููฺฏ **Windows File Properties** ุจูโุนููุงู **File Version** ุฏุฏู ูโุดูุฏ. ูุดุงุจู **AssemblyVersion**ุ ุจุงุฏ ุฑุดุชูโุง ุดุงูู ุญุฏุงฺฉุซุฑ ฺูุงุฑ ุนุฏุฏ ุฌุฏุงุดุฏู ุจุง ููุทู ุจุงุดุฏ.

### ๐น ุงูุถุง Authenticode ๐น

**Authenticode** ฺฉ ุณุณุชู **code-signing** ุงุณุช ฺฉู ูุฏู ุขู ุงุซุจุงุช ููุช ูุงุดุฑ ุจุฑูุงูู ุงุณุช.
ุงูุถุง **Authenticode** ู **strong-name signing** ูุณุชูู ุงุฒ ูู ูุณุชูุฏุ ูโุชูุงูุฏ ฺฉ ุงุณูุจู ุฑุง ุจุง ูุฑ ฺฉ ุง ูุฑ ุฏู ุณุณุชู ุงูุถุง ฺฉูุฏ.

ุงฺฏุฑฺู **strong-name signing** ูโุชูุงูุฏ ุงุซุจุงุช ฺฉูุฏ ฺฉู ุงุณูุจูโูุง Aุ B ู C ุงุฒ ฺฉ ูุงุดุฑ ุขูุฏูโุงูุฏ (ุจุง ูุฑุถ ุงูฺฉู ฺฉูุฏ ุฎุตูุต ูู ูุฑูุชู ุจุงุดุฏ)ุ ุงูุง ููโุชูุงูุฏ ูุดุฎุต ฺฉูุฏ ุขู ูุงุดุฑ ฺู ฺฉุณ ุงุณุช. ุจุฑุง ูุซุงูุ ุจุฑุง ุฏุงูุณุชู ุงูฺฉู ูุงุดุฑ **Joe Albahari** ุง **Microsoft Corporation** ุจูุฏู ุงุณุชุ ุจู **Authenticode** ูุงุฒ ุฏุงุฑุฏ.

**Authenticode** ููฺฏุงู ุฏุงูููุฏ ุจุฑูุงููโูุง ุงุฒ ุงูุชุฑูุช ููุฏ ุงุณุชุ ุฒุฑุง ุชุถูู ูโฺฉูุฏ ุจุฑูุงูู ุฏููุงู ุงุฒ ููุงู ุดุฎุต ุขูุฏู ฺฉู ุชูุณุท **Certificate Authority** ูุนุฑู ุดุฏู ู ุฏุฑ ูุณุฑ ุงูุชูุงู ุชุบุฑ ูฺฉุฑุฏู ุงุณุช. ููฺูู ูุงูุน ููุงุด ูุดุฏุงุฑ โUnknown Publisherโ ููฺฏุงู ุงุฌุฑุง ุจุฑูุงูู ุฏุงูููุฏ ุดุฏู ุจุฑุง ุงููู ุจุงุฑ ูโุดูุฏ.

> โ๏ธ ุงูุถุง Authenticode ููฺูู ุดุฑุท ุงุฑุณุงู ุจุฑูุงููโูุง ุจู **Windows Store** ุงุณุช.

---

**Authenticode** ูู ุชููุง ุจุง ุงุณูุจูโูุง .NET ฺฉุงุฑ ูโฺฉูุฏุ ุจูฺฉู ุจุง ูุงูโูุง ุงุฌุฑุง unmanaged ู ุจุงูุฑโูุง ูุงููุฏ ูุงูโูุง ูุตุจ `.msi` ูุฒ ุณุงุฒฺฏุงุฑ ุงุณุช. ุงูุจุชู Authenticode ุชุถูู ููโฺฉูุฏ ฺฉู ุจุฑูุงูู ูุงูุฏ **malware** ุจุงุดุฏุ ูู ุงุญุชูุงู ุขู ุฑุง ฺฉุงูุด ูโุฏูุฏ.

ฺฉ ูุฑุฏ ุง ุณุงุฒูุงู ุญุงุถุฑ ุดุฏู ูุงู ุฎูุฏ (ุจุง ูพุดุชูุงูู ูพุงุณูพูุฑุช ุง ูุฏุงุฑฺฉ ุดุฑฺฉุช) ุฑุง ูพุดุช ูุงู ุงุฌุฑุง ุง ฺฉุชุงุจุฎุงูู ูุฑุงุฑ ุฏูุฏ.

CLR ุงูุถุง **Authenticode** ุฑุง ุจูโุนููุงู ุจุฎุด ุงุฒ ููุช ุงุณูุจู ููโุดูุงุณุฏุ ุงูุง ูโุชูุงูุฏ ุงูุถุง ุฑุง ุจูโุตูุฑุช ุฏุฑุฎูุงุณุช (**on demand**) ุฎูุงูุฏู ู ุงุนุชุจุงุฑุณูุฌ ฺฉูุฏ.

---

### ๐น ูุญูู ุงูุถุง ุจุง Authenticode ๐น

#### ฑ. ุจูโุฏุณุช ุขูุฑุฏู ู ูุตุจ ฺฏูุงูโูุงูู

ุงุจุชุฏุง ุจุงุฏ ฺฉ **code-signing certificate** ุงุฒ ฺฉ **Certificate Authority (CA)** ุฏุฑุงูุช ฺฉูุฏ. ุณูพุณ ูโุชูุงูุฏ ฺฏูุงู ุฑุง ุจูโุตูุฑุช ูุงู ุฑูุฒุฏุงุฑ ุงุณุชูุงุฏู ฺฉูุฏ ุง ุขู ุฑุง ุฏุฑ **certificate store** ฺฉุงููพูุชุฑ ุจุงุฑฺฏุฐุงุฑ ฺฉูุฏ.

ูุฒุช ุจุงุฑฺฏุฐุงุฑ ุฏุฑ **certificate store** ุงู ุงุณุช ฺฉู ูโุชูุงูุฏ ุจุฏูู ูุงุฑุฏ ฺฉุฑุฏู ุฑูุฒ ุงูุถุง ฺฉูุฏุ ฺฉู ุจุฑุง ุงุณฺฉุฑูพุชโูุง ุฎูุฏฺฉุงุฑ ู ูุงูโูุง batch ุงููโุชุฑ ุงุณุช.

#### ฒ. ูุญู ุฏุฑุงูุช ฺฏูุงูโูุงูู

ุชุนุฏุงุฏ ฺฉู **CA** ุจุฑุง **code-signing** ุจูโุตูุฑุช ูพุดโูุฑุถ ุฏุฑ ููุฏูุฒ ูุฌูุฏ ุฏุงุฑูุฏุ ูุงููุฏ:

* Comodo
* GoDaddy
* GlobalSign
* DigiCert
* Thawte
* Symantec

ููฺูู ูุฑูุดูุฏฺฏุงู ูุงููุฏ K Software ูุฌูุฏ ุฏุงุฑูุฏ ฺฉู ฺฏูุงูโูุง code-signing ุงู CAูุง ุฑุง ุจุง ุชุฎูู ุงุฑุงุฆู ูโุฏููุฏ.

ฺฏูุงูโูุง Authenticode ุงุฒ ุงู ูุฑูุดูุฏฺฏุงู ูุนูููุงู ฺฉูุชุฑ ูุญุฏูุฏฺฉููุฏู ูุณุชูุฏ ู ุจุฑูุงููโูุง ุบุฑ ูุงฺฉุฑูุณุงูุช ุฑุง ูุฒ ุงูุถุง ูโฺฉููุฏ. ุชูุฌู ุฏุงุดุชู ุจุงุดุฏ ฺฉู ฺฏูุงู SSL ูุนูููุงู ุจุฑุง Authenticode ูุงุจู ุงุณุชูุงุฏู ูุณุชุ ุฒุฑุง SSL ูุงูฺฉุช ุฏุงููู ุฑุง ุงุซุจุงุช ูโฺฉูุฏุ ุงูุง Authenticode ููุช ูุงุดุฑ ุฑุง.

ุจุฑุง ุจุงุฑฺฏุฐุงุฑ ฺฏูุงู ุฏุฑ **certificate store**:

1. **Certificate Manager** ุฑุง ุจุงุฒ ฺฉูุฏ
2. ูพูุดู **Personal** ุฑุง ุจุงุฒ ฺฉูุฏ
3. ุฑู **Certificates** ุฑุงุณุชโฺฉูฺฉ ู **All Tasks โ Import** ุฑุง ุงูุชุฎุงุจ ฺฉูุฏ
4. ุจุง **import wizard** ูุฑุงุญู ุฑุง ุฏูุจุงู ฺฉูุฏ

ูพุณ ุงุฒ ูุงุฑุฏ ฺฉุฑุฏู ฺฏูุงูุ ุฑู ุขู **View** ฺฉูฺฉ ฺฉูุฏุ ุจู ุชุจ **Details** ุจุฑูุฏ ู **thumbprint** ุขู ุฑุง ฺฉูพ ฺฉูุฏ. ุงู ููุงู ูุด SHA-256 ุงุณุช ฺฉู ุจุฑุง ุงูุถุง ูุงุฒ ุฏุงุฑุฏ.

> โ๏ธ ุงฺฏุฑ ูุตุฏ ุฏุงุฑุฏ ููุฒูุงู **strong-name** ูู ุงุณุชูุงุฏู ฺฉูุฏุ ุงุจุชุฏุง ุจุงุฏ **strong-name-signing** ุงูุฌุงู ุดูุฏุ ุณูพุณ Authenticode. ุงฺฏุฑ ุชุฑุชุจ ุจุฑุนฺฉุณ ุจุงุดุฏุ CLR ุงุถุงูู ุดุฏู strong name ุจุนุฏ ุงุฒ Authenticode ุฑุง ุจูโุนููุงู ุชุบุฑ ุบุฑูุฌุงุฒ ุฏุฑ ูุธุฑ ูโฺฏุฑุฏ.

---

#### ณ. ุงูุถุง ุจุง signtool.exe

ูโุชูุงูุฏ ุงุฒ ุงุจุฒุงุฑ **signtool** ฺฉู ููุฑุงู Visual Studio ูุตุจ ูโุดูุฏ ุงุณุชูุงุฏู ฺฉูุฏ.

ูุซุงู ุงูุถุง ูุงู `LINQPad.exe` ุจุง ฺฏูุงู ุฏุฑ **My Store** ุจู ูุงู `"Joseph Albahari"` ุจุง ุงูฺฏูุฑุชู SHA-256:

```bash
signtool sign /n "Joseph Albahari" /fd sha256 LINQPad.exe
```

ููฺูู ูโุชูุงูุฏ ุชูุถุญ ู URL ูุญุตูู ุฑุง ุงุถุงูู ฺฉูุฏ:

```bash
... /d LINQPad /du http://www.linqpad.net
```

> โ๏ธ ูุนูููุงู ุจุฑุง ุญูุธ ุงุนุชุจุงุฑ ูพุณ ุงุฒ ุงููุถุง ฺฏูุงูุ ุจุงุฏ **time-stamping server** ูู ูุดุฎุต ุดูุฏ.

#### Time Stamping

ุจุง ุงุณุชูุงุฏู ุงุฒ time-stampingุ ุจุฑูุงููโูุง ฺฉู ูุจู ุงุฒ ุงููุถุง ฺฏูุงู ุงูุถุง ุดุฏูโุงูุฏุ ูููุฒ ูุนุชุจุฑ ุจุงู ูโูุงููุฏ. CA ฺฉ URI ุจุฑุง ุงู ููุธูุฑ ุงุฑุงุฆู ูโุฏูุฏุ ูุงููุฏ:

```bash
... /tr http://timestamp.comodoca.com/authenticode /td SHA256
```

#### ุจุฑุฑุณ ุงูุถุง

ุณุงุฏูโุชุฑู ุฑูุด ุจุฑุง ูุดุงูุฏู ุงูุถุง Authenticodeุ ูฺฏุงู ฺฉุฑุฏู ุจู **Digital Signatures tab** ุฏุฑ **Windows Explorer** ุงุณุช. ุงุจุฒุงุฑ **signtool** ูุฒ ุงู ุงูฺฉุงู ุฑุง ูุฑุงูู ูโฺฉูุฏ.

---

### ๐น ููุงุจุน ู Satellite Assemblies ๐น

ฺฉ ุจุฑูุงูู ูุนูููุงู ูู ุชููุง ุดุงูู ฺฉุฏ ุงุฌุฑุง ุงุณุชุ ุจูฺฉู ูุญุชูุงูุง ูุงููุฏ ูุชูุ ุชุตูุฑ ุง ูุงู XML ูุฒ ุฏุงุฑุฏ. ุงู ูุญุชูุงูุง ูโุชูุงููุฏ ุฏุฑ ฺฉ ุงุณูุจู ุงุฒ ุทุฑู **resource** ฺฏูุฌุงูุฏู ุดููุฏ.

ุฏู ฺฉุงุฑุจุฑุฏ ุงุตู ุจุฑุง **resources**:

* ุงูุฒูุฏู ุฏุงุฏูโูุง ฺฉู ููโุชูุงููุฏ ุฏุฑ ฺฉุฏ ููุจุน ุจุงุดูุฏุ ูุงููุฏ ุชุตุงูุฑ
* ุฐุฎุฑู ุฏุงุฏูโูุง ฺฉู ููฺฉู ุงุณุช ุฏุฑ ุจุฑูุงููโูุง ฺูุฏุฒุจุงูู ูุงุฒ ุจู ุชุฑุฌูู ุฏุงุดุชู ุจุงุดูุฏ

ฺฉ **assembly resource** ุฏุฑ ููุงุช ฺฉ **byte stream** ุจุง ูุงู ูุดุฎุต ุงุณุช. ูโุชูุงู ฺฉ ุงุณูุจู ุฑุง ูุงููุฏ ฺฉ ุฏฺฉุดูุฑ ุงุฒ **byte arrays** ุฏุฑ ูุธุฑ ฺฏุฑูุช ฺฉู ฺฉูุฏูุง ุขู ุฑุดุชู ูุณุชูุฏ.

ูุซุงู ุฏุฑ **ildasm** ุงุฒ ุงุณูุจู ฺฉู ุฏู resource ุจู ูุงูโูุง `banner.jpg` ู `data.xml` ุฏุงุฑุฏ:

```
.mresource public banner.jpg
{
  // Offset: 0x00000F58 Length: 0x000004F6
}
.mresource public data.xml
{
  // Offset: 0x00001458 Length: 0x0000027E
}
```

ุฏุฑ ุงู ูุซุงูุ `banner.jpg` ู `data.xml` ูุณุชููุงู ุจู ุงุณูุจู ุงุถุงูู ุดุฏูโุงูุฏุ ูุฑ ฺฉุฏุงู ุจูโุนููุงู **embedded resource** ุฎูุฏ. ุงู ุณุงุฏูโุชุฑู ุฑูุด ุจุฑุง ฺฉุงุฑ ุจุง ููุงุจุน ุงุณุช.

---

**.NET** ููฺูู ุงุฌุงุฒู ูโุฏูุฏ ูุญุชูุง ุฑุง ุงุฒ ุทุฑู ฺฉุงูุชูุฑูุง ูุงู `.resources` ุงุถุงูู ฺฉูุฏ. ุงู ฺฉุงูุชูุฑูุง ุจุฑุง ูุญุชูุง ุทุฑุงุญ ุดุฏูโุงูุฏ ฺฉู ููฺฉู ุงุณุช ูุงุฒ ุจู ุชุฑุฌูู ุฏุฑ ุฒุจุงูโูุง ูุฎุชูู ุฏุงุดุชู ุจุงุดูุฏ.

**Localized .resources** ูโุชูุงููุฏ ุจูโุตูุฑุช **satellite assembly** ุฌุฏุงฺฏุงูู ุจุณุชูโุจูุฏ ุดููุฏ ู ุฏุฑ ุฒูุงู ุงุฌุฑุง ุจุฑ ุงุณุงุณ ุฒุจุงู ุณุณุชู ฺฉุงุฑุจุฑ ุจูโุทูุฑ ุฎูุฏฺฉุงุฑ ุงูุชุฎุงุจ ุดููุฏ.

๐ ุดฺฉู 17-2 ฺฉ ุงุณูุจู ุฑุง ูุดุงู ูโุฏูุฏ ฺฉู ุฏู **resource** ูุณุชููุงู ุฌุงุณุงุฒโุดุฏู ู ฺฉ ฺฉุงูุชูุฑ `.resources` ุจู ูุงู `welcome.resources` ุฏุงุฑุฏ ฺฉู ุจุฑุง ุขู ุฏู **satellite assembly** ูุญูโุณุงุฒ ุดุฏู ุงุฌุงุฏ ุดุฏู ุงุณุช.
<div align="center">

![Conventions-UsedThis-Book](../../../assets/image/17/Table-17-3.jpeg)
</div>

### ๐น ุฌุงุณุงุฒ ูุณุชูู ููุงุจุน ๐น

ุฌุงุณุงุฒ **resources** ุฏุฑ ุฏุงุฎู ุงุณูุจูโูุง ุฏุฑ ุจุฑูุงููโูุง **Windows Store** ูพุดุชุจุงู ููโุดูุฏ. ุจู ุฌุง ุขูุ ูุงูโูุง ุงุถุงู ุฑุง ุจู **deployment package** ุงุถุงูู ฺฉุฑุฏู ู ุงุฒ ุทุฑู **StorageFolder** ุจุฑูุงูู ุฎูุฏ (**Package.Current.InstalledLocation**) ุจู ุขูโูุง ุฏุณุชุฑุณ ูพุฏุง ฺฉูุฏ.

#### ูุญูู ุฌุงุณุงุฒ ูุณุชูู ููุงุจุน ุจุง Visual Studio

1. ูุงู ุฑุง ุจู ูพุฑูฺู ุงุถุงูู ฺฉูุฏ.
2. **Build Action** ุขู ุฑุง ุฑู **Embedded Resource** ุชูุธู ฺฉูุฏ.

Visual Studio ููุดู ูุงู ููุงุจุน ุฑุง ุจุง **namespace ูพุดโูุฑุถ ูพุฑูฺู** ู ููฺูู ูุงู ูุฑ **ุฒุฑูพูุดู** ฺฉู ูุงู ุฏุฑ ุขู ูุฑุงุฑ ุฏุงุฑุฏุ ูพุดููุฏ ูโฺฉูุฏ.
ูุซูุงู ุงฺฏุฑ namespace ูพุดโูุฑุถ ูพุฑูฺู `Westwind.Reports` ุจุงุดุฏ ู ูุงู `banner.jpg` ุฏุฑ ูพูุดู `pictures` ุจุงุดุฏุ ูุงู resource ุจู ุดฺฉู ุฒุฑ ุฎูุงูุฏ ุจูุฏ:

```
Westwind.Reports.pictures.banner.jpg
```

> โ๏ธ ูุงู ููุงุจุน **ุญุณุงุณ ุจู ุญุฑูู ุจุฒุฑฺฏ ู ฺฉูฺฺฉ** ุงุณุชุ ุจูุงุจุฑุงู ูุงู ูพูุดูโูุง ูพุฑูฺู ฺฉู ุดุงูู ููุงุจุน ูุณุชูุฏุ ุจูโุทูุฑ ูุคุซุฑ ุญุณุงุณ ุจู ุญุฑูู ุฎูุงููุฏ ุจูุฏ.

---

#### ุฏุณุชุฑุณ ุจู ููุงุจุน

ุจุฑุง ุฏุณุชุฑุณ ุจู ฺฉ resourceุ ูุชุฏ **GetManifestResourceStream** ุฑู ุงุณูุจู ุญุงู ุขู ุฑุง ุตุฏุง ุจุฒูุฏ. ุงู ูุชุฏ ฺฉ **Stream** ุจุฑูโฺฏุฑุฏุงูุฏ ฺฉู ูโุชูุงูุฏ ูุงููุฏ ูุฑ Stream ุฏฺฏุฑ ุขู ุฑุง ุจุฎูุงูุฏ:

```csharp
Assembly a = Assembly.GetEntryAssembly();
using (Stream s = a.GetManifestResourceStream("TestProject.data.xml"))
using (XmlReader r = XmlReader.Create(s))
{
    ...
}
```

ูุซุงู ุฏฺฏุฑ ุจุฑุง ุชุตูุฑ:

```csharp
System.Drawing.Image image;
using (Stream s = a.GetManifestResourceStream("TestProject.banner.jpg"))
    image = System.Drawing.Image.FromStream(s);
```

Stream ุจุงุฒฺฏุดุช ูุงุจู **seek** ุงุณุชุ ุจูุงุจุฑุงู ูโุชูุงูุฏ ุจู ุดฺฉู ุฒุฑ ูุฒ ุฏุงุฏูโูุง ุฑุง ุจุฎูุงูุฏ:

```csharp
byte[] data;
using (Stream s = a.GetManifestResourceStream("TestProject.banner.jpg"))
    data = new BinaryReader(s).ReadBytes((int)s.Length);
```

> โ๏ธ ุงฺฏุฑ ุงุฒ Visual Studio ุจุฑุง ุฌุงุณุงุฒ resource ุงุณุชูุงุฏู ฺฉุฑุฏูโุงุฏุ ูุฑุงููุด ูฺฉูุฏ ูพุดููุฏ namespace ุฑุง ูุญุงุธ ฺฉูุฏ.
> ุจุฑุง ฺฉุงูุด ุฎุทุงุ ูโุชูุงูุฏ ูพุดููุฏ ุฑุง ุจุง ฺฉ ููุน ูุดุฎุต ฺฉูุฏ:

```csharp
using (Stream s = a.GetManifestResourceStream(typeof(X), "data.xml"))
```

`X` ูโุชูุงูุฏ ูุฑ ููุน ุจุงุดุฏ ฺฉู ุฏุงุฑุง namespace ููุฑุฏูุธุฑ ุดูุง ุงุณุช (ูุนูููุงู ููุน ุฏุฑ ููุงู ูพูุดู ูพุฑูฺู).

---

#### ุชูุงูุช ุจุง Resource ุฏุฑ WPF

ุชูุธู **Build Action** ฺฉ ุขุชู ูพุฑูฺู ุจู **Resource** ุฏุฑ ุจุฑูุงูู WPF ุจุง **Embedded Resource** ูุชูุงูุช ุงุณุช.

* **Resource** ุฏุฑ WPF ุขุชู ุฑุง ุจู ฺฉ ูุงู `.resources` ุจู ูุงู `<AssemblyName>.g.resources` ุงุถุงูู ูโฺฉูุฏ.
* ูุญุชูุง ุขู ุงุฒ ุทุฑู ฺฉูุงุณ **Application** ู ุจุง ุงุณุชูุงุฏู ุงุฒ URI ุฏุณุชุฑุณ ูพุฏุง ูโฺฉูุฏ.

ููฺูู WPF ุงุตุทูุงุญ **resource** ุฑุง ุจู ุฑูุดโูุง ุฏฺฏุฑ ูุฒ ุจู ฺฉุงุฑ ูโุจุฑุฏ:

* **Static resources**
* **Dynamic resources**

ุงูโูุง ุงุฑุชุจุงุท ุจุง ููุงุจุน ุงุณูุจู ูุฏุงุฑูุฏ!

ุจุฑุง ุฏุฑุงูุช ูุงู ููู ููุงุจุน ุฏุฑ ฺฉ ุงุณูุจูุ ูโุชูุงู ุงุฒ ูุชุฏ **GetManifestResourceNames** ุงุณุชูุงุฏู ฺฉุฑุฏ.

---

### ๐น ูุงูโูุง .resources ๐น

ูุงูโูุง `.resources` ฺฉุงูุชูุฑูุง ุจุฑุง ูุญุชูุง ูุงุจู ูุญูโุณุงุฒ ูุณุชูุฏ. ุงู ูุงูโูุง ุฏุฑ ููุงุช ุจูโุนููุงู ฺฉ **embedded resource** ุฏุงุฎู ุงุณูุจู ูุฑุงุฑ ูโฺฏุฑูุฏุ ุฏุฑุณุช ูุงููุฏ ุณุงุฑ ูุงูโูุง. ุชูุงูุช ุขูโูุง:

1. ุงุจุชุฏุง ูุญุชูุง ุฎูุฏ ุฑุง ุฏุฑ ูุงู `.resources` ุจุณุชูโุจูุฏ ูโฺฉูุฏ.
2. ุจุฑุง ุฏุณุชุฑุณ ุจู ูุญุชูุง ุงุฒ **ResourceManager** ุง **pack URI** ุงุณุชูุงุฏู ูโฺฉูุฏุ ูู ุงุฒ **GetManifestResourceStream**.

ูุงูโูุง `.resources` ุจู ุตูุฑุช **binary** ูุณุชูุฏ ู ูุงุจู ูุฑุงุด ูุณุชูู ุชูุณุท ุงูุณุงู ูุณุชูุฏุ ุจูุงุจุฑุงู ุจุงุฏ ุงุฒ ุงุจุฒุงุฑูุง .NET ู Visual Studio ุงุณุชูุงุฏู ฺฉูุฏ.

#### .resx Files

ูุงูโูุง `.resx` ูุฑูุช ุฏุฑ ุฒูุงู ุทุฑุงุญ ูุณุชูุฏ ฺฉู ุจุฑุง ุชููุฏ `.resources` ุงุณุชูุงุฏู ูโุดููุฏ. ุงู ูุงูโูุง ุจุง XML ุณุงุฎุชู ูโุดููุฏ ู ุณุงุฎุชุงุฑ ุขูโูุง ุจู ุตูุฑุช **name/value pairs** ุงุณุช:

```xml
<root>
  <data name="Greeting">
    <value>hello</value>
  </data>
  <data name="DefaultFontSize" type="System.Int32, mscorlib">
    <value>10</value>
  </data>
</root>
```

ุฏุฑ Visual Studio ุจุฑุง ุงุฌุงุฏ `.resx`:

1. ฺฉ **project item** ุงุฒ ููุน **Resources File** ุงุถุงูู ฺฉูุฏ.
2. Visual Studio ุจูโุตูุฑุช ุฎูุฏฺฉุงุฑ:

   * ูุฏุฑ ุตุญุญ ุฑุง ุงุฌุงุฏ ูโฺฉูุฏ.
   * **designer** ุจุฑุง ุงุถุงูู ฺฉุฑุฏู ุฑุดุชูโูุงุ ุชุตุงูุฑ ู ูุงูโูุง ุงุฑุงุฆู ูโุฏูุฏ.
   * ูุงู `.resx` ุฑุง ุจู `.resources` ุชุจุฏู ู ุฏุฑ ุงุณูุจู ุฌุงุณุงุฒ ูโฺฉูุฏ.
   * ฺฉูุงุณ ุจุฑุง ุฏุณุชุฑุณ ุจู ุฏุงุฏูโูุง ุชููุฏ ูโฺฉูุฏ.

> โ๏ธ designer ููุงุจุน ุชุตูุฑ ุฑุง ุจูโุตูุฑุช typed **Image objects** (System.Drawing.dll) ุงุถุงูู ูโฺฉูุฏ ฺฉู ุจุฑุง WPF ููุงุณุจ ูุณุชูุฏ.

---

#### ุฎูุงูุฏู ูุงูโูุง .resources

ฺฉูุงุณ ุจุง ููุงู ูุงู `.resx` ุชููุฏ ูโุดูุฏ ู ุฏุงุฑุง **properties** ุจุฑุง ุฏุณุชุฑุณ ุจู ูุฑ ุขุชู ุงุณุช.

**ResourceManager** ุจุฑุง ุฎูุงูุฏู ูุงูโูุง `.resources` ุฌุงุณุงุฒโุดุฏู ุฏุฑ ุงุณูุจู ุงุณุชูุงุฏู ูโุดูุฏ:

```csharp
ResourceManager r = new ResourceManager("welcome",
                                        Assembly.GetExecutingAssembly());
```

> โ๏ธ ุงฺฏุฑ resource ุฏุฑ Visual Studio ฺฉุงููพุงู ุดุฏูุ ุขุฑฺฏููุงู ุงูู ุจุงุฏ **namespace-prefixed** ุจุงุดุฏ.

ุฏุณุชุฑุณ ุจู ูุญุชูุง:

```csharp
string greeting = r.GetString("Greeting");
int fontSize = (int) r.GetObject("DefaultFontSize");
Image image = (Image) r.GetObject("flag.png");
```

ุจุฑุง ููุฑุณุช ฺฉุฑุฏู ูุญุชูุงุช ฺฉ ูุงู `.resources`:

```csharp
ResourceManager r = new ResourceManager(...);
ResourceSet set = r.GetResourceSet(CultureInfo.CurrentUICulture, true, true);
foreach (System.Collections.DictionaryEntry entry in set)
    Console.WriteLine(entry.Key);
```

---

### ๐น ุงุฌุงุฏ resource ุจุง pack URI ุฏุฑ Visual Studio ๐น

ุฏุฑ ุจุฑูุงููโูุง WPFุ ูุงูโูุง XAML ุจุงุฏ ุจุชูุงููุฏ ููุงุจุน ุฑุง ุงุฒ ุทุฑู URI ุจุฎูุงููุฏุ ูุงููุฏ:

```xml
<Button>
  <Image Height="50" Source="flag.png"/>
</Button>
```

ุง ุงฺฏุฑ resource ุฏุฑ ุงุณูุจู ุฏฺฏุฑ ุจุงุดุฏ:

```xml
<Button>
  <Image Height="50" Source="UtilsAssembly;Component/flag.png"/>
</Button>
```

> โ๏ธ ฺฉููู **Component** ฺฉูุฏูุงฺู ุซุงุจุช ุงุณุช.

ุจุฑุง ุงุฌุงุฏ ฺูู ููุงุจุน ููโุชูุงู ุงุฒ ูุงูโูุง `.resx` ุงุณุชูุงุฏู ฺฉุฑุฏ. ุจุงุฏ ูุงูโูุง ุฑุง ุจู ูพุฑูฺู ุงุถุงูู ฺฉุฑุฏู ู **Build Action** ุฑุง ุฑู **Resource** ูุฑุงุฑ ุฏูุฏ (ูู Embedded Resource).
Visual Studio ุณูพุณ ุขูโูุง ุฑุง ุจู ูุงู `.resources` ุจู ูุงู `<AssemblyName>.g.resources` ุชุจุฏู ูโฺฉูุฏ ู ููฺูู ูุงูโูุง XAML ฺฉุงููพุงูโุดุฏู (.baml) ูุฒ ุฏุฑ ููุงูุฌุง ูุฑุงุฑ ูโฺฏุฑูุฏ.

ุจุฑุง ุจุงุฑฺฏุฐุงุฑ ููุงุจุน ุจุง **URI-key** ุจูโุตูุฑุช ุจุฑูุงููโููุณ:

```csharp
Uri u = new Uri("flag.png", UriKind.Relative);
using (Stream s = Application.GetResourceStream(u).Stream)
{
    ...
}
```

ููฺูู ูโุชูุงู ุงุฒ **absolute URI** ุจู ุดฺฉู ุฒุฑ ุงุณุชูุงุฏู ฺฉุฑุฏ:

```csharp
Uri u = new Uri("pack://application:,,,/flag.png");
```

ุงฺฏุฑ ุจุฎูุงูุฏ **Assembly object** ูุดุฎุต ฺฉูุฏุ ูโุชูุงูุฏ ุงุฒ **ResourceManager** ุงุณุชูุงุฏู ฺฉูุฏ:

```csharp
Assembly a = Assembly.GetExecutingAssembly();
ResourceManager r = new ResourceManager(a.GetName().Name + ".g", a);
using (Stream s = r.GetStream("flag.png"))
{
    ...
}
```

**ResourceManager** ููฺูู ุงุฌุงุฒู ูโุฏูุฏ ูุญุชูุง ฺฉ ฺฉุงูุชูุฑ `.g.resources` ุฏุงุฎู ฺฉ ุงุณูุจู ุฑุง ููุฑุณุช ฺฉูุฏ.

### ๐ ุงุณูุจูโูุง ูุงููุงุฑูโุง (Satellite Assemblies) ๐

ุฏุงุฏูโูุง ุฌุงุณุงุฒโุดุฏู ุฏุฑ ูุงูโูุง `.resources` **ูุงุจูุช ูุญูโุณุงุฒ (localizable)** ุฏุงุฑูุฏ.
ูุญูโุณุงุฒ ููุงุจุน ุฒูุงู ุงููุช ุฏุงุฑุฏ ฺฉู ุจุฑูุงูู ุดูุง ุฑู ูุณุฎูโุง ุงุฒ ููุฏูุฒ ุงุฌุฑุง ุดูุฏ ฺฉู ุชูุงู ูุญุท ุขู ุจู ุฒุจุงู ุฏฺฏุฑ ููุงุด ุฏุงุฏู ูโุดูุฏ. ุจุฑุง ฺฉูพุงุฑฺฺฏุ ุจุฑูุงูู ุดูุง ูุฒ ุจุงุฏ ุงุฒ ููุงู ุฒุจุงู ุงุณุชูุงุฏู ฺฉูุฏ.

#### ุณุงุฎุชุงุฑ ูุนููู

* **Main assembly** ุดุงูู ููุงุจุน `.resources` ุจุฑุง ุฒุจุงู ูพุดโูุฑุถ ุง **fallback** ุงุณุช.
* **Satellite assemblies** ุฌุฏุงฺฏุงูู ุดุงูู ููุงุจุน ูุญูโุดุฏู ุจุฑุง ุฒุจุงูโูุง ูุฎุชูู ูุณุชูุฏ.

ุฒูุงู ฺฉู ุจุฑูุงูู ุงุฌุฑุง ูโุดูุฏุ .NET ุฒุจุงู ูุนู ุณุณุชู ุนุงูู ุฑุง ุงุฒ `CultureInfo.CurrentUICulture` ุจุฑุฑุณ ูโฺฉูุฏ. ูุฑฺฏุงู ุจุฎูุงูุฏ ฺฉ resource ุฑุง ุงุฒ ุทุฑู **ResourceManager** ุจุฎูุงูุฏุ runtime ุจู ุฏูุจุงู ฺฉ **satellite assembly** ูุญูโุดุฏู ูโฺฏุฑุฏุฏ. ุงฺฏุฑ ููุฌูุฏ ุจุงุดุฏ ู ุดุงูู ฺฉูุฏ resource ููุฑุฏ ูุธุฑ ุดูุง ุจุงุดุฏุ ุฌุงฺฏุฒู ูุณุฎู main assembly ูโุดูุฏ.

> ุงู ุนู ูโุชูุงูุฏ ูพุดุชุจุงู ุงุฒ ุฒุจุงูโูุง ุฌุฏุฏ ุฑุง ุชููุง ุจุง ุงุถุงูู ฺฉุฑุฏู satellite ุฌุฏุฏ ูุฑุงูู ฺฉูุฏุ ุจุฏูู ุงูฺฉู main assembly ุชุบุฑ ฺฉูุฏ.

> โ๏ธ ฺฉ satellite assembly ููโุชูุงูุฏ ุดุงูู ฺฉุฏ ุงุฌุฑุง ุจุงุดุฏุ ุชููุง ููุงุจุน ุฑุง ูโุชูุงูุฏ ูฺฏู ุฏุงุฑุฏ.

---

#### ูุณุฑูุง ุงุณุชูุฑุงุฑ Satellite Assemblies

Satellite assemblies ุฏุฑ ุฒุฑูพูุดูโูุง ูููุฏุฑ ุงุณูุจู ูุฑุงุฑ ูโฺฏุฑูุฏ:

```
programBaseFolder\MyProgram.exe
                 \MyLibrary.exe
                 \XX\MyProgram.resources.dll
                 \XX\MyLibrary.resources.dll
```

`XX` ุจู ฺฉุฏ ุฏู ุญุฑู ุฒุจุงู ุงุดุงุฑู ุฏุงุฑุฏ (ูุซูุงู `de` ุจุฑุง ุขููุงู) ุง ุชุฑฺฉุจ ุงุฒ ุฒุจุงู ู ููุทูู (ูุซู `en-GB` ุจุฑุง ุงูฺฏูุณ ุฏุฑ ุจุฑุชุงูุง).
ุงู ุณุณุชู ูุงูฺฏุฐุงุฑ ุจู CLR ุงุฌุงุฒู ูโุฏูุฏ ุชุง ุจูโุตูุฑุช ุฎูุฏฺฉุงุฑ satellite assembly ููุงุณุจ ุฑุง ูพุฏุง ู ุจุงุฑฺฏุฐุงุฑ ฺฉูุฏ.

---

#### ุณุงุฎุช Satellite Assemblies

ูุฑุถ ฺฉูุฏ ูุซุงู ูุจู ูุง ุจุง `.resx` ุดุงูู ุงู ุจูุฏ:

```xml
<root>
  ...
  <data name="Greeting">
    <value>hello</value>
  </data>
</root>
```

ู ุฏุฑ ุฒูุงู ุงุฌุฑุง ุขู ุฑุง ุจู ุดฺฉู ุฒุฑ ุฎูุงูุฏู:

```csharp
ResourceManager r = new ResourceManager("welcome",
                                        Assembly.GetExecutingAssembly());
Console.Write(r.GetString("Greeting"));
```

ุญุงู ูุฑุถ ฺฉูุฏ ูโุฎูุงูู ููุช ุจุฑูุงูู ุฑู ูุณุฎู ุขููุงู ููุฏูุฒ ุงุฌุฑุง ุดุฏุ `hello` ุจู `hallo` ุชุจุฏู ุดูุฏ.
ุงุจุชุฏุง ฺฉ ูุงู `.resx` ุฏฺฏุฑ ุจู ูุงู `welcome.de.resx` ุงุฌุงุฏ ูโฺฉูู ฺฉู ููุฏุงุฑ ุฑุง ุฌุงฺฏุฒู ฺฉูุฏ:

```xml
<root>
  <data name="Greeting">
    <value>hallo</value>
  </data>
</root>
```

ุฏุฑ **Visual Studio** ุชููุง ฺฉุงู ุงุณุช ุงู ฺฉุงุฑ ุฑุง ุงูุฌุงู ุฏูุฏ. ููฺฏุงู **rebuild**ุ ุจูโุทูุฑ ุฎูุฏฺฉุงุฑ ฺฉ **satellite assembly** ุจู ูุงู `MyApp.resources.dll` ุฏุฑ ฺฉ ุฒุฑูพูุดู `de` ุณุงุฎุชู ูโุดูุฏ.

---

#### ุชุณุช Satellite Assemblies

ุจุฑุง ุดุจูโุณุงุฒ ุงุฌุฑุง ุจุฑูุงูู ุฑู ุณุณุชูโุนุงูู ุจุง ุฒุจุงู ูุชูุงูุชุ ุจุงุฏ **CurrentUICulture** ุฑุง ุจุง ฺฉูุงุณ `Thread` ุชุบุฑ ุฏูุฏ:

```csharp
System.Threading.Thread.CurrentThread.CurrentUICulture
    = new System.Globalization.CultureInfo("de");
```

> โ๏ธ `CultureInfo.CurrentUICulture` ูุณุฎู ููุทโุฎูุงูุฏู ููู property ุงุณุช.

ฺฉ ุงุณุชุฑุงุชฺ ููุฏ ุจุฑุง ุชุณุช ุงู ุงุณุช ฺฉู ฺฉููุงุช ุฑุง **โัปยขฮฑโรฏสษ** ฺฉูุฏุ ุนู ุจู ุดฺฉู ฺฉู ูููุฒ ุจู ุงูฺฏูุณ ูุงุจู ุฎูุงูุฏู ุจุงุดูุฏุ ุงูุง ุงุฒ ฺฉุงุฑุงฺฉุชุฑูุง ุงุณุชุงูุฏุงุฑุฏ ุฑูู ุงุณุชูุงุฏู ูฺฉููุฏ.

---

#### ูพุดุชุจุงู ุทุฑุงุญ Visual Studio

ุทุฑุงุญโูุง Visual Studio ุงูฺฉุงู ูุญูโุณุงุฒ ฺฉุงููพูููุชโูุง ู ุนูุงุตุฑ ุจุตุฑ ุฑุง ูุฑุงูู ูโฺฉููุฏ:

* **WPF designer** ฺฉ workflow ูุฎุตูุต ุจุฑุง localization ุฏุงุฑุฏ.
* ุณุงุฑ designers ูุจุชู ุจุฑ Component ุงุฒ ฺฉ property ุฏุฑ ุฒูุงู ุทุฑุงุญ ุงุณุชูุงุฏู ูโฺฉููุฏ ุชุง ุดุจู **Language property** ููุงุด ุฏุงุฏู ุดูุฏ.
* ุจุฑุง ูุญูโุณุงุฒุ ฺฉุงู ุงุณุช **Language property** ุฑุง ุชุบุฑ ุฏุงุฏู ู ุณูพุณ ุดุฑูุน ุจู ุชุบุฑ ฺฉุงููพูููุช ฺฉูุฏ.
* ุชูุงู propertyูุง ฺฉูุชุฑู ฺฉู ุฏุงุฑุง ุตูุช **Localizable** ูุณุชูุฏุ ุฏุฑ ูุงู `.resx` ูุฑุจูุท ุจู ุขู ุฒุจุงู ุฐุฎุฑู ูโุดููุฏ.
* ูโุชูุงูุฏ ุฏุฑ ูุฑ ุฒูุงู ุจู ุฒุจุงูโูุง ุฌุงุจุฌุง ุดูุฏ ููุท ุจุง ุชุบุฑ Language property.

---

#### ูุฑููฺฏโูุง ู ุฒุฑูุฑููฺฏโูุง (Cultures and Subcultures)

* **Culture** ฺฉ ุฒุจุงู ูุดุฎุต ุฑุง ูุดุงู ูโุฏูุฏ.
* **Subculture** ฺฉ ูุณุฎู ููุทููโุง ุงุฒ ููุงู ุฒุจุงู ุงุณุช.
* .NET ูุทุงุจู ุงุณุชุงูุฏุงุฑุฏ **RFC1766** ุงุฒ ฺฉุฏูุง ุฏู ุญุฑู ุจุฑุง ูุฑููฺฏโูุง ู ุฒุฑูุฑููฺฏโูุง ุงุณุชูุงุฏู ูโฺฉูุฏ:

**ูุซุงู ฺฉุฏ ูุฑููฺฏโูุง:**

```
En  โ ุงูฺฏูุณ
de  โ ุขููุงู
```

**ูุซุงู ฺฉุฏ ุฒุฑูุฑููฺฏโูุง:**

```
en-AU  โ ุงูฺฏูุณ ุงุณุชุฑุงูุง
de-AT  โ ุขููุงู ุงุชุฑุด
```

* ูุฑููฺฏโูุง ุฏุฑ .NET ุจุง ฺฉูุงุณ `System.Globalization.CultureInfo` ููุงุด ุฏุงุฏู ูโุดููุฏ.
* ุจุฑุฑุณ ูุฑููฺฏ ูุนู ุจุฑูุงูู:

```csharp
Console.WriteLine(System.Threading.Thread.CurrentThread.CurrentCulture);
Console.WriteLine(System.Threading.Thread.CurrentThread.CurrentUICulture);
```

ูุซุงู ุจุฑุง ุณุณุชู ูุญูโุณุงุฒโุดุฏู ุจุฑุง ุงุณุชุฑุงูุง:

```
CurrentCulture      โ en-AU
CurrentUICulture    โ en-US
```

> โ๏ธ `CurrentCulture` ุชูุธูุงุช ููุทููโุง **Control Panel ููุฏูุฒ** ุฑุง ูุดุงู ูโุฏูุฏุ ุฏุฑ ุญุงู ฺฉู `CurrentUICulture` ุฒุจุงู ุณุณุชู ุนุงูู ุฑุง ูุดุฎุต ูโฺฉูุฏ.
> ุชูุธูุงุช ููุทููโุง ุดุงูู **ููุทูู ุฒูุงูุ ูุงูุจ ุชุงุฑุฎ ู ุงุฑุฒ** ุงุณุช. `CurrentCulture` ุฑูุชุงุฑ ูพุดโูุฑุถ ุชูุงุจุน ูุงููุฏ `DateTime.Parse` ุฑุง ุชุนู ูโฺฉูุฏ.
> `CurrentUICulture` ุฒุจุงู ุฑุง ูุดุฎุต ูโฺฉูุฏ ฺฉู ุณุณุชู ุจุง ฺฉุงุฑุจุฑ ุงุฑุชุจุงุท ุจุฑูุฑุงุฑ ูโฺฉูุฏ.

**ResourceManager** ุจูโุทูุฑ ูพุดโูุฑุถ ุงุฒ property `CurrentUICulture` thread ูุนู ุจุฑุง ุงูุชู satellite assembly ููุงุณุจ ุงุณุชูุงุฏู ูโฺฉูุฏ.

* ุงฺฏุฑ satellite assembly ุจุฑุง subculture ููุฌูุฏ ุจุงุดุฏุ ุขู ุงุณุชูุงุฏู ูโุดูุฏ.
* ุฏุฑ ุบุฑ ุงู ุตูุฑุชุ ุจู **generic culture** ุจุงุฒูโฺฏุฑุฏุฏ.
* ุงฺฏุฑ generic culture ูู ููุฌูุฏ ูุจุงุดุฏุ ุจู **default culture** ุฏุฑ main assembly ุจุงุฒูโฺฏุฑุฏุฏ.

### โ๏ธ ุจุงุฑฺฏุฐุงุฑุ ุญู ูุงุจุณุชฺฏ ู ุฌุฏุงุณุงุฒ ุงุณูุจูโูุง (Loading, Resolving, and Isolating Assemblies) โ๏ธ

ุจุงุฑฺฏุฐุงุฑ ฺฉ ุงุณูุจู ุงุฒ ฺฉ ูุณุฑ ูุดุฎุต ูุณุจุชุงู ุณุงุฏู ุงุณุช ู ุจู ุขู **assembly loading** ฺฏูุชู ูโุดูุฏ.
ุงูุง ุงุบูุจุ ุดูุง ุง CLR ูุงุฒ ุฏุงุฑุฏ ฺฉู ฺฉ ุงุณูุจู ุฑุง ููุท ุจุง ูุงู ฺฉุงูู ุง ุณุงุฏูโุงุด ุจุงุฑฺฏุฐุงุฑ ฺฉูุฏ. ุจู ุงู ฺฉุงุฑ **assembly resolution** ฺฏูุชู ูโุดูุฏ. ุชูุงูุช ุงุตู ุจู ุจุงุฑฺฏุฐุงุฑ ู ุญู ูุงุจุณุชฺฏ ุงู ุงุณุช ฺฉู ุฏุฑ **resolution** ุงุจุชุฏุง ุจุงุฏ ุงุณูุจู **ูพุฏุง ุดูุฏ**.

---

#### ๐น ุฒูุงูโูุง ุฑุฎ ุฏุงุฏู Assembly Resolution

1. ุชูุณุท CLRุ ููุช ูุงุฒ ุจู ุญู ูุงุจุณุชฺฏ (dependency) ุฏุงุดุชู ุจุงุดุฏ.
2. ุตุฑุญุงูุ ููุช ุดูุง ูุชุฏ ูุงููุฏ `Assembly.Load(AssemblyName)` ุฑุง ูุฑุงุฎูุงู ูโฺฉูุฏ.

ูุซุงู: ฺฉ ุจุฑูุงูู ุจุง ุงุณูุจู ุงุตู ู ุชุนุฏุงุฏ ฺฉุชุงุจุฎุงูู ุงุณุชุงุชฺฉ:

```
AdventureGame.dll    // Main assembly
Terrain.dll          // Referenced assembly
UIEngine.dll         // Referenced assembly
```

> ููุธูุฑ ุงุฒ **statically referenced** ุงู ุงุณุช ฺฉู AdventureGame.dll ููฺฏุงู ฺฉุงููพุงู ุจุง ุงุฑุฌุงุน ุจู Terrain.dll ู UIEngine.dll ุณุงุฎุชู ุดุฏู ุงุณุช.
> ฺฉุงููพุงูุฑ ุฎูุฏุด ูุงุฒ ุจู ุญู ูุงุจุณุชฺฏ ูุฏุงุฑุฏุ ุฒุฑุง ูุณุฑูุง ุงุณูุจูโูุง ุจู ุงู ุฏุงุฏู ุดุฏูโุงูุฏ. ุงูุง ุฏุฑ ุฒูุงู ุงุฌุฑุงุ ุจุงุฏ ุงู ุงุณูุจูโูุง **resolve** ุดููุฏ.

---

### โ๏ธ Assembly Load Contexts (ALC) โ ุจุงุฑฺฏุฐุงุฑ ู ุฌุฏุงุณุงุฒ ุงุณูุจูโูุง โ๏ธ

ฺฉูุงุณ **`AssemblyLoadContext`** ูุณุฆูู ุจุงุฑฺฏุฐุงุฑ (loading) ู ุญู ูุงุจุณุชฺฏ (resolving) ุงุณูุจูโูุง ู ููฺูู ูุฑุงูู ฺฉุฑุฏู **ูฺฉุงูุฒู ุฌุฏุงุณุงุฒ** (isolation) ุงุณุช.

---

#### ๐น ูุฑ ุงุณูุจู ูุชุนูู ุจู ฺฉ ALC ุงุณุช

ูุฑ **Assembly** ุฏุฑ .NET ุฏููุงู ุฏุฑ ฺฉ **ALC** ูุฑุงุฑ ุฏุงุฑุฏ.
ูโุชูุงูุฏ ALC ฺฉ ุงุณูุจู ุฑุง ุจู ุงู ุดฺฉู ุฏุฑุงูุช ฺฉูุฏ:

```csharp
Assembly assem = Assembly.GetExecutingAssembly();
AssemblyLoadContext context = AssemblyLoadContext.GetLoadContext(assem);
Console.WriteLine(context.Name);
```

ููฺููุ ูโุชูุงูุฏ ุชูุงู ุงุณูุจูโูุง ูุชุนูู ุจู ฺฉ ALC ุฑุง ุจุง ุงุณุชูุงุฏู ุงุฒ property `Assemblies` ุจุจูุฏ:

```csharp
foreach (Assembly a in context.Assemblies)
    Console.WriteLine(a.FullName);
```

ฺฉูุงุณ **`AssemblyLoadContext`** ููฺูู ฺฉ property ุงุณุชุงุชฺฉ **`All`** ุฏุงุฑุฏ ฺฉู ููู ALCูุง ุฑุง ููุฑุณุช ูโฺฉูุฏ.

---

#### ๐น ุณุงุฎุช ู ุณูุงุฑุดโุณุงุฒ ALC

* ูโุชูุงูุฏ ฺฉ **ALC ุฌุฏุฏ** ููุท ุจุง ูููููโุณุงุฒ `AssemblyLoadContext` ู ุงุฑุงุฆู ฺฉ ูุงู ุงุฌุงุฏ ฺฉูุฏ:

```csharp
var alc = new AssemblyLoadContext("MyALC");
```

* ูุนูููุงู ุจูุชุฑ ุงุณุช ฺฉูุงุณ ุฑุง **subclass ฺฉูุฏ** ุชุง ุจุชูุงูุฏ ููุทู ุญู ูุงุจุณุชฺฏโูุง (Load) ุฑุง ุณูุงุฑุดโุณุงุฒ ฺฉูุฏ ู ุงุณูุจูโูุง ุฑุง ุงุฒ ูุงูุดุงู ุจุงุฑฺฏุฐุงุฑ ููุงุฏ.

---

### ๐น ุจุงุฑฺฏุฐุงุฑ ุตุฑุญ ุงุณูุจูโูุง

ALC ุฏู ูุชุฏ ููู ุจุฑุง ุจุงุฑฺฏุฐุงุฑ ูุฑุงูู ูโฺฉูุฏ:

1. **ุงุฒ ูุณุฑ ูุงู:**

```csharp
Assembly assem = alc.LoadFromAssemblyPath(@"c:\temp\foo.dll");
```

2. **ุงุฒ Stream (ูุซูุงู ุญุงูุธู):**

```csharp
byte[] bytes = File.ReadAllBytes(@"c:\temp\foo.dll");
var ms = new MemoryStream(bytes);
Assembly assem = alc.LoadFromStream(ms);
```

> ูพุงุฑุงูุชุฑ ุฏูู ุฏุฑ `LoadFromStream` ูโุชูุงูุฏ ุญุงู ุงุทูุงุนุงุช debug (.pdb) ุจุงุดุฏ ุชุง stack traceูุง ุดุงูู ุงุทูุงุนุงุช ุณูุฑุณ ุดููุฏ.

---

#### ๐น ูุญุฏูุฏุชโูุง ู ูฺฉุงุช ููู

* **ูุงู ุณุงุฏู ุงุณูุจู ุจุงุฏ ุฏุฑ ฺฉ ALC ููุญุตุฑ ุจู ูุฑุฏ ุจุงุดุฏ.**
  ุจุฑุง ุจุงุฑฺฏุฐุงุฑ ูุณุฎูโูุง ูุฎุชููุ ุจุงุฏ ALCูุง ุฌุฏุงฺฏุงูู ุจุณุงุฒุฏ:

```csharp
var alc1 = new AssemblyLoadContext("ALC1");
var assem1 = alc1.LoadFromAssemblyPath(@"c:\temp\foo.dll");

var alc2 = new AssemblyLoadContext("ALC2");
var assem2 = alc2.LoadFromAssemblyPath(@"c:\temp\foo.dll");
```

> ุญุช ุงฺฏุฑ ูุญุชูุงุช ุงุณูุจูโูุง ฺฉุณุงู ุจุงุดูุฏุ **typeูุง ุขูโูุง ุจุง ูู ูุงุณุงุฒฺฏุงุฑ ูุณุชูุฏ**.

* ุจุนุฏ ุงุฒ ุจุงุฑฺฏุฐุงุฑุ ฺฉ ุงุณูุจู **ููุท ุจุง unload ฺฉุฑุฏู ALC ูุฑุจูุทู** ุขุฒุงุฏ ูโุดูุฏ.

---

#### ๐น ุชูุงูุช ุจู ุจุงุฑฺฏุฐุงุฑ ุงุฒ ูุงู ู ุงุฒ ุญุงูุธู

* **LoadFromAssemblyPath:**

  * ุงุฒ **memory-mapped file** ุงุณุชูุงุฏู ูโฺฉูุฏ.
  * ุงูฺฉุงู **lazy loading** ู ุงุดุชุฑุงฺฉ ุญุงูุธู ุจู ูพุฑุฏุงุฒุดโูุง ูุฌูุฏ ุฏุงุฑุฏ.
  * ุงฺฏุฑ ุญุงูุธู ฺฉู ุดูุฏุ OS ูโุชูุงูุฏ ุจุฎุดโูุง ุฑุง ุขุฒุงุฏ ู ูุฌุฏุฏุงู ุจุงุฑฺฏุฐุงุฑ ฺฉูุฏ.

* **LoadFromStream:**

  * ฺฉู ุงุณูุจู ููุฑุงู ุฏุฑ ุญุงูุธู ุฎุตูุต ุจุงุฑฺฏุฐุงุฑ ูโุดูุฏ.
  * property `Location` ุฎุงู ุฎูุงูุฏ ุจูุฏ.
  * ูุตุฑู ุญุงูุธู ุณุฑุนุงู ุงูุฒุงุด ูโุงุจุฏ.

### ๐น Assembly Resolution in .NET โ ุจุงุฑฺฏุฐุงุฑ ู ุญู ูุงุจุณุชฺฏ ุงุณูุจูโูุง

ฺฉูุงุณ **`AssemblyLoadContext`** ุนูุงูู ุจุฑ ุจุงุฑฺฏุฐุงุฑ ุงุณูุจูโูุง ุงุฒ ูุณุฑ ุง ุงุณุชุฑูุ ฺฉ ุฑูุด ุฏฺฏุฑ ูู ุฏุงุฑุฏ: **ุจุงุฑฺฏุฐุงุฑ ุงุฒ ูุงู ุงุณูุจู**.

```csharp
public Assembly LoadFromAssemblyName(AssemblyName assemblyName);
```

* ุฏุฑ ุงู ุฑูุด ุดูุง **ูุณุฑ ูุงู** ุฑุง ูุดุฎุต ููโฺฉูุฏ.
* ALC ูุณุฆูู **ุญู ูุงุจุณุชฺฏ ู ูพุฏุง ฺฉุฑุฏู ุงุณูุจู** ุงุณุช.

---

### ๐น ฺฺฏููฺฏ ุญู ูุงุจุณุชฺฏโูุง (Resolving Assemblies)

ููฺฏุงู ุจุงุฑฺฏุฐุงุฑ ูุงุจุณุชฺฏโูุงุ CLR ูุฑุขูุฏ ุญู ูุงุจุณุชฺฏ ุฑุง ุจู ุตูุฑุช ุฒุฑ ุงูุฌุงู ูโุฏูุฏ:

1. ุจุฑุฑุณ ูโฺฉูุฏ ฺฉู ุขุง ููู ุงุณูุจู ูุจูุงู ุฏุฑ ููุงู ALC ุญู ุดุฏู ุงุณุช ุง ูู.

   * ุงฺฏุฑ ุญู ุดุฏู ุจุงุดุฏุ ููุงู **Assembly** ุจุฑฺฏุฑุฏุงูุฏู ูโุดูุฏ.

2. ุงฺฏุฑ ุญู ูุดุฏู ุจุงุดุฏุ CLR ูุชุฏ **`Load`** ฺฉูุงุณ ALC ุฑุง ูุฑุงุฎูุงู ูโฺฉูุฏ:

   * **ุฏุฑ Default ALC**ุ ููุงูู ุงุฒ ูพุด ุชุนุฑูโุดุฏู ูุณุชูุฏ.
   * **ุฏุฑ Custom ALC**ุ ุดูุง ุฎูุฏุชุงู ููุทู ุญู ูุงุจุณุชฺฏ ุฑุง ูพุงุฏูโุณุงุฒ ูโฺฉูุฏุ ูุซูุงู ุจุฑุฑุณ ฺฉ ูููุฏุฑ ูุดุฎุต ู ูุฑุงุฎูุงู `LoadFromAssemblyPath`.

3. ุงฺฏุฑ `Load` null ุจุฑฺฏุฑุฏุงูุฏุ CLR ูุชุฏ **Load ูุชุฏ Default ALC** ุฑุง ูุฑุงุฎูุงู ูโฺฉูุฏ (Fallback ุจุฑุง ุงุณูุจูโูุง Runtime ู ุนููู).

4. ุงฺฏุฑ ูููุฒ ุญู ูุดุฏุ ุฑูุฏุงุฏูุง **Resolving** ุฏุฑ ALCูุง ูุฑุจูุทู ูุฑุงุฎูุงู ูโุดููุฏ.

5. ุจุฑุง ุณุงุฒฺฏุงุฑ ุจุง .NET Frameworkุ ุฏุฑ ููุงุช **AppDomain.CurrentDomain.AssemblyResolve** ูุฑุงุฎูุงู ูโุดูุฏ.

> ูพุณ ุงุฒ ุจุงุฑฺฏุฐุงุฑุ CLR ุจุฑุฑุณ ูโฺฉูุฏ ฺฉู **ูุงู ุณุงุฏู ู ุชูฺฉู ฺฉูุฏ ุนููู** ุจุง ุฏุฑุฎูุงุณุช ูุทุงุจูุช ุฏุงุฑุฏ. ูุณุฎู ูโุชูุงูุฏ ุจุงูุงุชุฑ ุง ูพุงูโุชุฑ ุจุงุดุฏ.

---

### ๐น ุฏู ุฑูุด ุจุฑุง ุญู ูุงุจุณุชฺฏ ุฏุฑ Custom ALC

1. **Override ูุชุฏ Load**

   * ALC ุดูุง **ุงููู ูุฑุตุช** ุจุฑุง ุจุงุฑฺฏุฐุงุฑ ุงุณูุจู ุฑุง ุฏุงุฑุฏ.
   * ุถุฑูุฑ ุจุฑุง **ุงุฒูููโุณุงุฒ**.

2. **Handling ุฑูุฏุงุฏ Resolving**

   * ููุท ููุช Default ALC ูุชูุงูุฏ ุงุณูุจู ุฑุง ุญู ฺฉูุฏุ ุงุฌุฑุง ูโุดูุฏ.
   * ุงููู handler ฺฉู ููุฏุงุฑ ุบุฑ null ุจุฑฺฏุฑุฏุงูุฏุ ุจุฑูุฏู ุงุณุช.

---

### ๐น ูุซุงู ุนูู: ุจุงุฑฺฏุฐุงุฑ ุงุณูุจู ุจุง ูุงุจุณุชฺฏ ุฎุตูุต

ูุฑุถ ฺฉูุฏ ุฏุงุฑู:

* foo.dll ุฏุฑ `c:\temp`
* bar.dll ุจู ุนููุงู ูุงุจุณุชฺฏ ุฎุตูุต foo.dll

#### ุฑูุด ฑ: subclass ู override Load

```csharp
using System.IO;
using System.Reflection;
using System.Runtime.Loader;

class FolderBasedALC : AssemblyLoadContext
{
    readonly string _folder;
    public FolderBasedALC(string folder) => _folder = folder;

    protected override Assembly Load(AssemblyName assemblyName)
    {
        string targetPath = Path.Combine(_folder, assemblyName.Name + ".dll");
        if (File.Exists(targetPath))
            return LoadFromAssemblyPath(targetPath);

        return null; // fallback ุจู Default ALC
    }
}

// ุงุณุชูุงุฏู:
var alc = new FolderBasedALC(@"c:\temp");
Assembly foo = alc.LoadFromAssemblyName(new AssemblyName("foo"));
```

> Load method ุจุง null ุจุฑฺฏุฑุฏุงูุฏูุ ุงุฌุงุฒู ูโุฏูุฏ **ูุงุจุณุชฺฏโูุง BCL** ุชูุณุท Default ALC ุญู ุดููุฏ.

---

#### ุฑูุด ฒ: ุฑูุฏุงุฏ Resolving

```csharp
var alc = new AssemblyLoadContext("test");
alc.Resolving += (context, assemblyName) =>
{
    string targetPath = Path.Combine(@"c:\temp", assemblyName.Name + ".dll");
    return alc.LoadFromAssemblyPath(targetPath);
};

Assembly foo = alc.LoadFromAssemblyName(new AssemblyName("foo"));
```

* ูุฒุช: ุณุงุฏูโุชุฑ ุงุณุชุ ฺูู Default ALC ุงุจุชุฏุง ุจุฑุฑุณ ูโุดูุฏ.
* ุนุจ: ุงฺฏุฑ ุจุฑูุงูู ุงุตู ุฎูุฏุด ูุงุฒ ุจู foo.dll ุง bar.dll ุฏุงุดุชู ุจุงุดุฏุ ุงุฒูููโุณุงุฒ ุจุฑูุฑุงุฑ ููโุดูุฏ.

---

#### ๐น ูฺฉุงุช ฺฉูุฏ

* ูุชุฏ **FolderBasedALC** ุจุฑุง ุฏุฑฺฉ ููููู ุญู ูุงุจุณุชฺฏ ุนุงู ุงุณุชุ ุงูุง ุฏุฑ ูพุฑูฺูโูุง ูุงูุน ุจุง NuGet ู ูุงุจุณุชฺฏโูุง platform-specific ูุญุฏูุฏุช ุฏุงุฑุฏ.
* ุฑุงูโุญู ูพุดุฑูุชูโุชุฑ: ุงุณุชูุงุฏู ุงุฒ **AssemblyDependencyResolver** ุจุฑุง ูุฏุฑุช ูุงุจุณุชฺฏโูุง ุฏุฑ ูพุฑูฺูโูุง ูุงูุน.

### ๐น ALC ูพุดโูุฑุถ (The Default ALC) โ๏ธ

ููุช ฺฉ ุจุฑูุงูู ุดุฑูุน ูโุดูุฏุ **CLR** ฺฉ **ALC ูฺู** ุฑุง ุจู ูพุฑุงูพุฑุช ุงุณุชุง **`AssemblyLoadContext.Default`** ุงุฎุชุตุงุต ูโุฏูุฏ.
ALC ูพุดโูุฑุถ ุฌุง ุงุณุช ฺฉู **assembly ุดุฑูุน ุจุฑูุงูู** ุจุงุฑฺฏุฐุงุฑ ูโุดูุฏุ ููุฑุงู ุจุง ูุงุจุณุชฺฏโูุง ุงุณุชุงุชฺฉ ุขู ู ุงุณูุจูโูุง BCL ูุฑุจูุท ุจู **.NET runtime**.

ALC ูพุดโูุฑุถ ุงุจุชุฏุง ุฏุฑ **ูุณุฑูุง ูพุดโูุฑุถ ุฌุณุชุฌู (default probing paths)** ุจู ุฏูุจุงู ุงุณูุจูโูุง ูโฺฏุฑุฏุฏ ุชุง ุขูโูุง ุฑุง ุจูโุทูุฑ ุฎูุฏฺฉุงุฑ ุญู ฺฉูุฏ (ุตูุญู 791 ุฑุง ุจุจูุฏ)ุ ุงู ูุณุฑูุง ูุนูููุงู ููุงู ูฺฉุงูโูุง ูุดุฎุตโุดุฏู ุฏุฑ ูุงูโูุง **.deps.json** ู **.runtimeconfig.json** ุจุฑูุงูู ูุณุชูุฏ.

ุงฺฏุฑ ALC ูุชูุงูุฏ ฺฉ ุงุณูุจู ุฑุง ุฏุฑ ูุณุฑูุง ูพุดโูุฑุถ ูพุฏุง ฺฉูุฏุ ุฑูุฏุงุฏ **Resolving** ุขู ูุฑุงุฎูุงู ูโุดูุฏ. ูุฏุฑุช ุงู ุฑูุฏุงุฏ ุจู ุดูุง ุงุฌุงุฒู ูโุฏูุฏ ุชุง ุงุณูุจู ุฑุง ุงุฒ ูฺฉุงูโูุง ุฏฺฏุฑ ุจุงุฑฺฏุฐุงุฑ ฺฉูุฏ. ุจู ุงู ุชุฑุชุจุ ูโุชูุงูุฏ ูุงุจุณุชฺฏโูุง ุจุฑูุงูู ุฑุง ุฏุฑ ูุณุฑูุง ุงุถุงู ูุงููุฏ ุฒุฑูพูุดูโูุงุ ูพูุดูโูุง ูุดุชุฑฺฉ ุง ุญุช ุจูโุตูุฑุช ฺฉ ููุจุน ุจุงูุฑ ุฏุงุฎู **host assembly** ูุฑุงุฑ ุฏูุฏ:

```csharp
AssemblyLoadContext.Default.Resolving += (loadContext, assemblyName) =>
{
    // ุชูุงุด ุจุฑุง ูพุฏุง ฺฉุฑุฏู assemblyName ู ุจุฑฺฏุฑุฏุงูุฏู ฺฉ Assembly ุง null
    // ูุนูููุงู ูพุณ ุงุฒ ูพุฏุง ฺฉุฑุฏู ูุงูุ LoadFromAssemblyPath ูุฑุงุฎูุงู ูโุดูุฏ
    // ...
};
```

> ุฑูุฏุงุฏ **Resolving** ุฏุฑ ALC ูพุดโูุฑุถ ููฺูู ููุช ฺฉ **Custom ALC** ูุชูุงูุฏ ุงุณูุจู ุฑุง ุญู ฺฉูุฏ (ุนู ูุชุฏ Load ุขู null ุจุฑฺฏุฑุฏุงูุฏ) ู ALC ูพุดโูุฑุถ ูุฒ ูุชูุงูุฏ ุงุณูุจู ุฑุง ุญู ฺฉูุฏุ ูุฑุงุฎูุงู ูโุดูุฏ.

---

ูโุชูุงูุฏ ุงุณูุจูโูุง ุฑุง ุฎุงุฑุฌ ุงุฒ ุฑูุฏุงุฏ **Resolving** ูุฒ ุฏุฑ ALC ูพุดโูุฑุถ ุจุงุฑฺฏุฐุงุฑ ฺฉูุฏ.
ุจุง ุงู ุญุงูุ ูุจู ุงุฒ ุงูุฌุงู ุงู ฺฉุงุฑุ ุจูุชุฑ ุงุณุช ุจุฑุฑุณ ฺฉูุฏ ฺฉู ุขุง ูโุชูุงูุฏ ูุดฺฉู ุฑุง ุจุง ุงุณุชูุงุฏู ุงุฒ ฺฉ **ALC ุฌุฏุงฺฏุงูู** ุง ุฑูุดโูุง ฺฉู ุฏุฑ ุจุฎุด ุจุนุฏ ุชูุถุญ ูโุฏูู (ุงุณุชูุงุฏู ุงุฒ ALC ุงุฌุฑุง ู ุฒูููโุง) ุจูุชุฑ ุญู ฺฉูุฏ ุง ุฎุฑ.

ุงุณุชูุงุฏู ูุณุชูู ุงุฒ ALC ูพุดโูุฑุถ ุจุงุนุซ ูโุดูุฏ ฺฉุฏ ุดูุง ุดฺฉููุฏู ุดูุฏุ ุฒุฑุง ููโุชูุงู ุขู ุฑุง ุจู ุทูุฑ ฺฉุงูู ุงุฒููู ฺฉุฑุฏ (ุจุฑุง ูุซุงู ุชูุณุท ูุฑูโูุฑฺฉโูุง **unit testing** ุง **LINQPad**).

ุงฺฏุฑ ุจุงุฒ ูู ูโุฎูุงูุฏ ุงุฏุงูู ุฏูุฏุ ุจูุชุฑ ุงุณุช ุงุฒ **ูุชุฏ ุญู ูุงุจุณุชฺฏ** ูุงููุฏ `LoadFromAssemblyName` ุงุณุชูุงุฏู ฺฉูุฏ ุชุง ูุชุฏ ุจุงุฑฺฏุฐุงุฑ ูุงููุฏ `LoadFromAssemblyPath` โ ูุฎุตูุตุงู ุงฺฏุฑ ุงุณูุจู ุดูุง ุจู ุตูุฑุช ุงุณุชุงุชฺฉ ุงุฑุฌุงุน ุดุฏู ุจุงุดุฏ.
ฺุฑุงุ ฺูู ููฺฉู ุงุณุช ุงุณูุจู ุงุฒ ูุจู ุจุงุฑฺฏุฐุงุฑ ุดุฏู ุจุงุดุฏุ ุฏุฑ ุงู ุตูุฑุช `LoadFromAssemblyName` ููุงู ุงุณูุจู ุจุงุฑฺฏุฐุงุฑโุดุฏู ุฑุง ุจุฑูโฺฏุฑุฏุงูุฏุ ูู `LoadFromAssemblyPath` ุจุงุนุซ ุงุฌุงุฏ **ุงุณุชุซูุง** ูโุดูุฏ.

> ุจุง `LoadFromAssemblyPath` ููฺูู ููฺฉู ุงุณุช ุฑุณฺฉ ุฏุงุดุชู ุจุงุดุฏ ฺฉู ุงุณูุจู ุงุฒ ูฺฉุงู ุจุงุฑฺฏุฐุงุฑ ุดูุฏ ฺฉู ุจุง ูฺฉุงู ูพุดโูุฑุถ ALC ููุฎูุงู ูุฏุงุฑุฏ.

ุงฺฏุฑ ุงุณูุจู ุฏุฑ ูฺฉุงู ุงุณุช ฺฉู ALC ุจูโุทูุฑ ุฎูุฏฺฉุงุฑ ุขู ุฑุง ูพุฏุง ููโฺฉูุฏุ ุจุงุฒ ูู ูโุชูุงูุฏ ููู ุฑูุด ุฑุง ุฏูุจุงู ฺฉุฑุฏู ู ุนูุงูู ุจุฑ ุขู ุฑูุฏุงุฏ **Resolving** ุฑุง ูุฏุฑุช ฺฉูุฏ.

ุชูุฌู ุฏุงุดุชู ุจุงุดุฏ ฺฉู ููฺฏุงู ูุฑุงุฎูุงู `LoadFromAssemblyName` ูุงุฒ ุจู ุงุฑุงุฆู ูุงู ฺฉุงูู ูุณุชุ **ูุงู ุณุงุฏู ฺฉุงู ุงุณุช** (ู ุญุช ุงฺฏุฑ ุงุณูุจู ุฏุงุฑุง Strong Name ุจุงุดุฏ ูุนุชุจุฑ ุงุณุช):

```csharp
AssemblyLoadContext.Default.LoadFromAssemblyName("System.Xml");
```

ุงูุง ุงฺฏุฑ **Public Key Token** ุฑุง ุฏุฑ ูุงู ูุฑุงุฑ ุฏูุฏุ ุจุงุฏ ุจุง ุขูฺู ุจุงุฑฺฏุฐุงุฑ ุดุฏู ูุทุงุจูุช ุฏุงุดุชู ุจุงุดุฏ.

---

### ๐น ูุณุฑูุง ูพุดโูุฑุถ ุฌุณุชุฌู (Default Probing) ๐๏ธ

ูุณุฑูุง ูพุดโูุฑุถ ูุนูููุงู ุดุงูู ููุงุฑุฏ ุฒุฑ ูุณุชูุฏ:

* ูุณุฑูุง ูุดุฎุตโุดุฏู ุฏุฑ **AppName.deps.json** (ฺฉู AppName ูุงู ุงุณูุจู ุงุตู ุจุฑูุงูู ุงุณุช). ุงฺฏุฑ ุงู ูุงู ูุฌูุฏ ูุฏุงุดุชู ุจุงุดุฏุ ุงุฒ **ูพูุดู ูพุงู ุจุฑูุงูู** ุงุณุชูุงุฏู ูโุดูุฏ.
* ูพูุดูโูุง ุญุงู **assemblyูุง ุณุณุชู .NET runtime** (ุงฺฏุฑ ุจุฑูุงูู ุดูุง **Framework-dependent** ุจุงุดุฏ).

**MSBuild** ุจูโุทูุฑ ุฎูุฏฺฉุงุฑ ูุงู ุจู ูุงู **AppName.deps.json** ุงุฌุงุฏ ูโฺฉูุฏ ฺฉู ูุณุฑ ูพุฏุง ฺฉุฑุฏู ููู ูุงุจุณุชฺฏโูุง ุฑุง ูุดุฎุต ูโฺฉูุฏ.
ุงู ุดุงูู **assemblyูุง platform-agnostic** ุงุณุช ฺฉู ุฏุฑ ูพูุดู ูพุงู ุจุฑูุงูู ูุฑุงุฑ ูโฺฏุฑูุฏ ู **assemblyูุง platform-specific** ฺฉู ุฏุฑ ุฒุฑูพูุดู `runtimes\` ุชุญุช ูููุฏุฑ ูุงููุฏ `win` ุง `unix` ูุฑุงุฑ ูโฺฏุฑูุฏ.

ูุณุฑูุง ูุดุฎุตโุดุฏู ุฏุฑ ูุงู `.deps.json` ุชููุฏ ุดุฏู ูุณุจุช ุจู **ูพูุดู ูพุงู ุจุฑูุงูู** ูุณุชูุฏ โ ุง ูุฑ ูพูุดู ุงุถุงู ฺฉู ุฏุฑ ุจุฎุด **additionalProbingPaths** ูุงูโูุง `AppName.runtimeconfig.json` ู/ุง `AppName.runtimeconfig.dev.json` ูุดุฎุต ฺฉุฑุฏูโุงุฏ.

---

### ๐น ALC โุฌุงุฑโ (The โCurrentโ ALC) ๐

ุฏุฑ ุจุฎุด ูุจูุ ูุณุจุช ุจู ุจุงุฑฺฏุฐุงุฑ ูุณุชูู ุงุณูุจู ุฏุฑ **ALC ูพุดโูุฑุถ** ูุดุฏุงุฑ ุฏุงุฏู. ูุนูููุงู ฺุฒ ฺฉู ูโุฎูุงูุฏุ ุจุงุฑฺฏุฐุงุฑ/ุญู ุฏุฑ **ALC ุฌุงุฑ** ุงุณุช.

ุฏุฑ ุงฺฉุซุฑ ููุงุฑุฏุ **ALC ุฌุงุฑ** ููุงู ALC ุงุณุช ฺฉู ุดุงูู **assembly ุฏุฑ ุญุงู ุงุฌุฑุง** ุงุณุช:

```csharp
var executingAssem = Assembly.GetExecutingAssembly();
var alc = AssemblyLoadContext.GetLoadContext(executingAssem);
Assembly assem = alc.LoadFromAssemblyName(...);  // ุญู ุจุฑ ุงุณุงุณ ูุงู
// ุง: = alc.LoadFromAssemblyPath(...);  // ุจุงุฑฺฏุฐุงุฑ ุจุฑ ุงุณุงุณ ูุณุฑ
```

ฺฉ ุฑูุด ุงูุนุทุงูโูพุฐุฑ ู ูุงุถุญโุชุฑ ุจุฑุง ุจูโุฏุณุช ุขูุฑุฏู ALC:

```csharp
var myAssem = typeof(SomeTypeInMyAssembly).Assembly;
var alc = AssemblyLoadContext.GetLoadContext(myAssem);
...
```

ฺฏุงู ุงูฺฉุงู ุชุนู โALC ุฌุงุฑโ ูุฌูุฏ ูุฏุงุฑุฏ.
ูุซูุงู ุงฺฏุฑ ูุณุฆูู ููุดุชู **binary serializer** ุฏุฑ .NET ุจุงุดุฏุ ุงู serializer ูุงู ฺฉุงูู ููุนโูุง (ุดุงูู ูุงู ุงุณูุจู) ุฑุง ูโููุณุฏ ู ุจุงุฏ ููฺฏุงู **deserialization** ุญู ุดููุฏ. ุณุคุงู ุงู ุงุณุช: ุงุฒ ฺฉุฏุงู ALC ุงุณุชูุงุฏู ฺฉููุ
ูุดฺฉู ุงู ุงุณุช ฺฉู ุงฺฏุฑ ุจู **executing assembly** ุงุชฺฉุง ฺฉููุ ALC ููุงู assembly ุฑุง ุจุฑูโฺฏุฑุฏุงูุฏ ฺฉู serializer ุฑุง ุฏุงุฑุฏุ ูู assemblyโุง ฺฉู serializer ุฑุง ูุฑุงุฎูุงู ูโฺฉูุฏ.

ุฑุงู ุญู ุจูุชุฑู: **ุตุฑุญ ุจูุฏู**:

```csharp
public object Deserialize(Stream stream, AssemblyLoadContext alc)
{
    ...
}
```

ุจุง ุงู ฺฉุงุฑุ **caller** ูุดุฎุต ูโฺฉูุฏ ฺฉู ฺู ฺุฒ โALC ุฌุงุฑโ ุงุณุช:

```csharp
var assem = typeof(SomeTypeThatIWillBeDeserializing).Assembly;
var alc = AssemblyLoadContext.GetLoadContext(assem);
var obj = Deserialize(someStream, alc);
```

### ๐น Assembly.Load ู ALCูุง ุฒูููโุง (Contextual ALCs) โ๏ธ

ุจุฑุง ุณูุงุฑู ุฑุงุฌ ุจุงุฑฺฏุฐุงุฑ ฺฉ ุงุณูุจู ุฏุฑ **ALC ุฏุฑ ุญุงู ุงุฌุฑุง ุฌุงุฑ**ุ ูุนูููุงู ฺฉุฏ ุฒุฑ ุฑุง ูโููุณู:

```csharp
var executingAssem = Assembly.GetExecutingAssembly();
var alc = AssemblyLoadContext.GetLoadContext(executingAssem);
Assembly assem = alc.LoadFromAssemblyName(...);
```

ุจุฑุง ุฑุงุญุช ุชูุณุนูโุฏููุฏฺฏุงูุ ูุงฺฉุฑูุณุงูุช ูุชุฏ ุฒุฑ ุฑุง ุฏุฑ ฺฉูุงุณ **Assembly** ุชุนุฑู ฺฉุฑุฏู ุงุณุช:

```csharp
public static Assembly Load(string assemblyString);
```

ููฺูู ูุณุฎูโุง ฺฉุงููุงู ูุดุงุจู ูุฌูุฏ ุฏุงุฑุฏ ฺฉู **ฺฉ ุด AssemblyName** ูโูพุฐุฑุฏ:

```csharp
public static Assembly Load(AssemblyName assemblyRef);
```

> ุงู ูุชุฏูุง ุจุง ูุชุฏ ูุฏู **Load(byte\[])** ฺฉู ุฑูุชุงุฑ ฺฉุงููุงู ูุชูุงูุช ุฏุงุฑุฏ ูุชูุงูุช ูุณุชูุฏ (ุตูุญู 798 ุฑุง ุจุจูุฏ).

ููุงููุฏ `LoadFromAssemblyName`ุ ุดูุง ูโุชูุงูุฏ ูุงู **ุณุงุฏูุ ุฌุฒุฆ ุง ฺฉุงูู** ุงุณูุจู ุฑุง ูุดุฎุต ฺฉูุฏ:

```csharp
Assembly a = Assembly.Load("System.Private.Xml");
```

ุงู ุฏุณุชูุฑ ุงุณูุจู `System.Private.Xml` ุฑุง ุฏุฑ **ูุฑ ALC ฺฉู assembly ุฏุฑ ุขู ุจุงุฑฺฏุฐุงุฑ ุดุฏู ุงุณุช**ุ ุจุงุฑฺฏุฐุงุฑ ูโฺฉูุฏ.

ูโุชูุงูู ุจู ุฌุง ูุงู ุณุงุฏูุ ุงุฒ ุฑุดุชูโูุง ุฒุฑ ูู ุงุณุชูุงุฏู ฺฉูู ู ูุชุฌู ุฏุฑ .NET ฺฉุณุงู ุฎูุงูุฏ ุจูุฏ:

* `"System.Private.Xml, PublicKeyToken=cc7b13ffcd2ddd51"`
* `"System.Private.Xml, Version=4.0.1.0"`
* `"System.Private.Xml, Version=4.0.1.0, PublicKeyToken=cc7b13ffcd2ddd51"`

ุงฺฏุฑ **public key token** ูุดุฎุต ุดูุฏุ ุจุงุฏ ุจุง ุขูฺู ุจุงุฑฺฏุฐุงุฑ ุดุฏู ูุทุงุจูุช ุฏุงุดุชู ุจุงุดุฏ.

> MSDN ุชูุตู ูโฺฉูุฏ ุงุฒ ูุงู ุฌุฒุฆ ุงุณุชูุงุฏู ูฺฉูุฏ ู ุจูุชุฑ ุงุณุช **ูุณุฎู ุฏูู ู public key token** ุฑุง ูุดุฎุต ฺฉูุฏ. ุฏูู ุขู ูุฑุจูุท ุจู .NET Framework ุงุณุชุ ูุงููุฏ ุชุฃุซุฑุงุช **Global Assembly Cache** ู **Code Access Security**.
> ุฏุฑ .NET 5+ ู .NET Coreุ ุงู ูุญุฏูุฏุชโูุง ูุฌูุฏ ูุฏุงุฑุฏ ู ูุนูููุงู ุงุณุชูุงุฏู ุงุฒ ูุงู ุณุงุฏู ุง ุฌุฒุฆ ุงูู ุงุณุช.

ูุฑ ุฏู ูุชุฏ ููุท ุจุฑุง **ุญู ูุงุจุณุชฺฏ (resolution)** ูุณุชูุฏุ ุจูุงุจุฑุงู ููโุชูุงูุฏ ูุณุฑ ูุงู ูุดุฎุต ฺฉูุฏ. (ุงฺฏุฑ ูพุฑุงูพุฑุช `CodeBase` ุฏุฑ ุด **AssemblyName** ูพุฑ ุดูุฏุ ูุงุฏุฏู ฺฏุฑูุชู ูโุดูุฏ.)

---

> ูฺฉุชู ููู: ุงุฒ **Assembly.Load** ุจุฑุง ุจุงุฑฺฏุฐุงุฑ ฺฉ ุงุณูุจู ฺฉู ุจู ุตูุฑุช ุงุณุชุงุชฺฉ ุงุฑุฌุงุน ุดุฏู ุงุณุชูุงุฏู ูฺฉูุฏ.
> ฺฉุงู ุงุณุช ุจู ฺฉ **type** ุฏุฑ ุขู assembly ุงุฑุฌุงุน ุฏูุฏ ู assembly ุฑุง ุงุฒ ุขู ุฏุฑุงูุช ฺฉูุฏ:

```csharp
Assembly a = typeof(System.Xml.Formatting).Assembly;
```

ุง ุญุช:

```csharp
Assembly a = System.Xml.Formatting.Indented.GetType().Assembly;
```

ุงู ุฑูุด ุงุฒ **hardcoding ูุงู ุงุณูุจู** ุฌููฺฏุฑ ูโฺฉูุฏ ู ููุฒูุงู ูุฑุขูุฏ **assembly resolution** ุฏุฑ ALC ุฏุฑ ุญุงู ุงุฌุฑุง ฺฉุฏ ุฑุง ูุนุงู ูโฺฉูุฏ (ููุงู ฺฉุงุฑ ฺฉู Assembly.Load ุงูุฌุงู ูโุฏูุฏ).

---

ุงฺฏุฑ ูโุฎูุงุณุชุฏ ุฎูุฏุชุงู ูุชุฏ Assembly.Load ุฑุง ุจููุณุฏุ ุชูุฑุจุงู ฺูู ฺุฒ ูโุดุฏ:

```csharp
[MethodImpl(MethodImplOptions.NoInlining)]
Assembly Load(string name)
{
    Assembly callingAssembly = Assembly.GetCallingAssembly();
    var callingAlc = AssemblyLoadContext.GetLoadContext(callingAssembly);
    return callingAlc.LoadFromAssemblyName(new AssemblyName(name));
}
```

---

### ๐น EnterContextualReflection ๐

ุงุณุชุฑุงุชฺ Assembly.Load ฺฉู ุงุฒ **ALC ุงุณูุจู ูุฑุงุฎูุงููุฏู** ุงุณุชูุงุฏู ูโฺฉูุฏุ ุฒูุงู ุดฺฉุณุช ูโุฎูุฑุฏ ฺฉู **Assembly.Load ุชูุณุท ูุงุณุทูโุง** ูุซู serializer ุง unit test runner ูุฑุงุฎูุงู ุดูุฏ.
ุงฺฏุฑ ูุงุณุทู ุฏุฑ ฺฉ assembly ูุชูุงูุช ุจุงุดุฏุ ALC ูุงุณุทู ุจู ุฌุง ALC ูุฑุงุฎูุงููุฏู ุงุณุชูุงุฏู ูโุดูุฏ.

ุฑุงู ุญู ุงุฏูโุขู: **ุงุฌุจุงุฑ caller ุจู ูุดุฎุต ฺฉุฑุฏู ALC** ุจู ุฌุง ุญุฏุณ ุฒุฏู ุจุง `Assembly.Load(string)`.

ุงูุง ฺูู .NET 5+ ู .NET Core ุงุฒ .NET Framework ุชฺฉุงูู ุงูุชูโุงูุฏุ ุฌุง ฺฉู **ุงุฒูููโุณุงุฒ ุจุง application domain** ุงูุฌุงู ูโุดุฏ ู ูู ALCุ ุงุณุชูุงุฏู ุงุฏูโุขู ุฑุงุฌ ูุณุช ู `Assembly.Load(string)` ฺฏุงู ุฏุฑ ุณูุงุฑููุง ฺฉู ALC ูุงุจู ุงุนุชูุงุฏ ูุณุชุ ุงุณุชูุงุฏู ูโุดูุฏ (ูุซูุงู ุฏุฑ binary serializer).

ุจุฑุง ุญู ุงู ูุดฺฉูุ ูุงฺฉุฑูุณุงูุช ูุชุฏ ุจู ูุงู **EnterContextualReflection** ุฏุฑ AssemblyLoadContext ุงุถุงูู ฺฉุฑุฏู ุงุณุช. ุงู ูุชุฏ ฺฉ ALC ุฑุง ุจู **AssemblyLoadContext.CurrentContextualReflectionContext** ุงุฎุชุตุงุต ูโุฏูุฏ.

* ุงู ูพุฑุงูพุฑุช ุงุณุชุงุชฺฉ ุงุณุชุ ุงูุง ููุฏุงุฑ ุขู ุฏุฑ **AsyncLocal** ุฐุฎุฑู ูโุดูุฏ ู ูโุชูุงูุฏ ุฏุฑ threadูุง ูุฎุชูู ููุงุฏุฑ ุฌุฏุงฺฏุงูู ุฏุงุดุชู ุจุงุดุฏ ู ููฺูุงู ุฏุฑ ุนููุงุชโูุง asynchronous ุญูุธ ุดูุฏ.

ุงฺฏุฑ ุงู ูพุฑุงูพุฑุช ุบุฑ-null ุจุงุดุฏุ **Assembly.Load** ุจูโุทูุฑ ุฎูุฏฺฉุงุฑ ุงุฒ ุขู ุงุณุชูุงุฏู ูโฺฉูุฏ ู ุงูููุช ุจุงูุงุชุฑ ูุณุจุช ุจู ALC ูุฑุงุฎูุงููุฏู ุฏุงุฑุฏ:

```csharp
Method1();
var myALC = new AssemblyLoadContext("test");
using (myALC.EnterContextualReflection())
{
    Console.WriteLine(
        AssemblyLoadContext.CurrentContextualReflectionContext.Name);  // test
    Method2();
}
// ูพุณ ุงุฒ Disposeุ EnterContextualReflection ุฏฺฏุฑ ุงุซุฑ ูุฏุงุฑุฏ
Method3();

void Method1() => Assembly.Load("..."); // ุงุฒ ALC ูุฑุงุฎูุงููุฏู ุงุณุชูุงุฏู ูโฺฉูุฏ
void Method2() => Assembly.Load("..."); // ุงุฒ myALC ุงุณุชูุงุฏู ูโฺฉูุฏ
void Method3() => Assembly.Load("..."); // ุงุฒ ALC ูุฑุงุฎูุงููุฏู ุงุณุชูุงุฏู ูโฺฉูุฏ
```

---

ูุจูุงู ูุดุงู ุฏุงุฏู ฺฺฏููู ูโุชูุงู ฺฉ ูุชุฏ ูุดุงุจู Assembly.Load ููุดุช.
ูุณุฎูโุง ุฏููโุชุฑ ฺฉู **contextual reflection** ุฑุง ูู ุฏุฑ ูุธุฑ ูโฺฏุฑุฏุ ฺูู ุงุณุช:

```csharp
[MethodImpl(MethodImplOptions.NoInlining)]
Assembly Load(string name)
{
    var alc = AssemblyLoadContext.CurrentContextualReflectionContext
              ?? AssemblyLoadContext.GetLoadContext(Assembly.GetCallingAssembly());
    return alc.LoadFromAssemblyName(new AssemblyName(name));
}
```

ูุฑฺูุฏ contextual reflection ุจุฑุง ุงุฌุฑุง ฺฉุฏ legacy ููุฏ ุงุณุชุ **ุฑุงู ุญู ููุงููโุชุฑ** ููุงู ุงุณุช ฺฉู ูุจูุงู ฺฏูุชู: ฺฉุฏ ูุฑุงุฎูุงููุฏู ุฑุง ุชุบุฑ ุฏูุฏ ุชุง **LoadFromAssemblyName** ุฑู ALC ูุดุฎุตโุดุฏู ุชูุณุท caller ูุฑุงุฎูุงู ุดูุฏ.

> ุฏุฑ .NET Framework ูฺ ูุนุงุฏู ุจุฑุง EnterContextualReflection ูุฌูุฏ ูุฏุงุฑุฏ ู ูุงุฒ ูู ูุณุชุ ฺูู ุงุฒูููโุณุงุฒ ุงุณุงุณุงู ุจุง **application domain** ุงูุฌุงู ูโุดูุฏุ ฺฉู ูุฑ domain ุฎูุฏุด ฺฉ default load context ุฏุงุฑุฏ ู ุจูุงุจุฑุงู ุงุฒูููโุณุงุฒ ุญุช ุจุง ุงุณุชูุงุฏู ุงุฒ ALC ูพุดโูุฑุถ ูู ุงูฺฉุงูโูพุฐุฑ ุงุณุช.
>
### ๐น ุจุงุฑฺฏุฐุงุฑ ู ุญู ูุงุจุณุชฺฏ ฺฉุชุงุจุฎุงููโูุง unmanaged ๐๏ธ

ALCูุง ูโุชูุงููุฏ **ฺฉุชุงุจุฎุงููโูุง native** ุฑุง ูุฒ ุจุงุฑฺฏุฐุงุฑ ู ุญู ฺฉููุฏ.
ุญู ูุงุจุณุชฺฏ native ุฒูุงู ุงุชูุงู ูโุงูุชุฏ ฺฉู ุดูุง ูุชุฏ ุฎุงุฑุฌ ุฑุง ูุฑุงุฎูุงู ฺฉูุฏ ฺฉู ุจุง ุตูุช `[DllImport]` ูุดุฎุต ุดุฏู ุงุณุช:

```csharp
[DllImport("SomeNativeLibrary.dll")]
static extern int SomeNativeMethod(string text);
```

ฺูู ุฏุฑ `[DllImport]` ูุณุฑ ฺฉุงูู ูุดุฎุต ูุดุฏูุ ูุฑุงุฎูุงู `SomeNativeMethod` ุจุงุนุซ **trigger ุดุฏู ุญู ูุงุจุณุชฺฏ ุฏุฑ ููุงู ALC** ูโุดูุฏ ฺฉู ุงุณูุจู ุชุนุฑูโฺฉููุฏู `SomeNativeMethod` ุฏุฑ ุขู ูุฑุงุฑ ุฏุงุฑุฏ.

---

### ๐น ูุชุฏูุง ูุฑุชุจุท ุจุง ฺฉุชุงุจุฎุงููโูุง unmanaged

* ูุชุฏ **virtual resolving** ุฏุฑ ALC: `LoadUnmanagedDll`
* ูุชุฏ **ุจุงุฑฺฏุฐุงุฑ**: `LoadUnmanagedDllFromPath`

ูุซุงู:

```csharp
protected override IntPtr LoadUnmanagedDll(string unmanagedDllName)
{
    // ูุณุฑ ฺฉุงูู unmanagedDllName ุฑุง ูพุฏุง ฺฉูุฏ...
    string fullPath = ...;
    return LoadUnmanagedDllFromPath(fullPath); // ุจุงุฑฺฏุฐุงุฑ DLL
}
```

ุงฺฏุฑ ูุชูุงูุฏ ูุงู ุฑุง ูพุฏุง ฺฉูุฏุ ูโุชูุงูุฏ `IntPtr.Zero` ุจุฑฺฏุฑุฏุงูุฏ. ุฏุฑ ุงู ุตูุฑุช CLR ุฑูุฏุงุฏ `ResolvingUnmanagedDll` ุฑุง ุฏุฑ ALC ูุนุงู ูโฺฉูุฏ.

---

### ๐น ูฺฉุชู ุฌุงูุจ

ูุชุฏ `LoadUnmanagedDllFromPath` **protected** ุงุณุชุ ุจูุงุจุฑุงู ูุนูููุงู ููโุชูุงูุฏ ุงุฒ handler ุฑูุฏุงุฏ `ResolvingUnmanagedDll` ูุณุชููุงู ุขู ุฑุง ูุฑุงุฎูุงู ฺฉูุฏ.
ุจุง ุงู ุญุงูุ ูโุชูุงูุฏ ููุงู ูุชุฌู ุฑุง ุจุง **`NativeLibrary.Load`** ุงุณุชุงุชฺฉ ุจู ุฏุณุช ุขูุฑุฏ:

```csharp
someALC.ResolvingUnmanagedDll += (requestingAssembly, unmanagedDllName) =>
{
    return NativeLibrary.Load("(full path to unmanaged DLL)");
};
```

> ฺฉุชุงุจุฎุงููโูุง native ูุนูููุงู ุชูุณุท ALC ุญู ู ุจุงุฑฺฏุฐุงุฑ ูโุดููุฏุ ุงูุง ูุชุนูู ุจู ALC ูุณุชูุฏ.
> ูพุณ ุงุฒ ุจุงุฑฺฏุฐุงุฑุ ูุฑ ฺฉุชุงุจุฎุงูู native ูุณุชูู ุงุณุช ู ูุณุฆูู ุญู ูุงุจุณุชฺฏโูุง transitve ุฎูุฏ ุงุณุช.
> ููฺูู ฺฉุชุงุจุฎุงููโูุง native ุจุฑุง ฺฉู **process** ุฌูุงู ูุณุชูุฏุ ุจูุงุจุฑุงู ููโุชูุงู ุฏู ูุณุฎู ูุชูุงูุช ุจุง ููุงู ูุงู ูุงู ุฑุง ุจุงุฑฺฏุฐุงุฑ ฺฉุฑุฏ.

---

### ๐น AssemblyDependencyResolver ๐ฆ

ุฏุฑ ุจุฎุด **Default probing** ฺฏูุชู ฺฉู ALC ูพุดโูุฑุถ ุจุฑุง ุญู ูุงุจุณุชฺฏโูุง **platform-specific** ู **NuGet ุฒูุงู ุชูุณุนู**ุ ูุงูโูุง `.deps.json` ู `.runtimeconfig.json` ุฑุง ุจุฑุฑุณ ูโฺฉูุฏ.

ุงฺฏุฑ ุจุฎูุงูุฏ ฺฉ ุงุณูุจู ุฑุง ุฏุฑ **ALC ุณูุงุฑุด** ุจุง ูุงุจุณุชฺฏโูุง platform-specific ุง NuGet ุจุงุฑฺฏุฐุงุฑ ฺฉูุฏุ ุจุงุฏ ุงู ููุทู ุฑุง ุจุงุฒุชููุฏ ฺฉูุฏ.
ูโุชูุงูุณุชุฏ ุงู ฺฉุงุฑ ุฑุง ุจุง ูพุงุฑุณ ฺฉุฑุฏู ูุงูโูุง ุงูุฌุงู ุฏูุฏุ ุงูุง ูู ุณุฎุช ุงุณุช ู ูู ุงฺฏุฑ ููุงูู ุฏุฑ ูุณุฎู ุจุนุฏ .NET ุชุบุฑ ฺฉููุฏุ ฺฉุฏ ุดูุง ุฎุฑุงุจ ูโุดูุฏ.

**AssemblyDependencyResolver** ุงู ูุดฺฉู ุฑุง ุญู ูโฺฉูุฏ.
ุงุจุชุฏุง ุขู ุฑุง ุจุง ูุณุฑ ุงุณูุจู ููุฑุฏ ูุธุฑ ุจุฑุง ุจุฑุฑุณ ูุงุจุณุชฺฏโูุง ูููููโุณุงุฒ ูโฺฉูู:

```csharp
var resolver = new AssemblyDependencyResolver(@"c:\temp\foo.dll");
```

ุณูพุณ ุจุฑุง ูพุฏุง ฺฉุฑุฏู ูุณุฑ ฺฉ ูุงุจุณุชฺฏุ ูุชุฏ `ResolveAssemblyToPath` ุฑุง ูุฑุงุฎูุงู ูโฺฉูู:

```csharp
string path = resolver.ResolveAssemblyToPath(new AssemblyName("bar"));
```

ุงฺฏุฑ `.deps.json` ูุฌูุฏ ูุฏุงุดุชู ุจุงุดุฏ ุง ุดุงูู ุงุทูุงุนุงุช ุฏุฑุจุงุฑู `bar.dll` ูุจุงุดุฏุ ูุณุฑ ุจู ุตูุฑุช ูพุดโูุฑุถ ุจู `c:\temp\bar.dll` ุงุฑุฒุงุจ ูโุดูุฏ.

ููู ฺฉุงุฑ ุจุฑุง ูุงุจุณุชฺฏโูุง unmanaged ูุฒ ุจุง `ResolveUnmanagedDllToPath` ุงูฺฉุงูโูพุฐุฑ ุงุณุช.

---

### ๐น ูุซุงู ุนูู ุจุง NuGet

1. ฺฉ ูพุฑูฺู Console ุจู ูุงู `ClientApp` ุจุณุงุฒุฏ.
2. ฺฉ reference ุจู `Microsoft.Data.SqlClient` ุงุถุงูู ฺฉูุฏ.
3. ฺฉูุงุณ ุฒุฑ ุฑุง ุงุถุงูู ฺฉูุฏ:

```csharp
using Microsoft.Data.SqlClient;

namespace ClientApp
{
    public class Program
    {
        public static SqlConnection GetConnection() => new SqlConnection();
        static void Main() => GetConnection(); // ุชุณุช ฺฉู resolve ูโุดูุฏ
    }
}
```

ุงฺฏุฑ ุจุฑูุงูู ุฑุง ุจุณุงุฒุฏ ู ุฏุฑ ูพูุดู ุฎุฑูุฌ ูฺฏุงู ฺฉูุฏุ ูุงู `Microsoft.Data.SqlClient.dll` ูุฌูุฏ ุฏุงุฑุฏ.
ุงูุง ุงู ูุงู ููฺฏุงู ุงุฌุฑุง ุจุงุฑฺฏุฐุงุฑ ููโุดูุฏ ู ุชูุงุด ุจุฑุง ุจุงุฑฺฏุฐุงุฑ ุตุฑุญ ุขู ุจุงุนุซ Exception ูโุดูุฏ.
assembly ูุงูุน ุฏุฑ ุฒุฑูพูุดู `runtimes\win` (ุง `runtimes/unix`) ูุฑุงุฑ ุฏุงุฑุฏ ู **ALC ูพุดโูุฑุถ ุจุง parsing ูุงู `ClientApp.deps.json` ุขู ุฑุง ุจุงุฑฺฏุฐุงุฑ ูโฺฉูุฏ**.

---

ุงฺฏุฑ ุจุฎูุงูุฏ `ClientApp.dll` ุฑุง ุงุฒ ุจุฑูุงูู ุฏฺฏุฑ ุจุงุฑฺฏุฐุงุฑ ฺฉูุฏุ ูุงุฒ ุจู ฺฉ **ALC ุณูุงุฑุด** ุฏุงุฑุฏ ฺฉู ูุงุจุณุชฺฏ ุขู ุนู `Microsoft.Data.SqlClient.dll` ุฑุง ุญู ฺฉูุฏ.
ฺฉุงู ูุณุช ููุท ูพูุดู `ClientApp.dll` ุฑุง ุจุฑุฑุณ ฺฉูุฏุ ุจูฺฉู ุจุงุฏ **AssemblyDependencyResolver** ูุณุฑ ุฏูู ูุงู ุฑุง ุจุฑุง ูพูุชูุฑู ูุนู ูพุฏุง ฺฉูุฏ:

```csharp
string path = @"C:\source\ClientApp\bin\Debug\netcoreapp3.0\ClientApp.dll";
var resolver = new AssemblyDependencyResolver(path);
var sqlClient = new AssemblyName("Microsoft.Data.SqlClient");
Console.WriteLine(resolver.ResolveAssemblyToPath(sqlClient));
```

ุฎุฑูุฌ ุฏุฑ ููุฏูุฒ ูุนูููุงู ฺูู ุงุณุช:

```
C:\source\ClientApp\bin\Debug\netcoreapp3.0\runtimes\win\lib\netcoreapp2.1\Microsoft.Data.SqlClient.dll
```

> ฺฉ ูุซุงู ฺฉุงูู ุฏุฑ ุจุฎุด **Writing a Plug-In System** ุฏุฑ ุตูุญู 799 ุงุฑุงุฆู ุดุฏู ุงุณุช.
>
### ๐น ุฎุงุฑุฌ ฺฉุฑุฏู ALCูุง ุงุฒ ุญุงูุธู ู ุขุฒุงุฏุณุงุฒ ููุงุจุน ๐๏ธ

ุฏุฑ ููุงุฑุฏ ุณุงุฏูุ ูโุชูุงู ฺฉ **AssemblyLoadContext ุบุฑ ูพุดโูุฑุถ** ุฑุง ุงุฒ ุญุงูุธู ุฎุงุฑุฌ ฺฉุฑุฏ ุชุง ูู ุญุงูุธู ุขุฒุงุฏ ุดูุฏ ู ูู ููู ูุงูโูุง ุจุงุฑฺฏุฐุงุฑโุดุฏู ุฑูุน ุดูุฏ.
ุจุฑุง ุงู ฺฉุงุฑุ ููฺฏุงู ุงุฌุงุฏ ALC ุจุงุฏ **ูพุงุฑุงูุชุฑ `isCollectible` ุฑุง true** ูุฑุงุฑ ุฏูุฏ:

```csharp
var alc = new AssemblyLoadContext("test", isCollectible: true);
```

ุณูพุณ ูโุชูุงูุฏ ูุชุฏ `Unload` ุฑุง ูุฑุงุฎูุงู ฺฉูุฏ ุชุง ูุฑุขูุฏ unload ุขุบุงุฒ ุดูุฏ.

> ูุฏู unload ุจู ุตูุฑุช **ููฺฉุงุฑ (cooperative)** ุงุณุชุ ูู ุงุฌุจุงุฑ (preemptive).
> ุงฺฏุฑ ูุฑ ูุชุฏ ุฏุฑ ูุฑ ุงุณูุจู ALC ุฏุฑ ุญุงู ุงุฌุฑุง ุจุงุดุฏุ unload ุชุง ูพุงุงู ุงุฌุฑุง ุขู ูุชุฏูุง ุจู ุชุนูู ูโุงูุชุฏ.

ุจุงุฑฺฏุฐุงุฑ ูุงูุน ููฺฏุงู **garbage collection** ุงุชูุงู ูโุงูุชุฏ.
ุงฺฏุฑ ฺุฒ ุฎุงุฑุฌ ุงุฒ ALC ุจู ูุฑ ุดุก ุฏุงุฎู ALC (ุดุงูู objectูุงุ typeูุง ุง assemblyูุง) ุงุฑุฌุงุน ุบุฑ-weak ุฏุงุดุชู ุจุงุดุฏุ unload ุงูุฌุงู ููโุดูุฏ.

> ูฺฉุชู: ุจุฑุฎ APIูุง (ุญุช ุฏุฑ .NET BCL) ููฺฉู ุงุณุช objectูุง ุฑุง ุฏุฑ **ููุฏูุง static ุง ุฏฺฉุดูุฑโูุง cache** ฺฉููุฏ ุง ุจู eventูุง subscribe ุดููุฏ. ุงู ูโุชูุงูุฏ ููุงูุน ุจุฑุง unload ุงุฌุงุฏ ฺฉูุฏุ ูุฎุตูุตุงู ุงฺฏุฑ ฺฉุฏ ุฏุงุฎู ALC ุงุฒ APIูุง ุฎุงุฑุฌ ุงุฒ ALC ุจู ุตูุฑุช ูพฺุฏู ุงุณุชูุงุฏู ฺฉูุฏ.
> ุนูุช failure ุฏุฑ unload ูุนูููุงู ุณุฎุช ุงุณุช ู ูุงุฒ ุจู ุงุจุฒุงุฑูุง ูุซู WinDbg ุฏุงุฑุฏ.

---

### ๐น ูุชุฏูุง Legacy ุจุฑุง ุจุงุฑฺฏุฐุงุฑ ๐

ุงฺฏุฑ ูููุฒ ุงุฒ **.NET Framework** ุงุณุชูุงุฏู ูโฺฉูุฏ ุง ูุงุจุฑ ูโููุณุฏ ฺฉู ุจุงุฏ ุจุง .NET Framework ุณุงุฒฺฏุงุฑ ุจุงุดุฏุ ููโุชูุงูุฏ ุงุฒ **AssemblyLoadContext** ุงุณุชูุงุฏู ฺฉูุฏ.
ุจุงุฑฺฏุฐุงุฑ ุจุง ูุชุฏูุง ุฒุฑ ุงูุฌุงู ูโุดูุฏ:

```csharp
public static Assembly LoadFrom(string assemblyFile);
public static Assembly LoadFile(string path);
public static Assembly Load(byte[] rawAssembly);
```

* `LoadFile` ู `Load(byte[])` ุงุฒูููโุณุงุฒ ุงุฑุงุฆู ูโุฏููุฏ.
* `LoadFrom` ฺูู ุงุฒูููโุณุงุฒ ูุฏุงุฑุฏ.

ุญู ูุงุจุณุชฺฏโูุง ุจุง **ุฑูุฏุงุฏ AssemblyResolve** ุฏุฑ AppDomain ุงูุฌุงู ูโุดูุฏุ ูุดุงุจู ุฑูุฏุงุฏ `Resolving` ุฏุฑ ALC ูพุดโูุฑุถ.
ูุชุฏ `Assembly.Load(string)` ูุฒ ุจุฑุง trigger ฺฉุฑุฏู resolution ุฏุฑ ุฏุณุชุฑุณ ุงุณุช ู ูุดุงุจู ุนูู ูโฺฉูุฏ.

---

### ๐น LoadFrom

* ุงุณูุจู ุฑุง ุงุฒ ูุณุฑ ูุดุฎุต ุดุฏู ุฏุฑ **default ALC** ุจุงุฑฺฏุฐุงุฑ ูโฺฉูุฏ.
* ูุดุงุจู `AssemblyLoadContext.Default.LoadFromAssemblyPath` ุงุณุชุ ุจุง ุชูุงูุชโูุง ุฒุฑ:

1. ุงฺฏุฑ ุงุณูุจู ุจุง ููุงู **simple name** ูุจูุงู ูุฌูุฏ ุฏุงุดุชู ุจุงุดุฏุ `LoadFrom` ููุงู ุงุณูุจู ุฑุง ุจุฑูโฺฏุฑุฏุงูุฏ ู Exception ููโุฏูุฏ.
2. ุงฺฏุฑ ุงุณูุจู ูุฌูุฏ ูุฏุงุดุชู ุจุงุดุฏ ู ุจุงุฑฺฏุฐุงุฑ ุตูุฑุช ฺฏุฑุฏุ ุจู ุขู ูุถุนุช ูฺูโุง ุจู ูุงู **LoadFrom** ุฏุงุฏู ูโุดูุฏ.

   * ุงู ูุถุนุช ุฑู ููุทู resolution ALC ูพุดโูุฑุถ ุงุซุฑ ูโฺฏุฐุงุฑุฏ ู ุงฺฏุฑ ุงุณูุจู ูุงุจุณุชฺฏโูุง ุฏุฑ ููุงู ูพูุดู ุฏุงุดุชู ุจุงุดุฏุ ุขูโูุง ุจู ุตูุฑุช ุฎูุฏฺฉุงุฑ ุญู ูโุดููุฏ.

> ุฏุฑ .NET Frameworkุ ุงฺฏุฑ ุงุณูุจู ุฏุฑ **Global Assembly Cache (GAC)** ูุฌูุฏ ุฏุงุดุชู ุจุงุดุฏุ CLR ููุดู ุงุฒ ุขูุฌุง ุจุงุฑฺฏุฐุงุฑ ูโฺฉูุฏ. ุงู ูุงููู ุจุฑุง ูุฑ ุณู ุฑูุด ุจุงุฑฺฏุฐุงุฑ ุตุฏู ูโฺฉูุฏ.

ูุฒุช `LoadFrom` ุงู ุงุณุช ฺฉู ูุงุจุณุชฺฏโูุง transitve ุฏุฑ ููุงู ูพูุดู ุฑุง ุฎูุฏฺฉุงุฑ ุญู ูโฺฉูุฏุ ุงูุง ููฺฉู ุงุณุช assembly ูุงุฏุฑุณุช ุจุงุฑฺฏุฐุงุฑ ุดูุฏ.
ุจุฑุง ฺฉูุชุฑู ุจูุชุฑุ ุจูุชุฑ ุงุณุช ุงุฒ `Load(string)` ุง `LoadFile` ุงุณุชูุงุฏู ฺฉูุฏ ู ูุงุจุณุชฺฏโูุง ุฑุง ุจุง **AssemblyResolve** ุญู ฺฉูุฏ.

---

### ๐น LoadFile ู Load(byte\[])

* ุงู ูุชุฏูุง ุงุณูุจู ุฑุง ุงุฒ ูุณุฑ ูุงู ุง ุขุฑุงู ุจุงุช ุฏุฑ **ALC ุฌุฏุฏ** ุจุงุฑฺฏุฐุงุฑ ูโฺฉููุฏ.
* ุจุฑุฎูุงู `LoadFrom`ุ ุงุฒูููโุณุงุฒ ุงุฑุงุฆู ูโุฏููุฏ ู ูโุชูุงู ฺูุฏ ูุณุฎู ุงุฒ ููุงู ุงุณูุจู ุฑุง ุจุงุฑฺฏุฐุงุฑ ฺฉุฑุฏ.

> ุฏู ูฺฉุชู ููู:

1. ูุฑุงุฎูุงู ุฏูุจุงุฑู `LoadFile` ุจุง ููุงู ูุณุฑุ ููุงู ุงุณูุจู ูุจู ุฑุง ุจุฑูโฺฏุฑุฏุงูุฏ.
2. ุฏุฑ .NET Frameworkุ ูุฑ ุฏู ุงุจุชุฏุง GAC ุฑุง ุจุฑุฑุณ ูโฺฉููุฏ ู ุงฺฏุฑ ููุฌูุฏ ุจุงุดุฏุ ุงุฒ ุขูุฌุง ุจุงุฑฺฏุฐุงุฑ ูโฺฉููุฏ.

ุจุง `LoadFile` ุง `Load(byte[])`ุ ูุฑ ุงุณูุจู ฺฉ ALC ุฌุฏุงฺฏุงูู ุฏุงุฑุฏ. ุงู ุจุงุนุซ ุงุฒูููโุณุงุฒ ูโุดูุฏุ ุงูุง ูุฏุฑุช ุขู ฺฉู ูพฺุฏูโุชุฑ ุงุณุช.

ุจุฑุง ุญู ูุงุจุณุชฺฏโูุงุ ุฑูุฏุงุฏ **AppDomain.CurrentDomain.AssemblyResolve** ุฑุง ูุฏุฑุช ฺฉูุฏ:

```csharp
AppDomain.CurrentDomain.AssemblyResolve += (sender, args) =>
{
    string fullAssemblyName = args.Name;
    // ฺฉ Assembly ุจุงุฒฺฏุฑุฏุงูุฏ ุง null
    ...
};
```

> `args` ุดุงูู property ุง ุจู ูุงู `RequestingAssembly` ูุฒ ูุณุช ฺฉู ูุดุฎุต ูโฺฉูุฏ ฺฉุฏุงู ุงุณูุจู trigger ฺฉููุฏู resolution ุจูุฏู ุงุณุช.

ูพุณ ุงุฒ ุงูุชู ุงุณูุจูุ ูโุชูุงูุฏ ุจุง `Assembly.LoadFile` ุขู ุฑุง ุจุงุฑฺฏุฐุงุฑ ฺฉูุฏ.
ููฺูู ูโุชูุงูุฏ ุชูุงู assemblyูุง ุจุงุฑฺฏุฐุงุฑ ุดุฏู ุฏุฑ AppDomain ูุนู ุฑุง ุจุง `AppDomain.CurrentDomain.GetAssemblies()` ููุฑุณุช ฺฉูุฏ.
ุงู ุฑูุด ุฏุฑ .NET 5+ ูุฒ ฺฉุงุฑ ูโฺฉูุฏ ู ูุนุงุฏู ุงุณุช ุจุง:

```csharp
AssemblyLoadContext.All.SelectMany(a => a.Assemblies)
```

### ๐น ููุดุชู ฺฉ ุณุณุชู ูพูุงฺฏู ุจุง ALCูุง ูุงุจู ุฎุงุฑุฌโุณุงุฒ ๐งฉ

ุจุฑุง ูุดุงู ุฏุงุฏู ฺฉุงูู ููุงูู ฺฉู ุฏุฑ ุงู ุจุฎุด ุจุฑุฑุณ ฺฉุฑุฏูุ ุจุงุฏ ฺฉ **ุณุณุชู ูพูุงฺฏู** ุจุณุงุฒู ฺฉู ุงุฒ **ALCูุง ูุงุจู unload** ุงุณุชูุงุฏู ูโฺฉูุฏ ุชุง ูุฑ ูพูุงฺฏู ุจู ุตูุฑุช ุงุฒููู ุงุฌุฑุง ุดูุฏ.

ุณุณุชู ููููู ูุง ุดุงูู ุณู ูพุฑูฺู .NET ุฎูุงูุฏ ุจูุฏ:

| ูพุฑูฺู         | ููุน                | ุชูุถุญ                                                        |
| ------------- | ------------------ | ------------------------------------------------------------ |
| Plugin.Common | ฺฉุชุงุจุฎุงูู (Library) | ุชุนุฑู ฺฉ **interface** ฺฉู ูพูุงฺฏูโูุง ุขู ุฑุง ูพุงุฏูโุณุงุฒ ูโฺฉููุฏ |
| Capitalizer   | ฺฉุชุงุจุฎุงูู (Library) | ฺฉ ูพูุงฺฏู ฺฉู ูุชู ุฑุง **ุจู ุญุฑูู ุจุฒุฑฺฏ** ุชุจุฏู ูโฺฉูุฏ            |
| Plugin.Host   | ุงูพูฺฉุดู Console   | ูพุฏุง ฺฉุฑุฏู ู ุงุฌุฑุง ูพูุงฺฏูโูุง                                  |

ูุฑุถ ฺฉูุฏ ูพุฑูฺูโูุง ุฏุฑ ูุณุฑูุง ุฒุฑ ูุฑุงุฑ ุฏุงุฑูุฏ:

```
c:\source\PluginDemo\Plugin.Common
c:\source\PluginDemo\Capitalizer
c:\source\PluginDemo\Plugin.Host
```

ุชูุงู ูพุฑูฺูโูุง ุจู **Plugin.Common** ุงุฑุฌุงุน ูโุฏููุฏ ู ูฺ ุงุฑุฌุงุน ุจู ูพุฑูฺูโูุง ุฏฺฏุฑ ูุฌูุฏ ูุฏุงุฑุฏ.

---

### ๐น Plugin.Common

ุงฺฏุฑ **Plugin.Host** ุจู **Capitalizer** ุงุฑุฌุงุน ูโุฏุงุฏุ ุฏฺฏุฑ ฺฉ ุณุณุชู ูพูุงฺฏู ูุงูุน ูุจูุฏุ ุงุฏู ุงุตู ุงู ุงุณุช ฺฉู ูพูุงฺฏูโูุง ุชูุณุท **ุณููโุดุฎุตโูุง** ูพุณ ุงุฒ ุงูุชุดุงุฑ **Plugin.Host** ู **Plugin.Common** ููุดุชู ุดููุฏ.

> ุงฺฏุฑ ุงุฒ Visual Studio ุงุณุชูุงุฏู ูโฺฉูุฏุ ูโุชูุงูุฏ ุชูุงู ุณู ูพุฑูฺู ุฑุง ุฏุฑ ฺฉ **solution** ูุฑุงุฑ ุฏูุฏ ุชุง ูุฏุฑุช ุณุงุฎุช ุฑุงุญุชโุชุฑ ุดูุฏ.
> ุณูพุณ ุฑู ูพุฑูฺู Plugin.Host ุฑุงุณุชโฺฉูฺฉ ฺฉูุฏุ ูุณุฑ **Build Dependencies > Project Dependencies** ุฑุง ุงูุชุฎุงุจ ฺฉูุฏ ู ูพุฑูฺู Capitalizer ุฑุง ุชฺฉ ุจุฒูุฏ. ุงู ุจุงุนุซ ูโุดูุฏ Capitalizer ููฺฏุงู ุณุงุฎุช Plugin.Host ุณุงุฎุชู ุดูุฏุ ุจุฏูู ูุงุฒ ุจู ุงูุฒูุฏู ุงุฑุฌุงุน.

ุฏุฑ **Plugin.Common**ุ ูพูุงฺฏูโูุง ฺฉ ูุธูู ุจุณุงุฑ ุณุงุฏู ุฏุงุฑูุฏ: **ุชุบุฑ ฺฉ ุฑุดุชู ูุชู**.
ุงู interface ุจู ุดฺฉู ุฒุฑ ุชุนุฑู ูโุดูุฏ:

```csharp
namespace Plugin.Common
{
    public interface ITextPlugin
    {
        string TransformText(string input);
    }
}
```

ููู ฺฉุงู ุงุณุช ุจุฑุง Plugin.Common.

---

### ๐น Capitalizer (ูพูุงฺฏู)

ูพูุงฺฏู **Capitalizer** ุจู **Plugin.Common** ุงุฑุฌุงุน ูโุฏูุฏ ู ฺฉ ฺฉูุงุณ ุฏุงุฑุฏ.
ุจุฑุง ุณุงุฏู ูฺฏู ุฏุงุดุชูุ ูฺ ูุงุจุณุชฺฏ ุงุถุงู ูุฏุงุฑุฏ:

```csharp
public class CapitalizerPlugin : Plugin.Common.ITextPlugin
{
    public string TransformText(string input) => input.ToUpper();
}
```

ุงฺฏุฑ ูุฑ ุฏู ูพุฑูฺู ุฑุง ุจุณุงุฒุฏ ู ุจู ูพูุดู ุฎุฑูุฌ **Capitalizer** ูฺฏุงู ฺฉูุฏุ ุฏู ุงุณูุจู ุฒุฑ ุฑุง ุฎูุงูุฏ ุฏุฏ:

```
Capitalizer.dll      // ุงุณูุจู ูพูุงฺฏู ูุง
Plugin.Common.dll    // ุงุณูุจู ุงุฑุฌุงุน ุฏุงุฏู ุดุฏู
```

### ๐น Plugin.Host ๐ฅ๏ธ

**Plugin.Host** ฺฉ ุงูพูฺฉุดู Console ุงุณุช ฺฉู ุดุงูู ุฏู ฺฉูุงุณ ุงุณุช.
ฺฉูุงุณ ุงูู ฺฉ **ALC ุณูุงุฑุด** ุจุฑุง ุจุงุฑฺฏุฐุงุฑ ูพูุงฺฏูโูุง ุงุณุช:

```csharp
class PluginLoadContext : AssemblyLoadContext
{
    AssemblyDependencyResolver _resolver;

    public PluginLoadContext(string pluginPath, bool collectible)
        // ูุงู ุฏูุณุชุงูู ุจุฑุง ฺฉูฺฉ ุจู ุฏุจุงฺฏ:
        : base(name: Path.GetFileName(pluginPath), collectible)
    {
        // ุงุฌุงุฏ ฺฉ resolver ุจุฑุง ูพุฏุง ฺฉุฑุฏู ูุงุจุณุชฺฏโูุง
        _resolver = new AssemblyDependencyResolver(pluginPath);
    }

    protected override Assembly Load(AssemblyName assemblyName)
    {
        // ุจุฑุฑุณ ุงุณูุจู ูุดุชุฑฺฉ
        if (assemblyName.Name == typeof(ITextPlugin).Assembly.GetName().Name)
            return null;

        string target = _resolver.ResolveAssemblyToPath(assemblyName);
        if (target != null)
            return LoadFromAssemblyPath(target);

        // ููฺฉู ุงุณุช ฺฉ ุงุณูุจู BCL ุจุงุดุฏ. ุงุฌุงุฒู ุจุฏูุฏ Default ALC ุขู ุฑุง ุญู ฺฉูุฏ
        return null;
    }

    protected override IntPtr LoadUnmanagedDll(string unmanagedDllName)
    {
        string path = _resolver.ResolveUnmanagedDllToPath(unmanagedDllName);
        return path == null
            ? IntPtr.Zero
            : LoadUnmanagedDllFromPath(path);
    }
}
```

ุฏุฑ **constructor**ุ ูุณุฑ ุงุตู ุงุณูุจู ูพูุงฺฏู ู ฺฉ flag ุจุฑุง ุชุนู ุงูฺฉู ALC ูุงุจู unload ุจุงุดุฏ ุง ุฎุฑุ ุฏุฑุงูุช ูโุดูุฏ.

* ูุชุฏ **Load** ุฌุง ุงุณุช ฺฉู ูุงุจุณุชฺฏโูุง ูุฏุฑุช ูโุดููุฏ.
* ุชูุงู ูพูุงฺฏูโูุง ุจุงุฏ ุจู **Plugin.Common** ุงุฑุฌุงุน ุฏููุฏ ุชุง ุจุชูุงููุฏ **ITextPlugin** ุฑุง ูพุงุฏูโุณุงุฒ ฺฉููุฏ.
* ุจูุงุจุฑุงูุ Load ููฺฉู ุงุณุช ุจุฑุง ุญู Plugin.Common ูุฑุงุฎูุงู ุดูุฏ.
* ุงฺฏุฑ ูุณุฎูโุง ุงุฒ Plugin.Common.dll ุฏุฑ ูพูุดู ุฎุฑูุฌ ูพูุงฺฏู ุจุงุดุฏ ู ูุง ุขู ุฑุง ุจุงุฑฺฏุฐุงุฑ ฺฉููุ ุฏู ูุณุฎู ุงุฒ ููุงู ุงุณูุจู ูุฌูุฏ ุฎูุงูุฏ ุฏุงุดุช: ฺฉ ุฏุฑ Default ALC ูุฒุจุงู ู ุฏฺฏุฑ ุฏุฑ PluginLoadContext ูพูุงฺฏู. ุงู ุจุงุนุซ ูุงุณุงุฒฺฏุงุฑ ู ุฎุทุง ูโุดูุฏ.

ุจุฑุง ุญู ุงู ูุดฺฉูุ ุจุฑุฑุณ ูโฺฉูู:

```csharp
if (assemblyName.Name == typeof(ITextPlugin).Assembly.GetName().Name)
    return null;
```

> ุจุงุฒฺฏุฑุฏุงูุฏู **null** ุจุงุนุซ ูโุดูุฏ Default ALC ูุฒุจุงูุ ุงุณูุจู ุฑุง ุญู ฺฉูุฏ.
> ูโุชูุงูุณุชู typeof(ITextPlugin).Assembly ุฑุง ูู ุจุฑฺฏุฑุฏุงูู ู ูุชุฌู ุฏุฑุณุช ุจูุฏ. ฺูู PluginLoadContext ุฏุฑ **Plugin.Host** ุชุนุฑู ุดุฏูุ ูุฑ ููุน ฺฉู ูุณุชููุงู ุงุฒ ุงู ฺฉูุงุณ ุงุฑุฌุงุน ุดูุฏุ ุฏุฑ Default ALC ูุฒุจุงู ุญู ูโุดูุฏ.

ุณูพุณ ุงุฒ **AssemblyDependencyResolver** ุจุฑุง ูพุฏุง ฺฉุฑุฏู ูุฑ ูุงุจุณุชฺฏ ุฎุตูุต ูพูุงฺฏู ุงุณุชูุงุฏู ูโฺฉูู.
ููฺูู **LoadUnmanagedDll** override ุดุฏู ุชุง ุงฺฏุฑ ูพูุงฺฏู ูุงุจุณุชฺฏ unmanaged ุฏุงุดุชู ุจุงุดุฏุ ุฏุฑุณุช ุจุงุฑฺฏุฐุงุฑ ุดูุฏ.

---

### ๐น ฺฉูุงุณ Program

ุจุฑุง ุณุงุฏฺฏุ ูุณุฑ ูพูุงฺฏู Capitalizer ุจู ุตูุฑุช hardcode ุดุฏู ุงุณุช (ุฏุฑ ุนููุ ูุณุฑูุง ุฑุง ูโุชูุงู ุจุง ุฌุณุชุฌู DLLูุง ุง ุฎูุงูุฏู ูุงู ฺฉุงููฺฏ ูพุฏุง ฺฉุฑุฏ):

```csharp
class Program
{
    const bool UseCollectibleContexts = true;

    static void Main()
    {
        const string capitalizer = @"C:\source\PluginDemo\Capitalizer\bin\Debug\netcoreapp3.0\Capitalizer.dll";
        Console.WriteLine(TransformText("big apple", capitalizer));
    }

    static string TransformText(string text, string pluginPath)
    {
        var alc = new PluginLoadContext(pluginPath, UseCollectibleContexts);
        try
        {
            Assembly assem = alc.LoadFromAssemblyPath(pluginPath);

            // ูพุฏุง ฺฉุฑุฏู ููุน ฺฉู ITextPlugin ุฑุง ูพุงุฏูโุณุงุฒ ูโฺฉูุฏ
            Type pluginType = assem.ExportedTypes.Single(
                t => typeof(ITextPlugin).IsAssignableFrom(t));

            // ุงุฌุงุฏ ูููููโุง ุงุฒ ูพูุงฺฏู
            var plugin = (ITextPlugin)Activator.CreateInstance(pluginType);

            // ูุฑุงุฎูุงู ูุชุฏ TransformText
            return plugin.TransformText(text);
        }
        finally
        {
            if (UseCollectibleContexts) alc.Unload(); // unload ฺฉุฑุฏู ALC
        }
    }
}
```

* ุงุจุชุฏุง ฺฉ **ALC ุฌุฏุฏ** ุจุฑุง ูพูุงฺฏู ุณุงุฎุชู ูโุดูุฏ.
* ุณูพุณ ุงุณูุจู ูพูุงฺฏู ุจุงุฑฺฏุฐุงุฑ ูโุดูุฏ.
* ุจุง **Reflection** ููุน ฺฉู ITextPlugin ุฑุง ูพุงุฏูโุณุงุฒ ูโฺฉูุฏ ูพุฏุง ูโฺฉูู.
* ูพูุงฺฏู ุฑุง ูููููโุณุงุฒ ฺฉุฑุฏูุ ูุชุฏ **TransformText** ุฑุง ูุฑุงุฎูุงู ูโฺฉูู ู ALC ุฑุง unload ูโฺฉูู.

> ุงฺฏุฑ ูุงุฒ ุจู ูุฑุงุฎูุงู ูฺฉุฑุฑ TransformText ุฏุงุดุชุฏุ ุจูุชุฑ ุงุณุช **ALC ุฑุง ฺฉุด ฺฉูุฏ** ู ุจุนุฏ ุงุฒ ูุฑ ูุฑุงุฎูุงู unload ูฺฉูุฏ.

ุฎุฑูุฌ:

```
BIG APPLE
```

---

### ๐น ุงูุฒูุฏู ูุงุจุณุชฺฏโูุง

ฺฉุฏ ูุง ุงฺฉููู ูุงุจูุช ุญู ู ุงุฒูููโุณุงุฒ ูุงุจุณุชฺฏโูุง ุฑุง ุฏุงุฑุฏ.
ุจุฑุง ูุซุงูุ ุงุจุชุฏุง ฺฉ **NuGet reference** ุจู **Humanizer.Core** ูุณุฎู 2.6.2 ุงุถุงูู ฺฉูุฏ:

```xml
<ItemGroup>
    <PackageReference Include="Humanizer.Core" Version="2.6.2" />
</ItemGroup>
```

ุณูพุณ ฺฉูุงุณ **CapitalizerPlugin** ุฑุง ุจู ุดฺฉู ุฒุฑ ุชุบุฑ ุฏูุฏ:

```csharp
using Humanizer;
namespace Capitalizer
{
    public class CapitalizerPlugin : Plugin.Common.ITextPlugin
    {
        public string TransformText(string input) => input.Pascalize();
    }
}
```

ุฎุฑูุฌ ุจุฑูุงูู ุงฺฉููู:

```
BigApple
```

---

### ๐น ูพูุงฺฏู ุฌุฏุฏ: Pluralizer

ฺฉ ูพุฑูฺู ฺฉุชุงุจุฎุงูู ุฌุฏุฏ ุงุฌุงุฏ ฺฉูุฏ ู NuGet reference ุจู **Humanizer.Core** ูุณุฎู 2.7.9 ุงุถุงูู ฺฉูุฏ:

```xml
<ItemGroup>
    <PackageReference Include="Humanizer.Core" Version="2.7.9" />
</ItemGroup>
```

ฺฉูุงุณ **PluralizerPlugin** ุฑุง ุงุถุงูู ฺฉูุฏ ฺฉู ูุดุงุจู Capitalizer ุงุณุชุ ุงูุง ูุชุฏ **Pluralize** ุฑุง ูุฑุงุฎูุงู ูโฺฉูุฏ:

```csharp
using Humanizer;
namespace Pluralizer
{
    public class PluralizerPlugin : Plugin.Common.ITextPlugin
    {
        public string TransformText(string input) => input.Pluralize();
    }
}
```

---

### ๐น ูุฑุงุฎูุงู ูพูุงฺฏู Pluralizer ุฏุฑ Main

```csharp
static void Main()
{
    const string capitalizer = @"C:\source\PluginDemo\Capitalizer\bin\Debug\netcoreapp3.0\Capitalizer.dll";
    Console.WriteLine(TransformText("big apple", capitalizer));

    const string pluralizer = @"C:\source\PluginDemo\Pluralizer\bin\Debug\netcoreapp3.0\Pluralizer.dll";
    Console.WriteLine(TransformText("big apple", pluralizer));
}
```

ุฎุฑูุฌ:

```
BigApple
big apples
```

---

### ๐น ูุดุงูุฏู ALCูุง ู ุงุณูุจูโูุง

ุงฺฏุฑ **UseCollectibleContexts** ุฑุง **false** ฺฉูุฏ ู ฺฉุฏ ุฒุฑ ุฑุง ุจู Main ุงุถุงูู ฺฉูุฏ:

```csharp
foreach (var context in AssemblyLoadContext.All)
{
    Console.WriteLine($"Context: {context.GetType().Name} {context.Name}");
    foreach (var assembly in context.Assemblies)
        Console.WriteLine($"  Assembly: {assembly.FullName}");
}
```

* ุฏู ูุณุฎู ูุฎุชูู ุงุฒ **Humanizer** ุฑุง ูุดุงูุฏู ุฎูุงูุฏ ฺฉุฑุฏุ ูุฑ ฺฉุฏุงู ุฏุฑ **ALC ุฌุฏุงฺฏุงูู**:

```
Context: PluginLoadContext Capitalizer.dll
  Assembly: Capitalizer, Version=1.0.0.0, ...
  Assembly: Humanizer, Version=2.6.0.0, ...
Context: PluginLoadContext Pluralizer.dll
  Assembly: Pluralizer, Version=1.0.0.0, ...
  Assembly: Humanizer, Version=2.7.0.0, ...
Context: DefaultAssemblyLoadContext Default
  Assembly: System.Private.CoreLib, ...
  Assembly: Host, Version=1.0.0.0, ...
```

ุญุช ุงฺฏุฑ ูุฑ ุฏู ูพูุงฺฏู ูุณุฎู ฺฉุณุงู Humanizer ุฑุง ุงุณุชูุงุฏู ฺฉููุฏุ **ุงุฒูููโุณุงุฒ ALCูุง** ูุฒุช ุฏุงุฑุฏุ ุฒุฑุง **ูุชุบุฑูุง static ูุฑ ูพูุงฺฏู ุฌุฏุง ุฎูุงููุฏ ุจูุฏ**.
